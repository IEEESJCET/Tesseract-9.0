function F2(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in t)){const d=Object.getOwnPropertyDescriptor(o,c);d&&Object.defineProperty(t,c,d.get?d:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xf={exports:{}},pl={},yf={exports:{}},yt={};var Tm;function U2(){if(Tm)return yt;Tm=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.iterator;function R(te){return te===null||typeof te!="object"?null:(te=N&&te[N]||te["@@iterator"],typeof te=="function"?te:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,I={};function M(te,ue,je){this.props=te,this.context=ue,this.refs=I,this.updater=je||T}M.prototype.isReactComponent={},M.prototype.setState=function(te,ue){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,ue,"setState")},M.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function z(){}z.prototype=M.prototype;function U(te,ue,je){this.props=te,this.context=ue,this.refs=I,this.updater=je||T}var B=U.prototype=new z;B.constructor=U,D(B,M.prototype),B.isPureReactComponent=!0;var V=Array.isArray,re=Object.prototype.hasOwnProperty,G={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function se(te,ue,je){var Ie,we={},ce=null,Ee=null;if(ue!=null)for(Ie in ue.ref!==void 0&&(Ee=ue.ref),ue.key!==void 0&&(ce=""+ue.key),ue)re.call(ue,Ie)&&!H.hasOwnProperty(Ie)&&(we[Ie]=ue[Ie]);var Te=arguments.length-2;if(Te===1)we.children=je;else if(1<Te){for(var Ye=Array(Te),ht=0;ht<Te;ht++)Ye[ht]=arguments[ht+2];we.children=Ye}if(te&&te.defaultProps)for(Ie in Te=te.defaultProps,Te)we[Ie]===void 0&&(we[Ie]=Te[Ie]);return{$$typeof:t,type:te,key:ce,ref:Ee,props:we,_owner:G.current}}function $(te,ue){return{$$typeof:t,type:te.type,key:ue,ref:te.ref,props:te.props,_owner:te._owner}}function be(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function X(te){var ue={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(je){return ue[je]})}var Y=/\/+/g;function fe(te,ue){return typeof te=="object"&&te!==null&&te.key!=null?X(""+te.key):ue.toString(36)}function oe(te,ue,je,Ie,we){var ce=typeof te;(ce==="undefined"||ce==="boolean")&&(te=null);var Ee=!1;if(te===null)Ee=!0;else switch(ce){case"string":case"number":Ee=!0;break;case"object":switch(te.$$typeof){case t:case e:Ee=!0}}if(Ee)return Ee=te,we=we(Ee),te=Ie===""?"."+fe(Ee,0):Ie,V(we)?(je="",te!=null&&(je=te.replace(Y,"$&/")+"/"),oe(we,ue,je,"",function(ht){return ht})):we!=null&&(be(we)&&(we=$(we,je+(!we.key||Ee&&Ee.key===we.key?"":(""+we.key).replace(Y,"$&/")+"/")+te)),ue.push(we)),1;if(Ee=0,Ie=Ie===""?".":Ie+":",V(te))for(var Te=0;Te<te.length;Te++){ce=te[Te];var Ye=Ie+fe(ce,Te);Ee+=oe(ce,ue,je,Ye,we)}else if(Ye=R(te),typeof Ye=="function")for(te=Ye.call(te),Te=0;!(ce=te.next()).done;)ce=ce.value,Ye=Ie+fe(ce,Te++),Ee+=oe(ce,ue,je,Ye,we);else if(ce==="object")throw ue=String(te),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return Ee}function ee(te,ue,je){if(te==null)return te;var Ie=[],we=0;return oe(te,Ie,"","",function(ce){return ue.call(je,ce,we++)}),Ie}function _e(te){if(te._status===-1){var ue=te._result;ue=ue(),ue.then(function(je){(te._status===0||te._status===-1)&&(te._status=1,te._result=je)},function(je){(te._status===0||te._status===-1)&&(te._status=2,te._result=je)}),te._status===-1&&(te._status=0,te._result=ue)}if(te._status===1)return te._result.default;throw te._result}var he={current:null},me={transition:null},ge={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:me,ReactCurrentOwner:G};function ve(){throw Error("act(...) is not supported in production builds of React.")}return yt.Children={map:ee,forEach:function(te,ue,je){ee(te,function(){ue.apply(this,arguments)},je)},count:function(te){var ue=0;return ee(te,function(){ue++}),ue},toArray:function(te){return ee(te,function(ue){return ue})||[]},only:function(te){if(!be(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},yt.Component=M,yt.Fragment=n,yt.Profiler=c,yt.PureComponent=U,yt.StrictMode=o,yt.Suspense=v,yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,yt.act=ve,yt.cloneElement=function(te,ue,je){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Ie=D({},te.props),we=te.key,ce=te.ref,Ee=te._owner;if(ue!=null){if(ue.ref!==void 0&&(ce=ue.ref,Ee=G.current),ue.key!==void 0&&(we=""+ue.key),te.type&&te.type.defaultProps)var Te=te.type.defaultProps;for(Ye in ue)re.call(ue,Ye)&&!H.hasOwnProperty(Ye)&&(Ie[Ye]=ue[Ye]===void 0&&Te!==void 0?Te[Ye]:ue[Ye])}var Ye=arguments.length-2;if(Ye===1)Ie.children=je;else if(1<Ye){Te=Array(Ye);for(var ht=0;ht<Ye;ht++)Te[ht]=arguments[ht+2];Ie.children=Te}return{$$typeof:t,type:te.type,key:we,ref:ce,props:Ie,_owner:Ee}},yt.createContext=function(te){return te={$$typeof:g,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:d,_context:te},te.Consumer=te},yt.createElement=se,yt.createFactory=function(te){var ue=se.bind(null,te);return ue.type=te,ue},yt.createRef=function(){return{current:null}},yt.forwardRef=function(te){return{$$typeof:y,render:te}},yt.isValidElement=be,yt.lazy=function(te){return{$$typeof:S,_payload:{_status:-1,_result:te},_init:_e}},yt.memo=function(te,ue){return{$$typeof:b,type:te,compare:ue===void 0?null:ue}},yt.startTransition=function(te){var ue=me.transition;me.transition={};try{te()}finally{me.transition=ue}},yt.unstable_act=ve,yt.useCallback=function(te,ue){return he.current.useCallback(te,ue)},yt.useContext=function(te){return he.current.useContext(te)},yt.useDebugValue=function(){},yt.useDeferredValue=function(te){return he.current.useDeferredValue(te)},yt.useEffect=function(te,ue){return he.current.useEffect(te,ue)},yt.useId=function(){return he.current.useId()},yt.useImperativeHandle=function(te,ue,je){return he.current.useImperativeHandle(te,ue,je)},yt.useInsertionEffect=function(te,ue){return he.current.useInsertionEffect(te,ue)},yt.useLayoutEffect=function(te,ue){return he.current.useLayoutEffect(te,ue)},yt.useMemo=function(te,ue){return he.current.useMemo(te,ue)},yt.useReducer=function(te,ue,je){return he.current.useReducer(te,ue,je)},yt.useRef=function(te){return he.current.useRef(te)},yt.useState=function(te){return he.current.useState(te)},yt.useSyncExternalStore=function(te,ue,je){return he.current.useSyncExternalStore(te,ue,je)},yt.useTransition=function(){return he.current.useTransition()},yt.version="18.3.1",yt}var km;function Yh(){return km||(km=1,yf.exports=U2()),yf.exports}var Im;function z2(){if(Im)return pl;Im=1;var t=Yh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function g(y,v,b){var S,N={},R=null,T=null;b!==void 0&&(R=""+b),v.key!==void 0&&(R=""+v.key),v.ref!==void 0&&(T=v.ref);for(S in v)o.call(v,S)&&!d.hasOwnProperty(S)&&(N[S]=v[S]);if(y&&y.defaultProps)for(S in v=y.defaultProps,v)N[S]===void 0&&(N[S]=v[S]);return{$$typeof:e,type:y,key:R,ref:T,props:N,_owner:c.current}}return pl.Fragment=n,pl.jsx=g,pl.jsxs=g,pl}var Rm;function V2(){return Rm||(Rm=1,xf.exports=z2()),xf.exports}var h=V2(),Yc={},wf={exports:{}},xn={},vf={exports:{}},bf={};var Om;function H2(){return Om||(Om=1,(function(t){function e(me,ge){var ve=me.length;me.push(ge);e:for(;0<ve;){var te=ve-1>>>1,ue=me[te];if(0<c(ue,ge))me[te]=ge,me[ve]=ue,ve=te;else break e}}function n(me){return me.length===0?null:me[0]}function o(me){if(me.length===0)return null;var ge=me[0],ve=me.pop();if(ve!==ge){me[0]=ve;e:for(var te=0,ue=me.length,je=ue>>>1;te<je;){var Ie=2*(te+1)-1,we=me[Ie],ce=Ie+1,Ee=me[ce];if(0>c(we,ve))ce<ue&&0>c(Ee,we)?(me[te]=Ee,me[ce]=ve,te=ce):(me[te]=we,me[Ie]=ve,te=Ie);else if(ce<ue&&0>c(Ee,ve))me[te]=Ee,me[ce]=ve,te=ce;else break e}}return ge}function c(me,ge){var ve=me.sortIndex-ge.sortIndex;return ve!==0?ve:me.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var g=Date,y=g.now();t.unstable_now=function(){return g.now()-y}}var v=[],b=[],S=1,N=null,R=3,T=!1,D=!1,I=!1,M=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(me){for(var ge=n(b);ge!==null;){if(ge.callback===null)o(b);else if(ge.startTime<=me)o(b),ge.sortIndex=ge.expirationTime,e(v,ge);else break;ge=n(b)}}function V(me){if(I=!1,B(me),!D)if(n(v)!==null)D=!0,_e(re);else{var ge=n(b);ge!==null&&he(V,ge.startTime-me)}}function re(me,ge){D=!1,I&&(I=!1,z(se),se=-1),T=!0;var ve=R;try{for(B(ge),N=n(v);N!==null&&(!(N.expirationTime>ge)||me&&!X());){var te=N.callback;if(typeof te=="function"){N.callback=null,R=N.priorityLevel;var ue=te(N.expirationTime<=ge);ge=t.unstable_now(),typeof ue=="function"?N.callback=ue:N===n(v)&&o(v),B(ge)}else o(v);N=n(v)}if(N!==null)var je=!0;else{var Ie=n(b);Ie!==null&&he(V,Ie.startTime-ge),je=!1}return je}finally{N=null,R=ve,T=!1}}var G=!1,H=null,se=-1,$=5,be=-1;function X(){return!(t.unstable_now()-be<$)}function Y(){if(H!==null){var me=t.unstable_now();be=me;var ge=!0;try{ge=H(!0,me)}finally{ge?fe():(G=!1,H=null)}}else G=!1}var fe;if(typeof U=="function")fe=function(){U(Y)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ee=oe.port2;oe.port1.onmessage=Y,fe=function(){ee.postMessage(null)}}else fe=function(){M(Y,0)};function _e(me){H=me,G||(G=!0,fe())}function he(me,ge){se=M(function(){me(t.unstable_now())},ge)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(me){me.callback=null},t.unstable_continueExecution=function(){D||T||(D=!0,_e(re))},t.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<me?Math.floor(1e3/me):5},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return n(v)},t.unstable_next=function(me){switch(R){case 1:case 2:case 3:var ge=3;break;default:ge=R}var ve=R;R=ge;try{return me()}finally{R=ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(me,ge){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var ve=R;R=me;try{return ge()}finally{R=ve}},t.unstable_scheduleCallback=function(me,ge,ve){var te=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?te+ve:te):ve=te,me){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ve+ue,me={id:S++,callback:ge,priorityLevel:me,startTime:ve,expirationTime:ue,sortIndex:-1},ve>te?(me.sortIndex=ve,e(b,me),n(v)===null&&me===n(b)&&(I?(z(se),se=-1):I=!0,he(V,ve-te))):(me.sortIndex=ue,e(v,me),D||T||(D=!0,_e(re))),me},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(me){var ge=R;return function(){var ve=R;R=ge;try{return me.apply(this,arguments)}finally{R=ve}}}})(bf)),bf}var jm;function W2(){return jm||(jm=1,vf.exports=H2()),vf.exports}var Pm;function G2(){if(Pm)return xn;Pm=1;var t=Yh(),e=W2();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function d(s,l){g(s,l),g(s+"Capture",l)}function g(s,l){for(c[s]=l,s=0;s<l.length;s++)o.add(l[s])}var y=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},N={};function R(s){return v.call(N,s)?!0:v.call(S,s)?!1:b.test(s)?N[s]=!0:(S[s]=!0,!1)}function T(s,l,p,w){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return w?!1:p!==null?!p.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,l,p,w){if(l===null||typeof l>"u"||T(s,l,p,w))return!0;if(w)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function I(s,l,p,w,_,A,L){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=w,this.attributeNamespace=_,this.mustUseProperty=p,this.propertyName=s,this.type=l,this.sanitizeURL=A,this.removeEmptyString=L}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){M[s]=new I(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];M[l]=new I(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){M[s]=new I(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){M[s]=new I(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){M[s]=new I(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){M[s]=new I(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){M[s]=new I(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){M[s]=new I(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){M[s]=new I(s,5,!1,s.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function U(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(z,U);M[l]=new I(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(z,U);M[l]=new I(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(z,U);M[l]=new I(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){M[s]=new I(s,1,!1,s.toLowerCase(),null,!1,!1)}),M.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){M[s]=new I(s,1,!1,s.toLowerCase(),null,!0,!0)});function B(s,l,p,w){var _=M.hasOwnProperty(l)?M[l]:null;(_!==null?_.type!==0:w||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(D(l,p,_,w)&&(p=null),w||_===null?R(l)&&(p===null?s.removeAttribute(l):s.setAttribute(l,""+p)):_.mustUseProperty?s[_.propertyName]=p===null?_.type===3?!1:"":p:(l=_.attributeName,w=_.attributeNamespace,p===null?s.removeAttribute(l):(_=_.type,p=_===3||_===4&&p===!0?"":""+p,w?s.setAttributeNS(w,l,p):s.setAttribute(l,p))))}var V=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),G=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),be=Symbol.for("react.provider"),X=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),_e=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),me=Symbol.iterator;function ge(s){return s===null||typeof s!="object"?null:(s=me&&s[me]||s["@@iterator"],typeof s=="function"?s:null)}var ve=Object.assign,te;function ue(s){if(te===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);te=l&&l[1]||""}return`
`+te+s}var je=!1;function Ie(s,l){if(!s||je)return"";je=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ye){var w=ye}Reflect.construct(s,[],l)}else{try{l.call()}catch(ye){w=ye}s.call(l.prototype)}else{try{throw Error()}catch(ye){w=ye}s()}}catch(ye){if(ye&&w&&typeof ye.stack=="string"){for(var _=ye.stack.split(`
`),A=w.stack.split(`
`),L=_.length-1,K=A.length-1;1<=L&&0<=K&&_[L]!==A[K];)K--;for(;1<=L&&0<=K;L--,K--)if(_[L]!==A[K]){if(L!==1||K!==1)do if(L--,K--,0>K||_[L]!==A[K]){var Q=`
`+_[L].replace(" at new "," at ");return s.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",s.displayName)),Q}while(1<=L&&0<=K);break}}}finally{je=!1,Error.prepareStackTrace=p}return(s=s?s.displayName||s.name:"")?ue(s):""}function we(s){switch(s.tag){case 5:return ue(s.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return s=Ie(s.type,!1),s;case 11:return s=Ie(s.type.render,!1),s;case 1:return s=Ie(s.type,!0),s;default:return""}}function ce(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case H:return"Fragment";case G:return"Portal";case $:return"Profiler";case se:return"StrictMode";case fe:return"Suspense";case oe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case X:return(s.displayName||"Context")+".Consumer";case be:return(s._context.displayName||"Context")+".Provider";case Y:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ee:return l=s.displayName||null,l!==null?l:ce(s.type)||"Memo";case _e:l=s._payload,s=s._init;try{return ce(s(l))}catch{}}return null}function Ee(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(l);case 8:return l===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Te(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ye(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ht(s){var l=Ye(s)?"checked":"value",p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),w=""+s[l];if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var _=p.get,A=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return _.call(this)},set:function(L){w=""+L,A.call(this,L)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return w},setValue:function(L){w=""+L},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function wt(s){s._valueTracker||(s._valueTracker=ht(s))}function At(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var p=l.getValue(),w="";return s&&(w=Ye(s)?s.checked?"true":"false":s.value),s=w,s!==p?(l.setValue(s),!0):!1}function Ke(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Er(s,l){var p=l.checked;return ve({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??s._wrapperState.initialChecked})}function Lr(s,l){var p=l.defaultValue==null?"":l.defaultValue,w=l.checked!=null?l.checked:l.defaultChecked;p=Te(l.value!=null?l.value:p),s._wrapperState={initialChecked:w,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function wn(s,l){l=l.checked,l!=null&&B(s,"checked",l,!1)}function Jt(s,l){wn(s,l);var p=Te(l.value),w=l.type;if(p!=null)w==="number"?(p===0&&s.value===""||s.value!=p)&&(s.value=""+p):s.value!==""+p&&(s.value=""+p);else if(w==="submit"||w==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?pt(s,l.type,p):l.hasOwnProperty("defaultValue")&&pt(s,l.type,Te(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function _t(s,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var w=l.type;if(!(w!=="submit"&&w!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,p||l===s.value||(s.value=l),s.defaultValue=l}p=s.name,p!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,p!==""&&(s.name=p)}function pt(s,l,p){(l!=="number"||Ke(s.ownerDocument)!==s)&&(p==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+p&&(s.defaultValue=""+p))}var vn=Array.isArray;function Le(s,l,p,w){if(s=s.options,l){l={};for(var _=0;_<p.length;_++)l["$"+p[_]]=!0;for(p=0;p<s.length;p++)_=l.hasOwnProperty("$"+s[p].value),s[p].selected!==_&&(s[p].selected=_),_&&w&&(s[p].defaultSelected=!0)}else{for(p=""+Te(p),l=null,_=0;_<s.length;_++){if(s[_].value===p){s[_].selected=!0,w&&(s[_].defaultSelected=!0);return}l!==null||s[_].disabled||(l=s[_])}l!==null&&(l.selected=!0)}}function Jn(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return ve({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function bn(s,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(n(92));if(vn(p)){if(1<p.length)throw Error(n(93));p=p[0]}l=p}l==null&&(l=""),p=l}s._wrapperState={initialValue:Te(p)}}function ln(s,l){var p=Te(l.value),w=Te(l.defaultValue);p!=null&&(p=""+p,p!==s.value&&(s.value=p),l.defaultValue==null&&s.defaultValue!==p&&(s.defaultValue=p)),w!=null&&(s.defaultValue=""+w)}function ci(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Dt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function En(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Dt(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var en,xr=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,w,_){MSApp.execUnsafeLocalFunction(function(){return s(l,p,w,_)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(en=en||document.createElement("div"),en.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=en.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Cn(s,l){if(l){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=l;return}}s.textContent=l}var Un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ro=["Webkit","ms","Moz","O"];Object.keys(Un).forEach(function(s){Ro.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),Un[l]=Un[s]})});function Mt(s,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Un.hasOwnProperty(s)&&Un[s]?(""+l).trim():l+"px"}function Pe(s,l){s=s.style;for(var p in l)if(l.hasOwnProperty(p)){var w=p.indexOf("--")===0,_=Mt(p,l[p],w);p==="float"&&(p="cssFloat"),w?s.setProperty(p,_):s[p]=_}}var Xt=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xt(s,l){if(l){if(Xt[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function jt(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var es=null;function ws(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ps=null,mt=null,Rr=null;function cn(s){if(s=el(s)){if(typeof Ps!="function")throw Error(n(280));var l=s.stateNode;l&&(l=uc(l),Ps(s.stateNode,s.type,l))}}function Xi(s){mt?Rr?Rr.push(s):Rr=[s]:mt=s}function Ge(){if(mt){var s=mt,l=Rr;if(Rr=mt=null,cn(s),l)for(s=0;s<l.length;s++)cn(l[s])}}function Et(s,l){return s(l)}function ct(){}var ir=!1;function Cr(s,l,p){if(ir)return s(l,p);ir=!0;try{return Et(s,l,p)}finally{ir=!1,(mt!==null||Rr!==null)&&(ct(),Ge())}}function Wt(s,l){var p=s.stateNode;if(p===null)return null;var w=uc(p);if(w===null)return null;p=w[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(n(231,l,typeof p));return p}var _n=!1;if(y)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){_n=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch{_n=!1}function un(s,l,p,w,_,A,L,K,Q){var ye=Array.prototype.slice.call(arguments,3);try{l.apply(p,ye)}catch(Ae){this.onError(Ae)}}var yr=!1,zn=null,Br=!1,Be=null,ui={onError:function(s){yr=!0,zn=s}};function ja(s,l,p,w,_,A,L,K,Q){yr=!1,zn=null,un.apply(ui,arguments)}function $r(s,l,p,w,_,A,L,K,Q){if(ja.apply(this,arguments),yr){if(yr){var ye=zn;yr=!1,zn=null}else throw Error(n(198));Br||(Br=!0,Be=ye)}}function dn(s){var l=s,p=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(p=l.return),s=l.return;while(s)}return l.tag===3?p:null}function Yi(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Zi(s){if(dn(s)!==s)throw Error(n(188))}function Vn(s){var l=s.alternate;if(!l){if(l=dn(s),l===null)throw Error(n(188));return l!==s?null:s}for(var p=s,w=l;;){var _=p.return;if(_===null)break;var A=_.alternate;if(A===null){if(w=_.return,w!==null){p=w;continue}break}if(_.child===A.child){for(A=_.child;A;){if(A===p)return Zi(_),s;if(A===w)return Zi(_),l;A=A.sibling}throw Error(n(188))}if(p.return!==w.return)p=_,w=A;else{for(var L=!1,K=_.child;K;){if(K===p){L=!0,p=_,w=A;break}if(K===w){L=!0,w=_,p=A;break}K=K.sibling}if(!L){for(K=A.child;K;){if(K===p){L=!0,p=A,w=_;break}if(K===w){L=!0,w=A,p=_;break}K=K.sibling}if(!L)throw Error(n(189))}}if(p.alternate!==w)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?s:l}function Hl(s){return s=Vn(s),s!==null?Wl(s):null}function Wl(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Wl(s);if(l!==null)return l;s=s.sibling}return null}var Sn=e.unstable_scheduleCallback,Or=e.unstable_cancelCallback,Ft=e.unstable_shouldYield,Gl=e.unstable_requestPaint,It=e.unstable_now,Pa=e.unstable_getCurrentPriorityLevel,Ce=e.unstable_ImmediatePriority,ql=e.unstable_UserBlockingPriority,Lt=e.unstable_NormalPriority,di=e.unstable_LowPriority,$l=e.unstable_IdlePriority,Ct=null,ut=null;function vt(s){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Ct,s,void 0,(s.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:dr,Da=Math.log,Ma=Math.LN2;function dr(s){return s>>>=0,s===0?32:31-(Da(s)/Ma|0)|0}var Nn=64,Oo=4194304;function Bt(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function An(s,l){var p=s.pendingLanes;if(p===0)return 0;var w=0,_=s.suspendedLanes,A=s.pingedLanes,L=p&268435455;if(L!==0){var K=L&~_;K!==0?w=Bt(K):(A&=L,A!==0&&(w=Bt(A)))}else L=p&~_,L!==0?w=Bt(L):A!==0&&(w=Bt(A));if(w===0)return 0;if(l!==0&&l!==w&&(l&_)===0&&(_=w&-w,A=l&-l,_>=A||_===16&&(A&4194240)!==0))return l;if((w&4)!==0&&(w|=p&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=w;0<l;)p=31-tn(l),_=1<<p,w|=s[p],l&=~_;return w}function Yu(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fi(s,l){for(var p=s.suspendedLanes,w=s.pingedLanes,_=s.expirationTimes,A=s.pendingLanes;0<A;){var L=31-tn(A),K=1<<L,Q=_[L];Q===-1?((K&p)===0||(K&w)!==0)&&(_[L]=Yu(K,l)):Q<=l&&(s.expiredLanes|=K),A&=~K}}function Rt(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function _r(){var s=Nn;return Nn<<=1,(Nn&4194240)===0&&(Nn=64),s}function ae(s){for(var l=[],p=0;31>p;p++)l.push(s);return l}function W(s,l,p){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-tn(l),s[l]=p}function qe(s,l){var p=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var w=s.eventTimes;for(s=s.expirationTimes;0<p;){var _=31-tn(p),A=1<<_;l[_]=0,w[_]=-1,s[_]=-1,p&=~A}}function or(s,l){var p=s.entangledLanes|=l;for(s=s.entanglements;p;){var w=31-tn(p),_=1<<w;_&l|s[w]&l&&(s[w]|=l),p&=~_}}var dt=0;function Kl(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var jo,Kr,Xe,Ut,La,Ba=!1,hi=[],Tn=null,Hn=null,vs=null,Yt=new Map,ts=new Map,Fr=[],tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xl(s,l){switch(s){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":Yt.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ts.delete(l.pointerId)}}function ot(s,l,p,w,_,A){return s===null||s.nativeEvent!==A?(s={blockedOn:l,domEventName:p,eventSystemFlags:w,nativeEvent:A,targetContainers:[_]},l!==null&&(l=el(l),l!==null&&Kr(l)),s):(s.eventSystemFlags|=w,l=s.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),s)}function Sr(s,l,p,w,_){switch(l){case"focusin":return Tn=ot(Tn,s,l,p,w,_),!0;case"dragenter":return Hn=ot(Hn,s,l,p,w,_),!0;case"mouseover":return vs=ot(vs,s,l,p,w,_),!0;case"pointerover":var A=_.pointerId;return Yt.set(A,ot(Yt.get(A)||null,s,l,p,w,_)),!0;case"gotpointercapture":return A=_.pointerId,ts.set(A,ot(ts.get(A)||null,s,l,p,w,_)),!0}return!1}function Yl(s){var l=ao(s.target);if(l!==null){var p=dn(l);if(p!==null){if(l=p.tag,l===13){if(l=Yi(p),l!==null){s.blockedOn=l,La(s.priority,function(){Xe(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function mi(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var p=Po(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(p===null){p=s.nativeEvent;var w=new p.constructor(p.type,p);es=w,p.target.dispatchEvent(w),es=null}else return l=el(p),l!==null&&Kr(l),s.blockedOn=p,!1;l.shift()}return!0}function Fa(s,l,p){mi(s)&&p.delete(l)}function Ds(){Ba=!1,Tn!==null&&mi(Tn)&&(Tn=null),Hn!==null&&mi(Hn)&&(Hn=null),vs!==null&&mi(vs)&&(vs=null),Yt.forEach(Fa),ts.forEach(Fa)}function Qi(s,l){s.blockedOn===l&&(s.blockedOn=null,Ba||(Ba=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ds)))}function rs(s){function l(_){return Qi(_,s)}if(0<hi.length){Qi(hi[0],s);for(var p=1;p<hi.length;p++){var w=hi[p];w.blockedOn===s&&(w.blockedOn=null)}}for(Tn!==null&&Qi(Tn,s),Hn!==null&&Qi(Hn,s),vs!==null&&Qi(vs,s),Yt.forEach(l),ts.forEach(l),p=0;p<Fr.length;p++)w=Fr[p],w.blockedOn===s&&(w.blockedOn=null);for(;0<Fr.length&&(p=Fr[0],p.blockedOn===null);)Yl(p),p.blockedOn===null&&Fr.shift()}var Wn=V.ReactCurrentBatchConfig,bs=!0;function Zl(s,l,p,w){var _=dt,A=Wn.transition;Wn.transition=null;try{dt=1,Ms(s,l,p,w)}finally{dt=_,Wn.transition=A}}function Ji(s,l,p,w){var _=dt,A=Wn.transition;Wn.transition=null;try{dt=4,Ms(s,l,p,w)}finally{dt=_,Wn.transition=A}}function Ms(s,l,p,w){if(bs){var _=Po(s,l,p,w);if(_===null)od(s,l,w,Nr,p),Xl(s,w);else if(Sr(_,s,l,p,w))w.stopPropagation();else if(Xl(s,w),l&4&&-1<tt.indexOf(s)){for(;_!==null;){var A=el(_);if(A!==null&&jo(A),A=Po(s,l,p,w),A===null&&od(s,l,w,Nr,p),A===_)break;_=A}_!==null&&w.stopPropagation()}else od(s,l,w,null,p)}}var Nr=null;function Po(s,l,p,w){if(Nr=null,s=ws(w),s=ao(s),s!==null)if(l=dn(s),l===null)s=null;else if(p=l.tag,p===13){if(s=Yi(l),s!==null)return s;s=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Nr=s,null}function Ua(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pa()){case Ce:return 1;case ql:return 4;case Lt:case di:return 16;case $l:return 536870912;default:return 16}default:return 16}}var ns=null,za=null,Do=null;function Ql(){if(Do)return Do;var s,l=za,p=l.length,w,_="value"in ns?ns.value:ns.textContent,A=_.length;for(s=0;s<p&&l[s]===_[s];s++);var L=p-s;for(w=1;w<=L&&l[p-w]===_[A-w];w++);return Do=_.slice(s,1<w?1-w:void 0)}function St(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function eo(){return!0}function to(){return!1}function ar(s){function l(p,w,_,A,L){this._reactName=p,this._targetInst=_,this.type=w,this.nativeEvent=A,this.target=L,this.currentTarget=null;for(var K in s)s.hasOwnProperty(K)&&(p=s[K],this[K]=p?p(A):A[K]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?eo:to,this.isPropagationStopped=to,this}return ve(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),l}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xe=ar(pi),lt=ve({},pi,{view:0,detail:0}),Ar=ar(lt),gi,Mo,ro,Lo=ve({},lt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ro&&(ro&&s.type==="mousemove"?(gi=s.screenX-ro.screenX,Mo=s.screenY-ro.screenY):Mo=gi=0,ro=s),gi)},movementY:function(s){return"movementY"in s?s.movementY:Mo}}),Jl=ar(Lo),Va=ve({},Lo,{dataTransfer:0}),fr=ar(Va),Ha=ve({},lt,{relatedTarget:0}),zt=ar(Ha),Bo=ve({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ls=ar(Bo),Ot=ve({},pi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Qe=ar(Ot),Zu=ve({},pi,{data:0}),Pt=ar(Zu),Bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gn(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Qu[s])?!!l[s]:!1}function no(){return Gn}var ec=ve({},lt,{key:function(s){if(s.key){var l=Bs[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=St(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?xi[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(s){return s.type==="keypress"?St(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?St(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wa=ar(ec),tc=ve({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=ar(tc),Ju=ve({},lt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),yi=ar(Ju),qa=ve({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ed=ar(qa),so=ve({},Lo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),td=ar(so),Es=[9,13,27,32],wi=y&&"CompositionEvent"in window,jr=null;y&&"documentMode"in document&&(jr=document.documentMode);var rc=y&&"TextEvent"in window&&!jr,kn=y&&(!wi||jr&&8<jr&&11>=jr),nc=" ",Fo=!1;function sc(s,l){switch(s){case"keyup":return Es.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $a(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ur=!1;function rd(s,l){switch(s){case"compositionend":return $a(l);case"keypress":return l.which!==32?null:(Fo=!0,nc);case"textInput":return s=l.data,s===nc&&Fo?null:s;default:return null}}function Ka(s,l){if(Ur)return s==="compositionend"||!wi&&sc(s,l)?(s=Ql(),Do=za=ns=null,Ur=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return kn&&l.locale!=="ko"?null:l.data;default:return null}}var io={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bt(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!io[s.type]:l==="textarea"}function oo(s,l,p,w){Xi(w),l=ac(l,"onChange"),0<l.length&&(p=new xe("onChange","change",null,p,w),s.push({event:p,listeners:l}))}var j=null,r=null;function i(s){W0(s,0)}function a(s){var l=Vo(s);if(At(l))return s}function u(s,l){if(s==="change")return l}var f=!1;if(y){var m;if(y){var x="oninput"in document;if(!x){var E=document.createElement("div");E.setAttribute("oninput","return;"),x=typeof E.oninput=="function"}m=x}else m=!1;f=m&&(!document.documentMode||9<document.documentMode)}function C(){j&&(j.detachEvent("onpropertychange",k),r=j=null)}function k(s){if(s.propertyName==="value"&&a(r)){var l=[];oo(l,r,s,ws(s)),Cr(i,l)}}function P(s,l,p){s==="focusin"?(C(),j=l,r=p,j.attachEvent("onpropertychange",k)):s==="focusout"&&C()}function F(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return a(r)}function q(s,l){if(s==="click")return a(l)}function Z(s,l){if(s==="input"||s==="change")return a(l)}function J(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ie=typeof Object.is=="function"?Object.is:J;function pe(s,l){if(ie(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var p=Object.keys(s),w=Object.keys(l);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var _=p[w];if(!v.call(l,_)||!ie(s[_],l[_]))return!1}return!0}function Re(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Oe(s,l){var p=Re(s);s=0;for(var w;p;){if(p.nodeType===3){if(w=s+p.textContent.length,s<=l&&w>=l)return{node:p,offset:l-s};s=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Re(p)}}function Ne(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Ne(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function gt(){for(var s=window,l=Ke();l instanceof s.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)s=l.contentWindow;else break;l=Ke(s.document)}return l}function at(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function Xr(s){var l=gt(),p=s.focusedElem,w=s.selectionRange;if(l!==p&&p&&p.ownerDocument&&Ne(p.ownerDocument.documentElement,p)){if(w!==null&&at(p)){if(l=w.start,s=w.end,s===void 0&&(s=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(s,p.value.length);else if(s=(l=p.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var _=p.textContent.length,A=Math.min(w.start,_);w=w.end===void 0?A:Math.min(w.end,_),!s.extend&&A>w&&(_=w,w=A,A=_),_=Oe(p,A);var L=Oe(p,w);_&&L&&(s.rangeCount!==1||s.anchorNode!==_.node||s.anchorOffset!==_.offset||s.focusNode!==L.node||s.focusOffset!==L.offset)&&(l=l.createRange(),l.setStart(_.node,_.offset),s.removeAllRanges(),A>w?(s.addRange(l),s.extend(L.node,L.offset)):(l.setEnd(L.node,L.offset),s.addRange(l)))}}for(l=[],s=p;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)s=l[p],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var In=y&&"documentMode"in document&&11>=document.documentMode,hr=null,kt=null,er=null,zr=!1;function Fs(s,l,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;zr||hr==null||hr!==Ke(w)||(w=hr,"selectionStart"in w&&at(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),er&&pe(er,w)||(er=w,w=ac(kt,"onSelect"),0<w.length&&(l=new xe("onSelect","select",null,l,p),s.push({event:l,listeners:w}),l.target=hr)))}function ss(s,l){var p={};return p[s.toLowerCase()]=l.toLowerCase(),p["Webkit"+s]="webkit"+l,p["Moz"+s]="moz"+l,p}var vi={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionend:ss("Transition","TransitionEnd")},Xa={},M0={};y&&(M0=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function ic(s){if(Xa[s])return Xa[s];if(!vi[s])return s;var l=vi[s],p;for(p in l)if(l.hasOwnProperty(p)&&p in M0)return Xa[s]=l[p];return s}var L0=ic("animationend"),B0=ic("animationiteration"),F0=ic("animationstart"),U0=ic("transitionend"),z0=new Map,V0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(s,l){z0.set(s,l),d(l,[s])}for(var nd=0;nd<V0.length;nd++){var sd=V0[nd],Kw=sd.toLowerCase(),Xw=sd[0].toUpperCase()+sd.slice(1);bi(Kw,"on"+Xw)}bi(L0,"onAnimationEnd"),bi(B0,"onAnimationIteration"),bi(F0,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(U0,"onTransitionEnd"),g("onMouseEnter",["mouseout","mouseover"]),g("onMouseLeave",["mouseout","mouseover"]),g("onPointerEnter",["pointerout","pointerover"]),g("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function H0(s,l,p){var w=s.type||"unknown-event";s.currentTarget=p,$r(w,l,void 0,s),s.currentTarget=null}function W0(s,l){l=(l&4)!==0;for(var p=0;p<s.length;p++){var w=s[p],_=w.event;w=w.listeners;e:{var A=void 0;if(l)for(var L=w.length-1;0<=L;L--){var K=w[L],Q=K.instance,ye=K.currentTarget;if(K=K.listener,Q!==A&&_.isPropagationStopped())break e;H0(_,K,ye),A=Q}else for(L=0;L<w.length;L++){if(K=w[L],Q=K.instance,ye=K.currentTarget,K=K.listener,Q!==A&&_.isPropagationStopped())break e;H0(_,K,ye),A=Q}}}if(Br)throw s=Be,Br=!1,Be=null,s}function qt(s,l){var p=l[fd];p===void 0&&(p=l[fd]=new Set);var w=s+"__bubble";p.has(w)||(G0(l,s,2,!1),p.add(w))}function id(s,l,p){var w=0;l&&(w|=4),G0(p,s,w,l)}var oc="_reactListening"+Math.random().toString(36).slice(2);function Za(s){if(!s[oc]){s[oc]=!0,o.forEach(function(p){p!=="selectionchange"&&(Yw.has(p)||id(p,!1,s),id(p,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[oc]||(l[oc]=!0,id("selectionchange",!1,l))}}function G0(s,l,p,w){switch(Ua(l)){case 1:var _=Zl;break;case 4:_=Ji;break;default:_=Ms}p=_.bind(null,l,p,s),_=void 0,!_n||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),w?_!==void 0?s.addEventListener(l,p,{capture:!0,passive:_}):s.addEventListener(l,p,!0):_!==void 0?s.addEventListener(l,p,{passive:_}):s.addEventListener(l,p,!1)}function od(s,l,p,w,_){var A=w;if((l&1)===0&&(l&2)===0&&w!==null)e:for(;;){if(w===null)return;var L=w.tag;if(L===3||L===4){var K=w.stateNode.containerInfo;if(K===_||K.nodeType===8&&K.parentNode===_)break;if(L===4)for(L=w.return;L!==null;){var Q=L.tag;if((Q===3||Q===4)&&(Q=L.stateNode.containerInfo,Q===_||Q.nodeType===8&&Q.parentNode===_))return;L=L.return}for(;K!==null;){if(L=ao(K),L===null)return;if(Q=L.tag,Q===5||Q===6){w=A=L;continue e}K=K.parentNode}}w=w.return}Cr(function(){var ye=A,Ae=ws(p),ke=[];e:{var Se=z0.get(s);if(Se!==void 0){var Fe=xe,Ve=s;switch(s){case"keypress":if(St(p)===0)break e;case"keydown":case"keyup":Fe=Wa;break;case"focusin":Ve="focus",Fe=zt;break;case"focusout":Ve="blur",Fe=zt;break;case"beforeblur":case"afterblur":Fe=zt;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=Jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=yi;break;case L0:case B0:case F0:Fe=Ls;break;case U0:Fe=ed;break;case"scroll":Fe=Ar;break;case"wheel":Fe=td;break;case"copy":case"cut":case"paste":Fe=Qe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=Ga}var He=(l&4)!==0,mr=!He&&s==="scroll",le=He?Se!==null?Se+"Capture":null:Se;He=[];for(var ne=ye,de;ne!==null;){de=ne;var De=de.stateNode;if(de.tag===5&&De!==null&&(de=De,le!==null&&(De=Wt(ne,le),De!=null&&He.push(Qa(ne,De,de)))),mr)break;ne=ne.return}0<He.length&&(Se=new Fe(Se,Ve,null,p,Ae),ke.push({event:Se,listeners:He}))}}if((l&7)===0){e:{if(Se=s==="mouseover"||s==="pointerover",Fe=s==="mouseout"||s==="pointerout",Se&&p!==es&&(Ve=p.relatedTarget||p.fromElement)&&(ao(Ve)||Ve[Us]))break e;if((Fe||Se)&&(Se=Ae.window===Ae?Ae:(Se=Ae.ownerDocument)?Se.defaultView||Se.parentWindow:window,Fe?(Ve=p.relatedTarget||p.toElement,Fe=ye,Ve=Ve?ao(Ve):null,Ve!==null&&(mr=dn(Ve),Ve!==mr||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Fe=null,Ve=ye),Fe!==Ve)){if(He=Jl,De="onMouseLeave",le="onMouseEnter",ne="mouse",(s==="pointerout"||s==="pointerover")&&(He=Ga,De="onPointerLeave",le="onPointerEnter",ne="pointer"),mr=Fe==null?Se:Vo(Fe),de=Ve==null?Se:Vo(Ve),Se=new He(De,ne+"leave",Fe,p,Ae),Se.target=mr,Se.relatedTarget=de,De=null,ao(Ae)===ye&&(He=new He(le,ne+"enter",Ve,p,Ae),He.target=de,He.relatedTarget=mr,De=He),mr=De,Fe&&Ve)t:{for(He=Fe,le=Ve,ne=0,de=He;de;de=Uo(de))ne++;for(de=0,De=le;De;De=Uo(De))de++;for(;0<ne-de;)He=Uo(He),ne--;for(;0<de-ne;)le=Uo(le),de--;for(;ne--;){if(He===le||le!==null&&He===le.alternate)break t;He=Uo(He),le=Uo(le)}He=null}else He=null;Fe!==null&&q0(ke,Se,Fe,He,!1),Ve!==null&&mr!==null&&q0(ke,mr,Ve,He,!0)}}e:{if(Se=ye?Vo(ye):window,Fe=Se.nodeName&&Se.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&Se.type==="file")var We=u;else if(bt(Se))if(f)We=Z;else{We=F;var Je=P}else(Fe=Se.nodeName)&&Fe.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(We=q);if(We&&(We=We(s,ye))){oo(ke,We,p,Ae);break e}Je&&Je(s,Se,ye),s==="focusout"&&(Je=Se._wrapperState)&&Je.controlled&&Se.type==="number"&&pt(Se,"number",Se.value)}switch(Je=ye?Vo(ye):window,s){case"focusin":(bt(Je)||Je.contentEditable==="true")&&(hr=Je,kt=ye,er=null);break;case"focusout":er=kt=hr=null;break;case"mousedown":zr=!0;break;case"contextmenu":case"mouseup":case"dragend":zr=!1,Fs(ke,p,Ae);break;case"selectionchange":if(In)break;case"keydown":case"keyup":Fs(ke,p,Ae)}var et;if(wi)e:{switch(s){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Ur?sc(s,p)&&(it="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(it="onCompositionStart");it&&(kn&&p.locale!=="ko"&&(Ur||it!=="onCompositionStart"?it==="onCompositionEnd"&&Ur&&(et=Ql()):(ns=Ae,za="value"in ns?ns.value:ns.textContent,Ur=!0)),Je=ac(ye,it),0<Je.length&&(it=new Pt(it,s,null,p,Ae),ke.push({event:it,listeners:Je}),et?it.data=et:(et=$a(p),et!==null&&(it.data=et)))),(et=rc?rd(s,p):Ka(s,p))&&(ye=ac(ye,"onBeforeInput"),0<ye.length&&(Ae=new Pt("onBeforeInput","beforeinput",null,p,Ae),ke.push({event:Ae,listeners:ye}),Ae.data=et))}W0(ke,l)})}function Qa(s,l,p){return{instance:s,listener:l,currentTarget:p}}function ac(s,l){for(var p=l+"Capture",w=[];s!==null;){var _=s,A=_.stateNode;_.tag===5&&A!==null&&(_=A,A=Wt(s,p),A!=null&&w.unshift(Qa(s,A,_)),A=Wt(s,l),A!=null&&w.push(Qa(s,A,_))),s=s.return}return w}function Uo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function q0(s,l,p,w,_){for(var A=l._reactName,L=[];p!==null&&p!==w;){var K=p,Q=K.alternate,ye=K.stateNode;if(Q!==null&&Q===w)break;K.tag===5&&ye!==null&&(K=ye,_?(Q=Wt(p,A),Q!=null&&L.unshift(Qa(p,Q,K))):_||(Q=Wt(p,A),Q!=null&&L.push(Qa(p,Q,K)))),p=p.return}L.length!==0&&s.push({event:l,listeners:L})}var Zw=/\r\n?/g,Qw=/\u0000|\uFFFD/g;function $0(s){return(typeof s=="string"?s:""+s).replace(Zw,`
`).replace(Qw,"")}function lc(s,l,p){if(l=$0(l),$0(s)!==l&&p)throw Error(n(425))}function cc(){}var ad=null,ld=null;function cd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,Jw=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,e2=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(s){return K0.resolve(null).then(s).catch(t2)}:ud;function t2(s){setTimeout(function(){throw s})}function dd(s,l){var p=l,w=0;do{var _=p.nextSibling;if(s.removeChild(p),_&&_.nodeType===8)if(p=_.data,p==="/$"){if(w===0){s.removeChild(_),rs(l);return}w--}else p!=="$"&&p!=="$?"&&p!=="$!"||w++;p=_}while(p);rs(l)}function Ei(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function X0(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return s;l--}else p==="/$"&&l++}s=s.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Cs="__reactFiber$"+zo,Ja="__reactProps$"+zo,Us="__reactContainer$"+zo,fd="__reactEvents$"+zo,r2="__reactListeners$"+zo,n2="__reactHandles$"+zo;function ao(s){var l=s[Cs];if(l)return l;for(var p=s.parentNode;p;){if(l=p[Us]||p[Cs]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(s=X0(s);s!==null;){if(p=s[Cs])return p;s=X0(s)}return l}s=p,p=s.parentNode}return null}function el(s){return s=s[Cs]||s[Us],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Vo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function uc(s){return s[Ja]||null}var hd=[],Ho=-1;function Ci(s){return{current:s}}function $t(s){0>Ho||(s.current=hd[Ho],hd[Ho]=null,Ho--)}function Vt(s,l){Ho++,hd[Ho]=s.current,s.current=l}var _i={},Yr=Ci(_i),fn=Ci(!1),lo=_i;function Wo(s,l){var p=s.type.contextTypes;if(!p)return _i;var w=s.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===l)return w.__reactInternalMemoizedMaskedChildContext;var _={},A;for(A in p)_[A]=l[A];return w&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=_),_}function hn(s){return s=s.childContextTypes,s!=null}function dc(){$t(fn),$t(Yr)}function Y0(s,l,p){if(Yr.current!==_i)throw Error(n(168));Vt(Yr,l),Vt(fn,p)}function Z0(s,l,p){var w=s.stateNode;if(l=l.childContextTypes,typeof w.getChildContext!="function")return p;w=w.getChildContext();for(var _ in w)if(!(_ in l))throw Error(n(108,Ee(s)||"Unknown",_));return ve({},p,w)}function fc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||_i,lo=Yr.current,Vt(Yr,s),Vt(fn,fn.current),!0}function Q0(s,l,p){var w=s.stateNode;if(!w)throw Error(n(169));p?(s=Z0(s,l,lo),w.__reactInternalMemoizedMergedChildContext=s,$t(fn),$t(Yr),Vt(Yr,s)):$t(fn),Vt(fn,p)}var zs=null,hc=!1,md=!1;function J0(s){zs===null?zs=[s]:zs.push(s)}function s2(s){hc=!0,J0(s)}function Si(){if(!md&&zs!==null){md=!0;var s=0,l=dt;try{var p=zs;for(dt=1;s<p.length;s++){var w=p[s];do w=w(!0);while(w!==null)}zs=null,hc=!1}catch(_){throw zs!==null&&(zs=zs.slice(s+1)),Sn(Ce,Si),_}finally{dt=l,md=!1}}return null}var Go=[],qo=0,mc=null,pc=0,qn=[],$n=0,co=null,Vs=1,Hs="";function uo(s,l){Go[qo++]=pc,Go[qo++]=mc,mc=s,pc=l}function e1(s,l,p){qn[$n++]=Vs,qn[$n++]=Hs,qn[$n++]=co,co=s;var w=Vs;s=Hs;var _=32-tn(w)-1;w&=~(1<<_),p+=1;var A=32-tn(l)+_;if(30<A){var L=_-_%5;A=(w&(1<<L)-1).toString(32),w>>=L,_-=L,Vs=1<<32-tn(l)+_|p<<_|w,Hs=A+s}else Vs=1<<A|p<<_|w,Hs=s}function pd(s){s.return!==null&&(uo(s,1),e1(s,1,0))}function gd(s){for(;s===mc;)mc=Go[--qo],Go[qo]=null,pc=Go[--qo],Go[qo]=null;for(;s===co;)co=qn[--$n],qn[$n]=null,Hs=qn[--$n],qn[$n]=null,Vs=qn[--$n],qn[$n]=null}var Rn=null,On=null,Zt=!1,is=null;function t1(s,l){var p=Zn(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=s,l=s.deletions,l===null?(s.deletions=[p],s.flags|=16):l.push(p)}function r1(s,l){switch(s.tag){case 5:var p=s.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Rn=s,On=Ei(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Rn=s,On=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=co!==null?{id:Vs,overflow:Hs}:null,s.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=Zn(18,null,null,0),p.stateNode=l,p.return=s,s.child=p,Rn=s,On=null,!0):!1;default:return!1}}function xd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function yd(s){if(Zt){var l=On;if(l){var p=l;if(!r1(s,l)){if(xd(s))throw Error(n(418));l=Ei(p.nextSibling);var w=Rn;l&&r1(s,l)?t1(w,p):(s.flags=s.flags&-4097|2,Zt=!1,Rn=s)}}else{if(xd(s))throw Error(n(418));s.flags=s.flags&-4097|2,Zt=!1,Rn=s}}}function n1(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Rn=s}function gc(s){if(s!==Rn)return!1;if(!Zt)return n1(s),Zt=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!cd(s.type,s.memoizedProps)),l&&(l=On)){if(xd(s))throw s1(),Error(n(418));for(;l;)t1(s,l),l=Ei(l.nextSibling)}if(n1(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"){if(l===0){On=Ei(s.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}s=s.nextSibling}On=null}}else On=Rn?Ei(s.stateNode.nextSibling):null;return!0}function s1(){for(var s=On;s;)s=Ei(s.nextSibling)}function $o(){On=Rn=null,Zt=!1}function wd(s){is===null?is=[s]:is.push(s)}var i2=V.ReactCurrentBatchConfig;function tl(s,l,p){if(s=p.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var w=p.stateNode}if(!w)throw Error(n(147,s));var _=w,A=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===A?l.ref:(l=function(L){var K=_.refs;L===null?delete K[A]:K[A]=L},l._stringRef=A,l)}if(typeof s!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,s))}return s}function xc(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function i1(s){var l=s._init;return l(s._payload)}function o1(s){function l(le,ne){if(s){var de=le.deletions;de===null?(le.deletions=[ne],le.flags|=16):de.push(ne)}}function p(le,ne){if(!s)return null;for(;ne!==null;)l(le,ne),ne=ne.sibling;return null}function w(le,ne){for(le=new Map;ne!==null;)ne.key!==null?le.set(ne.key,ne):le.set(ne.index,ne),ne=ne.sibling;return le}function _(le,ne){return le=ji(le,ne),le.index=0,le.sibling=null,le}function A(le,ne,de){return le.index=de,s?(de=le.alternate,de!==null?(de=de.index,de<ne?(le.flags|=2,ne):de):(le.flags|=2,ne)):(le.flags|=1048576,ne)}function L(le){return s&&le.alternate===null&&(le.flags|=2),le}function K(le,ne,de,De){return ne===null||ne.tag!==6?(ne=df(de,le.mode,De),ne.return=le,ne):(ne=_(ne,de),ne.return=le,ne)}function Q(le,ne,de,De){var We=de.type;return We===H?Ae(le,ne,de.props.children,De,de.key):ne!==null&&(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===_e&&i1(We)===ne.type)?(De=_(ne,de.props),De.ref=tl(le,ne,de),De.return=le,De):(De=zc(de.type,de.key,de.props,null,le.mode,De),De.ref=tl(le,ne,de),De.return=le,De)}function ye(le,ne,de,De){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==de.containerInfo||ne.stateNode.implementation!==de.implementation?(ne=ff(de,le.mode,De),ne.return=le,ne):(ne=_(ne,de.children||[]),ne.return=le,ne)}function Ae(le,ne,de,De,We){return ne===null||ne.tag!==7?(ne=wo(de,le.mode,De,We),ne.return=le,ne):(ne=_(ne,de),ne.return=le,ne)}function ke(le,ne,de){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=df(""+ne,le.mode,de),ne.return=le,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case re:return de=zc(ne.type,ne.key,ne.props,null,le.mode,de),de.ref=tl(le,null,ne),de.return=le,de;case G:return ne=ff(ne,le.mode,de),ne.return=le,ne;case _e:var De=ne._init;return ke(le,De(ne._payload),de)}if(vn(ne)||ge(ne))return ne=wo(ne,le.mode,de,null),ne.return=le,ne;xc(le,ne)}return null}function Se(le,ne,de,De){var We=ne!==null?ne.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return We!==null?null:K(le,ne,""+de,De);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case re:return de.key===We?Q(le,ne,de,De):null;case G:return de.key===We?ye(le,ne,de,De):null;case _e:return We=de._init,Se(le,ne,We(de._payload),De)}if(vn(de)||ge(de))return We!==null?null:Ae(le,ne,de,De,null);xc(le,de)}return null}function Fe(le,ne,de,De,We){if(typeof De=="string"&&De!==""||typeof De=="number")return le=le.get(de)||null,K(ne,le,""+De,We);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case re:return le=le.get(De.key===null?de:De.key)||null,Q(ne,le,De,We);case G:return le=le.get(De.key===null?de:De.key)||null,ye(ne,le,De,We);case _e:var Je=De._init;return Fe(le,ne,de,Je(De._payload),We)}if(vn(De)||ge(De))return le=le.get(de)||null,Ae(ne,le,De,We,null);xc(ne,De)}return null}function Ve(le,ne,de,De){for(var We=null,Je=null,et=ne,it=ne=0,Mr=null;et!==null&&it<de.length;it++){et.index>it?(Mr=et,et=null):Mr=et.sibling;var Tt=Se(le,et,de[it],De);if(Tt===null){et===null&&(et=Mr);break}s&&et&&Tt.alternate===null&&l(le,et),ne=A(Tt,ne,it),Je===null?We=Tt:Je.sibling=Tt,Je=Tt,et=Mr}if(it===de.length)return p(le,et),Zt&&uo(le,it),We;if(et===null){for(;it<de.length;it++)et=ke(le,de[it],De),et!==null&&(ne=A(et,ne,it),Je===null?We=et:Je.sibling=et,Je=et);return Zt&&uo(le,it),We}for(et=w(le,et);it<de.length;it++)Mr=Fe(et,le,it,de[it],De),Mr!==null&&(s&&Mr.alternate!==null&&et.delete(Mr.key===null?it:Mr.key),ne=A(Mr,ne,it),Je===null?We=Mr:Je.sibling=Mr,Je=Mr);return s&&et.forEach(function(Pi){return l(le,Pi)}),Zt&&uo(le,it),We}function He(le,ne,de,De){var We=ge(de);if(typeof We!="function")throw Error(n(150));if(de=We.call(de),de==null)throw Error(n(151));for(var Je=We=null,et=ne,it=ne=0,Mr=null,Tt=de.next();et!==null&&!Tt.done;it++,Tt=de.next()){et.index>it?(Mr=et,et=null):Mr=et.sibling;var Pi=Se(le,et,Tt.value,De);if(Pi===null){et===null&&(et=Mr);break}s&&et&&Pi.alternate===null&&l(le,et),ne=A(Pi,ne,it),Je===null?We=Pi:Je.sibling=Pi,Je=Pi,et=Mr}if(Tt.done)return p(le,et),Zt&&uo(le,it),We;if(et===null){for(;!Tt.done;it++,Tt=de.next())Tt=ke(le,Tt.value,De),Tt!==null&&(ne=A(Tt,ne,it),Je===null?We=Tt:Je.sibling=Tt,Je=Tt);return Zt&&uo(le,it),We}for(et=w(le,et);!Tt.done;it++,Tt=de.next())Tt=Fe(et,le,it,Tt.value,De),Tt!==null&&(s&&Tt.alternate!==null&&et.delete(Tt.key===null?it:Tt.key),ne=A(Tt,ne,it),Je===null?We=Tt:Je.sibling=Tt,Je=Tt);return s&&et.forEach(function(B2){return l(le,B2)}),Zt&&uo(le,it),We}function mr(le,ne,de,De){if(typeof de=="object"&&de!==null&&de.type===H&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case re:e:{for(var We=de.key,Je=ne;Je!==null;){if(Je.key===We){if(We=de.type,We===H){if(Je.tag===7){p(le,Je.sibling),ne=_(Je,de.props.children),ne.return=le,le=ne;break e}}else if(Je.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===_e&&i1(We)===Je.type){p(le,Je.sibling),ne=_(Je,de.props),ne.ref=tl(le,Je,de),ne.return=le,le=ne;break e}p(le,Je);break}else l(le,Je);Je=Je.sibling}de.type===H?(ne=wo(de.props.children,le.mode,De,de.key),ne.return=le,le=ne):(De=zc(de.type,de.key,de.props,null,le.mode,De),De.ref=tl(le,ne,de),De.return=le,le=De)}return L(le);case G:e:{for(Je=de.key;ne!==null;){if(ne.key===Je)if(ne.tag===4&&ne.stateNode.containerInfo===de.containerInfo&&ne.stateNode.implementation===de.implementation){p(le,ne.sibling),ne=_(ne,de.children||[]),ne.return=le,le=ne;break e}else{p(le,ne);break}else l(le,ne);ne=ne.sibling}ne=ff(de,le.mode,De),ne.return=le,le=ne}return L(le);case _e:return Je=de._init,mr(le,ne,Je(de._payload),De)}if(vn(de))return Ve(le,ne,de,De);if(ge(de))return He(le,ne,de,De);xc(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ne!==null&&ne.tag===6?(p(le,ne.sibling),ne=_(ne,de),ne.return=le,le=ne):(p(le,ne),ne=df(de,le.mode,De),ne.return=le,le=ne),L(le)):p(le,ne)}return mr}var Ko=o1(!0),a1=o1(!1),yc=Ci(null),wc=null,Xo=null,vd=null;function bd(){vd=Xo=wc=null}function Ed(s){var l=yc.current;$t(yc),s._currentValue=l}function Cd(s,l,p){for(;s!==null;){var w=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,w!==null&&(w.childLanes|=l)):w!==null&&(w.childLanes&l)!==l&&(w.childLanes|=l),s===p)break;s=s.return}}function Yo(s,l){wc=s,vd=Xo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(mn=!0),s.firstContext=null)}function Kn(s){var l=s._currentValue;if(vd!==s)if(s={context:s,memoizedValue:l,next:null},Xo===null){if(wc===null)throw Error(n(308));Xo=s,wc.dependencies={lanes:0,firstContext:s}}else Xo=Xo.next=s;return l}var fo=null;function _d(s){fo===null?fo=[s]:fo.push(s)}function l1(s,l,p,w){var _=l.interleaved;return _===null?(p.next=p,_d(l)):(p.next=_.next,_.next=p),l.interleaved=p,Ws(s,w)}function Ws(s,l){s.lanes|=l;var p=s.alternate;for(p!==null&&(p.lanes|=l),p=s,s=s.return;s!==null;)s.childLanes|=l,p=s.alternate,p!==null&&(p.childLanes|=l),p=s,s=s.return;return p.tag===3?p.stateNode:null}var Ni=!1;function Sd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c1(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Gs(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Ai(s,l,p){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(Nt&2)!==0){var _=w.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),w.pending=l,Ws(s,p)}return _=w.interleaved,_===null?(l.next=l,_d(w)):(l.next=_.next,_.next=l),w.interleaved=l,Ws(s,p)}function vc(s,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var w=l.lanes;w&=s.pendingLanes,p|=w,l.lanes=p,or(s,p)}}function u1(s,l){var p=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var _=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var L={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};A===null?_=A=L:A=A.next=L,p=p.next}while(p!==null);A===null?_=A=l:A=A.next=l}else _=A=l;p={baseState:w.baseState,firstBaseUpdate:_,lastBaseUpdate:A,shared:w.shared,effects:w.effects},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=l:s.next=l,p.lastBaseUpdate=l}function bc(s,l,p,w){var _=s.updateQueue;Ni=!1;var A=_.firstBaseUpdate,L=_.lastBaseUpdate,K=_.shared.pending;if(K!==null){_.shared.pending=null;var Q=K,ye=Q.next;Q.next=null,L===null?A=ye:L.next=ye,L=Q;var Ae=s.alternate;Ae!==null&&(Ae=Ae.updateQueue,K=Ae.lastBaseUpdate,K!==L&&(K===null?Ae.firstBaseUpdate=ye:K.next=ye,Ae.lastBaseUpdate=Q))}if(A!==null){var ke=_.baseState;L=0,Ae=ye=Q=null,K=A;do{var Se=K.lane,Fe=K.eventTime;if((w&Se)===Se){Ae!==null&&(Ae=Ae.next={eventTime:Fe,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Ve=s,He=K;switch(Se=l,Fe=p,He.tag){case 1:if(Ve=He.payload,typeof Ve=="function"){ke=Ve.call(Fe,ke,Se);break e}ke=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=He.payload,Se=typeof Ve=="function"?Ve.call(Fe,ke,Se):Ve,Se==null)break e;ke=ve({},ke,Se);break e;case 2:Ni=!0}}K.callback!==null&&K.lane!==0&&(s.flags|=64,Se=_.effects,Se===null?_.effects=[K]:Se.push(K))}else Fe={eventTime:Fe,lane:Se,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Ae===null?(ye=Ae=Fe,Q=ke):Ae=Ae.next=Fe,L|=Se;if(K=K.next,K===null){if(K=_.shared.pending,K===null)break;Se=K,K=Se.next,Se.next=null,_.lastBaseUpdate=Se,_.shared.pending=null}}while(!0);if(Ae===null&&(Q=ke),_.baseState=Q,_.firstBaseUpdate=ye,_.lastBaseUpdate=Ae,l=_.shared.interleaved,l!==null){_=l;do L|=_.lane,_=_.next;while(_!==l)}else A===null&&(_.shared.lanes=0);po|=L,s.lanes=L,s.memoizedState=ke}}function d1(s,l,p){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var w=s[l],_=w.callback;if(_!==null){if(w.callback=null,w=p,typeof _!="function")throw Error(n(191,_));_.call(w)}}}var rl={},_s=Ci(rl),nl=Ci(rl),sl=Ci(rl);function ho(s){if(s===rl)throw Error(n(174));return s}function Nd(s,l){switch(Vt(sl,l),Vt(nl,s),Vt(_s,rl),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:En(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=En(l,s)}$t(_s),Vt(_s,l)}function Zo(){$t(_s),$t(nl),$t(sl)}function f1(s){ho(sl.current);var l=ho(_s.current),p=En(l,s.type);l!==p&&(Vt(nl,s),Vt(_s,p))}function Ad(s){nl.current===s&&($t(_s),$t(nl))}var tr=Ci(0);function Ec(s){for(var l=s;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Td=[];function kd(){for(var s=0;s<Td.length;s++)Td[s]._workInProgressVersionPrimary=null;Td.length=0}var Cc=V.ReactCurrentDispatcher,Id=V.ReactCurrentBatchConfig,mo=0,rr=null,Tr=null,Pr=null,_c=!1,il=!1,ol=0,o2=0;function Zr(){throw Error(n(321))}function Rd(s,l){if(l===null)return!1;for(var p=0;p<l.length&&p<s.length;p++)if(!ie(s[p],l[p]))return!1;return!0}function Od(s,l,p,w,_,A){if(mo=A,rr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Cc.current=s===null||s.memoizedState===null?u2:d2,s=p(w,_),il){A=0;do{if(il=!1,ol=0,25<=A)throw Error(n(301));A+=1,Pr=Tr=null,l.updateQueue=null,Cc.current=f2,s=p(w,_)}while(il)}if(Cc.current=Ac,l=Tr!==null&&Tr.next!==null,mo=0,Pr=Tr=rr=null,_c=!1,l)throw Error(n(300));return s}function jd(){var s=ol!==0;return ol=0,s}function Ss(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?rr.memoizedState=Pr=s:Pr=Pr.next=s,Pr}function Xn(){if(Tr===null){var s=rr.alternate;s=s!==null?s.memoizedState:null}else s=Tr.next;var l=Pr===null?rr.memoizedState:Pr.next;if(l!==null)Pr=l,Tr=s;else{if(s===null)throw Error(n(310));Tr=s,s={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},Pr===null?rr.memoizedState=Pr=s:Pr=Pr.next=s}return Pr}function al(s,l){return typeof l=="function"?l(s):l}function Pd(s){var l=Xn(),p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=s;var w=Tr,_=w.baseQueue,A=p.pending;if(A!==null){if(_!==null){var L=_.next;_.next=A.next,A.next=L}w.baseQueue=_=A,p.pending=null}if(_!==null){A=_.next,w=w.baseState;var K=L=null,Q=null,ye=A;do{var Ae=ye.lane;if((mo&Ae)===Ae)Q!==null&&(Q=Q.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),w=ye.hasEagerState?ye.eagerState:s(w,ye.action);else{var ke={lane:Ae,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};Q===null?(K=Q=ke,L=w):Q=Q.next=ke,rr.lanes|=Ae,po|=Ae}ye=ye.next}while(ye!==null&&ye!==A);Q===null?L=w:Q.next=K,ie(w,l.memoizedState)||(mn=!0),l.memoizedState=w,l.baseState=L,l.baseQueue=Q,p.lastRenderedState=w}if(s=p.interleaved,s!==null){_=s;do A=_.lane,rr.lanes|=A,po|=A,_=_.next;while(_!==s)}else _===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function Dd(s){var l=Xn(),p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=s;var w=p.dispatch,_=p.pending,A=l.memoizedState;if(_!==null){p.pending=null;var L=_=_.next;do A=s(A,L.action),L=L.next;while(L!==_);ie(A,l.memoizedState)||(mn=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),p.lastRenderedState=A}return[A,w]}function h1(){}function m1(s,l){var p=rr,w=Xn(),_=l(),A=!ie(w.memoizedState,_);if(A&&(w.memoizedState=_,mn=!0),w=w.queue,Md(x1.bind(null,p,w,s),[s]),w.getSnapshot!==l||A||Pr!==null&&Pr.memoizedState.tag&1){if(p.flags|=2048,ll(9,g1.bind(null,p,w,_,l),void 0,null),Dr===null)throw Error(n(349));(mo&30)!==0||p1(p,l,_)}return _}function p1(s,l,p){s.flags|=16384,s={getSnapshot:l,value:p},l=rr.updateQueue,l===null?(l={lastEffect:null,stores:null},rr.updateQueue=l,l.stores=[s]):(p=l.stores,p===null?l.stores=[s]:p.push(s))}function g1(s,l,p,w){l.value=p,l.getSnapshot=w,y1(l)&&w1(s)}function x1(s,l,p){return p(function(){y1(l)&&w1(s)})}function y1(s){var l=s.getSnapshot;s=s.value;try{var p=l();return!ie(s,p)}catch{return!0}}function w1(s){var l=Ws(s,1);l!==null&&cs(l,s,1,-1)}function v1(s){var l=Ss();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:s},l.queue=s,s=s.dispatch=c2.bind(null,rr,s),[l.memoizedState,s]}function ll(s,l,p,w){return s={tag:s,create:l,destroy:p,deps:w,next:null},l=rr.updateQueue,l===null?(l={lastEffect:null,stores:null},rr.updateQueue=l,l.lastEffect=s.next=s):(p=l.lastEffect,p===null?l.lastEffect=s.next=s:(w=p.next,p.next=s,s.next=w,l.lastEffect=s)),s}function b1(){return Xn().memoizedState}function Sc(s,l,p,w){var _=Ss();rr.flags|=s,_.memoizedState=ll(1|l,p,void 0,w===void 0?null:w)}function Nc(s,l,p,w){var _=Xn();w=w===void 0?null:w;var A=void 0;if(Tr!==null){var L=Tr.memoizedState;if(A=L.destroy,w!==null&&Rd(w,L.deps)){_.memoizedState=ll(l,p,A,w);return}}rr.flags|=s,_.memoizedState=ll(1|l,p,A,w)}function E1(s,l){return Sc(8390656,8,s,l)}function Md(s,l){return Nc(2048,8,s,l)}function C1(s,l){return Nc(4,2,s,l)}function _1(s,l){return Nc(4,4,s,l)}function S1(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function N1(s,l,p){return p=p!=null?p.concat([s]):null,Nc(4,4,S1.bind(null,l,s),p)}function Ld(){}function A1(s,l){var p=Xn();l=l===void 0?null:l;var w=p.memoizedState;return w!==null&&l!==null&&Rd(l,w[1])?w[0]:(p.memoizedState=[s,l],s)}function T1(s,l){var p=Xn();l=l===void 0?null:l;var w=p.memoizedState;return w!==null&&l!==null&&Rd(l,w[1])?w[0]:(s=s(),p.memoizedState=[s,l],s)}function k1(s,l,p){return(mo&21)===0?(s.baseState&&(s.baseState=!1,mn=!0),s.memoizedState=p):(ie(p,l)||(p=_r(),rr.lanes|=p,po|=p,s.baseState=!0),l)}function a2(s,l){var p=dt;dt=p!==0&&4>p?p:4,s(!0);var w=Id.transition;Id.transition={};try{s(!1),l()}finally{dt=p,Id.transition=w}}function I1(){return Xn().memoizedState}function l2(s,l,p){var w=Ri(s);if(p={lane:w,action:p,hasEagerState:!1,eagerState:null,next:null},R1(s))O1(l,p);else if(p=l1(s,l,p,w),p!==null){var _=nn();cs(p,s,w,_),j1(p,l,w)}}function c2(s,l,p){var w=Ri(s),_={lane:w,action:p,hasEagerState:!1,eagerState:null,next:null};if(R1(s))O1(l,_);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var L=l.lastRenderedState,K=A(L,p);if(_.hasEagerState=!0,_.eagerState=K,ie(K,L)){var Q=l.interleaved;Q===null?(_.next=_,_d(l)):(_.next=Q.next,Q.next=_),l.interleaved=_;return}}catch{}p=l1(s,l,_,w),p!==null&&(_=nn(),cs(p,s,w,_),j1(p,l,w))}}function R1(s){var l=s.alternate;return s===rr||l!==null&&l===rr}function O1(s,l){il=_c=!0;var p=s.pending;p===null?l.next=l:(l.next=p.next,p.next=l),s.pending=l}function j1(s,l,p){if((p&4194240)!==0){var w=l.lanes;w&=s.pendingLanes,p|=w,l.lanes=p,or(s,p)}}var Ac={readContext:Kn,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},u2={readContext:Kn,useCallback:function(s,l){return Ss().memoizedState=[s,l===void 0?null:l],s},useContext:Kn,useEffect:E1,useImperativeHandle:function(s,l,p){return p=p!=null?p.concat([s]):null,Sc(4194308,4,S1.bind(null,l,s),p)},useLayoutEffect:function(s,l){return Sc(4194308,4,s,l)},useInsertionEffect:function(s,l){return Sc(4,2,s,l)},useMemo:function(s,l){var p=Ss();return l=l===void 0?null:l,s=s(),p.memoizedState=[s,l],s},useReducer:function(s,l,p){var w=Ss();return l=p!==void 0?p(l):l,w.memoizedState=w.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},w.queue=s,s=s.dispatch=l2.bind(null,rr,s),[w.memoizedState,s]},useRef:function(s){var l=Ss();return s={current:s},l.memoizedState=s},useState:v1,useDebugValue:Ld,useDeferredValue:function(s){return Ss().memoizedState=s},useTransition:function(){var s=v1(!1),l=s[0];return s=a2.bind(null,s[1]),Ss().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,p){var w=rr,_=Ss();if(Zt){if(p===void 0)throw Error(n(407));p=p()}else{if(p=l(),Dr===null)throw Error(n(349));(mo&30)!==0||p1(w,l,p)}_.memoizedState=p;var A={value:p,getSnapshot:l};return _.queue=A,E1(x1.bind(null,w,A,s),[s]),w.flags|=2048,ll(9,g1.bind(null,w,A,p,l),void 0,null),p},useId:function(){var s=Ss(),l=Dr.identifierPrefix;if(Zt){var p=Hs,w=Vs;p=(w&~(1<<32-tn(w)-1)).toString(32)+p,l=":"+l+"R"+p,p=ol++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=o2++,l=":"+l+"r"+p.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},d2={readContext:Kn,useCallback:A1,useContext:Kn,useEffect:Md,useImperativeHandle:N1,useInsertionEffect:C1,useLayoutEffect:_1,useMemo:T1,useReducer:Pd,useRef:b1,useState:function(){return Pd(al)},useDebugValue:Ld,useDeferredValue:function(s){var l=Xn();return k1(l,Tr.memoizedState,s)},useTransition:function(){var s=Pd(al)[0],l=Xn().memoizedState;return[s,l]},useMutableSource:h1,useSyncExternalStore:m1,useId:I1,unstable_isNewReconciler:!1},f2={readContext:Kn,useCallback:A1,useContext:Kn,useEffect:Md,useImperativeHandle:N1,useInsertionEffect:C1,useLayoutEffect:_1,useMemo:T1,useReducer:Dd,useRef:b1,useState:function(){return Dd(al)},useDebugValue:Ld,useDeferredValue:function(s){var l=Xn();return Tr===null?l.memoizedState=s:k1(l,Tr.memoizedState,s)},useTransition:function(){var s=Dd(al)[0],l=Xn().memoizedState;return[s,l]},useMutableSource:h1,useSyncExternalStore:m1,useId:I1,unstable_isNewReconciler:!1};function os(s,l){if(s&&s.defaultProps){l=ve({},l),s=s.defaultProps;for(var p in s)l[p]===void 0&&(l[p]=s[p]);return l}return l}function Bd(s,l,p,w){l=s.memoizedState,p=p(w,l),p=p==null?l:ve({},l,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var Tc={isMounted:function(s){return(s=s._reactInternals)?dn(s)===s:!1},enqueueSetState:function(s,l,p){s=s._reactInternals;var w=nn(),_=Ri(s),A=Gs(w,_);A.payload=l,p!=null&&(A.callback=p),l=Ai(s,A,_),l!==null&&(cs(l,s,_,w),vc(l,s,_))},enqueueReplaceState:function(s,l,p){s=s._reactInternals;var w=nn(),_=Ri(s),A=Gs(w,_);A.tag=1,A.payload=l,p!=null&&(A.callback=p),l=Ai(s,A,_),l!==null&&(cs(l,s,_,w),vc(l,s,_))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var p=nn(),w=Ri(s),_=Gs(p,w);_.tag=2,l!=null&&(_.callback=l),l=Ai(s,_,w),l!==null&&(cs(l,s,w,p),vc(l,s,w))}};function P1(s,l,p,w,_,A,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,A,L):l.prototype&&l.prototype.isPureReactComponent?!pe(p,w)||!pe(_,A):!0}function D1(s,l,p){var w=!1,_=_i,A=l.contextType;return typeof A=="object"&&A!==null?A=Kn(A):(_=hn(l)?lo:Yr.current,w=l.contextTypes,A=(w=w!=null)?Wo(s,_):_i),l=new l(p,A),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Tc,s.stateNode=l,l._reactInternals=s,w&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=_,s.__reactInternalMemoizedMaskedChildContext=A),l}function M1(s,l,p,w){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,w),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,w),l.state!==s&&Tc.enqueueReplaceState(l,l.state,null)}function Fd(s,l,p,w){var _=s.stateNode;_.props=p,_.state=s.memoizedState,_.refs={},Sd(s);var A=l.contextType;typeof A=="object"&&A!==null?_.context=Kn(A):(A=hn(l)?lo:Yr.current,_.context=Wo(s,A)),_.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Bd(s,l,A,p),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(l=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),l!==_.state&&Tc.enqueueReplaceState(_,_.state,null),bc(s,p,_,w),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308)}function Qo(s,l){try{var p="",w=l;do p+=we(w),w=w.return;while(w);var _=p}catch(A){_=`
Error generating stack: `+A.message+`
`+A.stack}return{value:s,source:l,stack:_,digest:null}}function Ud(s,l,p){return{value:s,source:null,stack:p??null,digest:l??null}}function zd(s,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var h2=typeof WeakMap=="function"?WeakMap:Map;function L1(s,l,p){p=Gs(-1,p),p.tag=3,p.payload={element:null};var w=l.value;return p.callback=function(){Dc||(Dc=!0,rf=w),zd(s,l)},p}function B1(s,l,p){p=Gs(-1,p),p.tag=3;var w=s.type.getDerivedStateFromError;if(typeof w=="function"){var _=l.value;p.payload=function(){return w(_)},p.callback=function(){zd(s,l)}}var A=s.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(p.callback=function(){zd(s,l),typeof w!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var L=l.stack;this.componentDidCatch(l.value,{componentStack:L!==null?L:""})}),p}function F1(s,l,p){var w=s.pingCache;if(w===null){w=s.pingCache=new h2;var _=new Set;w.set(l,_)}else _=w.get(l),_===void 0&&(_=new Set,w.set(l,_));_.has(p)||(_.add(p),s=A2.bind(null,s,l,p),l.then(s,s))}function U1(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function z1(s,l,p,w,_){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=Gs(-1,1),l.tag=2,Ai(p,l,1))),p.lanes|=1),s):(s.flags|=65536,s.lanes=_,s)}var m2=V.ReactCurrentOwner,mn=!1;function rn(s,l,p,w){l.child=s===null?a1(l,null,p,w):Ko(l,s.child,p,w)}function V1(s,l,p,w,_){p=p.render;var A=l.ref;return Yo(l,_),w=Od(s,l,p,w,A,_),p=jd(),s!==null&&!mn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~_,qs(s,l,_)):(Zt&&p&&pd(l),l.flags|=1,rn(s,l,w,_),l.child)}function H1(s,l,p,w,_){if(s===null){var A=p.type;return typeof A=="function"&&!uf(A)&&A.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=A,W1(s,l,A,w,_)):(s=zc(p.type,null,w,l,l.mode,_),s.ref=l.ref,s.return=l,l.child=s)}if(A=s.child,(s.lanes&_)===0){var L=A.memoizedProps;if(p=p.compare,p=p!==null?p:pe,p(L,w)&&s.ref===l.ref)return qs(s,l,_)}return l.flags|=1,s=ji(A,w),s.ref=l.ref,s.return=l,l.child=s}function W1(s,l,p,w,_){if(s!==null){var A=s.memoizedProps;if(pe(A,w)&&s.ref===l.ref)if(mn=!1,l.pendingProps=w=A,(s.lanes&_)!==0)(s.flags&131072)!==0&&(mn=!0);else return l.lanes=s.lanes,qs(s,l,_)}return Vd(s,l,p,w,_)}function G1(s,l,p){var w=l.pendingProps,_=w.children,A=s!==null?s.memoizedState:null;if(w.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(ea,jn),jn|=p;else{if((p&1073741824)===0)return s=A!==null?A.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Vt(ea,jn),jn|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=A!==null?A.baseLanes:p,Vt(ea,jn),jn|=w}else A!==null?(w=A.baseLanes|p,l.memoizedState=null):w=p,Vt(ea,jn),jn|=w;return rn(s,l,_,p),l.child}function q1(s,l){var p=l.ref;(s===null&&p!==null||s!==null&&s.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function Vd(s,l,p,w,_){var A=hn(p)?lo:Yr.current;return A=Wo(l,A),Yo(l,_),p=Od(s,l,p,w,A,_),w=jd(),s!==null&&!mn?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~_,qs(s,l,_)):(Zt&&w&&pd(l),l.flags|=1,rn(s,l,p,_),l.child)}function $1(s,l,p,w,_){if(hn(p)){var A=!0;fc(l)}else A=!1;if(Yo(l,_),l.stateNode===null)Ic(s,l),D1(l,p,w),Fd(l,p,w,_),w=!0;else if(s===null){var L=l.stateNode,K=l.memoizedProps;L.props=K;var Q=L.context,ye=p.contextType;typeof ye=="object"&&ye!==null?ye=Kn(ye):(ye=hn(p)?lo:Yr.current,ye=Wo(l,ye));var Ae=p.getDerivedStateFromProps,ke=typeof Ae=="function"||typeof L.getSnapshotBeforeUpdate=="function";ke||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(K!==w||Q!==ye)&&M1(l,L,w,ye),Ni=!1;var Se=l.memoizedState;L.state=Se,bc(l,w,L,_),Q=l.memoizedState,K!==w||Se!==Q||fn.current||Ni?(typeof Ae=="function"&&(Bd(l,p,Ae,w),Q=l.memoizedState),(K=Ni||P1(l,p,K,w,Se,Q,ye))?(ke||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4194308)):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=w,l.memoizedState=Q),L.props=w,L.state=Q,L.context=ye,w=K):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),w=!1)}else{L=l.stateNode,c1(s,l),K=l.memoizedProps,ye=l.type===l.elementType?K:os(l.type,K),L.props=ye,ke=l.pendingProps,Se=L.context,Q=p.contextType,typeof Q=="object"&&Q!==null?Q=Kn(Q):(Q=hn(p)?lo:Yr.current,Q=Wo(l,Q));var Fe=p.getDerivedStateFromProps;(Ae=typeof Fe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(K!==ke||Se!==Q)&&M1(l,L,w,Q),Ni=!1,Se=l.memoizedState,L.state=Se,bc(l,w,L,_);var Ve=l.memoizedState;K!==ke||Se!==Ve||fn.current||Ni?(typeof Fe=="function"&&(Bd(l,p,Fe,w),Ve=l.memoizedState),(ye=Ni||P1(l,p,ye,w,Se,Ve,Q)||!1)?(Ae||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(w,Ve,Q),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(w,Ve,Q)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof L.componentDidUpdate!="function"||K===s.memoizedProps&&Se===s.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||K===s.memoizedProps&&Se===s.memoizedState||(l.flags|=1024),l.memoizedProps=w,l.memoizedState=Ve),L.props=w,L.state=Ve,L.context=Q,w=ye):(typeof L.componentDidUpdate!="function"||K===s.memoizedProps&&Se===s.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||K===s.memoizedProps&&Se===s.memoizedState||(l.flags|=1024),w=!1)}return Hd(s,l,p,w,A,_)}function Hd(s,l,p,w,_,A){q1(s,l);var L=(l.flags&128)!==0;if(!w&&!L)return _&&Q0(l,p,!1),qs(s,l,A);w=l.stateNode,m2.current=l;var K=L&&typeof p.getDerivedStateFromError!="function"?null:w.render();return l.flags|=1,s!==null&&L?(l.child=Ko(l,s.child,null,A),l.child=Ko(l,null,K,A)):rn(s,l,K,A),l.memoizedState=w.state,_&&Q0(l,p,!0),l.child}function K1(s){var l=s.stateNode;l.pendingContext?Y0(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Y0(s,l.context,!1),Nd(s,l.containerInfo)}function X1(s,l,p,w,_){return $o(),wd(_),l.flags|=256,rn(s,l,p,w),l.child}var Wd={dehydrated:null,treeContext:null,retryLane:0};function Gd(s){return{baseLanes:s,cachePool:null,transitions:null}}function Y1(s,l,p){var w=l.pendingProps,_=tr.current,A=!1,L=(l.flags&128)!==0,K;if((K=L)||(K=s!==null&&s.memoizedState===null?!1:(_&2)!==0),K?(A=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(_|=1),Vt(tr,_&1),s===null)return yd(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(L=w.children,s=w.fallback,A?(w=l.mode,A=l.child,L={mode:"hidden",children:L},(w&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=L):A=Vc(L,w,0,null),s=wo(s,w,p,null),A.return=l,s.return=l,A.sibling=s,l.child=A,l.child.memoizedState=Gd(p),l.memoizedState=Wd,s):qd(l,L));if(_=s.memoizedState,_!==null&&(K=_.dehydrated,K!==null))return p2(s,l,L,w,K,_,p);if(A){A=w.fallback,L=l.mode,_=s.child,K=_.sibling;var Q={mode:"hidden",children:w.children};return(L&1)===0&&l.child!==_?(w=l.child,w.childLanes=0,w.pendingProps=Q,l.deletions=null):(w=ji(_,Q),w.subtreeFlags=_.subtreeFlags&14680064),K!==null?A=ji(K,A):(A=wo(A,L,p,null),A.flags|=2),A.return=l,w.return=l,w.sibling=A,l.child=w,w=A,A=l.child,L=s.child.memoizedState,L=L===null?Gd(p):{baseLanes:L.baseLanes|p,cachePool:null,transitions:L.transitions},A.memoizedState=L,A.childLanes=s.childLanes&~p,l.memoizedState=Wd,w}return A=s.child,s=A.sibling,w=ji(A,{mode:"visible",children:w.children}),(l.mode&1)===0&&(w.lanes=p),w.return=l,w.sibling=null,s!==null&&(p=l.deletions,p===null?(l.deletions=[s],l.flags|=16):p.push(s)),l.child=w,l.memoizedState=null,w}function qd(s,l){return l=Vc({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function kc(s,l,p,w){return w!==null&&wd(w),Ko(l,s.child,null,p),s=qd(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function p2(s,l,p,w,_,A,L){if(p)return l.flags&256?(l.flags&=-257,w=Ud(Error(n(422))),kc(s,l,L,w)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(A=w.fallback,_=l.mode,w=Vc({mode:"visible",children:w.children},_,0,null),A=wo(A,_,L,null),A.flags|=2,w.return=l,A.return=l,w.sibling=A,l.child=w,(l.mode&1)!==0&&Ko(l,s.child,null,L),l.child.memoizedState=Gd(L),l.memoizedState=Wd,A);if((l.mode&1)===0)return kc(s,l,L,null);if(_.data==="$!"){if(w=_.nextSibling&&_.nextSibling.dataset,w)var K=w.dgst;return w=K,A=Error(n(419)),w=Ud(A,w,void 0),kc(s,l,L,w)}if(K=(L&s.childLanes)!==0,mn||K){if(w=Dr,w!==null){switch(L&-L){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(w.suspendedLanes|L))!==0?0:_,_!==0&&_!==A.retryLane&&(A.retryLane=_,Ws(s,_),cs(w,s,_,-1))}return cf(),w=Ud(Error(n(421))),kc(s,l,L,w)}return _.data==="$?"?(l.flags|=128,l.child=s.child,l=T2.bind(null,s),_._reactRetry=l,null):(s=A.treeContext,On=Ei(_.nextSibling),Rn=l,Zt=!0,is=null,s!==null&&(qn[$n++]=Vs,qn[$n++]=Hs,qn[$n++]=co,Vs=s.id,Hs=s.overflow,co=l),l=qd(l,w.children),l.flags|=4096,l)}function Z1(s,l,p){s.lanes|=l;var w=s.alternate;w!==null&&(w.lanes|=l),Cd(s.return,l,p)}function $d(s,l,p,w,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:_}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=w,A.tail=p,A.tailMode=_)}function Q1(s,l,p){var w=l.pendingProps,_=w.revealOrder,A=w.tail;if(rn(s,l,w.children,p),w=tr.current,(w&2)!==0)w=w&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Z1(s,p,l);else if(s.tag===19)Z1(s,p,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}w&=1}if(Vt(tr,w),(l.mode&1)===0)l.memoizedState=null;else switch(_){case"forwards":for(p=l.child,_=null;p!==null;)s=p.alternate,s!==null&&Ec(s)===null&&(_=p),p=p.sibling;p=_,p===null?(_=l.child,l.child=null):(_=p.sibling,p.sibling=null),$d(l,!1,_,p,A);break;case"backwards":for(p=null,_=l.child,l.child=null;_!==null;){if(s=_.alternate,s!==null&&Ec(s)===null){l.child=_;break}s=_.sibling,_.sibling=p,p=_,_=s}$d(l,!0,p,null,A);break;case"together":$d(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ic(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function qs(s,l,p){if(s!==null&&(l.dependencies=s.dependencies),po|=l.lanes,(p&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,p=ji(s,s.pendingProps),l.child=p,p.return=l;s.sibling!==null;)s=s.sibling,p=p.sibling=ji(s,s.pendingProps),p.return=l;p.sibling=null}return l.child}function g2(s,l,p){switch(l.tag){case 3:K1(l),$o();break;case 5:f1(l);break;case 1:hn(l.type)&&fc(l);break;case 4:Nd(l,l.stateNode.containerInfo);break;case 10:var w=l.type._context,_=l.memoizedProps.value;Vt(yc,w._currentValue),w._currentValue=_;break;case 13:if(w=l.memoizedState,w!==null)return w.dehydrated!==null?(Vt(tr,tr.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?Y1(s,l,p):(Vt(tr,tr.current&1),s=qs(s,l,p),s!==null?s.sibling:null);Vt(tr,tr.current&1);break;case 19:if(w=(p&l.childLanes)!==0,(s.flags&128)!==0){if(w)return Q1(s,l,p);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Vt(tr,tr.current),w)break;return null;case 22:case 23:return l.lanes=0,G1(s,l,p)}return qs(s,l,p)}var J1,Kd,em,tm;J1=function(s,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Kd=function(){},em=function(s,l,p,w){var _=s.memoizedProps;if(_!==w){s=l.stateNode,ho(_s.current);var A=null;switch(p){case"input":_=Er(s,_),w=Er(s,w),A=[];break;case"select":_=ve({},_,{value:void 0}),w=ve({},w,{value:void 0}),A=[];break;case"textarea":_=Jn(s,_),w=Jn(s,w),A=[];break;default:typeof _.onClick!="function"&&typeof w.onClick=="function"&&(s.onclick=cc)}xt(p,w);var L;p=null;for(ye in _)if(!w.hasOwnProperty(ye)&&_.hasOwnProperty(ye)&&_[ye]!=null)if(ye==="style"){var K=_[ye];for(L in K)K.hasOwnProperty(L)&&(p||(p={}),p[L]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="children"&&ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(c.hasOwnProperty(ye)?A||(A=[]):(A=A||[]).push(ye,null));for(ye in w){var Q=w[ye];if(K=_?.[ye],w.hasOwnProperty(ye)&&Q!==K&&(Q!=null||K!=null))if(ye==="style")if(K){for(L in K)!K.hasOwnProperty(L)||Q&&Q.hasOwnProperty(L)||(p||(p={}),p[L]="");for(L in Q)Q.hasOwnProperty(L)&&K[L]!==Q[L]&&(p||(p={}),p[L]=Q[L])}else p||(A||(A=[]),A.push(ye,p)),p=Q;else ye==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,K=K?K.__html:void 0,Q!=null&&K!==Q&&(A=A||[]).push(ye,Q)):ye==="children"?typeof Q!="string"&&typeof Q!="number"||(A=A||[]).push(ye,""+Q):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(c.hasOwnProperty(ye)?(Q!=null&&ye==="onScroll"&&qt("scroll",s),A||K===Q||(A=[])):(A=A||[]).push(ye,Q))}p&&(A=A||[]).push("style",p);var ye=A;(l.updateQueue=ye)&&(l.flags|=4)}},tm=function(s,l,p,w){p!==w&&(l.flags|=4)};function cl(s,l){if(!Zt)switch(s.tailMode){case"hidden":l=s.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Qr(s){var l=s.alternate!==null&&s.alternate.child===s.child,p=0,w=0;if(l)for(var _=s.child;_!==null;)p|=_.lanes|_.childLanes,w|=_.subtreeFlags&14680064,w|=_.flags&14680064,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)p|=_.lanes|_.childLanes,w|=_.subtreeFlags,w|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=w,s.childLanes=p,l}function x2(s,l,p){var w=l.pendingProps;switch(gd(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(l),null;case 1:return hn(l.type)&&dc(),Qr(l),null;case 3:return w=l.stateNode,Zo(),$t(fn),$t(Yr),kd(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(s===null||s.child===null)&&(gc(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,is!==null&&(of(is),is=null))),Kd(s,l),Qr(l),null;case 5:Ad(l);var _=ho(sl.current);if(p=l.type,s!==null&&l.stateNode!=null)em(s,l,p,w,_),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!w){if(l.stateNode===null)throw Error(n(166));return Qr(l),null}if(s=ho(_s.current),gc(l)){w=l.stateNode,p=l.type;var A=l.memoizedProps;switch(w[Cs]=l,w[Ja]=A,s=(l.mode&1)!==0,p){case"dialog":qt("cancel",w),qt("close",w);break;case"iframe":case"object":case"embed":qt("load",w);break;case"video":case"audio":for(_=0;_<Ya.length;_++)qt(Ya[_],w);break;case"source":qt("error",w);break;case"img":case"image":case"link":qt("error",w),qt("load",w);break;case"details":qt("toggle",w);break;case"input":Lr(w,A),qt("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!A.multiple},qt("invalid",w);break;case"textarea":bn(w,A),qt("invalid",w)}xt(p,A),_=null;for(var L in A)if(A.hasOwnProperty(L)){var K=A[L];L==="children"?typeof K=="string"?w.textContent!==K&&(A.suppressHydrationWarning!==!0&&lc(w.textContent,K,s),_=["children",K]):typeof K=="number"&&w.textContent!==""+K&&(A.suppressHydrationWarning!==!0&&lc(w.textContent,K,s),_=["children",""+K]):c.hasOwnProperty(L)&&K!=null&&L==="onScroll"&&qt("scroll",w)}switch(p){case"input":wt(w),_t(w,A,!0);break;case"textarea":wt(w),ci(w);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(w.onclick=cc)}w=_,l.updateQueue=w,w!==null&&(l.flags|=4)}else{L=_.nodeType===9?_:_.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Dt(p)),s==="http://www.w3.org/1999/xhtml"?p==="script"?(s=L.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof w.is=="string"?s=L.createElement(p,{is:w.is}):(s=L.createElement(p),p==="select"&&(L=s,w.multiple?L.multiple=!0:w.size&&(L.size=w.size))):s=L.createElementNS(s,p),s[Cs]=l,s[Ja]=w,J1(s,l,!1,!1),l.stateNode=s;e:{switch(L=jt(p,w),p){case"dialog":qt("cancel",s),qt("close",s),_=w;break;case"iframe":case"object":case"embed":qt("load",s),_=w;break;case"video":case"audio":for(_=0;_<Ya.length;_++)qt(Ya[_],s);_=w;break;case"source":qt("error",s),_=w;break;case"img":case"image":case"link":qt("error",s),qt("load",s),_=w;break;case"details":qt("toggle",s),_=w;break;case"input":Lr(s,w),_=Er(s,w),qt("invalid",s);break;case"option":_=w;break;case"select":s._wrapperState={wasMultiple:!!w.multiple},_=ve({},w,{value:void 0}),qt("invalid",s);break;case"textarea":bn(s,w),_=Jn(s,w),qt("invalid",s);break;default:_=w}xt(p,_),K=_;for(A in K)if(K.hasOwnProperty(A)){var Q=K[A];A==="style"?Pe(s,Q):A==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&xr(s,Q)):A==="children"?typeof Q=="string"?(p!=="textarea"||Q!=="")&&Cn(s,Q):typeof Q=="number"&&Cn(s,""+Q):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(c.hasOwnProperty(A)?Q!=null&&A==="onScroll"&&qt("scroll",s):Q!=null&&B(s,A,Q,L))}switch(p){case"input":wt(s),_t(s,w,!1);break;case"textarea":wt(s),ci(s);break;case"option":w.value!=null&&s.setAttribute("value",""+Te(w.value));break;case"select":s.multiple=!!w.multiple,A=w.value,A!=null?Le(s,!!w.multiple,A,!1):w.defaultValue!=null&&Le(s,!!w.multiple,w.defaultValue,!0);break;default:typeof _.onClick=="function"&&(s.onclick=cc)}switch(p){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Qr(l),null;case 6:if(s&&l.stateNode!=null)tm(s,l,s.memoizedProps,w);else{if(typeof w!="string"&&l.stateNode===null)throw Error(n(166));if(p=ho(sl.current),ho(_s.current),gc(l)){if(w=l.stateNode,p=l.memoizedProps,w[Cs]=l,(A=w.nodeValue!==p)&&(s=Rn,s!==null))switch(s.tag){case 3:lc(w.nodeValue,p,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&lc(w.nodeValue,p,(s.mode&1)!==0)}A&&(l.flags|=4)}else w=(p.nodeType===9?p:p.ownerDocument).createTextNode(w),w[Cs]=l,l.stateNode=w}return Qr(l),null;case 13:if($t(tr),w=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Zt&&On!==null&&(l.mode&1)!==0&&(l.flags&128)===0)s1(),$o(),l.flags|=98560,A=!1;else if(A=gc(l),w!==null&&w.dehydrated!==null){if(s===null){if(!A)throw Error(n(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Cs]=l}else $o(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qr(l),A=!1}else is!==null&&(of(is),is=null),A=!0;if(!A)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(w=w!==null,w!==(s!==null&&s.memoizedState!==null)&&w&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(tr.current&1)!==0?kr===0&&(kr=3):cf())),l.updateQueue!==null&&(l.flags|=4),Qr(l),null);case 4:return Zo(),Kd(s,l),s===null&&Za(l.stateNode.containerInfo),Qr(l),null;case 10:return Ed(l.type._context),Qr(l),null;case 17:return hn(l.type)&&dc(),Qr(l),null;case 19:if($t(tr),A=l.memoizedState,A===null)return Qr(l),null;if(w=(l.flags&128)!==0,L=A.rendering,L===null)if(w)cl(A,!1);else{if(kr!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(L=Ec(s),L!==null){for(l.flags|=128,cl(A,!1),w=L.updateQueue,w!==null&&(l.updateQueue=w,l.flags|=4),l.subtreeFlags=0,w=p,p=l.child;p!==null;)A=p,s=w,A.flags&=14680066,L=A.alternate,L===null?(A.childLanes=0,A.lanes=s,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=L.childLanes,A.lanes=L.lanes,A.child=L.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=L.memoizedProps,A.memoizedState=L.memoizedState,A.updateQueue=L.updateQueue,A.type=L.type,s=L.dependencies,A.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),p=p.sibling;return Vt(tr,tr.current&1|2),l.child}s=s.sibling}A.tail!==null&&It()>ta&&(l.flags|=128,w=!0,cl(A,!1),l.lanes=4194304)}else{if(!w)if(s=Ec(L),s!==null){if(l.flags|=128,w=!0,p=s.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),cl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!L.alternate&&!Zt)return Qr(l),null}else 2*It()-A.renderingStartTime>ta&&p!==1073741824&&(l.flags|=128,w=!0,cl(A,!1),l.lanes=4194304);A.isBackwards?(L.sibling=l.child,l.child=L):(p=A.last,p!==null?p.sibling=L:l.child=L,A.last=L)}return A.tail!==null?(l=A.tail,A.rendering=l,A.tail=l.sibling,A.renderingStartTime=It(),l.sibling=null,p=tr.current,Vt(tr,w?p&1|2:p&1),l):(Qr(l),null);case 22:case 23:return lf(),w=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==w&&(l.flags|=8192),w&&(l.mode&1)!==0?(jn&1073741824)!==0&&(Qr(l),l.subtreeFlags&6&&(l.flags|=8192)):Qr(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function y2(s,l){switch(gd(l),l.tag){case 1:return hn(l.type)&&dc(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Zo(),$t(fn),$t(Yr),kd(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Ad(l),null;case 13:if($t(tr),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));$o()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return $t(tr),null;case 4:return Zo(),null;case 10:return Ed(l.type._context),null;case 22:case 23:return lf(),null;case 24:return null;default:return null}}var Rc=!1,Jr=!1,w2=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Jo(s,l){var p=s.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(w){lr(s,l,w)}else p.current=null}function Xd(s,l,p){try{p()}catch(w){lr(s,l,w)}}var rm=!1;function v2(s,l){if(ad=bs,s=gt(),at(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var _=w.anchorOffset,A=w.focusNode;w=w.focusOffset;try{p.nodeType,A.nodeType}catch{p=null;break e}var L=0,K=-1,Q=-1,ye=0,Ae=0,ke=s,Se=null;t:for(;;){for(var Fe;ke!==p||_!==0&&ke.nodeType!==3||(K=L+_),ke!==A||w!==0&&ke.nodeType!==3||(Q=L+w),ke.nodeType===3&&(L+=ke.nodeValue.length),(Fe=ke.firstChild)!==null;)Se=ke,ke=Fe;for(;;){if(ke===s)break t;if(Se===p&&++ye===_&&(K=L),Se===A&&++Ae===w&&(Q=L),(Fe=ke.nextSibling)!==null)break;ke=Se,Se=ke.parentNode}ke=Fe}p=K===-1||Q===-1?null:{start:K,end:Q}}else p=null}p=p||{start:0,end:0}}else p=null;for(ld={focusedElem:s,selectionRange:p},bs=!1,ze=l;ze!==null;)if(l=ze,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,ze=s;else for(;ze!==null;){l=ze;try{var Ve=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var He=Ve.memoizedProps,mr=Ve.memoizedState,le=l.stateNode,ne=le.getSnapshotBeforeUpdate(l.elementType===l.type?He:os(l.type,He),mr);le.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var de=l.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(De){lr(l,l.return,De)}if(s=l.sibling,s!==null){s.return=l.return,ze=s;break}ze=l.return}return Ve=rm,rm=!1,Ve}function ul(s,l,p){var w=l.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var _=w=w.next;do{if((_.tag&s)===s){var A=_.destroy;_.destroy=void 0,A!==void 0&&Xd(l,p,A)}_=_.next}while(_!==w)}}function Oc(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&s)===s){var w=p.create;p.destroy=w()}p=p.next}while(p!==l)}}function Yd(s){var l=s.ref;if(l!==null){var p=s.stateNode;s.tag,s=p,typeof l=="function"?l(s):l.current=s}}function nm(s){var l=s.alternate;l!==null&&(s.alternate=null,nm(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Cs],delete l[Ja],delete l[fd],delete l[r2],delete l[n2])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function sm(s){return s.tag===5||s.tag===3||s.tag===4}function im(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||sm(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Zd(s,l,p){var w=s.tag;if(w===5||w===6)s=s.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(s,l):p.insertBefore(s,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(s,p)):(l=p,l.appendChild(s)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=cc));else if(w!==4&&(s=s.child,s!==null))for(Zd(s,l,p),s=s.sibling;s!==null;)Zd(s,l,p),s=s.sibling}function Qd(s,l,p){var w=s.tag;if(w===5||w===6)s=s.stateNode,l?p.insertBefore(s,l):p.appendChild(s);else if(w!==4&&(s=s.child,s!==null))for(Qd(s,l,p),s=s.sibling;s!==null;)Qd(s,l,p),s=s.sibling}var Vr=null,as=!1;function Ti(s,l,p){for(p=p.child;p!==null;)om(s,l,p),p=p.sibling}function om(s,l,p){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Ct,p)}catch{}switch(p.tag){case 5:Jr||Jo(p,l);case 6:var w=Vr,_=as;Vr=null,Ti(s,l,p),Vr=w,as=_,Vr!==null&&(as?(s=Vr,p=p.stateNode,s.nodeType===8?s.parentNode.removeChild(p):s.removeChild(p)):Vr.removeChild(p.stateNode));break;case 18:Vr!==null&&(as?(s=Vr,p=p.stateNode,s.nodeType===8?dd(s.parentNode,p):s.nodeType===1&&dd(s,p),rs(s)):dd(Vr,p.stateNode));break;case 4:w=Vr,_=as,Vr=p.stateNode.containerInfo,as=!0,Ti(s,l,p),Vr=w,as=_;break;case 0:case 11:case 14:case 15:if(!Jr&&(w=p.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){_=w=w.next;do{var A=_,L=A.destroy;A=A.tag,L!==void 0&&((A&2)!==0||(A&4)!==0)&&Xd(p,l,L),_=_.next}while(_!==w)}Ti(s,l,p);break;case 1:if(!Jr&&(Jo(p,l),w=p.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=p.memoizedProps,w.state=p.memoizedState,w.componentWillUnmount()}catch(K){lr(p,l,K)}Ti(s,l,p);break;case 21:Ti(s,l,p);break;case 22:p.mode&1?(Jr=(w=Jr)||p.memoizedState!==null,Ti(s,l,p),Jr=w):Ti(s,l,p);break;default:Ti(s,l,p)}}function am(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var p=s.stateNode;p===null&&(p=s.stateNode=new w2),l.forEach(function(w){var _=k2.bind(null,s,w);p.has(w)||(p.add(w),w.then(_,_))})}}function ls(s,l){var p=l.deletions;if(p!==null)for(var w=0;w<p.length;w++){var _=p[w];try{var A=s,L=l,K=L;e:for(;K!==null;){switch(K.tag){case 5:Vr=K.stateNode,as=!1;break e;case 3:Vr=K.stateNode.containerInfo,as=!0;break e;case 4:Vr=K.stateNode.containerInfo,as=!0;break e}K=K.return}if(Vr===null)throw Error(n(160));om(A,L,_),Vr=null,as=!1;var Q=_.alternate;Q!==null&&(Q.return=null),_.return=null}catch(ye){lr(_,l,ye)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)lm(l,s),l=l.sibling}function lm(s,l){var p=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ls(l,s),Ns(s),w&4){try{ul(3,s,s.return),Oc(3,s)}catch(He){lr(s,s.return,He)}try{ul(5,s,s.return)}catch(He){lr(s,s.return,He)}}break;case 1:ls(l,s),Ns(s),w&512&&p!==null&&Jo(p,p.return);break;case 5:if(ls(l,s),Ns(s),w&512&&p!==null&&Jo(p,p.return),s.flags&32){var _=s.stateNode;try{Cn(_,"")}catch(He){lr(s,s.return,He)}}if(w&4&&(_=s.stateNode,_!=null)){var A=s.memoizedProps,L=p!==null?p.memoizedProps:A,K=s.type,Q=s.updateQueue;if(s.updateQueue=null,Q!==null)try{K==="input"&&A.type==="radio"&&A.name!=null&&wn(_,A),jt(K,L);var ye=jt(K,A);for(L=0;L<Q.length;L+=2){var Ae=Q[L],ke=Q[L+1];Ae==="style"?Pe(_,ke):Ae==="dangerouslySetInnerHTML"?xr(_,ke):Ae==="children"?Cn(_,ke):B(_,Ae,ke,ye)}switch(K){case"input":Jt(_,A);break;case"textarea":ln(_,A);break;case"select":var Se=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!A.multiple;var Fe=A.value;Fe!=null?Le(_,!!A.multiple,Fe,!1):Se!==!!A.multiple&&(A.defaultValue!=null?Le(_,!!A.multiple,A.defaultValue,!0):Le(_,!!A.multiple,A.multiple?[]:"",!1))}_[Ja]=A}catch(He){lr(s,s.return,He)}}break;case 6:if(ls(l,s),Ns(s),w&4){if(s.stateNode===null)throw Error(n(162));_=s.stateNode,A=s.memoizedProps;try{_.nodeValue=A}catch(He){lr(s,s.return,He)}}break;case 3:if(ls(l,s),Ns(s),w&4&&p!==null&&p.memoizedState.isDehydrated)try{rs(l.containerInfo)}catch(He){lr(s,s.return,He)}break;case 4:ls(l,s),Ns(s);break;case 13:ls(l,s),Ns(s),_=s.child,_.flags&8192&&(A=_.memoizedState!==null,_.stateNode.isHidden=A,!A||_.alternate!==null&&_.alternate.memoizedState!==null||(tf=It())),w&4&&am(s);break;case 22:if(Ae=p!==null&&p.memoizedState!==null,s.mode&1?(Jr=(ye=Jr)||Ae,ls(l,s),Jr=ye):ls(l,s),Ns(s),w&8192){if(ye=s.memoizedState!==null,(s.stateNode.isHidden=ye)&&!Ae&&(s.mode&1)!==0)for(ze=s,Ae=s.child;Ae!==null;){for(ke=ze=Ae;ze!==null;){switch(Se=ze,Fe=Se.child,Se.tag){case 0:case 11:case 14:case 15:ul(4,Se,Se.return);break;case 1:Jo(Se,Se.return);var Ve=Se.stateNode;if(typeof Ve.componentWillUnmount=="function"){w=Se,p=Se.return;try{l=w,Ve.props=l.memoizedProps,Ve.state=l.memoizedState,Ve.componentWillUnmount()}catch(He){lr(w,p,He)}}break;case 5:Jo(Se,Se.return);break;case 22:if(Se.memoizedState!==null){dm(ke);continue}}Fe!==null?(Fe.return=Se,ze=Fe):dm(ke)}Ae=Ae.sibling}e:for(Ae=null,ke=s;;){if(ke.tag===5){if(Ae===null){Ae=ke;try{_=ke.stateNode,ye?(A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(K=ke.stateNode,Q=ke.memoizedProps.style,L=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,K.style.display=Mt("display",L))}catch(He){lr(s,s.return,He)}}}else if(ke.tag===6){if(Ae===null)try{ke.stateNode.nodeValue=ye?"":ke.memoizedProps}catch(He){lr(s,s.return,He)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===s)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===s)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===s)break e;Ae===ke&&(Ae=null),ke=ke.return}Ae===ke&&(Ae=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:ls(l,s),Ns(s),w&4&&am(s);break;case 21:break;default:ls(l,s),Ns(s)}}function Ns(s){var l=s.flags;if(l&2){try{e:{for(var p=s.return;p!==null;){if(sm(p)){var w=p;break e}p=p.return}throw Error(n(160))}switch(w.tag){case 5:var _=w.stateNode;w.flags&32&&(Cn(_,""),w.flags&=-33);var A=im(s);Qd(s,A,_);break;case 3:case 4:var L=w.stateNode.containerInfo,K=im(s);Zd(s,K,L);break;default:throw Error(n(161))}}catch(Q){lr(s,s.return,Q)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function b2(s,l,p){ze=s,cm(s)}function cm(s,l,p){for(var w=(s.mode&1)!==0;ze!==null;){var _=ze,A=_.child;if(_.tag===22&&w){var L=_.memoizedState!==null||Rc;if(!L){var K=_.alternate,Q=K!==null&&K.memoizedState!==null||Jr;K=Rc;var ye=Jr;if(Rc=L,(Jr=Q)&&!ye)for(ze=_;ze!==null;)L=ze,Q=L.child,L.tag===22&&L.memoizedState!==null?fm(_):Q!==null?(Q.return=L,ze=Q):fm(_);for(;A!==null;)ze=A,cm(A),A=A.sibling;ze=_,Rc=K,Jr=ye}um(s)}else(_.subtreeFlags&8772)!==0&&A!==null?(A.return=_,ze=A):um(s)}}function um(s){for(;ze!==null;){var l=ze;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Jr||Oc(5,l);break;case 1:var w=l.stateNode;if(l.flags&4&&!Jr)if(p===null)w.componentDidMount();else{var _=l.elementType===l.type?p.memoizedProps:os(l.type,p.memoizedProps);w.componentDidUpdate(_,p.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var A=l.updateQueue;A!==null&&d1(l,A,w);break;case 3:var L=l.updateQueue;if(L!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}d1(l,L,p)}break;case 5:var K=l.stateNode;if(p===null&&l.flags&4){p=K;var Q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&p.focus();break;case"img":Q.src&&(p.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ye=l.alternate;if(ye!==null){var Ae=ye.memoizedState;if(Ae!==null){var ke=Ae.dehydrated;ke!==null&&rs(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Jr||l.flags&512&&Yd(l)}catch(Se){lr(l,l.return,Se)}}if(l===s){ze=null;break}if(p=l.sibling,p!==null){p.return=l.return,ze=p;break}ze=l.return}}function dm(s){for(;ze!==null;){var l=ze;if(l===s){ze=null;break}var p=l.sibling;if(p!==null){p.return=l.return,ze=p;break}ze=l.return}}function fm(s){for(;ze!==null;){var l=ze;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{Oc(4,l)}catch(Q){lr(l,p,Q)}break;case 1:var w=l.stateNode;if(typeof w.componentDidMount=="function"){var _=l.return;try{w.componentDidMount()}catch(Q){lr(l,_,Q)}}var A=l.return;try{Yd(l)}catch(Q){lr(l,A,Q)}break;case 5:var L=l.return;try{Yd(l)}catch(Q){lr(l,L,Q)}}}catch(Q){lr(l,l.return,Q)}if(l===s){ze=null;break}var K=l.sibling;if(K!==null){K.return=l.return,ze=K;break}ze=l.return}}var E2=Math.ceil,jc=V.ReactCurrentDispatcher,Jd=V.ReactCurrentOwner,Yn=V.ReactCurrentBatchConfig,Nt=0,Dr=null,wr=null,Hr=0,jn=0,ea=Ci(0),kr=0,dl=null,po=0,Pc=0,ef=0,fl=null,pn=null,tf=0,ta=1/0,$s=null,Dc=!1,rf=null,ki=null,Mc=!1,Ii=null,Lc=0,hl=0,nf=null,Bc=-1,Fc=0;function nn(){return(Nt&6)!==0?It():Bc!==-1?Bc:Bc=It()}function Ri(s){return(s.mode&1)===0?1:(Nt&2)!==0&&Hr!==0?Hr&-Hr:i2.transition!==null?(Fc===0&&(Fc=_r()),Fc):(s=dt,s!==0||(s=window.event,s=s===void 0?16:Ua(s.type)),s)}function cs(s,l,p,w){if(50<hl)throw hl=0,nf=null,Error(n(185));W(s,p,w),((Nt&2)===0||s!==Dr)&&(s===Dr&&((Nt&2)===0&&(Pc|=p),kr===4&&Oi(s,Hr)),gn(s,w),p===1&&Nt===0&&(l.mode&1)===0&&(ta=It()+500,hc&&Si()))}function gn(s,l){var p=s.callbackNode;fi(s,l);var w=An(s,s===Dr?Hr:0);if(w===0)p!==null&&Or(p),s.callbackNode=null,s.callbackPriority=0;else if(l=w&-w,s.callbackPriority!==l){if(p!=null&&Or(p),l===1)s.tag===0?s2(mm.bind(null,s)):J0(mm.bind(null,s)),e2(function(){(Nt&6)===0&&Si()}),p=null;else{switch(Kl(w)){case 1:p=Ce;break;case 4:p=ql;break;case 16:p=Lt;break;case 536870912:p=$l;break;default:p=Lt}p=Em(p,hm.bind(null,s))}s.callbackPriority=l,s.callbackNode=p}}function hm(s,l){if(Bc=-1,Fc=0,(Nt&6)!==0)throw Error(n(327));var p=s.callbackNode;if(ra()&&s.callbackNode!==p)return null;var w=An(s,s===Dr?Hr:0);if(w===0)return null;if((w&30)!==0||(w&s.expiredLanes)!==0||l)l=Uc(s,w);else{l=w;var _=Nt;Nt|=2;var A=gm();(Dr!==s||Hr!==l)&&($s=null,ta=It()+500,xo(s,l));do try{S2();break}catch(K){pm(s,K)}while(!0);bd(),jc.current=A,Nt=_,wr!==null?l=0:(Dr=null,Hr=0,l=kr)}if(l!==0){if(l===2&&(_=Rt(s),_!==0&&(w=_,l=sf(s,_))),l===1)throw p=dl,xo(s,0),Oi(s,w),gn(s,It()),p;if(l===6)Oi(s,w);else{if(_=s.current.alternate,(w&30)===0&&!C2(_)&&(l=Uc(s,w),l===2&&(A=Rt(s),A!==0&&(w=A,l=sf(s,A))),l===1))throw p=dl,xo(s,0),Oi(s,w),gn(s,It()),p;switch(s.finishedWork=_,s.finishedLanes=w,l){case 0:case 1:throw Error(n(345));case 2:yo(s,pn,$s);break;case 3:if(Oi(s,w),(w&130023424)===w&&(l=tf+500-It(),10<l)){if(An(s,0)!==0)break;if(_=s.suspendedLanes,(_&w)!==w){nn(),s.pingedLanes|=s.suspendedLanes&_;break}s.timeoutHandle=ud(yo.bind(null,s,pn,$s),l);break}yo(s,pn,$s);break;case 4:if(Oi(s,w),(w&4194240)===w)break;for(l=s.eventTimes,_=-1;0<w;){var L=31-tn(w);A=1<<L,L=l[L],L>_&&(_=L),w&=~A}if(w=_,w=It()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*E2(w/1960))-w,10<w){s.timeoutHandle=ud(yo.bind(null,s,pn,$s),w);break}yo(s,pn,$s);break;case 5:yo(s,pn,$s);break;default:throw Error(n(329))}}}return gn(s,It()),s.callbackNode===p?hm.bind(null,s):null}function sf(s,l){var p=fl;return s.current.memoizedState.isDehydrated&&(xo(s,l).flags|=256),s=Uc(s,l),s!==2&&(l=pn,pn=p,l!==null&&of(l)),s}function of(s){pn===null?pn=s:pn.push.apply(pn,s)}function C2(s){for(var l=s;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var w=0;w<p.length;w++){var _=p[w],A=_.getSnapshot;_=_.value;try{if(!ie(A(),_))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Oi(s,l){for(l&=~ef,l&=~Pc,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var p=31-tn(l),w=1<<p;s[p]=-1,l&=~w}}function mm(s){if((Nt&6)!==0)throw Error(n(327));ra();var l=An(s,0);if((l&1)===0)return gn(s,It()),null;var p=Uc(s,l);if(s.tag!==0&&p===2){var w=Rt(s);w!==0&&(l=w,p=sf(s,w))}if(p===1)throw p=dl,xo(s,0),Oi(s,l),gn(s,It()),p;if(p===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,yo(s,pn,$s),gn(s,It()),null}function af(s,l){var p=Nt;Nt|=1;try{return s(l)}finally{Nt=p,Nt===0&&(ta=It()+500,hc&&Si())}}function go(s){Ii!==null&&Ii.tag===0&&(Nt&6)===0&&ra();var l=Nt;Nt|=1;var p=Yn.transition,w=dt;try{if(Yn.transition=null,dt=1,s)return s()}finally{dt=w,Yn.transition=p,Nt=l,(Nt&6)===0&&Si()}}function lf(){jn=ea.current,$t(ea)}function xo(s,l){s.finishedWork=null,s.finishedLanes=0;var p=s.timeoutHandle;if(p!==-1&&(s.timeoutHandle=-1,Jw(p)),wr!==null)for(p=wr.return;p!==null;){var w=p;switch(gd(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&dc();break;case 3:Zo(),$t(fn),$t(Yr),kd();break;case 5:Ad(w);break;case 4:Zo();break;case 13:$t(tr);break;case 19:$t(tr);break;case 10:Ed(w.type._context);break;case 22:case 23:lf()}p=p.return}if(Dr=s,wr=s=ji(s.current,null),Hr=jn=l,kr=0,dl=null,ef=Pc=po=0,pn=fl=null,fo!==null){for(l=0;l<fo.length;l++)if(p=fo[l],w=p.interleaved,w!==null){p.interleaved=null;var _=w.next,A=p.pending;if(A!==null){var L=A.next;A.next=_,w.next=L}p.pending=w}fo=null}return s}function pm(s,l){do{var p=wr;try{if(bd(),Cc.current=Ac,_c){for(var w=rr.memoizedState;w!==null;){var _=w.queue;_!==null&&(_.pending=null),w=w.next}_c=!1}if(mo=0,Pr=Tr=rr=null,il=!1,ol=0,Jd.current=null,p===null||p.return===null){kr=1,dl=l,wr=null;break}e:{var A=s,L=p.return,K=p,Q=l;if(l=Hr,K.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ye=Q,Ae=K,ke=Ae.tag;if((Ae.mode&1)===0&&(ke===0||ke===11||ke===15)){var Se=Ae.alternate;Se?(Ae.updateQueue=Se.updateQueue,Ae.memoizedState=Se.memoizedState,Ae.lanes=Se.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Fe=U1(L);if(Fe!==null){Fe.flags&=-257,z1(Fe,L,K,A,l),Fe.mode&1&&F1(A,ye,l),l=Fe,Q=ye;var Ve=l.updateQueue;if(Ve===null){var He=new Set;He.add(Q),l.updateQueue=He}else Ve.add(Q);break e}else{if((l&1)===0){F1(A,ye,l),cf();break e}Q=Error(n(426))}}else if(Zt&&K.mode&1){var mr=U1(L);if(mr!==null){(mr.flags&65536)===0&&(mr.flags|=256),z1(mr,L,K,A,l),wd(Qo(Q,K));break e}}A=Q=Qo(Q,K),kr!==4&&(kr=2),fl===null?fl=[A]:fl.push(A),A=L;do{switch(A.tag){case 3:A.flags|=65536,l&=-l,A.lanes|=l;var le=L1(A,Q,l);u1(A,le);break e;case 1:K=Q;var ne=A.type,de=A.stateNode;if((A.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(ki===null||!ki.has(de)))){A.flags|=65536,l&=-l,A.lanes|=l;var De=B1(A,K,l);u1(A,De);break e}}A=A.return}while(A!==null)}ym(p)}catch(We){l=We,wr===p&&p!==null&&(wr=p=p.return);continue}break}while(!0)}function gm(){var s=jc.current;return jc.current=Ac,s===null?Ac:s}function cf(){(kr===0||kr===3||kr===2)&&(kr=4),Dr===null||(po&268435455)===0&&(Pc&268435455)===0||Oi(Dr,Hr)}function Uc(s,l){var p=Nt;Nt|=2;var w=gm();(Dr!==s||Hr!==l)&&($s=null,xo(s,l));do try{_2();break}catch(_){pm(s,_)}while(!0);if(bd(),Nt=p,jc.current=w,wr!==null)throw Error(n(261));return Dr=null,Hr=0,kr}function _2(){for(;wr!==null;)xm(wr)}function S2(){for(;wr!==null&&!Ft();)xm(wr)}function xm(s){var l=bm(s.alternate,s,jn);s.memoizedProps=s.pendingProps,l===null?ym(s):wr=l,Jd.current=null}function ym(s){var l=s;do{var p=l.alternate;if(s=l.return,(l.flags&32768)===0){if(p=x2(p,l,jn),p!==null){wr=p;return}}else{if(p=y2(p,l),p!==null){p.flags&=32767,wr=p;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{kr=6,wr=null;return}}if(l=l.sibling,l!==null){wr=l;return}wr=l=s}while(l!==null);kr===0&&(kr=5)}function yo(s,l,p){var w=dt,_=Yn.transition;try{Yn.transition=null,dt=1,N2(s,l,p,w)}finally{Yn.transition=_,dt=w}return null}function N2(s,l,p,w){do ra();while(Ii!==null);if((Nt&6)!==0)throw Error(n(327));p=s.finishedWork;var _=s.finishedLanes;if(p===null)return null;if(s.finishedWork=null,s.finishedLanes=0,p===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var A=p.lanes|p.childLanes;if(qe(s,A),s===Dr&&(wr=Dr=null,Hr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Mc||(Mc=!0,Em(Lt,function(){return ra(),null})),A=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||A){A=Yn.transition,Yn.transition=null;var L=dt;dt=1;var K=Nt;Nt|=4,Jd.current=null,v2(s,p),lm(p,s),Xr(ld),bs=!!ad,ld=ad=null,s.current=p,b2(p),Gl(),Nt=K,dt=L,Yn.transition=A}else s.current=p;if(Mc&&(Mc=!1,Ii=s,Lc=_),A=s.pendingLanes,A===0&&(ki=null),vt(p.stateNode),gn(s,It()),l!==null)for(w=s.onRecoverableError,p=0;p<l.length;p++)_=l[p],w(_.value,{componentStack:_.stack,digest:_.digest});if(Dc)throw Dc=!1,s=rf,rf=null,s;return(Lc&1)!==0&&s.tag!==0&&ra(),A=s.pendingLanes,(A&1)!==0?s===nf?hl++:(hl=0,nf=s):hl=0,Si(),null}function ra(){if(Ii!==null){var s=Kl(Lc),l=Yn.transition,p=dt;try{if(Yn.transition=null,dt=16>s?16:s,Ii===null)var w=!1;else{if(s=Ii,Ii=null,Lc=0,(Nt&6)!==0)throw Error(n(331));var _=Nt;for(Nt|=4,ze=s.current;ze!==null;){var A=ze,L=A.child;if((ze.flags&16)!==0){var K=A.deletions;if(K!==null){for(var Q=0;Q<K.length;Q++){var ye=K[Q];for(ze=ye;ze!==null;){var Ae=ze;switch(Ae.tag){case 0:case 11:case 15:ul(8,Ae,A)}var ke=Ae.child;if(ke!==null)ke.return=Ae,ze=ke;else for(;ze!==null;){Ae=ze;var Se=Ae.sibling,Fe=Ae.return;if(nm(Ae),Ae===ye){ze=null;break}if(Se!==null){Se.return=Fe,ze=Se;break}ze=Fe}}}var Ve=A.alternate;if(Ve!==null){var He=Ve.child;if(He!==null){Ve.child=null;do{var mr=He.sibling;He.sibling=null,He=mr}while(He!==null)}}ze=A}}if((A.subtreeFlags&2064)!==0&&L!==null)L.return=A,ze=L;else e:for(;ze!==null;){if(A=ze,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:ul(9,A,A.return)}var le=A.sibling;if(le!==null){le.return=A.return,ze=le;break e}ze=A.return}}var ne=s.current;for(ze=ne;ze!==null;){L=ze;var de=L.child;if((L.subtreeFlags&2064)!==0&&de!==null)de.return=L,ze=de;else e:for(L=ne;ze!==null;){if(K=ze,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:Oc(9,K)}}catch(We){lr(K,K.return,We)}if(K===L){ze=null;break e}var De=K.sibling;if(De!==null){De.return=K.return,ze=De;break e}ze=K.return}}if(Nt=_,Si(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Ct,s)}catch{}w=!0}return w}finally{dt=p,Yn.transition=l}}return!1}function wm(s,l,p){l=Qo(p,l),l=L1(s,l,1),s=Ai(s,l,1),l=nn(),s!==null&&(W(s,1,l),gn(s,l))}function lr(s,l,p){if(s.tag===3)wm(s,s,p);else for(;l!==null;){if(l.tag===3){wm(l,s,p);break}else if(l.tag===1){var w=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(ki===null||!ki.has(w))){s=Qo(p,s),s=B1(l,s,1),l=Ai(l,s,1),s=nn(),l!==null&&(W(l,1,s),gn(l,s));break}}l=l.return}}function A2(s,l,p){var w=s.pingCache;w!==null&&w.delete(l),l=nn(),s.pingedLanes|=s.suspendedLanes&p,Dr===s&&(Hr&p)===p&&(kr===4||kr===3&&(Hr&130023424)===Hr&&500>It()-tf?xo(s,0):ef|=p),gn(s,l)}function vm(s,l){l===0&&((s.mode&1)===0?l=1:(l=Oo,Oo<<=1,(Oo&130023424)===0&&(Oo=4194304)));var p=nn();s=Ws(s,l),s!==null&&(W(s,l,p),gn(s,p))}function T2(s){var l=s.memoizedState,p=0;l!==null&&(p=l.retryLane),vm(s,p)}function k2(s,l){var p=0;switch(s.tag){case 13:var w=s.stateNode,_=s.memoizedState;_!==null&&(p=_.retryLane);break;case 19:w=s.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(l),vm(s,p)}var bm;bm=function(s,l,p){if(s!==null)if(s.memoizedProps!==l.pendingProps||fn.current)mn=!0;else{if((s.lanes&p)===0&&(l.flags&128)===0)return mn=!1,g2(s,l,p);mn=(s.flags&131072)!==0}else mn=!1,Zt&&(l.flags&1048576)!==0&&e1(l,pc,l.index);switch(l.lanes=0,l.tag){case 2:var w=l.type;Ic(s,l),s=l.pendingProps;var _=Wo(l,Yr.current);Yo(l,p),_=Od(null,l,w,s,_,p);var A=jd();return l.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,hn(w)?(A=!0,fc(l)):A=!1,l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Sd(l),_.updater=Tc,l.stateNode=_,_._reactInternals=l,Fd(l,w,s,p),l=Hd(null,l,w,!0,A,p)):(l.tag=0,Zt&&A&&pd(l),rn(null,l,_,p),l=l.child),l;case 16:w=l.elementType;e:{switch(Ic(s,l),s=l.pendingProps,_=w._init,w=_(w._payload),l.type=w,_=l.tag=R2(w),s=os(w,s),_){case 0:l=Vd(null,l,w,s,p);break e;case 1:l=$1(null,l,w,s,p);break e;case 11:l=V1(null,l,w,s,p);break e;case 14:l=H1(null,l,w,os(w.type,s),p);break e}throw Error(n(306,w,""))}return l;case 0:return w=l.type,_=l.pendingProps,_=l.elementType===w?_:os(w,_),Vd(s,l,w,_,p);case 1:return w=l.type,_=l.pendingProps,_=l.elementType===w?_:os(w,_),$1(s,l,w,_,p);case 3:e:{if(K1(l),s===null)throw Error(n(387));w=l.pendingProps,A=l.memoizedState,_=A.element,c1(s,l),bc(l,w,null,p);var L=l.memoizedState;if(w=L.element,A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){_=Qo(Error(n(423)),l),l=X1(s,l,w,p,_);break e}else if(w!==_){_=Qo(Error(n(424)),l),l=X1(s,l,w,p,_);break e}else for(On=Ei(l.stateNode.containerInfo.firstChild),Rn=l,Zt=!0,is=null,p=a1(l,null,w,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if($o(),w===_){l=qs(s,l,p);break e}rn(s,l,w,p)}l=l.child}return l;case 5:return f1(l),s===null&&yd(l),w=l.type,_=l.pendingProps,A=s!==null?s.memoizedProps:null,L=_.children,cd(w,_)?L=null:A!==null&&cd(w,A)&&(l.flags|=32),q1(s,l),rn(s,l,L,p),l.child;case 6:return s===null&&yd(l),null;case 13:return Y1(s,l,p);case 4:return Nd(l,l.stateNode.containerInfo),w=l.pendingProps,s===null?l.child=Ko(l,null,w,p):rn(s,l,w,p),l.child;case 11:return w=l.type,_=l.pendingProps,_=l.elementType===w?_:os(w,_),V1(s,l,w,_,p);case 7:return rn(s,l,l.pendingProps,p),l.child;case 8:return rn(s,l,l.pendingProps.children,p),l.child;case 12:return rn(s,l,l.pendingProps.children,p),l.child;case 10:e:{if(w=l.type._context,_=l.pendingProps,A=l.memoizedProps,L=_.value,Vt(yc,w._currentValue),w._currentValue=L,A!==null)if(ie(A.value,L)){if(A.children===_.children&&!fn.current){l=qs(s,l,p);break e}}else for(A=l.child,A!==null&&(A.return=l);A!==null;){var K=A.dependencies;if(K!==null){L=A.child;for(var Q=K.firstContext;Q!==null;){if(Q.context===w){if(A.tag===1){Q=Gs(-1,p&-p),Q.tag=2;var ye=A.updateQueue;if(ye!==null){ye=ye.shared;var Ae=ye.pending;Ae===null?Q.next=Q:(Q.next=Ae.next,Ae.next=Q),ye.pending=Q}}A.lanes|=p,Q=A.alternate,Q!==null&&(Q.lanes|=p),Cd(A.return,p,l),K.lanes|=p;break}Q=Q.next}}else if(A.tag===10)L=A.type===l.type?null:A.child;else if(A.tag===18){if(L=A.return,L===null)throw Error(n(341));L.lanes|=p,K=L.alternate,K!==null&&(K.lanes|=p),Cd(L,p,l),L=A.sibling}else L=A.child;if(L!==null)L.return=A;else for(L=A;L!==null;){if(L===l){L=null;break}if(A=L.sibling,A!==null){A.return=L.return,L=A;break}L=L.return}A=L}rn(s,l,_.children,p),l=l.child}return l;case 9:return _=l.type,w=l.pendingProps.children,Yo(l,p),_=Kn(_),w=w(_),l.flags|=1,rn(s,l,w,p),l.child;case 14:return w=l.type,_=os(w,l.pendingProps),_=os(w.type,_),H1(s,l,w,_,p);case 15:return W1(s,l,l.type,l.pendingProps,p);case 17:return w=l.type,_=l.pendingProps,_=l.elementType===w?_:os(w,_),Ic(s,l),l.tag=1,hn(w)?(s=!0,fc(l)):s=!1,Yo(l,p),D1(l,w,_),Fd(l,w,_,p),Hd(null,l,w,!0,s,p);case 19:return Q1(s,l,p);case 22:return G1(s,l,p)}throw Error(n(156,l.tag))};function Em(s,l){return Sn(s,l)}function I2(s,l,p,w){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(s,l,p,w){return new I2(s,l,p,w)}function uf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function R2(s){if(typeof s=="function")return uf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Y)return 11;if(s===ee)return 14}return 2}function ji(s,l){var p=s.alternate;return p===null?(p=Zn(s.tag,l,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=l,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&14680064,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,l=s.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p}function zc(s,l,p,w,_,A){var L=2;if(w=s,typeof s=="function")uf(s)&&(L=1);else if(typeof s=="string")L=5;else e:switch(s){case H:return wo(p.children,_,A,l);case se:L=8,_|=8;break;case $:return s=Zn(12,p,l,_|2),s.elementType=$,s.lanes=A,s;case fe:return s=Zn(13,p,l,_),s.elementType=fe,s.lanes=A,s;case oe:return s=Zn(19,p,l,_),s.elementType=oe,s.lanes=A,s;case he:return Vc(p,_,A,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case be:L=10;break e;case X:L=9;break e;case Y:L=11;break e;case ee:L=14;break e;case _e:L=16,w=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=Zn(L,p,l,_),l.elementType=s,l.type=w,l.lanes=A,l}function wo(s,l,p,w){return s=Zn(7,s,w,l),s.lanes=p,s}function Vc(s,l,p,w){return s=Zn(22,s,w,l),s.elementType=he,s.lanes=p,s.stateNode={isHidden:!1},s}function df(s,l,p){return s=Zn(6,s,null,l),s.lanes=p,s}function ff(s,l,p){return l=Zn(4,s.children!==null?s.children:[],s.key,l),l.lanes=p,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function O2(s,l,p,w,_){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ae(0),this.expirationTimes=ae(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ae(0),this.identifierPrefix=w,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function hf(s,l,p,w,_,A,L,K,Q){return s=new O2(s,l,p,K,Q),l===1?(l=1,A===!0&&(l|=8)):l=0,A=Zn(3,null,null,l),s.current=A,A.stateNode=s,A.memoizedState={element:w,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(A),s}function j2(s,l,p){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:w==null?null:""+w,children:s,containerInfo:l,implementation:p}}function Cm(s){if(!s)return _i;s=s._reactInternals;e:{if(dn(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(hn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var p=s.type;if(hn(p))return Z0(s,p,l)}return l}function _m(s,l,p,w,_,A,L,K,Q){return s=hf(p,w,!0,s,_,A,L,K,Q),s.context=Cm(null),p=s.current,w=nn(),_=Ri(p),A=Gs(w,_),A.callback=l??null,Ai(p,A,_),s.current.lanes=_,W(s,_,w),gn(s,w),s}function Hc(s,l,p,w){var _=l.current,A=nn(),L=Ri(_);return p=Cm(p),l.context===null?l.context=p:l.pendingContext=p,l=Gs(A,L),l.payload={element:s},w=w===void 0?null:w,w!==null&&(l.callback=w),s=Ai(_,l,L),s!==null&&(cs(s,_,L,A),vc(s,_,L)),L}function Wc(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function Sm(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<l?p:l}}function mf(s,l){Sm(s,l),(s=s.alternate)&&Sm(s,l)}function P2(){return null}var Nm=typeof reportError=="function"?reportError:function(s){console.error(s)};function pf(s){this._internalRoot=s}Gc.prototype.render=pf.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));Hc(s,l,null,null)},Gc.prototype.unmount=pf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;go(function(){Hc(null,s,null,null)}),l[Us]=null}};function Gc(s){this._internalRoot=s}Gc.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ut();s={blockedOn:null,target:s,priority:l};for(var p=0;p<Fr.length&&l!==0&&l<Fr[p].priority;p++);Fr.splice(p,0,s),p===0&&Yl(s)}};function gf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function qc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Am(){}function D2(s,l,p,w,_){if(_){if(typeof w=="function"){var A=w;w=function(){var ye=Wc(L);A.call(ye)}}var L=_m(l,w,s,0,null,!1,!1,"",Am);return s._reactRootContainer=L,s[Us]=L.current,Za(s.nodeType===8?s.parentNode:s),go(),L}for(;_=s.lastChild;)s.removeChild(_);if(typeof w=="function"){var K=w;w=function(){var ye=Wc(Q);K.call(ye)}}var Q=hf(s,0,!1,null,null,!1,!1,"",Am);return s._reactRootContainer=Q,s[Us]=Q.current,Za(s.nodeType===8?s.parentNode:s),go(function(){Hc(l,Q,p,w)}),Q}function $c(s,l,p,w,_){var A=p._reactRootContainer;if(A){var L=A;if(typeof _=="function"){var K=_;_=function(){var Q=Wc(L);K.call(Q)}}Hc(l,L,s,_)}else L=D2(p,l,s,_,w);return Wc(L)}jo=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var p=Bt(l.pendingLanes);p!==0&&(or(l,p|1),gn(l,It()),(Nt&6)===0&&(ta=It()+500,Si()))}break;case 13:go(function(){var w=Ws(s,1);if(w!==null){var _=nn();cs(w,s,1,_)}}),mf(s,1)}},Kr=function(s){if(s.tag===13){var l=Ws(s,134217728);if(l!==null){var p=nn();cs(l,s,134217728,p)}mf(s,134217728)}},Xe=function(s){if(s.tag===13){var l=Ri(s),p=Ws(s,l);if(p!==null){var w=nn();cs(p,s,l,w)}mf(s,l)}},Ut=function(){return dt},La=function(s,l){var p=dt;try{return dt=s,l()}finally{dt=p}},Ps=function(s,l,p){switch(l){case"input":if(Jt(s,p),l=p.name,p.type==="radio"&&l!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var w=p[l];if(w!==s&&w.form===s.form){var _=uc(w);if(!_)throw Error(n(90));At(w),Jt(w,_)}}}break;case"textarea":ln(s,p);break;case"select":l=p.value,l!=null&&Le(s,!!p.multiple,l,!1)}},Et=af,ct=go;var M2={usingClientEntryPoint:!1,Events:[el,Vo,uc,Xi,Ge,af]},ml={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L2={bundleType:ml.bundleType,version:ml.version,rendererPackageName:ml.rendererPackageName,rendererConfig:ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Hl(s),s===null?null:s.stateNode},findFiberByHostInstance:ml.findFiberByHostInstance||P2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{Ct=Kc.inject(L2),ut=Kc}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M2,xn.createPortal=function(s,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gf(l))throw Error(n(200));return j2(s,l,null,p)},xn.createRoot=function(s,l){if(!gf(s))throw Error(n(299));var p=!1,w="",_=Nm;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=hf(s,1,!1,null,null,p,!1,w,_),s[Us]=l.current,Za(s.nodeType===8?s.parentNode:s),new pf(l)},xn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Hl(l),s=s===null?null:s.stateNode,s},xn.flushSync=function(s){return go(s)},xn.hydrate=function(s,l,p){if(!qc(l))throw Error(n(200));return $c(null,s,l,!0,p)},xn.hydrateRoot=function(s,l,p){if(!gf(s))throw Error(n(405));var w=p!=null&&p.hydratedSources||null,_=!1,A="",L=Nm;if(p!=null&&(p.unstable_strictMode===!0&&(_=!0),p.identifierPrefix!==void 0&&(A=p.identifierPrefix),p.onRecoverableError!==void 0&&(L=p.onRecoverableError)),l=_m(l,null,s,1,p??null,_,!1,A,L),s[Us]=l.current,Za(s),w)for(s=0;s<w.length;s++)p=w[s],_=p._getVersion,_=_(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,_]:l.mutableSourceEagerHydrationData.push(p,_);return new Gc(l)},xn.render=function(s,l,p){if(!qc(l))throw Error(n(200));return $c(null,s,l,!1,p)},xn.unmountComponentAtNode=function(s){if(!qc(s))throw Error(n(40));return s._reactRootContainer?(go(function(){$c(null,null,s,!1,function(){s._reactRootContainer=null,s[Us]=null})}),!0):!1},xn.unstable_batchedUpdates=af,xn.unstable_renderSubtreeIntoContainer=function(s,l,p,w){if(!qc(p))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return $c(s,l,p,!1,w)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var Dm;function qg(){if(Dm)return wf.exports;Dm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wf.exports=G2(),wf.exports}var Mm;function q2(){if(Mm)return Yc;Mm=1;var t=qg();return Yc.createRoot=t.createRoot,Yc.hydrateRoot=t.hydrateRoot,Yc}var $2=q2(),O=Yh();const Me=Xh(O),Zh=F2({__proto__:null,default:Me},[O]),K2=1,X2=1e6;let Ef=0;function Y2(){return Ef=(Ef+1)%Number.MAX_SAFE_INTEGER,Ef.toString()}const Cf=new Map,Lm=t=>{if(Cf.has(t))return;const e=setTimeout(()=>{Cf.delete(t),El({type:"REMOVE_TOAST",toastId:t})},X2);Cf.set(t,e)},Z2=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,K2)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Lm(n):t.toasts.forEach(o=>{Lm(o.id)}),{...t,toasts:t.toasts.map(o=>o.id===n||n===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},fu=[];let hu={toasts:[]};function El(t){hu=Z2(hu,t),fu.forEach(e=>{e(hu)})}function Q2({...t}){const e=Y2(),n=c=>El({type:"UPDATE_TOAST",toast:{...c,id:e}}),o=()=>El({type:"DISMISS_TOAST",toastId:e});return El({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:c=>{c||o()}}}),{id:e,dismiss:o,update:n}}function an(){const[t,e]=O.useState(hu);return O.useEffect(()=>(fu.push(e),()=>{const n=fu.indexOf(e);n>-1&&fu.splice(n,1)}),[t]),{...t,toast:Q2,dismiss:n=>El({type:"DISMISS_TOAST",toastId:n})}}var ju=qg();const $g=Xh(ju);function Qt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(c){if(t?.(c),n===!1||!c.defaultPrevented)return e?.(c)}}function Bm(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Kg(...t){return e=>{let n=!1;const o=t.map(c=>{const d=Bm(c,e);return!n&&typeof d=="function"&&(n=!0),d});if(n)return()=>{for(let c=0;c<o.length;c++){const d=o[c];typeof d=="function"?d():Bm(t[c],null)}}}}function on(...t){return O.useCallback(Kg(...t),t)}function J2(t,e){const n=O.createContext(e),o=d=>{const{children:g,...y}=d,v=O.useMemo(()=>y,Object.values(y));return h.jsx(n.Provider,{value:v,children:g})};o.displayName=t+"Provider";function c(d){const g=O.useContext(n);if(g)return g;if(e!==void 0)return e;throw new Error(`\`${d}\` must be used within \`${t}\``)}return[o,c]}function Bl(t,e=[]){let n=[];function o(d,g){const y=O.createContext(g),v=n.length;n=[...n,g];const b=N=>{const{scope:R,children:T,...D}=N,I=R?.[t]?.[v]||y,M=O.useMemo(()=>D,Object.values(D));return h.jsx(I.Provider,{value:M,children:T})};b.displayName=d+"Provider";function S(N,R){const T=R?.[t]?.[v]||y,D=O.useContext(T);if(D)return D;if(g!==void 0)return g;throw new Error(`\`${N}\` must be used within \`${d}\``)}return[b,S]}const c=()=>{const d=n.map(g=>O.createContext(g));return function(y){const v=y?.[t]||d;return O.useMemo(()=>({[`__scope${t}`]:{...y,[t]:v}}),[y,v])}};return c.scopeName=t,[o,ev(c,...e)]}function ev(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const o=t.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(d){const g=o.reduce((y,{useScope:v,scopeName:b})=>{const N=v(d)[`__scope${b}`];return{...y,...N}},{});return O.useMemo(()=>({[`__scope${e.scopeName}`]:g}),[g])}};return n.scopeName=e.scopeName,n}function yu(t){const e=tv(t),n=O.forwardRef((o,c)=>{const{children:d,...g}=o,y=O.Children.toArray(d),v=y.find(nv);if(v){const b=v.props.children,S=y.map(N=>N===v?O.Children.count(b)>1?O.Children.only(null):O.isValidElement(b)?b.props.children:null:N);return h.jsx(e,{...g,ref:c,children:O.isValidElement(b)?O.cloneElement(b,void 0,S):null})}return h.jsx(e,{...g,ref:c,children:d})});return n.displayName=`${t}.Slot`,n}function tv(t){const e=O.forwardRef((n,o)=>{const{children:c,...d}=n;if(O.isValidElement(c)){const g=iv(c),y=sv(d,c.props);return c.type!==O.Fragment&&(y.ref=o?Kg(o,g):g),O.cloneElement(c,y)}return O.Children.count(c)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Xg=Symbol("radix.slottable");function rv(t){const e=({children:n})=>h.jsx(h.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Xg,e}function nv(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Xg}function sv(t,e){const n={...e};for(const o in e){const c=t[o],d=e[o];/^on[A-Z]/.test(o)?c&&d?n[o]=(...y)=>{const v=d(...y);return c(...y),v}:c&&(n[o]=c):o==="style"?n[o]={...c,...d}:o==="className"&&(n[o]=[c,d].filter(Boolean).join(" "))}return{...t,...n}}function iv(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ov(t){const e=t+"CollectionProvider",[n,o]=Bl(e),[c,d]=n(e,{collectionRef:{current:null},itemMap:new Map}),g=I=>{const{scope:M,children:z}=I,U=Me.useRef(null),B=Me.useRef(new Map).current;return h.jsx(c,{scope:M,itemMap:B,collectionRef:U,children:z})};g.displayName=e;const y=t+"CollectionSlot",v=yu(y),b=Me.forwardRef((I,M)=>{const{scope:z,children:U}=I,B=d(y,z),V=on(M,B.collectionRef);return h.jsx(v,{ref:V,children:U})});b.displayName=y;const S=t+"CollectionItemSlot",N="data-radix-collection-item",R=yu(S),T=Me.forwardRef((I,M)=>{const{scope:z,children:U,...B}=I,V=Me.useRef(null),re=on(M,V),G=d(S,z);return Me.useEffect(()=>(G.itemMap.set(V,{ref:V,...B}),()=>{G.itemMap.delete(V)})),h.jsx(R,{[N]:"",ref:re,children:U})});T.displayName=S;function D(I){const M=d(t+"CollectionConsumer",I);return Me.useCallback(()=>{const U=M.collectionRef.current;if(!U)return[];const B=Array.from(U.querySelectorAll(`[${N}]`));return Array.from(M.itemMap.values()).sort((G,H)=>B.indexOf(G.ref.current)-B.indexOf(H.ref.current))},[M.collectionRef,M.itemMap])}return[{Provider:g,Slot:b,ItemSlot:T},D,o]}var av=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],br=av.reduce((t,e)=>{const n=yu(`Primitive.${e}`),o=O.forwardRef((c,d)=>{const{asChild:g,...y}=c,v=g?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(v,{...y,ref:d})});return o.displayName=`Primitive.${e}`,{...t,[e]:o}},{});function Yg(t,e){t&&ju.flushSync(()=>t.dispatchEvent(e))}function Rs(t){const e=O.useRef(t);return O.useEffect(()=>{e.current=t}),O.useMemo(()=>(...n)=>e.current?.(...n),[])}function lv(t,e=globalThis?.document){const n=Rs(t);O.useEffect(()=>{const o=c=>{c.key==="Escape"&&n(c)};return e.addEventListener("keydown",o,{capture:!0}),()=>e.removeEventListener("keydown",o,{capture:!0})},[n,e])}var cv="DismissableLayer",xh="dismissableLayer.update",uv="dismissableLayer.pointerDownOutside",dv="dismissableLayer.focusOutside",Fm,Zg=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pu=O.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:g,onDismiss:y,...v}=t,b=O.useContext(Zg),[S,N]=O.useState(null),R=S?.ownerDocument??globalThis?.document,[,T]=O.useState({}),D=on(e,H=>N(H)),I=Array.from(b.layers),[M]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),z=I.indexOf(M),U=S?I.indexOf(S):-1,B=b.layersWithOutsidePointerEventsDisabled.size>0,V=U>=z,re=hv(H=>{const se=H.target,$=[...b.branches].some(be=>be.contains(se));!V||$||(c?.(H),g?.(H),H.defaultPrevented||y?.())},R),G=mv(H=>{const se=H.target;[...b.branches].some(be=>be.contains(se))||(d?.(H),g?.(H),H.defaultPrevented||y?.())},R);return lv(H=>{U===b.layers.size-1&&(o?.(H),!H.defaultPrevented&&y&&(H.preventDefault(),y()))},R),O.useEffect(()=>{if(S)return n&&(b.layersWithOutsidePointerEventsDisabled.size===0&&(Fm=R.body.style.pointerEvents,R.body.style.pointerEvents="none"),b.layersWithOutsidePointerEventsDisabled.add(S)),b.layers.add(S),Um(),()=>{n&&b.layersWithOutsidePointerEventsDisabled.size===1&&(R.body.style.pointerEvents=Fm)}},[S,R,n,b]),O.useEffect(()=>()=>{S&&(b.layers.delete(S),b.layersWithOutsidePointerEventsDisabled.delete(S),Um())},[S,b]),O.useEffect(()=>{const H=()=>T({});return document.addEventListener(xh,H),()=>document.removeEventListener(xh,H)},[]),h.jsx(br.div,{...v,ref:D,style:{pointerEvents:B?V?"auto":"none":void 0,...t.style},onFocusCapture:Qt(t.onFocusCapture,G.onFocusCapture),onBlurCapture:Qt(t.onBlurCapture,G.onBlurCapture),onPointerDownCapture:Qt(t.onPointerDownCapture,re.onPointerDownCapture)})});Pu.displayName=cv;var fv="DismissableLayerBranch",Qg=O.forwardRef((t,e)=>{const n=O.useContext(Zg),o=O.useRef(null),c=on(e,o);return O.useEffect(()=>{const d=o.current;if(d)return n.branches.add(d),()=>{n.branches.delete(d)}},[n.branches]),h.jsx(br.div,{...t,ref:c})});Qg.displayName=fv;function hv(t,e=globalThis?.document){const n=Rs(t),o=O.useRef(!1),c=O.useRef(()=>{});return O.useEffect(()=>{const d=y=>{if(y.target&&!o.current){let v=function(){Jg(uv,n,b,{discrete:!0})};const b={originalEvent:y};y.pointerType==="touch"?(e.removeEventListener("click",c.current),c.current=v,e.addEventListener("click",c.current,{once:!0})):v()}else e.removeEventListener("click",c.current);o.current=!1},g=window.setTimeout(()=>{e.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(g),e.removeEventListener("pointerdown",d),e.removeEventListener("click",c.current)}},[e,n]),{onPointerDownCapture:()=>o.current=!0}}function mv(t,e=globalThis?.document){const n=Rs(t),o=O.useRef(!1);return O.useEffect(()=>{const c=d=>{d.target&&!o.current&&Jg(dv,n,{originalEvent:d},{discrete:!1})};return e.addEventListener("focusin",c),()=>e.removeEventListener("focusin",c)},[e,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function Um(){const t=new CustomEvent(xh);document.dispatchEvent(t)}function Jg(t,e,n,{discrete:o}){const c=n.originalEvent.target,d=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&c.addEventListener(t,e,{once:!0}),o?Yg(c,d):c.dispatchEvent(d)}var pv=Pu,gv=Qg,Zs=globalThis?.document?O.useLayoutEffect:()=>{},xv="Portal",Qh=O.forwardRef((t,e)=>{const{container:n,...o}=t,[c,d]=O.useState(!1);Zs(()=>d(!0),[]);const g=n||c&&globalThis?.document?.body;return g?$g.createPortal(h.jsx(br.div,{...o,ref:e}),g):null});Qh.displayName=xv;function yv(t,e){return O.useReducer((n,o)=>e[n][o]??n,t)}var _a=t=>{const{present:e,children:n}=t,o=wv(e),c=typeof n=="function"?n({present:o.isPresent}):O.Children.only(n),d=on(o.ref,vv(c));return typeof n=="function"||o.isPresent?O.cloneElement(c,{ref:d}):null};_a.displayName="Presence";function wv(t){const[e,n]=O.useState(),o=O.useRef(null),c=O.useRef(t),d=O.useRef("none"),g=t?"mounted":"unmounted",[y,v]=yv(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const b=Zc(o.current);d.current=y==="mounted"?b:"none"},[y]),Zs(()=>{const b=o.current,S=c.current;if(S!==t){const R=d.current,T=Zc(b);t?v("MOUNT"):T==="none"||b?.display==="none"?v("UNMOUNT"):v(S&&R!==T?"ANIMATION_OUT":"UNMOUNT"),c.current=t}},[t,v]),Zs(()=>{if(e){let b;const S=e.ownerDocument.defaultView??window,N=T=>{const I=Zc(o.current).includes(T.animationName);if(T.target===e&&I&&(v("ANIMATION_END"),!c.current)){const M=e.style.animationFillMode;e.style.animationFillMode="forwards",b=S.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=M)})}},R=T=>{T.target===e&&(d.current=Zc(o.current))};return e.addEventListener("animationstart",R),e.addEventListener("animationcancel",N),e.addEventListener("animationend",N),()=>{S.clearTimeout(b),e.removeEventListener("animationstart",R),e.removeEventListener("animationcancel",N),e.removeEventListener("animationend",N)}}else v("ANIMATION_END")},[e,v]),{isPresent:["mounted","unmountSuspended"].includes(y),ref:O.useCallback(b=>{o.current=b?getComputedStyle(b):null,n(b)},[])}}function Zc(t){return t?.animationName||"none"}function vv(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var bv=Zh[" useInsertionEffect ".trim().toString()]||Zs;function ex({prop:t,defaultProp:e,onChange:n=()=>{},caller:o}){const[c,d,g]=Ev({defaultProp:e,onChange:n}),y=t!==void 0,v=y?t:c;{const S=O.useRef(t!==void 0);O.useEffect(()=>{const N=S.current;N!==y&&console.warn(`${o} is changing from ${N?"controlled":"uncontrolled"} to ${y?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),S.current=y},[y,o])}const b=O.useCallback(S=>{if(y){const N=Cv(S)?S(t):S;N!==t&&g.current?.(N)}else d(S)},[y,t,d,g]);return[v,b]}function Ev({defaultProp:t,onChange:e}){const[n,o]=O.useState(t),c=O.useRef(n),d=O.useRef(e);return bv(()=>{d.current=e},[e]),O.useEffect(()=>{c.current!==n&&(d.current?.(n),c.current=n)},[n,c]),[n,o,d]}function Cv(t){return typeof t=="function"}var _v=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Sv="VisuallyHidden",Du=O.forwardRef((t,e)=>h.jsx(br.span,{...t,ref:e,style:{..._v,...t.style}}));Du.displayName=Sv;var Nv=Du,Jh="ToastProvider",[e0,Av,Tv]=ov("Toast"),[tx]=Bl("Toast",[Tv]),[kv,Mu]=tx(Jh),rx=t=>{const{__scopeToast:e,label:n="Notification",duration:o=5e3,swipeDirection:c="right",swipeThreshold:d=50,children:g}=t,[y,v]=O.useState(null),[b,S]=O.useState(0),N=O.useRef(!1),R=O.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jh}\`. Expected non-empty \`string\`.`),h.jsx(e0.Provider,{scope:e,children:h.jsx(kv,{scope:e,label:n,duration:o,swipeDirection:c,swipeThreshold:d,toastCount:b,viewport:y,onViewportChange:v,onToastAdd:O.useCallback(()=>S(T=>T+1),[]),onToastRemove:O.useCallback(()=>S(T=>T-1),[]),isFocusedToastEscapeKeyDownRef:N,isClosePausedRef:R,children:g})})};rx.displayName=Jh;var nx="ToastViewport",Iv=["F8"],yh="toast.viewportPause",wh="toast.viewportResume",sx=O.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:o=Iv,label:c="Notifications ({hotkey})",...d}=t,g=Mu(nx,n),y=Av(n),v=O.useRef(null),b=O.useRef(null),S=O.useRef(null),N=O.useRef(null),R=on(e,N,g.onViewportChange),T=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=g.toastCount>0;O.useEffect(()=>{const M=z=>{o.length!==0&&o.every(B=>z[B]||z.code===B)&&N.current?.focus()};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[o]),O.useEffect(()=>{const M=v.current,z=N.current;if(D&&M&&z){const U=()=>{if(!g.isClosePausedRef.current){const G=new CustomEvent(yh);z.dispatchEvent(G),g.isClosePausedRef.current=!0}},B=()=>{if(g.isClosePausedRef.current){const G=new CustomEvent(wh);z.dispatchEvent(G),g.isClosePausedRef.current=!1}},V=G=>{!M.contains(G.relatedTarget)&&B()},re=()=>{M.contains(document.activeElement)||B()};return M.addEventListener("focusin",U),M.addEventListener("focusout",V),M.addEventListener("pointermove",U),M.addEventListener("pointerleave",re),window.addEventListener("blur",U),window.addEventListener("focus",B),()=>{M.removeEventListener("focusin",U),M.removeEventListener("focusout",V),M.removeEventListener("pointermove",U),M.removeEventListener("pointerleave",re),window.removeEventListener("blur",U),window.removeEventListener("focus",B)}}},[D,g.isClosePausedRef]);const I=O.useCallback(({tabbingDirection:M})=>{const U=y().map(B=>{const V=B.ref.current,re=[V,...Hv(V)];return M==="forwards"?re:re.reverse()});return(M==="forwards"?U.reverse():U).flat()},[y]);return O.useEffect(()=>{const M=N.current;if(M){const z=U=>{const B=U.altKey||U.ctrlKey||U.metaKey;if(U.key==="Tab"&&!B){const re=document.activeElement,G=U.shiftKey;if(U.target===M&&G){b.current?.focus();return}const $=I({tabbingDirection:G?"backwards":"forwards"}),be=$.findIndex(X=>X===re);_f($.slice(be+1))?U.preventDefault():G?b.current?.focus():S.current?.focus()}};return M.addEventListener("keydown",z),()=>M.removeEventListener("keydown",z)}},[y,I]),h.jsxs(gv,{ref:v,role:"region","aria-label":c.replace("{hotkey}",T),tabIndex:-1,style:{pointerEvents:D?void 0:"none"},children:[D&&h.jsx(vh,{ref:b,onFocusFromOutsideViewport:()=>{const M=I({tabbingDirection:"forwards"});_f(M)}}),h.jsx(e0.Slot,{scope:n,children:h.jsx(br.ol,{tabIndex:-1,...d,ref:R})}),D&&h.jsx(vh,{ref:S,onFocusFromOutsideViewport:()=>{const M=I({tabbingDirection:"backwards"});_f(M)}})]})});sx.displayName=nx;var ix="ToastFocusProxy",vh=O.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:o,...c}=t,d=Mu(ix,n);return h.jsx(Du,{"aria-hidden":!0,tabIndex:0,...c,ref:e,style:{position:"fixed"},onFocus:g=>{const y=g.relatedTarget;!d.viewport?.contains(y)&&o()}})});vh.displayName=ix;var Fl="Toast",Rv="toast.swipeStart",Ov="toast.swipeMove",jv="toast.swipeCancel",Pv="toast.swipeEnd",ox=O.forwardRef((t,e)=>{const{forceMount:n,open:o,defaultOpen:c,onOpenChange:d,...g}=t,[y,v]=ex({prop:o,defaultProp:c??!0,onChange:d,caller:Fl});return h.jsx(_a,{present:n||y,children:h.jsx(Lv,{open:y,...g,ref:e,onClose:()=>v(!1),onPause:Rs(t.onPause),onResume:Rs(t.onResume),onSwipeStart:Qt(t.onSwipeStart,b=>{b.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Qt(t.onSwipeMove,b=>{const{x:S,y:N}=b.detail.delta;b.currentTarget.setAttribute("data-swipe","move"),b.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${S}px`),b.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${N}px`)}),onSwipeCancel:Qt(t.onSwipeCancel,b=>{b.currentTarget.setAttribute("data-swipe","cancel"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),b.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Qt(t.onSwipeEnd,b=>{const{x:S,y:N}=b.detail.delta;b.currentTarget.setAttribute("data-swipe","end"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),b.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${S}px`),b.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${N}px`),v(!1)})})})});ox.displayName=Fl;var[Dv,Mv]=tx(Fl,{onClose(){}}),Lv=O.forwardRef((t,e)=>{const{__scopeToast:n,type:o="foreground",duration:c,open:d,onClose:g,onEscapeKeyDown:y,onPause:v,onResume:b,onSwipeStart:S,onSwipeMove:N,onSwipeCancel:R,onSwipeEnd:T,...D}=t,I=Mu(Fl,n),[M,z]=O.useState(null),U=on(e,oe=>z(oe)),B=O.useRef(null),V=O.useRef(null),re=c||I.duration,G=O.useRef(0),H=O.useRef(re),se=O.useRef(0),{onToastAdd:$,onToastRemove:be}=I,X=Rs(()=>{M?.contains(document.activeElement)&&I.viewport?.focus(),g()}),Y=O.useCallback(oe=>{!oe||oe===1/0||(window.clearTimeout(se.current),G.current=new Date().getTime(),se.current=window.setTimeout(X,oe))},[X]);O.useEffect(()=>{const oe=I.viewport;if(oe){const ee=()=>{Y(H.current),b?.()},_e=()=>{const he=new Date().getTime()-G.current;H.current=H.current-he,window.clearTimeout(se.current),v?.()};return oe.addEventListener(yh,_e),oe.addEventListener(wh,ee),()=>{oe.removeEventListener(yh,_e),oe.removeEventListener(wh,ee)}}},[I.viewport,re,v,b,Y]),O.useEffect(()=>{d&&!I.isClosePausedRef.current&&Y(re)},[d,re,I.isClosePausedRef,Y]),O.useEffect(()=>($(),()=>be()),[$,be]);const fe=O.useMemo(()=>M?hx(M):null,[M]);return I.viewport?h.jsxs(h.Fragment,{children:[fe&&h.jsx(Bv,{__scopeToast:n,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0,children:fe}),h.jsx(Dv,{scope:n,onClose:X,children:ju.createPortal(h.jsx(e0.ItemSlot,{scope:n,children:h.jsx(pv,{asChild:!0,onEscapeKeyDown:Qt(y,()=>{I.isFocusedToastEscapeKeyDownRef.current||X(),I.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(br.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":d?"open":"closed","data-swipe-direction":I.swipeDirection,...D,ref:U,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Qt(t.onKeyDown,oe=>{oe.key==="Escape"&&(y?.(oe.nativeEvent),oe.nativeEvent.defaultPrevented||(I.isFocusedToastEscapeKeyDownRef.current=!0,X()))}),onPointerDown:Qt(t.onPointerDown,oe=>{oe.button===0&&(B.current={x:oe.clientX,y:oe.clientY})}),onPointerMove:Qt(t.onPointerMove,oe=>{if(!B.current)return;const ee=oe.clientX-B.current.x,_e=oe.clientY-B.current.y,he=!!V.current,me=["left","right"].includes(I.swipeDirection),ge=["left","up"].includes(I.swipeDirection)?Math.min:Math.max,ve=me?ge(0,ee):0,te=me?0:ge(0,_e),ue=oe.pointerType==="touch"?10:2,je={x:ve,y:te},Ie={originalEvent:oe,delta:je};he?(V.current=je,Qc(Ov,N,Ie,{discrete:!1})):zm(je,I.swipeDirection,ue)?(V.current=je,Qc(Rv,S,Ie,{discrete:!1}),oe.target.setPointerCapture(oe.pointerId)):(Math.abs(ee)>ue||Math.abs(_e)>ue)&&(B.current=null)}),onPointerUp:Qt(t.onPointerUp,oe=>{const ee=V.current,_e=oe.target;if(_e.hasPointerCapture(oe.pointerId)&&_e.releasePointerCapture(oe.pointerId),V.current=null,B.current=null,ee){const he=oe.currentTarget,me={originalEvent:oe,delta:ee};zm(ee,I.swipeDirection,I.swipeThreshold)?Qc(Pv,T,me,{discrete:!0}):Qc(jv,R,me,{discrete:!0}),he.addEventListener("click",ge=>ge.preventDefault(),{once:!0})}})})})}),I.viewport)})]}):null}),Bv=t=>{const{__scopeToast:e,children:n,...o}=t,c=Mu(Fl,e),[d,g]=O.useState(!1),[y,v]=O.useState(!1);return zv(()=>g(!0)),O.useEffect(()=>{const b=window.setTimeout(()=>v(!0),1e3);return()=>window.clearTimeout(b)},[]),y?null:h.jsx(Qh,{asChild:!0,children:h.jsx(Du,{...o,children:d&&h.jsxs(h.Fragment,{children:[c.label," ",n]})})})},Fv="ToastTitle",ax=O.forwardRef((t,e)=>{const{__scopeToast:n,...o}=t;return h.jsx(br.div,{...o,ref:e})});ax.displayName=Fv;var Uv="ToastDescription",lx=O.forwardRef((t,e)=>{const{__scopeToast:n,...o}=t;return h.jsx(br.div,{...o,ref:e})});lx.displayName=Uv;var cx="ToastAction",ux=O.forwardRef((t,e)=>{const{altText:n,...o}=t;return n.trim()?h.jsx(fx,{altText:n,asChild:!0,children:h.jsx(t0,{...o,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${cx}\`. Expected non-empty \`string\`.`),null)});ux.displayName=cx;var dx="ToastClose",t0=O.forwardRef((t,e)=>{const{__scopeToast:n,...o}=t,c=Mv(dx,n);return h.jsx(fx,{asChild:!0,children:h.jsx(br.button,{type:"button",...o,ref:e,onClick:Qt(t.onClick,c.onClose)})})});t0.displayName=dx;var fx=O.forwardRef((t,e)=>{const{__scopeToast:n,altText:o,...c}=t;return h.jsx(br.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...c,ref:e})});function hx(t){const e=[];return Array.from(t.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&e.push(o.textContent),Vv(o)){const c=o.ariaHidden||o.hidden||o.style.display==="none",d=o.dataset.radixToastAnnounceExclude==="";if(!c)if(d){const g=o.dataset.radixToastAnnounceAlt;g&&e.push(g)}else e.push(...hx(o))}}),e}function Qc(t,e,n,{discrete:o}){const c=n.originalEvent.currentTarget,d=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&c.addEventListener(t,e,{once:!0}),o?Yg(c,d):c.dispatchEvent(d)}var zm=(t,e,n=0)=>{const o=Math.abs(t.x),c=Math.abs(t.y),d=o>c;return e==="left"||e==="right"?d&&o>n:!d&&c>n};function zv(t=()=>{}){const e=Rs(t);Zs(()=>{let n=0,o=0;return n=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(o)}},[e])}function Vv(t){return t.nodeType===t.ELEMENT_NODE}function Hv(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const c=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||c?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _f(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Wv=rx,mx=sx,px=ox,gx=ax,xx=lx,yx=ux,wx=t0;function vx(t){var e,n,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var c=t.length;for(e=0;e<c;e++)t[e]&&(n=vx(t[e]))&&(o&&(o+=" "),o+=n)}else for(n in t)t[n]&&(o&&(o+=" "),o+=n);return o}function bx(){for(var t,e,n=0,o="",c=arguments.length;n<c;n++)(t=arguments[n])&&(e=vx(t))&&(o&&(o+=" "),o+=e);return o}const Vm=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Hm=bx,Gv=(t,e)=>n=>{var o;if(e?.variants==null)return Hm(t,n?.class,n?.className);const{variants:c,defaultVariants:d}=e,g=Object.keys(c).map(b=>{const S=n?.[b],N=d?.[b];if(S===null)return null;const R=Vm(S)||Vm(N);return c[b][R]}),y=n&&Object.entries(n).reduce((b,S)=>{let[N,R]=S;return R===void 0||(b[N]=R),b},{}),v=e==null||(o=e.compoundVariants)===null||o===void 0?void 0:o.reduce((b,S)=>{let{class:N,className:R,...T}=S;return Object.entries(T).every(D=>{let[I,M]=D;return Array.isArray(M)?M.includes({...d,...y}[I]):{...d,...y}[I]===M})?[...b,N,R]:b},[]);return Hm(t,g,v,n?.class,n?.className)};const qv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ex=(...t)=>t.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim();var $v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Kv=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:g,...y},v)=>O.createElement("svg",{ref:v,...$v,width:e,height:e,stroke:t,strokeWidth:o?Number(n)*24/Number(e):n,className:Ex("lucide",c),...y},[...g.map(([b,S])=>O.createElement(b,S)),...Array.isArray(d)?d:[d]]));const rt=(t,e)=>{const n=O.forwardRef(({className:o,...c},d)=>O.createElement(Kv,{ref:d,iconNode:e,className:Ex(`lucide-${qv(t)}`,o),...c}));return n.displayName=`${t}`,n};const Xv=rt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Yv=rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Zv=rt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Cx=rt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Qv=rt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const bh=rt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Sl=rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Eh=rt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Sf=rt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const ps=rt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const No=rt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const mu=rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Jv=rt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const eb=rt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const _x=rt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Sx=rt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const tb=rt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const Nx=rt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const rb=rt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const nb=rt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);const sb=rt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const ib=rt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const ob=rt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const r0=rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Ax=rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const ab=rt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Tx=rt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const lb=rt("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);const cb=rt("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);const kx=rt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Ix=rt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const wu=rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const ub=rt("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);const n0=rt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);const Ch=rt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const db=rt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const Lu=rt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const fb=rt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Rx=rt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const Ox=rt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const hb=rt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const jx=rt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const Gi=rt("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);const s0=rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Px=rt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const mb=rt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Dx=rt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Sa=rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Na=rt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Hi=rt("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);const ti=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),i0="-",pb=t=>{const e=xb(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=t;return{getClassGroupId:g=>{const y=g.split(i0);return y[0]===""&&y.length!==1&&y.shift(),Mx(y,e)||gb(g)},getConflictingClassGroupIds:(g,y)=>{const v=n[g]||[];return y&&o[g]?[...v,...o[g]]:v}}},Mx=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],o=e.nextPart.get(n),c=o?Mx(t.slice(1),o):void 0;if(c)return c;if(e.validators.length===0)return;const d=t.join(i0);return e.validators.find(({validator:g})=>g(d))?.classGroupId},Wm=/^\[(.+)\]$/,gb=t=>{if(Wm.test(t)){const e=Wm.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},xb=t=>{const{theme:e,prefix:n}=t,o={nextPart:new Map,validators:[]};return wb(Object.entries(t.classGroups),n).forEach(([d,g])=>{_h(g,o,d,e)}),o},_h=(t,e,n,o)=>{t.forEach(c=>{if(typeof c=="string"){const d=c===""?e:Gm(e,c);d.classGroupId=n;return}if(typeof c=="function"){if(yb(c)){_h(c(o),e,n,o);return}e.validators.push({validator:c,classGroupId:n});return}Object.entries(c).forEach(([d,g])=>{_h(g,Gm(e,d),n,o)})})},Gm=(t,e)=>{let n=t;return e.split(i0).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n},yb=t=>t.isThemeGetter,wb=(t,e)=>e?t.map(([n,o])=>{const c=o.map(d=>typeof d=="string"?e+d:typeof d=="object"?Object.fromEntries(Object.entries(d).map(([g,y])=>[e+g,y])):d);return[n,c]}):t,vb=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,o=new Map;const c=(d,g)=>{n.set(d,g),e++,e>t&&(e=0,o=n,n=new Map)};return{get(d){let g=n.get(d);if(g!==void 0)return g;if((g=o.get(d))!==void 0)return c(d,g),g},set(d,g){n.has(d)?n.set(d,g):c(d,g)}}},Lx="!",bb=t=>{const{separator:e,experimentalParseClassName:n}=t,o=e.length===1,c=e[0],d=e.length,g=y=>{const v=[];let b=0,S=0,N;for(let M=0;M<y.length;M++){let z=y[M];if(b===0){if(z===c&&(o||y.slice(M,M+d)===e)){v.push(y.slice(S,M)),S=M+d;continue}if(z==="/"){N=M;continue}}z==="["?b++:z==="]"&&b--}const R=v.length===0?y:y.substring(S),T=R.startsWith(Lx),D=T?R.substring(1):R,I=N&&N>S?N-S:void 0;return{modifiers:v,hasImportantModifier:T,baseClassName:D,maybePostfixModifierPosition:I}};return n?y=>n({className:y,parseClassName:g}):g},Eb=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(o=>{o[0]==="["?(e.push(...n.sort(),o),n=[]):n.push(o)}),e.push(...n.sort()),e},Cb=t=>({cache:vb(t.cacheSize),parseClassName:bb(t),...pb(t)}),_b=/\s+/,Sb=(t,e)=>{const{parseClassName:n,getClassGroupId:o,getConflictingClassGroupIds:c}=e,d=[],g=t.trim().split(_b);let y="";for(let v=g.length-1;v>=0;v-=1){const b=g[v],{modifiers:S,hasImportantModifier:N,baseClassName:R,maybePostfixModifierPosition:T}=n(b);let D=!!T,I=o(D?R.substring(0,T):R);if(!I){if(!D){y=b+(y.length>0?" "+y:y);continue}if(I=o(R),!I){y=b+(y.length>0?" "+y:y);continue}D=!1}const M=Eb(S).join(":"),z=N?M+Lx:M,U=z+I;if(d.includes(U))continue;d.push(U);const B=c(I,D);for(let V=0;V<B.length;++V){const re=B[V];d.push(z+re)}y=b+(y.length>0?" "+y:y)}return y};function Nb(){let t=0,e,n,o="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Bx(e))&&(o&&(o+=" "),o+=n);return o}const Bx=t=>{if(typeof t=="string")return t;let e,n="";for(let o=0;o<t.length;o++)t[o]&&(e=Bx(t[o]))&&(n&&(n+=" "),n+=e);return n};function Ab(t,...e){let n,o,c,d=g;function g(v){const b=e.reduce((S,N)=>N(S),t());return n=Cb(b),o=n.cache.get,c=n.cache.set,d=y,y(v)}function y(v){const b=o(v);if(b)return b;const S=Sb(v,n);return c(v,S),S}return function(){return d(Nb.apply(null,arguments))}}const Kt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Fx=/^\[(?:([a-z-]+):)?(.+)\]$/i,Tb=/^\d+\/\d+$/,kb=new Set(["px","full","screen"]),Ib=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Rb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ob=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Pb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ks=t=>ya(t)||kb.has(t)||Tb.test(t),Di=t=>Aa(t,"length",Vb),ya=t=>!!t&&!Number.isNaN(Number(t)),Nf=t=>Aa(t,"number",ya),gl=t=>!!t&&Number.isInteger(Number(t)),Db=t=>t.endsWith("%")&&ya(t.slice(0,-1)),ft=t=>Fx.test(t),Mi=t=>Ib.test(t),Mb=new Set(["length","size","percentage"]),Lb=t=>Aa(t,Mb,Ux),Bb=t=>Aa(t,"position",Ux),Fb=new Set(["image","url"]),Ub=t=>Aa(t,Fb,Wb),zb=t=>Aa(t,"",Hb),xl=()=>!0,Aa=(t,e,n)=>{const o=Fx.exec(t);return o?o[1]?typeof e=="string"?o[1]===e:e.has(o[1]):n(o[2]):!1},Vb=t=>Rb.test(t)&&!Ob.test(t),Ux=()=>!1,Hb=t=>jb.test(t),Wb=t=>Pb.test(t),Gb=()=>{const t=Kt("colors"),e=Kt("spacing"),n=Kt("blur"),o=Kt("brightness"),c=Kt("borderColor"),d=Kt("borderRadius"),g=Kt("borderSpacing"),y=Kt("borderWidth"),v=Kt("contrast"),b=Kt("grayscale"),S=Kt("hueRotate"),N=Kt("invert"),R=Kt("gap"),T=Kt("gradientColorStops"),D=Kt("gradientColorStopPositions"),I=Kt("inset"),M=Kt("margin"),z=Kt("opacity"),U=Kt("padding"),B=Kt("saturate"),V=Kt("scale"),re=Kt("sepia"),G=Kt("skew"),H=Kt("space"),se=Kt("translate"),$=()=>["auto","contain","none"],be=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",ft,e],Y=()=>[ft,e],fe=()=>["",Ks,Di],oe=()=>["auto",ya,ft],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],_e=()=>["solid","dashed","dotted","double","none"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],me=()=>["start","end","center","between","around","evenly","stretch"],ge=()=>["","0",ft],ve=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[ya,ft];return{cacheSize:500,separator:":",theme:{colors:[xl],spacing:[Ks,Di],blur:["none","",Mi,ft],brightness:te(),borderColor:[t],borderRadius:["none","","full",Mi,ft],borderSpacing:Y(),borderWidth:fe(),contrast:te(),grayscale:ge(),hueRotate:te(),invert:ge(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[Db,Di],inset:X(),margin:X(),opacity:te(),padding:Y(),saturate:te(),scale:te(),sepia:ge(),skew:te(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",ft]}],container:["container"],columns:[{columns:[Mi]}],"break-after":[{"break-after":ve()}],"break-before":[{"break-before":ve()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),ft]}],overflow:[{overflow:be()}],"overflow-x":[{"overflow-x":be()}],"overflow-y":[{"overflow-y":be()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[I]}],"inset-x":[{"inset-x":[I]}],"inset-y":[{"inset-y":[I]}],start:[{start:[I]}],end:[{end:[I]}],top:[{top:[I]}],right:[{right:[I]}],bottom:[{bottom:[I]}],left:[{left:[I]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gl,ft]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ft]}],grow:[{grow:ge()}],shrink:[{shrink:ge()}],order:[{order:["first","last","none",gl,ft]}],"grid-cols":[{"grid-cols":[xl]}],"col-start-end":[{col:["auto",{span:["full",gl,ft]},ft]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[xl]}],"row-start-end":[{row:["auto",{span:[gl,ft]},ft]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ft]}],gap:[{gap:[R]}],"gap-x":[{"gap-x":[R]}],"gap-y":[{"gap-y":[R]}],"justify-content":[{justify:["normal",...me()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...me(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...me(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[U]}],px:[{px:[U]}],py:[{py:[U]}],ps:[{ps:[U]}],pe:[{pe:[U]}],pt:[{pt:[U]}],pr:[{pr:[U]}],pb:[{pb:[U]}],pl:[{pl:[U]}],m:[{m:[M]}],mx:[{mx:[M]}],my:[{my:[M]}],ms:[{ms:[M]}],me:[{me:[M]}],mt:[{mt:[M]}],mr:[{mr:[M]}],mb:[{mb:[M]}],ml:[{ml:[M]}],"space-x":[{"space-x":[H]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[H]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ft,e]}],"min-w":[{"min-w":[ft,e,"min","max","fit"]}],"max-w":[{"max-w":[ft,e,"none","full","min","max","fit","prose",{screen:[Mi]},Mi]}],h:[{h:[ft,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ft,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Mi,Di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nf]}],"font-family":[{font:[xl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ft]}],"line-clamp":[{"line-clamp":["none",ya,Nf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ks,ft]}],"list-image":[{"list-image":["none",ft]}],"list-style-type":[{list:["none","disc","decimal",ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[z]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[z]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._e(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ks,Di]}],"underline-offset":[{"underline-offset":["auto",Ks,ft]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[z]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),Bb]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Lb]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ub]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[T]}],"gradient-via":[{via:[T]}],"gradient-to":[{to:[T]}],rounded:[{rounded:[d]}],"rounded-s":[{"rounded-s":[d]}],"rounded-e":[{"rounded-e":[d]}],"rounded-t":[{"rounded-t":[d]}],"rounded-r":[{"rounded-r":[d]}],"rounded-b":[{"rounded-b":[d]}],"rounded-l":[{"rounded-l":[d]}],"rounded-ss":[{"rounded-ss":[d]}],"rounded-se":[{"rounded-se":[d]}],"rounded-ee":[{"rounded-ee":[d]}],"rounded-es":[{"rounded-es":[d]}],"rounded-tl":[{"rounded-tl":[d]}],"rounded-tr":[{"rounded-tr":[d]}],"rounded-br":[{"rounded-br":[d]}],"rounded-bl":[{"rounded-bl":[d]}],"border-w":[{border:[y]}],"border-w-x":[{"border-x":[y]}],"border-w-y":[{"border-y":[y]}],"border-w-s":[{"border-s":[y]}],"border-w-e":[{"border-e":[y]}],"border-w-t":[{"border-t":[y]}],"border-w-r":[{"border-r":[y]}],"border-w-b":[{"border-b":[y]}],"border-w-l":[{"border-l":[y]}],"border-opacity":[{"border-opacity":[z]}],"border-style":[{border:[..._e(),"hidden"]}],"divide-x":[{"divide-x":[y]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[y]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[z]}],"divide-style":[{divide:_e()}],"border-color":[{border:[c]}],"border-color-x":[{"border-x":[c]}],"border-color-y":[{"border-y":[c]}],"border-color-s":[{"border-s":[c]}],"border-color-e":[{"border-e":[c]}],"border-color-t":[{"border-t":[c]}],"border-color-r":[{"border-r":[c]}],"border-color-b":[{"border-b":[c]}],"border-color-l":[{"border-l":[c]}],"divide-color":[{divide:[c]}],"outline-style":[{outline:["",..._e()]}],"outline-offset":[{"outline-offset":[Ks,ft]}],"outline-w":[{outline:[Ks,Di]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[z]}],"ring-offset-w":[{"ring-offset":[Ks,Di]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Mi,zb]}],"shadow-color":[{shadow:[xl]}],opacity:[{opacity:[z]}],"mix-blend":[{"mix-blend":[...he(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":he()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[o]}],contrast:[{contrast:[v]}],"drop-shadow":[{"drop-shadow":["","none",Mi,ft]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[S]}],invert:[{invert:[N]}],saturate:[{saturate:[B]}],sepia:[{sepia:[re]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[v]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[S]}],"backdrop-invert":[{"backdrop-invert":[N]}],"backdrop-opacity":[{"backdrop-opacity":[z]}],"backdrop-saturate":[{"backdrop-saturate":[B]}],"backdrop-sepia":[{"backdrop-sepia":[re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[g]}],"border-spacing-x":[{"border-spacing-x":[g]}],"border-spacing-y":[{"border-spacing-y":[g]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ft]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",ft]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[V]}],"scale-x":[{"scale-x":[V]}],"scale-y":[{"scale-y":[V]}],rotate:[{rotate:[gl,ft]}],"translate-x":[{"translate-x":[se]}],"translate-y":[{"translate-y":[se]}],"skew-x":[{"skew-x":[G]}],"skew-y":[{"skew-y":[G]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ft]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ft]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ft]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ks,Di,Nf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qb=Ab(Gb);function Qn(...t){return qb(bx(t))}const $b=Wv,zx=O.forwardRef(({className:t,...e},n)=>h.jsx(mx,{ref:n,className:Qn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));zx.displayName=mx.displayName;const Kb=Gv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Vx=O.forwardRef(({className:t,variant:e,...n},o)=>h.jsx(px,{ref:o,className:Qn(Kb({variant:e}),t),...n}));Vx.displayName=px.displayName;const Xb=O.forwardRef(({className:t,...e},n)=>h.jsx(yx,{ref:n,className:Qn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));Xb.displayName=yx.displayName;const Hx=O.forwardRef(({className:t,...e},n)=>h.jsx(wx,{ref:n,className:Qn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:h.jsx(ti,{className:"h-4 w-4"})}));Hx.displayName=wx.displayName;const Wx=O.forwardRef(({className:t,...e},n)=>h.jsx(gx,{ref:n,className:Qn("text-sm font-semibold",t),...e}));Wx.displayName=gx.displayName;const Gx=O.forwardRef(({className:t,...e},n)=>h.jsx(xx,{ref:n,className:Qn("text-sm opacity-90",t),...e}));Gx.displayName=xx.displayName;function qx(){const{toasts:t}=an();return h.jsxs($b,{children:[t.map(function({id:e,title:n,description:o,action:c,...d}){return h.jsxs(Vx,{...d,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(Wx,{children:n}),o&&h.jsx(Gx,{children:o})]}),c,h.jsx(Hx,{})]},e)}),h.jsx(zx,{})]})}var qm=["light","dark"],Yb="(prefers-color-scheme: dark)",Zb=O.createContext(void 0),Qb={setTheme:t=>{},themes:[]},Jb=()=>{var t;return(t=O.useContext(Zb))!=null?t:Qb};O.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:o,enableColorScheme:c,defaultTheme:d,value:g,attrs:y,nonce:v})=>{let b=d==="system",S=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${y.map(D=>`'${D}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,N=c?qm.includes(d)&&d?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${d}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",R=(D,I=!1,M=!0)=>{let z=g?g[D]:D,U=I?D+"|| ''":`'${z}'`,B="";return c&&M&&!I&&qm.includes(D)&&(B+=`d.style.colorScheme = '${D}';`),n==="class"?I||z?B+=`c.add(${U})`:B+="null":z&&(B+=`d[s](n,${U})`),B},T=t?`!function(){${S}${R(t)}}()`:o?`!function(){try{${S}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${b})){var t='${Yb}',m=window.matchMedia(t);if(m.media!==t||m.matches){${R("dark")}}else{${R("light")}}}else if(e){${g?`var x=${JSON.stringify(g)};`:""}${R(g?"x[e]":"e",!0)}}${b?"":"else{"+R(d,!1,!1)+"}"}${N}}catch(e){}}()`:`!function(){try{${S}var e=localStorage.getItem('${e}');if(e){${g?`var x=${JSON.stringify(g)};`:""}${R(g?"x[e]":"e",!0)}}else{${R(d,!1,!1)};}${N}}catch(t){}}();`;return O.createElement("script",{nonce:v,dangerouslySetInnerHTML:{__html:T}})});var eE=t=>{switch(t){case"success":return nE;case"info":return iE;case"warning":return sE;case"error":return oE;default:return null}},tE=Array(12).fill(0),rE=({visible:t,className:e})=>Me.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Me.createElement("div",{className:"sonner-spinner"},tE.map((n,o)=>Me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),nE=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),sE=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),iE=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),oE=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),aE=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),lE=()=>{let[t,e]=Me.useState(document.hidden);return Me.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Sh=1,cE=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...o}=t,c=typeof t?.id=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Sh++,d=this.toasts.find(y=>y.id===c),g=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),d?this.toasts=this.toasts.map(y=>y.id===c?(this.publish({...y,...t,id:c,title:n}),{...y,...t,id:c,dismissible:g,title:n}):y):this.addToast({title:n,...o,dismissible:g,id:c}),c},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let o=t instanceof Promise?t:t(),c=n!==void 0,d,g=o.then(async v=>{if(d=["resolve",v],Me.isValidElement(v))c=!1,this.create({id:n,type:"default",message:v});else if(dE(v)&&!v.ok){c=!1;let b=typeof e.error=="function"?await e.error(`HTTP error! status: ${v.status}`):e.error,S=typeof e.description=="function"?await e.description(`HTTP error! status: ${v.status}`):e.description;this.create({id:n,type:"error",message:b,description:S})}else if(e.success!==void 0){c=!1;let b=typeof e.success=="function"?await e.success(v):e.success,S=typeof e.description=="function"?await e.description(v):e.description;this.create({id:n,type:"success",message:b,description:S})}}).catch(async v=>{if(d=["reject",v],e.error!==void 0){c=!1;let b=typeof e.error=="function"?await e.error(v):e.error,S=typeof e.description=="function"?await e.description(v):e.description;this.create({id:n,type:"error",message:b,description:S})}}).finally(()=>{var v;c&&(this.dismiss(n),n=void 0),(v=e.finally)==null||v.call(e)}),y=()=>new Promise((v,b)=>g.then(()=>d[0]==="reject"?b(d[1]):v(d[1])).catch(b));return typeof n!="string"&&typeof n!="number"?{unwrap:y}:Object.assign(n,{unwrap:y})},this.custom=(t,e)=>{let n=e?.id||Sh++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},yn=new cE,uE=(t,e)=>{let n=e?.id||Sh++;return yn.addToast({title:t,...e,id:n}),n},dE=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",fE=uE,hE=()=>yn.toasts,mE=()=>yn.getActiveToasts();Object.assign(fE,{success:yn.success,info:yn.info,warning:yn.warning,error:yn.error,custom:yn.custom,message:yn.message,promise:yn.promise,dismiss:yn.dismiss,loading:yn.loading},{getHistory:hE,getToasts:mE});function pE(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",e==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}pE(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Jc(t){return t.label!==void 0}var gE=3,xE="32px",yE="16px",$m=4e3,wE=356,vE=14,bE=20,EE=200;function us(...t){return t.filter(Boolean).join(" ")}function CE(t){let[e,n]=t.split("-"),o=[];return e&&o.push(e),n&&o.push(n),o}var _E=t=>{var e,n,o,c,d,g,y,v,b,S,N;let{invert:R,toast:T,unstyled:D,interacting:I,setHeights:M,visibleToasts:z,heights:U,index:B,toasts:V,expanded:re,removeToast:G,defaultRichColors:H,closeButton:se,style:$,cancelButtonStyle:be,actionButtonStyle:X,className:Y="",descriptionClassName:fe="",duration:oe,position:ee,gap:_e,loadingIcon:he,expandByDefault:me,classNames:ge,icons:ve,closeButtonAriaLabel:te="Close toast",pauseWhenPageIsHidden:ue}=t,[je,Ie]=Me.useState(null),[we,ce]=Me.useState(null),[Ee,Te]=Me.useState(!1),[Ye,ht]=Me.useState(!1),[wt,At]=Me.useState(!1),[Ke,Er]=Me.useState(!1),[Lr,wn]=Me.useState(!1),[Jt,_t]=Me.useState(0),[pt,vn]=Me.useState(0),Le=Me.useRef(T.duration||oe||$m),Jn=Me.useRef(null),bn=Me.useRef(null),ln=B===0,ci=B+1<=z,Dt=T.type,En=T.dismissible!==!1,en=T.className||"",xr=T.descriptionClassName||"",Cn=Me.useMemo(()=>U.findIndex(Ge=>Ge.toastId===T.id)||0,[U,T.id]),Un=Me.useMemo(()=>{var Ge;return(Ge=T.closeButton)!=null?Ge:se},[T.closeButton,se]),Ro=Me.useMemo(()=>T.duration||oe||$m,[T.duration,oe]),Mt=Me.useRef(0),Pe=Me.useRef(0),Xt=Me.useRef(0),xt=Me.useRef(null),[jt,es]=ee.split("-"),ws=Me.useMemo(()=>U.reduce((Ge,Et,ct)=>ct>=Cn?Ge:Ge+Et.height,0),[U,Cn]),Ps=lE(),mt=T.invert||R,Rr=Dt==="loading";Pe.current=Me.useMemo(()=>Cn*_e+ws,[Cn,ws]),Me.useEffect(()=>{Le.current=Ro},[Ro]),Me.useEffect(()=>{Te(!0)},[]),Me.useEffect(()=>{let Ge=bn.current;if(Ge){let Et=Ge.getBoundingClientRect().height;return vn(Et),M(ct=>[{toastId:T.id,height:Et,position:T.position},...ct]),()=>M(ct=>ct.filter(ir=>ir.toastId!==T.id))}},[M,T.id]),Me.useLayoutEffect(()=>{if(!Ee)return;let Ge=bn.current,Et=Ge.style.height;Ge.style.height="auto";let ct=Ge.getBoundingClientRect().height;Ge.style.height=Et,vn(ct),M(ir=>ir.find(Cr=>Cr.toastId===T.id)?ir.map(Cr=>Cr.toastId===T.id?{...Cr,height:ct}:Cr):[{toastId:T.id,height:ct,position:T.position},...ir])},[Ee,T.title,T.description,M,T.id]);let cn=Me.useCallback(()=>{ht(!0),_t(Pe.current),M(Ge=>Ge.filter(Et=>Et.toastId!==T.id)),setTimeout(()=>{G(T)},EE)},[T,G,M,Pe]);Me.useEffect(()=>{if(T.promise&&Dt==="loading"||T.duration===1/0||T.type==="loading")return;let Ge;return re||I||ue&&Ps?(()=>{if(Xt.current<Mt.current){let Et=new Date().getTime()-Mt.current;Le.current=Le.current-Et}Xt.current=new Date().getTime()})():Le.current!==1/0&&(Mt.current=new Date().getTime(),Ge=setTimeout(()=>{var Et;(Et=T.onAutoClose)==null||Et.call(T,T),cn()},Le.current)),()=>clearTimeout(Ge)},[re,I,T,Dt,ue,Ps,cn]),Me.useEffect(()=>{T.delete&&cn()},[cn,T.delete]);function Xi(){var Ge,Et,ct;return ve!=null&&ve.loading?Me.createElement("div",{className:us(ge?.loader,(Ge=T?.classNames)==null?void 0:Ge.loader,"sonner-loader"),"data-visible":Dt==="loading"},ve.loading):he?Me.createElement("div",{className:us(ge?.loader,(Et=T?.classNames)==null?void 0:Et.loader,"sonner-loader"),"data-visible":Dt==="loading"},he):Me.createElement(rE,{className:us(ge?.loader,(ct=T?.classNames)==null?void 0:ct.loader),visible:Dt==="loading"})}return Me.createElement("li",{tabIndex:0,ref:bn,className:us(Y,en,ge?.toast,(e=T?.classNames)==null?void 0:e.toast,ge?.default,ge?.[Dt],(n=T?.classNames)==null?void 0:n[Dt]),"data-sonner-toast":"","data-rich-colors":(o=T.richColors)!=null?o:H,"data-styled":!(T.jsx||T.unstyled||D),"data-mounted":Ee,"data-promise":!!T.promise,"data-swiped":Lr,"data-removed":Ye,"data-visible":ci,"data-y-position":jt,"data-x-position":es,"data-index":B,"data-front":ln,"data-swiping":wt,"data-dismissible":En,"data-type":Dt,"data-invert":mt,"data-swipe-out":Ke,"data-swipe-direction":we,"data-expanded":!!(re||me&&Ee),style:{"--index":B,"--toasts-before":B,"--z-index":V.length-B,"--offset":`${Ye?Jt:Pe.current}px`,"--initial-height":me?"auto":`${pt}px`,...$,...T.style},onDragEnd:()=>{At(!1),Ie(null),xt.current=null},onPointerDown:Ge=>{Rr||!En||(Jn.current=new Date,_t(Pe.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(At(!0),xt.current={x:Ge.clientX,y:Ge.clientY}))},onPointerUp:()=>{var Ge,Et,ct,ir;if(Ke||!En)return;xt.current=null;let Cr=Number(((Ge=bn.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Wt=Number(((Et=bn.current)==null?void 0:Et.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_n=new Date().getTime()-((ct=Jn.current)==null?void 0:ct.getTime()),Gt=je==="x"?Cr:Wt,un=Math.abs(Gt)/_n;if(Math.abs(Gt)>=bE||un>.11){_t(Pe.current),(ir=T.onDismiss)==null||ir.call(T,T),ce(je==="x"?Cr>0?"right":"left":Wt>0?"down":"up"),cn(),Er(!0),wn(!1);return}At(!1),Ie(null)},onPointerMove:Ge=>{var Et,ct,ir,Cr;if(!xt.current||!En||((Et=window.getSelection())==null?void 0:Et.toString().length)>0)return;let Wt=Ge.clientY-xt.current.y,_n=Ge.clientX-xt.current.x,Gt=(ct=t.swipeDirections)!=null?ct:CE(ee);!je&&(Math.abs(_n)>1||Math.abs(Wt)>1)&&Ie(Math.abs(_n)>Math.abs(Wt)?"x":"y");let un={x:0,y:0};je==="y"?(Gt.includes("top")||Gt.includes("bottom"))&&(Gt.includes("top")&&Wt<0||Gt.includes("bottom")&&Wt>0)&&(un.y=Wt):je==="x"&&(Gt.includes("left")||Gt.includes("right"))&&(Gt.includes("left")&&_n<0||Gt.includes("right")&&_n>0)&&(un.x=_n),(Math.abs(un.x)>0||Math.abs(un.y)>0)&&wn(!0),(ir=bn.current)==null||ir.style.setProperty("--swipe-amount-x",`${un.x}px`),(Cr=bn.current)==null||Cr.style.setProperty("--swipe-amount-y",`${un.y}px`)}},Un&&!T.jsx?Me.createElement("button",{"aria-label":te,"data-disabled":Rr,"data-close-button":!0,onClick:Rr||!En?()=>{}:()=>{var Ge;cn(),(Ge=T.onDismiss)==null||Ge.call(T,T)},className:us(ge?.closeButton,(c=T?.classNames)==null?void 0:c.closeButton)},(d=ve?.close)!=null?d:aE):null,T.jsx||O.isValidElement(T.title)?T.jsx?T.jsx:typeof T.title=="function"?T.title():T.title:Me.createElement(Me.Fragment,null,Dt||T.icon||T.promise?Me.createElement("div",{"data-icon":"",className:us(ge?.icon,(g=T?.classNames)==null?void 0:g.icon)},T.promise||T.type==="loading"&&!T.icon?T.icon||Xi():null,T.type!=="loading"?T.icon||ve?.[Dt]||eE(Dt):null):null,Me.createElement("div",{"data-content":"",className:us(ge?.content,(y=T?.classNames)==null?void 0:y.content)},Me.createElement("div",{"data-title":"",className:us(ge?.title,(v=T?.classNames)==null?void 0:v.title)},typeof T.title=="function"?T.title():T.title),T.description?Me.createElement("div",{"data-description":"",className:us(fe,xr,ge?.description,(b=T?.classNames)==null?void 0:b.description)},typeof T.description=="function"?T.description():T.description):null),O.isValidElement(T.cancel)?T.cancel:T.cancel&&Jc(T.cancel)?Me.createElement("button",{"data-button":!0,"data-cancel":!0,style:T.cancelButtonStyle||be,onClick:Ge=>{var Et,ct;Jc(T.cancel)&&En&&((ct=(Et=T.cancel).onClick)==null||ct.call(Et,Ge),cn())},className:us(ge?.cancelButton,(S=T?.classNames)==null?void 0:S.cancelButton)},T.cancel.label):null,O.isValidElement(T.action)?T.action:T.action&&Jc(T.action)?Me.createElement("button",{"data-button":!0,"data-action":!0,style:T.actionButtonStyle||X,onClick:Ge=>{var Et,ct;Jc(T.action)&&((ct=(Et=T.action).onClick)==null||ct.call(Et,Ge),!Ge.defaultPrevented&&cn())},className:us(ge?.actionButton,(N=T?.classNames)==null?void 0:N.actionButton)},T.action.label):null))};function Km(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function SE(t,e){let n={};return[t,e].forEach((o,c)=>{let d=c===1,g=d?"--mobile-offset":"--offset",y=d?yE:xE;function v(b){["top","right","bottom","left"].forEach(S=>{n[`${g}-${S}`]=typeof b=="number"?`${b}px`:b})}typeof o=="number"||typeof o=="string"?v(o):typeof o=="object"?["top","right","bottom","left"].forEach(b=>{o[b]===void 0?n[`${g}-${b}`]=y:n[`${g}-${b}`]=typeof o[b]=="number"?`${o[b]}px`:o[b]}):v(y)}),n}var NE=O.forwardRef(function(t,e){let{invert:n,position:o="bottom-right",hotkey:c=["altKey","KeyT"],expand:d,closeButton:g,className:y,offset:v,mobileOffset:b,theme:S="light",richColors:N,duration:R,style:T,visibleToasts:D=gE,toastOptions:I,dir:M=Km(),gap:z=vE,loadingIcon:U,icons:B,containerAriaLabel:V="Notifications",pauseWhenPageIsHidden:re}=t,[G,H]=Me.useState([]),se=Me.useMemo(()=>Array.from(new Set([o].concat(G.filter(ue=>ue.position).map(ue=>ue.position)))),[G,o]),[$,be]=Me.useState([]),[X,Y]=Me.useState(!1),[fe,oe]=Me.useState(!1),[ee,_e]=Me.useState(S!=="system"?S:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),he=Me.useRef(null),me=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),ge=Me.useRef(null),ve=Me.useRef(!1),te=Me.useCallback(ue=>{H(je=>{var Ie;return(Ie=je.find(we=>we.id===ue.id))!=null&&Ie.delete||yn.dismiss(ue.id),je.filter(({id:we})=>we!==ue.id)})},[]);return Me.useEffect(()=>yn.subscribe(ue=>{if(ue.dismiss){H(je=>je.map(Ie=>Ie.id===ue.id?{...Ie,delete:!0}:Ie));return}setTimeout(()=>{$g.flushSync(()=>{H(je=>{let Ie=je.findIndex(we=>we.id===ue.id);return Ie!==-1?[...je.slice(0,Ie),{...je[Ie],...ue},...je.slice(Ie+1)]:[ue,...je]})})})}),[]),Me.useEffect(()=>{if(S!=="system"){_e(S);return}if(S==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?_e("dark"):_e("light")),typeof window>"u")return;let ue=window.matchMedia("(prefers-color-scheme: dark)");try{ue.addEventListener("change",({matches:je})=>{_e(je?"dark":"light")})}catch{ue.addListener(({matches:Ie})=>{try{_e(Ie?"dark":"light")}catch(we){console.error(we)}})}},[S]),Me.useEffect(()=>{G.length<=1&&Y(!1)},[G]),Me.useEffect(()=>{let ue=je=>{var Ie,we;c.every(ce=>je[ce]||je.code===ce)&&(Y(!0),(Ie=he.current)==null||Ie.focus()),je.code==="Escape"&&(document.activeElement===he.current||(we=he.current)!=null&&we.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",ue),()=>document.removeEventListener("keydown",ue)},[c]),Me.useEffect(()=>{if(he.current)return()=>{ge.current&&(ge.current.focus({preventScroll:!0}),ge.current=null,ve.current=!1)}},[he.current]),Me.createElement("section",{ref:e,"aria-label":`${V} ${me}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},se.map((ue,je)=>{var Ie;let[we,ce]=ue.split("-");return G.length?Me.createElement("ol",{key:ue,dir:M==="auto"?Km():M,tabIndex:-1,ref:he,className:y,"data-sonner-toaster":!0,"data-theme":ee,"data-y-position":we,"data-lifted":X&&G.length>1&&!d,"data-x-position":ce,style:{"--front-toast-height":`${((Ie=$[0])==null?void 0:Ie.height)||0}px`,"--width":`${wE}px`,"--gap":`${z}px`,...T,...SE(v,b)},onBlur:Ee=>{ve.current&&!Ee.currentTarget.contains(Ee.relatedTarget)&&(ve.current=!1,ge.current&&(ge.current.focus({preventScroll:!0}),ge.current=null))},onFocus:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||ve.current||(ve.current=!0,ge.current=Ee.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{fe||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||oe(!0)},onPointerUp:()=>oe(!1)},G.filter(Ee=>!Ee.position&&je===0||Ee.position===ue).map((Ee,Te)=>{var Ye,ht;return Me.createElement(_E,{key:Ee.id,icons:B,index:Te,toast:Ee,defaultRichColors:N,duration:(Ye=I?.duration)!=null?Ye:R,className:I?.className,descriptionClassName:I?.descriptionClassName,invert:n,visibleToasts:D,closeButton:(ht=I?.closeButton)!=null?ht:g,interacting:fe,position:ue,style:I?.style,unstyled:I?.unstyled,classNames:I?.classNames,cancelButtonStyle:I?.cancelButtonStyle,actionButtonStyle:I?.actionButtonStyle,removeToast:te,toasts:G.filter(wt=>wt.position==Ee.position),heights:$.filter(wt=>wt.position==Ee.position),setHeights:be,expandByDefault:d,gap:z,loadingIcon:U,expanded:X,pauseWhenPageIsHidden:re,swipeDirections:t.swipeDirections})})):null}))});const AE=({...t})=>{const{theme:e="system"}=Jb();return h.jsx(NE,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var TE=Zh[" useId ".trim().toString()]||(()=>{}),kE=0;function Af(t){const[e,n]=O.useState(TE());return Zs(()=>{n(o=>o??String(kE++))},[t]),t||(e?`radix-${e}`:"")}const IE=["top","right","bottom","left"],qi=Math.min,Mn=Math.max,vu=Math.round,eu=Math.floor,Is=t=>({x:t,y:t}),RE={left:"right",right:"left",bottom:"top",top:"bottom"},OE={start:"end",end:"start"};function Nh(t,e,n){return Mn(t,qi(e,n))}function Qs(t,e){return typeof t=="function"?t(e):t}function Js(t){return t.split("-")[0]}function Ta(t){return t.split("-")[1]}function o0(t){return t==="x"?"y":"x"}function a0(t){return t==="y"?"height":"width"}const jE=new Set(["top","bottom"]);function ks(t){return jE.has(Js(t))?"y":"x"}function l0(t){return o0(ks(t))}function PE(t,e,n){n===void 0&&(n=!1);const o=Ta(t),c=l0(t),d=a0(c);let g=c==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[d]>e.floating[d]&&(g=bu(g)),[g,bu(g)]}function DE(t){const e=bu(t);return[Ah(t),e,Ah(e)]}function Ah(t){return t.replace(/start|end/g,e=>OE[e])}const Xm=["left","right"],Ym=["right","left"],ME=["top","bottom"],LE=["bottom","top"];function BE(t,e,n){switch(t){case"top":case"bottom":return n?e?Ym:Xm:e?Xm:Ym;case"left":case"right":return e?ME:LE;default:return[]}}function FE(t,e,n,o){const c=Ta(t);let d=BE(Js(t),n==="start",o);return c&&(d=d.map(g=>g+"-"+c),e&&(d=d.concat(d.map(Ah)))),d}function bu(t){return t.replace(/left|right|bottom|top/g,e=>RE[e])}function UE(t){return{top:0,right:0,bottom:0,left:0,...t}}function $x(t){return typeof t!="number"?UE(t):{top:t,right:t,bottom:t,left:t}}function Eu(t){const{x:e,y:n,width:o,height:c}=t;return{width:o,height:c,top:n,left:e,right:e+o,bottom:n+c,x:e,y:n}}function Zm(t,e,n){let{reference:o,floating:c}=t;const d=ks(e),g=l0(e),y=a0(g),v=Js(e),b=d==="y",S=o.x+o.width/2-c.width/2,N=o.y+o.height/2-c.height/2,R=o[y]/2-c[y]/2;let T;switch(v){case"top":T={x:S,y:o.y-c.height};break;case"bottom":T={x:S,y:o.y+o.height};break;case"right":T={x:o.x+o.width,y:N};break;case"left":T={x:o.x-c.width,y:N};break;default:T={x:o.x,y:o.y}}switch(Ta(e)){case"start":T[g]-=R*(n&&b?-1:1);break;case"end":T[g]+=R*(n&&b?-1:1);break}return T}const zE=async(t,e,n)=>{const{placement:o="bottom",strategy:c="absolute",middleware:d=[],platform:g}=n,y=d.filter(Boolean),v=await(g.isRTL==null?void 0:g.isRTL(e));let b=await g.getElementRects({reference:t,floating:e,strategy:c}),{x:S,y:N}=Zm(b,o,v),R=o,T={},D=0;for(let I=0;I<y.length;I++){const{name:M,fn:z}=y[I],{x:U,y:B,data:V,reset:re}=await z({x:S,y:N,initialPlacement:o,placement:R,strategy:c,middlewareData:T,rects:b,platform:g,elements:{reference:t,floating:e}});S=U??S,N=B??N,T={...T,[M]:{...T[M],...V}},re&&D<=50&&(D++,typeof re=="object"&&(re.placement&&(R=re.placement),re.rects&&(b=re.rects===!0?await g.getElementRects({reference:t,floating:e,strategy:c}):re.rects),{x:S,y:N}=Zm(b,R,v)),I=-1)}return{x:S,y:N,placement:R,strategy:c,middlewareData:T}};async function Nl(t,e){var n;e===void 0&&(e={});const{x:o,y:c,platform:d,rects:g,elements:y,strategy:v}=t,{boundary:b="clippingAncestors",rootBoundary:S="viewport",elementContext:N="floating",altBoundary:R=!1,padding:T=0}=Qs(e,t),D=$x(T),M=y[R?N==="floating"?"reference":"floating":N],z=Eu(await d.getClippingRect({element:(n=await(d.isElement==null?void 0:d.isElement(M)))==null||n?M:M.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(y.floating)),boundary:b,rootBoundary:S,strategy:v})),U=N==="floating"?{x:o,y:c,width:g.floating.width,height:g.floating.height}:g.reference,B=await(d.getOffsetParent==null?void 0:d.getOffsetParent(y.floating)),V=await(d.isElement==null?void 0:d.isElement(B))?await(d.getScale==null?void 0:d.getScale(B))||{x:1,y:1}:{x:1,y:1},re=Eu(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:y,rect:U,offsetParent:B,strategy:v}):U);return{top:(z.top-re.top+D.top)/V.y,bottom:(re.bottom-z.bottom+D.bottom)/V.y,left:(z.left-re.left+D.left)/V.x,right:(re.right-z.right+D.right)/V.x}}const VE=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:c,rects:d,platform:g,elements:y,middlewareData:v}=e,{element:b,padding:S=0}=Qs(t,e)||{};if(b==null)return{};const N=$x(S),R={x:n,y:o},T=l0(c),D=a0(T),I=await g.getDimensions(b),M=T==="y",z=M?"top":"left",U=M?"bottom":"right",B=M?"clientHeight":"clientWidth",V=d.reference[D]+d.reference[T]-R[T]-d.floating[D],re=R[T]-d.reference[T],G=await(g.getOffsetParent==null?void 0:g.getOffsetParent(b));let H=G?G[B]:0;(!H||!await(g.isElement==null?void 0:g.isElement(G)))&&(H=y.floating[B]||d.floating[D]);const se=V/2-re/2,$=H/2-I[D]/2-1,be=qi(N[z],$),X=qi(N[U],$),Y=be,fe=H-I[D]-X,oe=H/2-I[D]/2+se,ee=Nh(Y,oe,fe),_e=!v.arrow&&Ta(c)!=null&&oe!==ee&&d.reference[D]/2-(oe<Y?be:X)-I[D]/2<0,he=_e?oe<Y?oe-Y:oe-fe:0;return{[T]:R[T]+he,data:{[T]:ee,centerOffset:oe-ee-he,..._e&&{alignmentOffset:he}},reset:_e}}}),HE=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:c,middlewareData:d,rects:g,initialPlacement:y,platform:v,elements:b}=e,{mainAxis:S=!0,crossAxis:N=!0,fallbackPlacements:R,fallbackStrategy:T="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:I=!0,...M}=Qs(t,e);if((n=d.arrow)!=null&&n.alignmentOffset)return{};const z=Js(c),U=ks(y),B=Js(y)===y,V=await(v.isRTL==null?void 0:v.isRTL(b.floating)),re=R||(B||!I?[bu(y)]:DE(y)),G=D!=="none";!R&&G&&re.push(...FE(y,I,D,V));const H=[y,...re],se=await Nl(e,M),$=[];let be=((o=d.flip)==null?void 0:o.overflows)||[];if(S&&$.push(se[z]),N){const oe=PE(c,g,V);$.push(se[oe[0]],se[oe[1]])}if(be=[...be,{placement:c,overflows:$}],!$.every(oe=>oe<=0)){var X,Y;const oe=(((X=d.flip)==null?void 0:X.index)||0)+1,ee=H[oe];if(ee&&(!(N==="alignment"?U!==ks(ee):!1)||be.every(me=>me.overflows[0]>0&&ks(me.placement)===U)))return{data:{index:oe,overflows:be},reset:{placement:ee}};let _e=(Y=be.filter(he=>he.overflows[0]<=0).sort((he,me)=>he.overflows[1]-me.overflows[1])[0])==null?void 0:Y.placement;if(!_e)switch(T){case"bestFit":{var fe;const he=(fe=be.filter(me=>{if(G){const ge=ks(me.placement);return ge===U||ge==="y"}return!0}).map(me=>[me.placement,me.overflows.filter(ge=>ge>0).reduce((ge,ve)=>ge+ve,0)]).sort((me,ge)=>me[1]-ge[1])[0])==null?void 0:fe[0];he&&(_e=he);break}case"initialPlacement":_e=y;break}if(c!==_e)return{reset:{placement:_e}}}return{}}}};function Qm(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Jm(t){return IE.some(e=>t[e]>=0)}const WE=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:o="referenceHidden",...c}=Qs(t,e);switch(o){case"referenceHidden":{const d=await Nl(e,{...c,elementContext:"reference"}),g=Qm(d,n.reference);return{data:{referenceHiddenOffsets:g,referenceHidden:Jm(g)}}}case"escaped":{const d=await Nl(e,{...c,altBoundary:!0}),g=Qm(d,n.floating);return{data:{escapedOffsets:g,escaped:Jm(g)}}}default:return{}}}}},Kx=new Set(["left","top"]);async function GE(t,e){const{placement:n,platform:o,elements:c}=t,d=await(o.isRTL==null?void 0:o.isRTL(c.floating)),g=Js(n),y=Ta(n),v=ks(n)==="y",b=Kx.has(g)?-1:1,S=d&&v?-1:1,N=Qs(e,t);let{mainAxis:R,crossAxis:T,alignmentAxis:D}=typeof N=="number"?{mainAxis:N,crossAxis:0,alignmentAxis:null}:{mainAxis:N.mainAxis||0,crossAxis:N.crossAxis||0,alignmentAxis:N.alignmentAxis};return y&&typeof D=="number"&&(T=y==="end"?D*-1:D),v?{x:T*S,y:R*b}:{x:R*b,y:T*S}}const qE=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:c,y:d,placement:g,middlewareData:y}=e,v=await GE(e,t);return g===((n=y.offset)==null?void 0:n.placement)&&(o=y.arrow)!=null&&o.alignmentOffset?{}:{x:c+v.x,y:d+v.y,data:{...v,placement:g}}}}},$E=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:c}=e,{mainAxis:d=!0,crossAxis:g=!1,limiter:y={fn:M=>{let{x:z,y:U}=M;return{x:z,y:U}}},...v}=Qs(t,e),b={x:n,y:o},S=await Nl(e,v),N=ks(Js(c)),R=o0(N);let T=b[R],D=b[N];if(d){const M=R==="y"?"top":"left",z=R==="y"?"bottom":"right",U=T+S[M],B=T-S[z];T=Nh(U,T,B)}if(g){const M=N==="y"?"top":"left",z=N==="y"?"bottom":"right",U=D+S[M],B=D-S[z];D=Nh(U,D,B)}const I=y.fn({...e,[R]:T,[N]:D});return{...I,data:{x:I.x-n,y:I.y-o,enabled:{[R]:d,[N]:g}}}}}},KE=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:o,placement:c,rects:d,middlewareData:g}=e,{offset:y=0,mainAxis:v=!0,crossAxis:b=!0}=Qs(t,e),S={x:n,y:o},N=ks(c),R=o0(N);let T=S[R],D=S[N];const I=Qs(y,e),M=typeof I=="number"?{mainAxis:I,crossAxis:0}:{mainAxis:0,crossAxis:0,...I};if(v){const B=R==="y"?"height":"width",V=d.reference[R]-d.floating[B]+M.mainAxis,re=d.reference[R]+d.reference[B]-M.mainAxis;T<V?T=V:T>re&&(T=re)}if(b){var z,U;const B=R==="y"?"width":"height",V=Kx.has(Js(c)),re=d.reference[N]-d.floating[B]+(V&&((z=g.offset)==null?void 0:z[N])||0)+(V?0:M.crossAxis),G=d.reference[N]+d.reference[B]+(V?0:((U=g.offset)==null?void 0:U[N])||0)-(V?M.crossAxis:0);D<re?D=re:D>G&&(D=G)}return{[R]:T,[N]:D}}}},XE=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,o;const{placement:c,rects:d,platform:g,elements:y}=e,{apply:v=()=>{},...b}=Qs(t,e),S=await Nl(e,b),N=Js(c),R=Ta(c),T=ks(c)==="y",{width:D,height:I}=d.floating;let M,z;N==="top"||N==="bottom"?(M=N,z=R===(await(g.isRTL==null?void 0:g.isRTL(y.floating))?"start":"end")?"left":"right"):(z=N,M=R==="end"?"top":"bottom");const U=I-S.top-S.bottom,B=D-S.left-S.right,V=qi(I-S[M],U),re=qi(D-S[z],B),G=!e.middlewareData.shift;let H=V,se=re;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(se=B),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(H=U),G&&!R){const be=Mn(S.left,0),X=Mn(S.right,0),Y=Mn(S.top,0),fe=Mn(S.bottom,0);T?se=D-2*(be!==0||X!==0?be+X:Mn(S.left,S.right)):H=I-2*(Y!==0||fe!==0?Y+fe:Mn(S.top,S.bottom))}await v({...e,availableWidth:se,availableHeight:H});const $=await g.getDimensions(y.floating);return D!==$.width||I!==$.height?{reset:{rects:!0}}:{}}}};function Bu(){return typeof window<"u"}function ka(t){return Xx(t)?(t.nodeName||"").toLowerCase():"#document"}function Fn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function js(t){var e;return(e=(Xx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Xx(t){return Bu()?t instanceof Node||t instanceof Fn(t).Node:!1}function gs(t){return Bu()?t instanceof Element||t instanceof Fn(t).Element:!1}function Os(t){return Bu()?t instanceof HTMLElement||t instanceof Fn(t).HTMLElement:!1}function ep(t){return!Bu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fn(t).ShadowRoot}const YE=new Set(["inline","contents"]);function Ul(t){const{overflow:e,overflowX:n,overflowY:o,display:c}=xs(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!YE.has(c)}const ZE=new Set(["table","td","th"]);function QE(t){return ZE.has(ka(t))}const JE=[":popover-open",":modal"];function Fu(t){return JE.some(e=>{try{return t.matches(e)}catch{return!1}})}const eC=["transform","translate","scale","rotate","perspective"],tC=["transform","translate","scale","rotate","perspective","filter"],rC=["paint","layout","strict","content"];function c0(t){const e=u0(),n=gs(t)?xs(t):t;return eC.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||tC.some(o=>(n.willChange||"").includes(o))||rC.some(o=>(n.contain||"").includes(o))}function nC(t){let e=$i(t);for(;Os(e)&&!Ea(e);){if(c0(e))return e;if(Fu(e))return null;e=$i(e)}return null}function u0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sC=new Set(["html","body","#document"]);function Ea(t){return sC.has(ka(t))}function xs(t){return Fn(t).getComputedStyle(t)}function Uu(t){return gs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function $i(t){if(ka(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ep(t)&&t.host||js(t);return ep(e)?e.host:e}function Yx(t){const e=$i(t);return Ea(e)?t.ownerDocument?t.ownerDocument.body:t.body:Os(e)&&Ul(e)?e:Yx(e)}function Al(t,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const c=Yx(t),d=c===((o=t.ownerDocument)==null?void 0:o.body),g=Fn(c);if(d){const y=Th(g);return e.concat(g,g.visualViewport||[],Ul(c)?c:[],y&&n?Al(y):[])}return e.concat(c,Al(c,[],n))}function Th(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Zx(t){const e=xs(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const c=Os(t),d=c?t.offsetWidth:n,g=c?t.offsetHeight:o,y=vu(n)!==d||vu(o)!==g;return y&&(n=d,o=g),{width:n,height:o,$:y}}function d0(t){return gs(t)?t:t.contextElement}function wa(t){const e=d0(t);if(!Os(e))return Is(1);const n=e.getBoundingClientRect(),{width:o,height:c,$:d}=Zx(e);let g=(d?vu(n.width):n.width)/o,y=(d?vu(n.height):n.height)/c;return(!g||!Number.isFinite(g))&&(g=1),(!y||!Number.isFinite(y))&&(y=1),{x:g,y}}const iC=Is(0);function Qx(t){const e=Fn(t);return!u0()||!e.visualViewport?iC:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function oC(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Fn(t)?!1:e}function Ao(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const c=t.getBoundingClientRect(),d=d0(t);let g=Is(1);e&&(o?gs(o)&&(g=wa(o)):g=wa(t));const y=oC(d,n,o)?Qx(d):Is(0);let v=(c.left+y.x)/g.x,b=(c.top+y.y)/g.y,S=c.width/g.x,N=c.height/g.y;if(d){const R=Fn(d),T=o&&gs(o)?Fn(o):o;let D=R,I=Th(D);for(;I&&o&&T!==D;){const M=wa(I),z=I.getBoundingClientRect(),U=xs(I),B=z.left+(I.clientLeft+parseFloat(U.paddingLeft))*M.x,V=z.top+(I.clientTop+parseFloat(U.paddingTop))*M.y;v*=M.x,b*=M.y,S*=M.x,N*=M.y,v+=B,b+=V,D=Fn(I),I=Th(D)}}return Eu({width:S,height:N,x:v,y:b})}function f0(t,e){const n=Uu(t).scrollLeft;return e?e.left+n:Ao(js(t)).left+n}function Jx(t,e,n){n===void 0&&(n=!1);const o=t.getBoundingClientRect(),c=o.left+e.scrollLeft-(n?0:f0(t,o)),d=o.top+e.scrollTop;return{x:c,y:d}}function aC(t){let{elements:e,rect:n,offsetParent:o,strategy:c}=t;const d=c==="fixed",g=js(o),y=e?Fu(e.floating):!1;if(o===g||y&&d)return n;let v={scrollLeft:0,scrollTop:0},b=Is(1);const S=Is(0),N=Os(o);if((N||!N&&!d)&&((ka(o)!=="body"||Ul(g))&&(v=Uu(o)),Os(o))){const T=Ao(o);b=wa(o),S.x=T.x+o.clientLeft,S.y=T.y+o.clientTop}const R=g&&!N&&!d?Jx(g,v,!0):Is(0);return{width:n.width*b.x,height:n.height*b.y,x:n.x*b.x-v.scrollLeft*b.x+S.x+R.x,y:n.y*b.y-v.scrollTop*b.y+S.y+R.y}}function lC(t){return Array.from(t.getClientRects())}function cC(t){const e=js(t),n=Uu(t),o=t.ownerDocument.body,c=Mn(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),d=Mn(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let g=-n.scrollLeft+f0(t);const y=-n.scrollTop;return xs(o).direction==="rtl"&&(g+=Mn(e.clientWidth,o.clientWidth)-c),{width:c,height:d,x:g,y}}function uC(t,e){const n=Fn(t),o=js(t),c=n.visualViewport;let d=o.clientWidth,g=o.clientHeight,y=0,v=0;if(c){d=c.width,g=c.height;const b=u0();(!b||b&&e==="fixed")&&(y=c.offsetLeft,v=c.offsetTop)}return{width:d,height:g,x:y,y:v}}const dC=new Set(["absolute","fixed"]);function fC(t,e){const n=Ao(t,!0,e==="fixed"),o=n.top+t.clientTop,c=n.left+t.clientLeft,d=Os(t)?wa(t):Is(1),g=t.clientWidth*d.x,y=t.clientHeight*d.y,v=c*d.x,b=o*d.y;return{width:g,height:y,x:v,y:b}}function tp(t,e,n){let o;if(e==="viewport")o=uC(t,n);else if(e==="document")o=cC(js(t));else if(gs(e))o=fC(e,n);else{const c=Qx(t);o={x:e.x-c.x,y:e.y-c.y,width:e.width,height:e.height}}return Eu(o)}function ey(t,e){const n=$i(t);return n===e||!gs(n)||Ea(n)?!1:xs(n).position==="fixed"||ey(n,e)}function hC(t,e){const n=e.get(t);if(n)return n;let o=Al(t,[],!1).filter(y=>gs(y)&&ka(y)!=="body"),c=null;const d=xs(t).position==="fixed";let g=d?$i(t):t;for(;gs(g)&&!Ea(g);){const y=xs(g),v=c0(g);!v&&y.position==="fixed"&&(c=null),(d?!v&&!c:!v&&y.position==="static"&&!!c&&dC.has(c.position)||Ul(g)&&!v&&ey(t,g))?o=o.filter(S=>S!==g):c=y,g=$i(g)}return e.set(t,o),o}function mC(t){let{element:e,boundary:n,rootBoundary:o,strategy:c}=t;const g=[...n==="clippingAncestors"?Fu(e)?[]:hC(e,this._c):[].concat(n),o],y=g[0],v=g.reduce((b,S)=>{const N=tp(e,S,c);return b.top=Mn(N.top,b.top),b.right=qi(N.right,b.right),b.bottom=qi(N.bottom,b.bottom),b.left=Mn(N.left,b.left),b},tp(e,y,c));return{width:v.right-v.left,height:v.bottom-v.top,x:v.left,y:v.top}}function pC(t){const{width:e,height:n}=Zx(t);return{width:e,height:n}}function gC(t,e,n){const o=Os(e),c=js(e),d=n==="fixed",g=Ao(t,!0,d,e);let y={scrollLeft:0,scrollTop:0};const v=Is(0);function b(){v.x=f0(c)}if(o||!o&&!d)if((ka(e)!=="body"||Ul(c))&&(y=Uu(e)),o){const T=Ao(e,!0,d,e);v.x=T.x+e.clientLeft,v.y=T.y+e.clientTop}else c&&b();d&&!o&&c&&b();const S=c&&!o&&!d?Jx(c,y):Is(0),N=g.left+y.scrollLeft-v.x-S.x,R=g.top+y.scrollTop-v.y-S.y;return{x:N,y:R,width:g.width,height:g.height}}function Tf(t){return xs(t).position==="static"}function rp(t,e){if(!Os(t)||xs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return js(t)===n&&(n=n.ownerDocument.body),n}function ty(t,e){const n=Fn(t);if(Fu(t))return n;if(!Os(t)){let c=$i(t);for(;c&&!Ea(c);){if(gs(c)&&!Tf(c))return c;c=$i(c)}return n}let o=rp(t,e);for(;o&&QE(o)&&Tf(o);)o=rp(o,e);return o&&Ea(o)&&Tf(o)&&!c0(o)?n:o||nC(t)||n}const xC=async function(t){const e=this.getOffsetParent||ty,n=this.getDimensions,o=await n(t.floating);return{reference:gC(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function yC(t){return xs(t).direction==="rtl"}const wC={convertOffsetParentRelativeRectToViewportRelativeRect:aC,getDocumentElement:js,getClippingRect:mC,getOffsetParent:ty,getElementRects:xC,getClientRects:lC,getDimensions:pC,getScale:wa,isElement:gs,isRTL:yC};function ry(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function vC(t,e){let n=null,o;const c=js(t);function d(){var y;clearTimeout(o),(y=n)==null||y.disconnect(),n=null}function g(y,v){y===void 0&&(y=!1),v===void 0&&(v=1),d();const b=t.getBoundingClientRect(),{left:S,top:N,width:R,height:T}=b;if(y||e(),!R||!T)return;const D=eu(N),I=eu(c.clientWidth-(S+R)),M=eu(c.clientHeight-(N+T)),z=eu(S),B={rootMargin:-D+"px "+-I+"px "+-M+"px "+-z+"px",threshold:Mn(0,qi(1,v))||1};let V=!0;function re(G){const H=G[0].intersectionRatio;if(H!==v){if(!V)return g();H?g(!1,H):o=setTimeout(()=>{g(!1,1e-7)},1e3)}H===1&&!ry(b,t.getBoundingClientRect())&&g(),V=!1}try{n=new IntersectionObserver(re,{...B,root:c.ownerDocument})}catch{n=new IntersectionObserver(re,B)}n.observe(t)}return g(!0),d}function bC(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:c=!0,ancestorResize:d=!0,elementResize:g=typeof ResizeObserver=="function",layoutShift:y=typeof IntersectionObserver=="function",animationFrame:v=!1}=o,b=d0(t),S=c||d?[...b?Al(b):[],...Al(e)]:[];S.forEach(z=>{c&&z.addEventListener("scroll",n,{passive:!0}),d&&z.addEventListener("resize",n)});const N=b&&y?vC(b,n):null;let R=-1,T=null;g&&(T=new ResizeObserver(z=>{let[U]=z;U&&U.target===b&&T&&(T.unobserve(e),cancelAnimationFrame(R),R=requestAnimationFrame(()=>{var B;(B=T)==null||B.observe(e)})),n()}),b&&!v&&T.observe(b),T.observe(e));let D,I=v?Ao(t):null;v&&M();function M(){const z=Ao(t);I&&!ry(I,z)&&n(),I=z,D=requestAnimationFrame(M)}return n(),()=>{var z;S.forEach(U=>{c&&U.removeEventListener("scroll",n),d&&U.removeEventListener("resize",n)}),N?.(),(z=T)==null||z.disconnect(),T=null,v&&cancelAnimationFrame(D)}}const EC=qE,CC=$E,_C=HE,SC=XE,NC=WE,np=VE,AC=KE,TC=(t,e,n)=>{const o=new Map,c={platform:wC,...n},d={...c.platform,_c:o};return zE(t,e,{...c,platform:d})};var kC=typeof document<"u",IC=function(){},pu=kC?O.useLayoutEffect:IC;function Cu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,o,c;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(o=n;o--!==0;)if(!Cu(t[o],e[o]))return!1;return!0}if(c=Object.keys(t),n=c.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(e,c[o]))return!1;for(o=n;o--!==0;){const d=c[o];if(!(d==="_owner"&&t.$$typeof)&&!Cu(t[d],e[d]))return!1}return!0}return t!==t&&e!==e}function ny(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function sp(t,e){const n=ny(t);return Math.round(e*n)/n}function kf(t){const e=O.useRef(t);return pu(()=>{e.current=t}),e}function RC(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:o=[],platform:c,elements:{reference:d,floating:g}={},transform:y=!0,whileElementsMounted:v,open:b}=t,[S,N]=O.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[R,T]=O.useState(o);Cu(R,o)||T(o);const[D,I]=O.useState(null),[M,z]=O.useState(null),U=O.useCallback(me=>{me!==G.current&&(G.current=me,I(me))},[]),B=O.useCallback(me=>{me!==H.current&&(H.current=me,z(me))},[]),V=d||D,re=g||M,G=O.useRef(null),H=O.useRef(null),se=O.useRef(S),$=v!=null,be=kf(v),X=kf(c),Y=kf(b),fe=O.useCallback(()=>{if(!G.current||!H.current)return;const me={placement:e,strategy:n,middleware:R};X.current&&(me.platform=X.current),TC(G.current,H.current,me).then(ge=>{const ve={...ge,isPositioned:Y.current!==!1};oe.current&&!Cu(se.current,ve)&&(se.current=ve,ju.flushSync(()=>{N(ve)}))})},[R,e,n,X,Y]);pu(()=>{b===!1&&se.current.isPositioned&&(se.current.isPositioned=!1,N(me=>({...me,isPositioned:!1})))},[b]);const oe=O.useRef(!1);pu(()=>(oe.current=!0,()=>{oe.current=!1}),[]),pu(()=>{if(V&&(G.current=V),re&&(H.current=re),V&&re){if(be.current)return be.current(V,re,fe);fe()}},[V,re,fe,be,$]);const ee=O.useMemo(()=>({reference:G,floating:H,setReference:U,setFloating:B}),[U,B]),_e=O.useMemo(()=>({reference:V,floating:re}),[V,re]),he=O.useMemo(()=>{const me={position:n,left:0,top:0};if(!_e.floating)return me;const ge=sp(_e.floating,S.x),ve=sp(_e.floating,S.y);return y?{...me,transform:"translate("+ge+"px, "+ve+"px)",...ny(_e.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ge,top:ve}},[n,y,_e.floating,S.x,S.y]);return O.useMemo(()=>({...S,update:fe,refs:ee,elements:_e,floatingStyles:he}),[S,fe,ee,_e,he])}const OC=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:o,padding:c}=typeof t=="function"?t(n):t;return o&&e(o)?o.current!=null?np({element:o.current,padding:c}).fn(n):{}:o?np({element:o,padding:c}).fn(n):{}}}},jC=(t,e)=>({...EC(t),options:[t,e]}),PC=(t,e)=>({...CC(t),options:[t,e]}),DC=(t,e)=>({...AC(t),options:[t,e]}),MC=(t,e)=>({..._C(t),options:[t,e]}),LC=(t,e)=>({...SC(t),options:[t,e]}),BC=(t,e)=>({...NC(t),options:[t,e]}),FC=(t,e)=>({...OC(t),options:[t,e]});var UC="Arrow",sy=O.forwardRef((t,e)=>{const{children:n,width:o=10,height:c=5,...d}=t;return h.jsx(br.svg,{...d,ref:e,width:o,height:c,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});sy.displayName=UC;var zC=sy;function VC(t){const[e,n]=O.useState(void 0);return Zs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const o=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const d=c[0];let g,y;if("borderBoxSize"in d){const v=d.borderBoxSize,b=Array.isArray(v)?v[0]:v;g=b.inlineSize,y=b.blockSize}else g=t.offsetWidth,y=t.offsetHeight;n({width:g,height:y})});return o.observe(t,{box:"border-box"}),()=>o.unobserve(t)}else n(void 0)},[t]),e}var iy="Popper",[oy,ay]=Bl(iy),[v8,ly]=oy(iy),cy="PopperAnchor",uy=O.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:o,...c}=t,d=ly(cy,n),g=O.useRef(null),y=on(e,g);return O.useEffect(()=>{d.onAnchorChange(o?.current||g.current)}),o?null:h.jsx(br.div,{...c,ref:y})});uy.displayName=cy;var h0="PopperContent",[HC,WC]=oy(h0),dy=O.forwardRef((t,e)=>{const{__scopePopper:n,side:o="bottom",sideOffset:c=0,align:d="center",alignOffset:g=0,arrowPadding:y=0,avoidCollisions:v=!0,collisionBoundary:b=[],collisionPadding:S=0,sticky:N="partial",hideWhenDetached:R=!1,updatePositionStrategy:T="optimized",onPlaced:D,...I}=t,M=ly(h0,n),[z,U]=O.useState(null),B=on(e,Ee=>U(Ee)),[V,re]=O.useState(null),G=VC(V),H=G?.width??0,se=G?.height??0,$=o+(d!=="center"?"-"+d:""),be=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},X=Array.isArray(b)?b:[b],Y=X.length>0,fe={padding:be,boundary:X.filter(qC),altBoundary:Y},{refs:oe,floatingStyles:ee,placement:_e,isPositioned:he,middlewareData:me}=RC({strategy:"fixed",placement:$,whileElementsMounted:(...Ee)=>bC(...Ee,{animationFrame:T==="always"}),elements:{reference:M.anchor},middleware:[jC({mainAxis:c+se,alignmentAxis:g}),v&&PC({mainAxis:!0,crossAxis:!1,limiter:N==="partial"?DC():void 0,...fe}),v&&MC({...fe}),LC({...fe,apply:({elements:Ee,rects:Te,availableWidth:Ye,availableHeight:ht})=>{const{width:wt,height:At}=Te.reference,Ke=Ee.floating.style;Ke.setProperty("--radix-popper-available-width",`${Ye}px`),Ke.setProperty("--radix-popper-available-height",`${ht}px`),Ke.setProperty("--radix-popper-anchor-width",`${wt}px`),Ke.setProperty("--radix-popper-anchor-height",`${At}px`)}}),V&&FC({element:V,padding:y}),$C({arrowWidth:H,arrowHeight:se}),R&&BC({strategy:"referenceHidden",...fe})]}),[ge,ve]=my(_e),te=Rs(D);Zs(()=>{he&&te?.()},[he,te]);const ue=me.arrow?.x,je=me.arrow?.y,Ie=me.arrow?.centerOffset!==0,[we,ce]=O.useState();return Zs(()=>{z&&ce(window.getComputedStyle(z).zIndex)},[z]),h.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:he?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[me.transformOrigin?.x,me.transformOrigin?.y].join(" "),...me.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(HC,{scope:n,placedSide:ge,onArrowChange:re,arrowX:ue,arrowY:je,shouldHideArrow:Ie,children:h.jsx(br.div,{"data-side":ge,"data-align":ve,...I,ref:B,style:{...I.style,animation:he?void 0:"none"}})})})});dy.displayName=h0;var fy="PopperArrow",GC={top:"bottom",right:"left",bottom:"top",left:"right"},hy=O.forwardRef(function(e,n){const{__scopePopper:o,...c}=e,d=WC(fy,o),g=GC[d.placedSide];return h.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[g]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:h.jsx(zC,{...c,ref:n,style:{...c.style,display:"block"}})})});hy.displayName=fy;function qC(t){return t!==null}var $C=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:o,middlewareData:c}=e,g=c.arrow?.centerOffset!==0,y=g?0:t.arrowWidth,v=g?0:t.arrowHeight,[b,S]=my(n),N={start:"0%",center:"50%",end:"100%"}[S],R=(c.arrow?.x??0)+y/2,T=(c.arrow?.y??0)+v/2;let D="",I="";return b==="bottom"?(D=g?N:`${R}px`,I=`${-v}px`):b==="top"?(D=g?N:`${R}px`,I=`${o.floating.height+v}px`):b==="right"?(D=`${-v}px`,I=g?N:`${T}px`):b==="left"&&(D=`${o.floating.width+v}px`,I=g?N:`${T}px`),{data:{x:D,y:I}}}});function my(t){const[e,n="center"]=t.split("-");return[e,n]}var KC=uy,XC=dy,YC=hy,[zu]=Bl("Tooltip",[ay]),m0=ay(),py="TooltipProvider",ZC=700,ip="tooltip.open",[QC,gy]=zu(py),xy=t=>{const{__scopeTooltip:e,delayDuration:n=ZC,skipDelayDuration:o=300,disableHoverableContent:c=!1,children:d}=t,g=O.useRef(!0),y=O.useRef(!1),v=O.useRef(0);return O.useEffect(()=>{const b=v.current;return()=>window.clearTimeout(b)},[]),h.jsx(QC,{scope:e,isOpenDelayedRef:g,delayDuration:n,onOpen:O.useCallback(()=>{window.clearTimeout(v.current),g.current=!1},[]),onClose:O.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>g.current=!0,o)},[o]),isPointerInTransitRef:y,onPointerInTransitChange:O.useCallback(b=>{y.current=b},[]),disableHoverableContent:c,children:d})};xy.displayName=py;var yy="Tooltip",[b8,Vu]=zu(yy),kh="TooltipTrigger",JC=O.forwardRef((t,e)=>{const{__scopeTooltip:n,...o}=t,c=Vu(kh,n),d=gy(kh,n),g=m0(n),y=O.useRef(null),v=on(e,y,c.onTriggerChange),b=O.useRef(!1),S=O.useRef(!1),N=O.useCallback(()=>b.current=!1,[]);return O.useEffect(()=>()=>document.removeEventListener("pointerup",N),[N]),h.jsx(KC,{asChild:!0,...g,children:h.jsx(br.button,{"aria-describedby":c.open?c.contentId:void 0,"data-state":c.stateAttribute,...o,ref:v,onPointerMove:Qt(t.onPointerMove,R=>{R.pointerType!=="touch"&&!S.current&&!d.isPointerInTransitRef.current&&(c.onTriggerEnter(),S.current=!0)}),onPointerLeave:Qt(t.onPointerLeave,()=>{c.onTriggerLeave(),S.current=!1}),onPointerDown:Qt(t.onPointerDown,()=>{c.open&&c.onClose(),b.current=!0,document.addEventListener("pointerup",N,{once:!0})}),onFocus:Qt(t.onFocus,()=>{b.current||c.onOpen()}),onBlur:Qt(t.onBlur,c.onClose),onClick:Qt(t.onClick,c.onClose)})})});JC.displayName=kh;var e3="TooltipPortal",[E8,t3]=zu(e3,{forceMount:void 0}),Ca="TooltipContent",wy=O.forwardRef((t,e)=>{const n=t3(Ca,t.__scopeTooltip),{forceMount:o=n.forceMount,side:c="top",...d}=t,g=Vu(Ca,t.__scopeTooltip);return h.jsx(_a,{present:o||g.open,children:g.disableHoverableContent?h.jsx(vy,{side:c,...d,ref:e}):h.jsx(r3,{side:c,...d,ref:e})})}),r3=O.forwardRef((t,e)=>{const n=Vu(Ca,t.__scopeTooltip),o=gy(Ca,t.__scopeTooltip),c=O.useRef(null),d=on(e,c),[g,y]=O.useState(null),{trigger:v,onClose:b}=n,S=c.current,{onPointerInTransitChange:N}=o,R=O.useCallback(()=>{y(null),N(!1)},[N]),T=O.useCallback((D,I)=>{const M=D.currentTarget,z={x:D.clientX,y:D.clientY},U=a3(z,M.getBoundingClientRect()),B=l3(z,U),V=c3(I.getBoundingClientRect()),re=d3([...B,...V]);y(re),N(!0)},[N]);return O.useEffect(()=>()=>R(),[R]),O.useEffect(()=>{if(v&&S){const D=M=>T(M,S),I=M=>T(M,v);return v.addEventListener("pointerleave",D),S.addEventListener("pointerleave",I),()=>{v.removeEventListener("pointerleave",D),S.removeEventListener("pointerleave",I)}}},[v,S,T,R]),O.useEffect(()=>{if(g){const D=I=>{const M=I.target,z={x:I.clientX,y:I.clientY},U=v?.contains(M)||S?.contains(M),B=!u3(z,g);U?R():B&&(R(),b())};return document.addEventListener("pointermove",D),()=>document.removeEventListener("pointermove",D)}},[v,S,g,b,R]),h.jsx(vy,{...t,ref:d})}),[n3,s3]=zu(yy,{isInside:!1}),i3=rv("TooltipContent"),vy=O.forwardRef((t,e)=>{const{__scopeTooltip:n,children:o,"aria-label":c,onEscapeKeyDown:d,onPointerDownOutside:g,...y}=t,v=Vu(Ca,n),b=m0(n),{onClose:S}=v;return O.useEffect(()=>(document.addEventListener(ip,S),()=>document.removeEventListener(ip,S)),[S]),O.useEffect(()=>{if(v.trigger){const N=R=>{R.target?.contains(v.trigger)&&S()};return window.addEventListener("scroll",N,{capture:!0}),()=>window.removeEventListener("scroll",N,{capture:!0})}},[v.trigger,S]),h.jsx(Pu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:d,onPointerDownOutside:g,onFocusOutside:N=>N.preventDefault(),onDismiss:S,children:h.jsxs(XC,{"data-state":v.stateAttribute,...b,...y,ref:e,style:{...y.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(i3,{children:o}),h.jsx(n3,{scope:n,isInside:!0,children:h.jsx(Nv,{id:v.contentId,role:"tooltip",children:c||o})})]})})});wy.displayName=Ca;var by="TooltipArrow",o3=O.forwardRef((t,e)=>{const{__scopeTooltip:n,...o}=t,c=m0(n);return s3(by,n).isInside?null:h.jsx(YC,{...c,...o,ref:e})});o3.displayName=by;function a3(t,e){const n=Math.abs(e.top-t.y),o=Math.abs(e.bottom-t.y),c=Math.abs(e.right-t.x),d=Math.abs(e.left-t.x);switch(Math.min(n,o,c,d)){case d:return"left";case c:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function l3(t,e,n=5){const o=[];switch(e){case"top":o.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":o.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":o.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":o.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return o}function c3(t){const{top:e,right:n,bottom:o,left:c}=t;return[{x:c,y:e},{x:n,y:e},{x:n,y:o},{x:c,y:o}]}function u3(t,e){const{x:n,y:o}=t;let c=!1;for(let d=0,g=e.length-1;d<e.length;g=d++){const y=e[d],v=e[g],b=y.x,S=y.y,N=v.x,R=v.y;S>o!=R>o&&n<(N-b)*(o-S)/(R-S)+b&&(c=!c)}return c}function d3(t){const e=t.slice();return e.sort((n,o)=>n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0),f3(e)}function f3(t){if(t.length<=1)return t.slice();const e=[];for(let o=0;o<t.length;o++){const c=t[o];for(;e.length>=2;){const d=e[e.length-1],g=e[e.length-2];if((d.x-g.x)*(c.y-g.y)>=(d.y-g.y)*(c.x-g.x))e.pop();else break}e.push(c)}e.pop();const n=[];for(let o=t.length-1;o>=0;o--){const c=t[o];for(;n.length>=2;){const d=n[n.length-1],g=n[n.length-2];if((d.x-g.x)*(c.y-g.y)>=(d.y-g.y)*(c.x-g.x))n.pop();else break}n.push(c)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var h3=xy,Ey=wy;const m3=h3,p3=O.forwardRef(({className:t,sideOffset:e=4,...n},o)=>h.jsx(Ey,{ref:o,sideOffset:e,className:Qn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));p3.displayName=Ey.displayName;var Hu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wu=typeof window>"u"||"Deno"in globalThis;function fs(){}function g3(t,e){return typeof t=="function"?t(e):t}function x3(t){return typeof t=="number"&&t>=0&&t!==1/0}function y3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ih(t,e){return typeof t=="function"?t(e):t}function w3(t,e){return typeof t=="function"?t(e):t}function op(t,e){const{type:n="all",exact:o,fetchStatus:c,predicate:d,queryKey:g,stale:y}=t;if(g){if(o){if(e.queryHash!==p0(g,e.options))return!1}else if(!kl(e.queryKey,g))return!1}if(n!=="all"){const v=e.isActive();if(n==="active"&&!v||n==="inactive"&&v)return!1}return!(typeof y=="boolean"&&e.isStale()!==y||c&&c!==e.state.fetchStatus||d&&!d(e))}function ap(t,e){const{exact:n,status:o,predicate:c,mutationKey:d}=t;if(d){if(!e.options.mutationKey)return!1;if(n){if(Tl(e.options.mutationKey)!==Tl(d))return!1}else if(!kl(e.options.mutationKey,d))return!1}return!(o&&e.state.status!==o||c&&!c(e))}function p0(t,e){return(e?.queryKeyHashFn||Tl)(t)}function Tl(t){return JSON.stringify(t,(e,n)=>Rh(n)?Object.keys(n).sort().reduce((o,c)=>(o[c]=n[c],o),{}):n)}function kl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>kl(t[n],e[n])):!1}function Cy(t,e){if(t===e)return t;const n=lp(t)&&lp(e);if(n||Rh(t)&&Rh(e)){const o=n?t:Object.keys(t),c=o.length,d=n?e:Object.keys(e),g=d.length,y=n?[]:{},v=new Set(o);let b=0;for(let S=0;S<g;S++){const N=n?S:d[S];(!n&&v.has(N)||n)&&t[N]===void 0&&e[N]===void 0?(y[N]=void 0,b++):(y[N]=Cy(t[N],e[N]),y[N]===t[N]&&t[N]!==void 0&&b++)}return c===g&&b===c?t:y}return e}function lp(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Rh(t){if(!cp(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!cp(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function cp(t){return Object.prototype.toString.call(t)==="[object Object]"}function v3(t){return new Promise(e=>{setTimeout(e,t)})}function b3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Cy(t,e):e}function E3(t,e,n=0){const o=[...t,e];return n&&o.length>n?o.slice(1):o}function C3(t,e,n=0){const o=[e,...t];return n&&o.length>n?o.slice(0,-1):o}var g0=Symbol();function _y(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===g0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var _3=class extends Hu{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!Wu&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Sy=new _3,S3=class extends Hu{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!Wu&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},_u=new S3;function N3(){let t,e;const n=new Promise((c,d)=>{t=c,e=d});n.status="pending",n.catch(()=>{});function o(c){Object.assign(n,c),delete n.resolve,delete n.reject}return n.resolve=c=>{o({status:"fulfilled",value:c}),t(c)},n.reject=c=>{o({status:"rejected",reason:c}),e(c)},n}function A3(t){return Math.min(1e3*2**t,3e4)}function Ny(t){return(t??"online")==="online"?_u.isOnline():!0}var Ay=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function If(t){return t instanceof Ay}function Ty(t){let e=!1,n=0,o=!1,c;const d=N3(),g=I=>{o||(R(new Ay(I)),t.abort?.())},y=()=>{e=!0},v=()=>{e=!1},b=()=>Sy.isFocused()&&(t.networkMode==="always"||_u.isOnline())&&t.canRun(),S=()=>Ny(t.networkMode)&&t.canRun(),N=I=>{o||(o=!0,t.onSuccess?.(I),c?.(),d.resolve(I))},R=I=>{o||(o=!0,t.onError?.(I),c?.(),d.reject(I))},T=()=>new Promise(I=>{c=M=>{(o||b())&&I(M)},t.onPause?.()}).then(()=>{c=void 0,o||t.onContinue?.()}),D=()=>{if(o)return;let I;const M=n===0?t.initialPromise:void 0;try{I=M??t.fn()}catch(z){I=Promise.reject(z)}Promise.resolve(I).then(N).catch(z=>{if(o)return;const U=t.retry??(Wu?0:3),B=t.retryDelay??A3,V=typeof B=="function"?B(n,z):B,re=U===!0||typeof U=="number"&&n<U||typeof U=="function"&&U(n,z);if(e||!re){R(z);return}n++,t.onFail?.(n,z),v3(V).then(()=>b()?void 0:T()).then(()=>{e?R(z):D()})})};return{promise:d,cancel:g,continue:()=>(c?.(),d),cancelRetry:y,continueRetry:v,canStart:S,start:()=>(S()?D():T().then(D),d)}}var T3=t=>setTimeout(t,0);function k3(){let t=[],e=0,n=y=>{y()},o=y=>{y()},c=T3;const d=y=>{e?t.push(y):c(()=>{n(y)})},g=()=>{const y=t;t=[],y.length&&c(()=>{o(()=>{y.forEach(v=>{n(v)})})})};return{batch:y=>{let v;e++;try{v=y()}finally{e--,e||g()}return v},batchCalls:y=>(...v)=>{d(()=>{y(...v)})},schedule:d,setNotifyFunction:y=>{n=y},setBatchNotifyFunction:y=>{o=y},setScheduler:y=>{c=y}}}var sn=k3(),ky=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),x3(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Wu?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},I3=class extends ky{#e;#t;#r;#s;#n;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#s=t.client,this.#r=this.#s.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=O3(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const n=b3(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(fs).catch(fs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>w3(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===g0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ih(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!y3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(b=>b.options.queryFn);v&&this.setOptions(v.options)}const n=new AbortController,o=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},c=()=>{const v=_y(this.options,e),S=(()=>{const N={client:this.#s,queryKey:this.queryKey,meta:this.meta};return o(N),N})();return this.#a=!1,this.options.persister?this.options.persister(v,S,this):v(S)},g=(()=>{const v={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:c};return o(v),v})();this.options.behavior?.onFetch(g,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==g.fetchOptions?.meta)&&this.#i({type:"fetch",meta:g.fetchOptions?.meta});const y=v=>{If(v)&&v.silent||this.#i({type:"error",error:v}),If(v)||(this.#r.config.onError?.(v,this),this.#r.config.onSettled?.(this.state.data,v,this)),this.scheduleGc()};return this.#n=Ty({initialPromise:e?.initialPromise,fn:g.fetchFn,abort:n.abort.bind(n),onSuccess:v=>{if(v===void 0){y(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(b){y(b);return}this.#r.config.onSuccess?.(v,this),this.#r.config.onSettled?.(v,this.state.error,this),this.scheduleGc()},onError:y,onFail:(v,b)=>{this.#i({type:"failed",failureCount:v,error:b})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay,networkMode:g.options.networkMode,canRun:()=>!0}),this.#n.start()}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...R3(n.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return If(o)&&o.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),sn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function R3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ny(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function O3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,o=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var j3=class extends Hu{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const o=e.queryKey,c=e.queryHash??p0(o,e);let d=this.get(c);return d||(d=new I3({client:t,queryKey:o,queryHash:c,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(o)}),this.add(d)),d}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>op(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>op(t,n)):e}notify(t){sn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){sn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){sn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},P3=class extends ky{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||D3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})};this.#r=Ty({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(c,d)=>{this.#s({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",o=!this.#r.canStart();try{if(n)e();else{this.#s({type:"pending",variables:t,isPaused:o}),await this.#t.config.onMutate?.(t,this);const d=await this.options.onMutate?.(t);d!==this.state.context&&this.#s({type:"pending",context:d,variables:t,isPaused:o})}const c=await this.#r.start();return await this.#t.config.onSuccess?.(c,t,this.state.context,this),await this.options.onSuccess?.(c,t,this.state.context),await this.#t.config.onSettled?.(c,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(c,null,t,this.state.context),this.#s({type:"success",data:c}),c}catch(c){try{throw await this.#t.config.onError?.(c,t,this.state.context,this),await this.options.onError?.(c,t,this.state.context),await this.#t.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,c,t,this.state.context),c}finally{this.#s({type:"error",error:c})}}finally{this.#t.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),sn.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function D3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var M3=class extends Hu{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,e,n){const o=new P3({mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(e),state:n});return this.add(o),o}add(t){this.#e.add(t);const e=tu(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=tu(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const o=n.indexOf(t);o!==-1&&n.splice(o,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=tu(t);if(typeof e=="string"){const o=this.#t.get(e)?.find(c=>c.state.status==="pending");return!o||o===t}else return!0}runNext(t){const e=tu(t);return typeof e=="string"?this.#t.get(e)?.find(o=>o!==t&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){sn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>ap(e,n))}findAll(t={}){return this.getAll().filter(e=>ap(t,e))}notify(t){sn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return sn.batch(()=>Promise.all(t.map(e=>e.continue().catch(fs))))}};function tu(t){return t.options.scope?.id}function up(t){return{onFetch:(e,n)=>{const o=e.options,c=e.fetchOptions?.meta?.fetchMore?.direction,d=e.state.data?.pages||[],g=e.state.data?.pageParams||[];let y={pages:[],pageParams:[]},v=0;const b=async()=>{let S=!1;const N=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(e.signal.aborted?S=!0:e.signal.addEventListener("abort",()=>{S=!0}),e.signal)})},R=_y(e.options,e.fetchOptions),T=async(D,I,M)=>{if(S)return Promise.reject();if(I==null&&D.pages.length)return Promise.resolve(D);const U=(()=>{const G={client:e.client,queryKey:e.queryKey,pageParam:I,direction:M?"backward":"forward",meta:e.options.meta};return N(G),G})(),B=await R(U),{maxPages:V}=e.options,re=M?C3:E3;return{pages:re(D.pages,B,V),pageParams:re(D.pageParams,I,V)}};if(c&&d.length){const D=c==="backward",I=D?L3:dp,M={pages:d,pageParams:g},z=I(o,M);y=await T(M,z,D)}else{const D=t??d.length;do{const I=v===0?g[0]??o.initialPageParam:dp(o,y);if(v>0&&I==null)break;y=await T(y,I),v++}while(v<D)}return y};e.options.persister?e.fetchFn=()=>e.options.persister?.(b,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=b}}}function dp(t,{pages:e,pageParams:n}){const o=e.length-1;return e.length>0?t.getNextPageParam(e[o],e,n[o],n):void 0}function L3(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var B3=class{#e;#t;#r;#s;#n;#o;#a;#i;constructor(t={}){this.#e=t.queryCache||new j3,this.#t=t.mutationCache||new M3,this.#r=t.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=Sy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=_u.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),o=n.state.data;return o===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ih(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(o))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const o=n.data;return[e,o]})}setQueryData(t,e,n){const o=this.defaultQueryOptions({queryKey:t}),d=this.#e.get(o.queryHash)?.state.data,g=g3(e,d);if(g!==void 0)return this.#e.build(this,o).setData(g,{...n,manual:!0})}setQueriesData(t,e,n){return sn.batch(()=>this.#e.findAll(t).map(({queryKey:o})=>[o,this.setQueryData(o,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;sn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return sn.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},o=sn.batch(()=>this.#e.findAll(t).map(c=>c.cancel(n)));return Promise.all(o).then(fs).catch(fs)}invalidateQueries(t,e={}){return sn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},o=sn.batch(()=>this.#e.findAll(t).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let d=c.fetch(void 0,n);return n.throwOnError||(d=d.catch(fs)),c.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(o).then(fs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Ih(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fs).catch(fs)}fetchInfiniteQuery(t){return t.behavior=up(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fs).catch(fs)}ensureInfiniteQueryData(t){return t.behavior=up(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return _u.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#s.set(Tl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(o=>{kl(t,o.queryKey)&&Object.assign(n,o.defaultOptions)}),n}setMutationDefaults(t,e){this.#n.set(Tl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#n.values()],n={};return e.forEach(o=>{kl(t,o.mutationKey)&&Object.assign(n,o.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=p0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===g0&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},F3=O.createContext(void 0),U3=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(F3.Provider,{value:t,children:e}));function Il(){return Il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Il.apply(this,arguments)}var Vi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vi||(Vi={}));const fp="popstate";function z3(t){t===void 0&&(t={});function e(o,c){let{pathname:d,search:g,hash:y}=o.location;return Oh("",{pathname:d,search:g,hash:y},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){return typeof c=="string"?c:Su(c)}return H3(e,n,null,t)}function gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V3(){return Math.random().toString(36).substr(2,8)}function hp(t,e){return{usr:t.state,key:t.key,idx:e}}function Oh(t,e,n,o){return n===void 0&&(n=null),Il({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ia(e):e,{state:n,key:e&&e.key||o||V3()})}function Su(t){let{pathname:e="/",search:n="",hash:o=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function Ia(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let o=t.indexOf("?");o>=0&&(e.search=t.substr(o),t=t.substr(0,o)),t&&(e.pathname=t)}return e}function H3(t,e,n,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:d=!1}=o,g=c.history,y=Vi.Pop,v=null,b=S();b==null&&(b=0,g.replaceState(Il({},g.state,{idx:b}),""));function S(){return(g.state||{idx:null}).idx}function N(){y=Vi.Pop;let M=S(),z=M==null?null:M-b;b=M,v&&v({action:y,location:I.location,delta:z})}function R(M,z){y=Vi.Push;let U=Oh(I.location,M,z);b=S()+1;let B=hp(U,b),V=I.createHref(U);try{g.pushState(B,"",V)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;c.location.assign(V)}d&&v&&v({action:y,location:I.location,delta:1})}function T(M,z){y=Vi.Replace;let U=Oh(I.location,M,z);b=S();let B=hp(U,b),V=I.createHref(U);g.replaceState(B,"",V),d&&v&&v({action:y,location:I.location,delta:0})}function D(M){let z=c.location.origin!=="null"?c.location.origin:c.location.href,U=typeof M=="string"?M:Su(M);return U=U.replace(/ $/,"%20"),gr(z,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,z)}let I={get action(){return y},get location(){return t(c,g)},listen(M){if(v)throw new Error("A history only accepts one active listener");return c.addEventListener(fp,N),v=M,()=>{c.removeEventListener(fp,N),v=null}},createHref(M){return e(c,M)},createURL:D,encodeLocation(M){let z=D(M);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:R,replace:T,go(M){return g.go(M)}};return I}var mp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mp||(mp={}));function W3(t,e,n){return n===void 0&&(n="/"),G3(t,e,n)}function G3(t,e,n,o){let c=typeof e=="string"?Ia(e):e,d=y0(c.pathname||"/",n);if(d==null)return null;let g=Iy(t);q3(g);let y=null;for(let v=0;y==null&&v<g.length;++v){let b=s_(d);y=t_(g[v],b)}return y}function Iy(t,e,n,o){e===void 0&&(e=[]),n===void 0&&(n=[]),o===void 0&&(o="");let c=(d,g,y)=>{let v={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};v.relativePath.startsWith("/")&&(gr(v.relativePath.startsWith(o),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(o.length));let b=Wi([o,v.relativePath]),S=n.concat(v);d.children&&d.children.length>0&&(gr(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),Iy(d.children,e,S,b)),!(d.path==null&&!d.index)&&e.push({path:b,score:J3(b,d.index),routesMeta:S})};return t.forEach((d,g)=>{var y;if(d.path===""||!((y=d.path)!=null&&y.includes("?")))c(d,g);else for(let v of Ry(d.path))c(d,g,v)}),e}function Ry(t){let e=t.split("/");if(e.length===0)return[];let[n,...o]=e,c=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return c?[d,""]:[d];let g=Ry(o.join("/")),y=[];return y.push(...g.map(v=>v===""?d:[d,v].join("/"))),c&&y.push(...g),y.map(v=>t.startsWith("/")&&v===""?"/":v)}function q3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:e_(e.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const $3=/^:[\w-]+$/,K3=3,X3=2,Y3=1,Z3=10,Q3=-2,pp=t=>t==="*";function J3(t,e){let n=t.split("/"),o=n.length;return n.some(pp)&&(o+=Q3),e&&(o+=X3),n.filter(c=>!pp(c)).reduce((c,d)=>c+($3.test(d)?K3:d===""?Y3:Z3),o)}function e_(t,e){return t.length===e.length&&t.slice(0,-1).every((o,c)=>o===e[c])?t[t.length-1]-e[e.length-1]:0}function t_(t,e,n){let{routesMeta:o}=t,c={},d="/",g=[];for(let y=0;y<o.length;++y){let v=o[y],b=y===o.length-1,S=d==="/"?e:e.slice(d.length)||"/",N=r_({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},S),R=v.route;if(!N)return null;Object.assign(c,N.params),g.push({params:c,pathname:Wi([d,N.pathname]),pathnameBase:c_(Wi([d,N.pathnameBase])),route:R}),N.pathnameBase!=="/"&&(d=Wi([d,N.pathnameBase]))}return g}function r_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,o]=n_(t.path,t.caseSensitive,t.end),c=e.match(n);if(!c)return null;let d=c[0],g=d.replace(/(.)\/+$/,"$1"),y=c.slice(1);return{params:o.reduce((b,S,N)=>{let{paramName:R,isOptional:T}=S;if(R==="*"){let I=y[N]||"";g=d.slice(0,d.length-I.length).replace(/(.)\/+$/,"$1")}const D=y[N];return T&&!D?b[R]=void 0:b[R]=(D||"").replace(/%2F/g,"/"),b},{}),pathname:d,pathnameBase:g,pattern:t}}function n_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),x0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,y,v)=>(o.push({paramName:y,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),o]}function s_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return x0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function y0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,o=t.charAt(n);return o&&o!=="/"?null:t.slice(n)||"/"}const i_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o_=t=>i_.test(t);function a_(t,e){e===void 0&&(e="/");let{pathname:n,search:o="",hash:c=""}=typeof t=="string"?Ia(t):t,d;if(n)if(o_(n))d=n;else{if(n.includes("//")){let g=n;n=n.replace(/\/\/+/g,"/"),x0(!1,"Pathnames cannot have embedded double slashes - normalizing "+(g+" -> "+n))}n.startsWith("/")?d=gp(n.substring(1),"/"):d=gp(n,e)}else d=e;return{pathname:d,search:u_(o),hash:d_(c)}}function gp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function Rf(t,e,n,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function l_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function w0(t,e){let n=l_(t);return e?n.map((o,c)=>c===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function v0(t,e,n,o){o===void 0&&(o=!1);let c;typeof t=="string"?c=Ia(t):(c=Il({},t),gr(!c.pathname||!c.pathname.includes("?"),Rf("?","pathname","search",c)),gr(!c.pathname||!c.pathname.includes("#"),Rf("#","pathname","hash",c)),gr(!c.search||!c.search.includes("#"),Rf("#","search","hash",c)));let d=t===""||c.pathname==="",g=d?"/":c.pathname,y;if(g==null)y=n;else{let N=e.length-1;if(!o&&g.startsWith("..")){let R=g.split("/");for(;R[0]==="..";)R.shift(),N-=1;c.pathname=R.join("/")}y=N>=0?e[N]:"/"}let v=a_(c,y),b=g&&g!=="/"&&g.endsWith("/"),S=(d||g===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(b||S)&&(v.pathname+="/"),v}const Wi=t=>t.join("/").replace(/\/\/+/g,"/"),c_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),u_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,d_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function f_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Oy=["post","put","patch","delete"];new Set(Oy);const h_=["get",...Oy];new Set(h_);function Rl(){return Rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Rl.apply(this,arguments)}const b0=O.createContext(null),m_=O.createContext(null),Ki=O.createContext(null),Gu=O.createContext(null),ri=O.createContext({outlet:null,matches:[],isDataRoute:!1}),jy=O.createContext(null);function p_(t,e){let{relative:n}=e===void 0?{}:e;Ra()||gr(!1);let{basename:o,navigator:c}=O.useContext(Ki),{hash:d,pathname:g,search:y}=Dy(t,{relative:n}),v=g;return o!=="/"&&(v=g==="/"?o:Wi([o,g])),c.createHref({pathname:v,search:y,hash:d})}function Ra(){return O.useContext(Gu)!=null}function ni(){return Ra()||gr(!1),O.useContext(Gu).location}function Py(t){O.useContext(Ki).static||O.useLayoutEffect(t)}function si(){let{isDataRoute:t}=O.useContext(ri);return t?T_():g_()}function g_(){Ra()||gr(!1);let t=O.useContext(b0),{basename:e,future:n,navigator:o}=O.useContext(Ki),{matches:c}=O.useContext(ri),{pathname:d}=ni(),g=JSON.stringify(w0(c,n.v7_relativeSplatPath)),y=O.useRef(!1);return Py(()=>{y.current=!0}),O.useCallback(function(b,S){if(S===void 0&&(S={}),!y.current)return;if(typeof b=="number"){o.go(b);return}let N=v0(b,JSON.parse(g),d,S.relative==="path");t==null&&e!=="/"&&(N.pathname=N.pathname==="/"?e:Wi([e,N.pathname])),(S.replace?o.replace:o.push)(N,S.state,S)},[e,o,g,d,t])}function E0(){let{matches:t}=O.useContext(ri),e=t[t.length-1];return e?e.params:{}}function Dy(t,e){let{relative:n}=e===void 0?{}:e,{future:o}=O.useContext(Ki),{matches:c}=O.useContext(ri),{pathname:d}=ni(),g=JSON.stringify(w0(c,o.v7_relativeSplatPath));return O.useMemo(()=>v0(t,JSON.parse(g),d,n==="path"),[t,g,d,n])}function x_(t,e){return y_(t,e)}function y_(t,e,n,o){Ra()||gr(!1);let{navigator:c}=O.useContext(Ki),{matches:d}=O.useContext(ri),g=d[d.length-1],y=g?g.params:{};g&&g.pathname;let v=g?g.pathnameBase:"/";g&&g.route;let b=ni(),S;if(e){var N;let M=typeof e=="string"?Ia(e):e;v==="/"||(N=M.pathname)!=null&&N.startsWith(v)||gr(!1),S=M}else S=b;let R=S.pathname||"/",T=R;if(v!=="/"){let M=v.replace(/^\//,"").split("/");T="/"+R.replace(/^\//,"").split("/").slice(M.length).join("/")}let D=W3(t,{pathname:T}),I=C_(D&&D.map(M=>Object.assign({},M,{params:Object.assign({},y,M.params),pathname:Wi([v,c.encodeLocation?c.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?v:Wi([v,c.encodeLocation?c.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),d,n,o);return e&&I?O.createElement(Gu.Provider,{value:{location:Rl({pathname:"/",search:"",hash:"",state:null,key:"default"},S),navigationType:Vi.Pop}},I):I}function w_(){let t=A_(),e=f_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:c},n):null,null)}const v_=O.createElement(w_,null);class b_ extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ri.Provider,{value:this.props.routeContext},O.createElement(jy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E_(t){let{routeContext:e,match:n,children:o}=t,c=O.useContext(b0);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ri.Provider,{value:e},o)}function C_(t,e,n,o){var c;if(e===void 0&&(e=[]),n===void 0&&(n=null),o===void 0&&(o=null),t==null){var d;if(!n)return null;if(n.errors)t=n.matches;else if((d=o)!=null&&d.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let g=t,y=(c=n)==null?void 0:c.errors;if(y!=null){let S=g.findIndex(N=>N.route.id&&y?.[N.route.id]!==void 0);S>=0||gr(!1),g=g.slice(0,Math.min(g.length,S+1))}let v=!1,b=-1;if(n&&o&&o.v7_partialHydration)for(let S=0;S<g.length;S++){let N=g[S];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(b=S),N.route.id){let{loaderData:R,errors:T}=n,D=N.route.loader&&R[N.route.id]===void 0&&(!T||T[N.route.id]===void 0);if(N.route.lazy||D){v=!0,b>=0?g=g.slice(0,b+1):g=[g[0]];break}}}return g.reduceRight((S,N,R)=>{let T,D=!1,I=null,M=null;n&&(T=y&&N.route.id?y[N.route.id]:void 0,I=N.route.errorElement||v_,v&&(b<0&&R===0?(k_("route-fallback"),D=!0,M=null):b===R&&(D=!0,M=N.route.hydrateFallbackElement||null)));let z=e.concat(g.slice(0,R+1)),U=()=>{let B;return T?B=I:D?B=M:N.route.Component?B=O.createElement(N.route.Component,null):N.route.element?B=N.route.element:B=S,O.createElement(E_,{match:N,routeContext:{outlet:S,matches:z,isDataRoute:n!=null},children:B})};return n&&(N.route.ErrorBoundary||N.route.errorElement||R===0)?O.createElement(b_,{location:n.location,revalidation:n.revalidation,component:I,error:T,children:U(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):U()},null)}var My=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(My||{}),Ly=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Ly||{});function __(t){let e=O.useContext(b0);return e||gr(!1),e}function S_(t){let e=O.useContext(m_);return e||gr(!1),e}function N_(t){let e=O.useContext(ri);return e||gr(!1),e}function By(t){let e=N_(),n=e.matches[e.matches.length-1];return n.route.id||gr(!1),n.route.id}function A_(){var t;let e=O.useContext(jy),n=S_(),o=By();return e!==void 0?e:(t=n.errors)==null?void 0:t[o]}function T_(){let{router:t}=__(My.UseNavigateStable),e=By(Ly.UseNavigateStable),n=O.useRef(!1);return Py(()=>{n.current=!0}),O.useCallback(function(c,d){d===void 0&&(d={}),n.current&&(typeof c=="number"?t.navigate(c):t.navigate(c,Rl({fromRouteId:e},d)))},[t,e])}const xp={};function k_(t,e,n){xp[t]||(xp[t]=!0)}function I_(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function jh(t){let{to:e,replace:n,state:o,relative:c}=t;Ra()||gr(!1);let{future:d,static:g}=O.useContext(Ki),{matches:y}=O.useContext(ri),{pathname:v}=ni(),b=si(),S=v0(e,w0(y,d.v7_relativeSplatPath),v,c==="path"),N=JSON.stringify(S);return O.useEffect(()=>b(JSON.parse(N),{replace:n,state:o,relative:c}),[b,N,c,n,o]),null}function pr(t){gr(!1)}function R_(t){let{basename:e="/",children:n=null,location:o,navigationType:c=Vi.Pop,navigator:d,static:g=!1,future:y}=t;Ra()&&gr(!1);let v=e.replace(/^\/*/,"/"),b=O.useMemo(()=>({basename:v,navigator:d,static:g,future:Rl({v7_relativeSplatPath:!1},y)}),[v,y,d,g]);typeof o=="string"&&(o=Ia(o));let{pathname:S="/",search:N="",hash:R="",state:T=null,key:D="default"}=o,I=O.useMemo(()=>{let M=y0(S,v);return M==null?null:{location:{pathname:M,search:N,hash:R,state:T,key:D},navigationType:c}},[v,S,N,R,T,D,c]);return I==null?null:O.createElement(Ki.Provider,{value:b},O.createElement(Gu.Provider,{children:n,value:I}))}function O_(t){let{children:e,location:n}=t;return x_(Ph(e),n)}new Promise(()=>{});function Ph(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(o,c)=>{if(!O.isValidElement(o))return;let d=[...e,c];if(o.type===O.Fragment){n.push.apply(n,Ph(o.props.children,d));return}o.type!==pr&&gr(!1),!o.props.index||!o.props.children||gr(!1);let g={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(g.children=Ph(o.props.children,d)),n.push(g)}),n}function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Dh.apply(this,arguments)}function j_(t,e){if(t==null)return{};var n={},o=Object.keys(t),c,d;for(d=0;d<o.length;d++)c=o[d],!(e.indexOf(c)>=0)&&(n[c]=t[c]);return n}function P_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function D_(t,e){return t.button===0&&(!e||e==="_self")&&!P_(t)}const M_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],L_="6";try{window.__reactRouterVersion=L_}catch{}const B_="startTransition",yp=Zh[B_];function F_(t){let{basename:e,children:n,future:o,window:c}=t,d=O.useRef();d.current==null&&(d.current=z3({window:c,v5Compat:!0}));let g=d.current,[y,v]=O.useState({action:g.action,location:g.location}),{v7_startTransition:b}=o||{},S=O.useCallback(N=>{b&&yp?yp(()=>v(N)):v(N)},[v,b]);return O.useLayoutEffect(()=>g.listen(S),[g,S]),O.useEffect(()=>I_(o),[o]),O.createElement(R_,{basename:e,children:n,location:y.location,navigationType:y.action,navigator:g,future:o})}const U_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qr=O.forwardRef(function(e,n){let{onClick:o,relative:c,reloadDocument:d,replace:g,state:y,target:v,to:b,preventScrollReset:S,viewTransition:N}=e,R=j_(e,M_),{basename:T}=O.useContext(Ki),D,I=!1;if(typeof b=="string"&&z_.test(b)&&(D=b,U_))try{let B=new URL(window.location.href),V=b.startsWith("//")?new URL(B.protocol+b):new URL(b),re=y0(V.pathname,T);V.origin===B.origin&&re!=null?b=re+V.search+V.hash:I=!0}catch{}let M=p_(b,{relative:c}),z=V_(b,{replace:g,state:y,target:v,preventScrollReset:S,relative:c,viewTransition:N});function U(B){o&&o(B),B.defaultPrevented||z(B)}return O.createElement("a",Dh({},R,{href:D||M,onClick:I||d?o:U,ref:n,target:v}))});var wp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wp||(wp={}));var vp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vp||(vp={}));function V_(t,e){let{target:n,replace:o,state:c,preventScrollReset:d,relative:g,viewTransition:y}=e===void 0?{}:e,v=si(),b=ni(),S=Dy(t,{relative:g});return O.useCallback(N=>{if(D_(N,n)){N.preventDefault();let R=o!==void 0?o:Su(b)===Su(S);v(t,{replace:R,state:c,preventScrollReset:d,relative:g,viewTransition:y})}},[b,v,S,o,c,n,t,d,g,y])}var Ts=function(){return Ts=Object.assign||function(e){for(var n,o=1,c=arguments.length;o<c;o++){n=arguments[o];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(e[d]=n[d])}return e},Ts.apply(this,arguments)};function Oa(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(t);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(t,o[c])&&(n[o[c]]=t[o[c]]);return n}function H_(t,e,n,o){function c(d){return d instanceof n?d:new n(function(g){g(d)})}return new(n||(n=Promise))(function(d,g){function y(S){try{b(o.next(S))}catch(N){g(N)}}function v(S){try{b(o.throw(S))}catch(N){g(N)}}function b(S){S.done?d(S.value):c(S.value).then(y,v)}b((o=o.apply(t,e||[])).next())})}function W_(t,e,n){if(n||arguments.length===2)for(var o=0,c=e.length,d;o<c;o++)(d||!(o in e))&&(d||(d=Array.prototype.slice.call(e,0,o)),d[o]=e[o]);return t.concat(d||Array.prototype.slice.call(e))}const G_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class C0 extends Error{constructor(e,n="FunctionsError",o){super(e),this.name=n,this.context=o}}class q_ extends C0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bp extends C0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ep extends C0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Mh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Mh||(Mh={}));class $_{constructor(e,{headers:n={},customFetch:o,region:c=Mh.Any}={}){this.url=e,this.headers=n,this.region=c,this.fetch=G_(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return H_(this,arguments,void 0,function*(n,o={}){var c;let d,g;try{const{headers:y,method:v,body:b,signal:S,timeout:N}=o;let R={},{region:T}=o;T||(T=this.region);const D=new URL(`${this.url}/${n}`);T&&T!=="any"&&(R["x-region"]=T,D.searchParams.set("forceFunctionRegion",T));let I;b&&(y&&!Object.prototype.hasOwnProperty.call(y,"Content-Type")||!y)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(R["Content-Type"]="application/octet-stream",I=b):typeof b=="string"?(R["Content-Type"]="text/plain",I=b):typeof FormData<"u"&&b instanceof FormData?I=b:(R["Content-Type"]="application/json",I=JSON.stringify(b)):b&&typeof b!="string"&&!(typeof Blob<"u"&&b instanceof Blob)&&!(b instanceof ArrayBuffer)&&!(typeof FormData<"u"&&b instanceof FormData)?I=JSON.stringify(b):I=b;let M=S;N&&(g=new AbortController,d=setTimeout(()=>g.abort(),N),S?(M=g.signal,S.addEventListener("abort",()=>g.abort())):M=g.signal);const z=yield this.fetch(D.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},R),this.headers),y),body:I,signal:M}).catch(re=>{throw new q_(re)}),U=z.headers.get("x-relay-error");if(U&&U==="true")throw new bp(z);if(!z.ok)throw new Ep(z);let B=((c=z.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),V;return B==="application/json"?V=yield z.json():B==="application/octet-stream"||B==="application/pdf"?V=yield z.blob():B==="text/event-stream"?V=z:B==="multipart/form-data"?V=yield z.formData():V=yield z.text(),{data:V,error:null,response:z}}catch(y){return{data:null,error:y,response:y instanceof Ep||y instanceof bp?y.context:void 0}}finally{d&&clearTimeout(d)}})}}var K_=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},X_=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let c=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let g=null,y=null,v=null,b=d.status,S=d.statusText;if(d.ok){var N,R;if(n.method!=="HEAD"){var T;const z=await d.text();z===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((T=n.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?y=z:y=JSON.parse(z))}const I=(N=n.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),M=(R=d.headers.get("content-range"))===null||R===void 0?void 0:R.split("/");I&&M&&M.length>1&&(v=parseInt(M[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(y)&&(y.length>1?(g={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,b=406,S="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{var D;const I=await d.text();try{g=JSON.parse(I),Array.isArray(g)&&d.status===404&&(y=[],g=null,b=200,S="OK")}catch{d.status===404&&I===""?(b=204,S="No Content"):g={message:I}}if(g&&n.isMaybeSingle&&(!(g==null||(D=g.details)===null||D===void 0)&&D.includes("0 rows"))&&(g=null,b=200,S="OK"),g&&n.shouldThrowOnError)throw new K_(g)}return{error:g,data:y,count:v,status:b,statusText:S}});return this.shouldThrowOnError||(c=c.catch(d=>{var g;let y="";const v=d?.cause;if(v){var b,S,N,R;const D=(b=v?.message)!==null&&b!==void 0?b:"",I=(S=v?.code)!==null&&S!==void 0?S:"";y=`${(N=d?.name)!==null&&N!==void 0?N:"FetchError"}: ${d?.message}`,y+=`

Caused by: ${(R=v?.name)!==null&&R!==void 0?R:"Error"}: ${D}`,I&&(y+=` (${I})`),v?.stack&&(y+=`
${v.stack}`)}else{var T;y=(T=d?.stack)!==null&&T!==void 0?T:""}return{error:{message:`${(g=d?.name)!==null&&g!==void 0?g:"FetchError"}: ${d?.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(t,e)}returns(){return this}overrideTypes(){return this}},Y_=class extends X_{select(t){let e=!1;const n=(t??"*").split("").map(o=>/\s/.test(o)&&!e?"":(o==='"'&&(e=!e),o)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:o,referencedTable:c=o}={}){const d=c?`${c}.order`:"order",g=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${g?`${g},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:o=n}={}){const c=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${t}`),this.url.searchParams.set(d,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:o=!1,wal:c=!1,format:d="text"}={}){var g;const y=[t?"analyze":null,e?"verbose":null,n?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${v}"; options=${y};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Cp=new RegExp("[,()]");var ha=class extends Y_{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(o=>typeof o=="string"&&Cp.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(o=>typeof o=="string"&&Cp.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const d=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${c}fts${d}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const o=n?`${n}.or`:"or";return this.url.searchParams.append(o,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Z_=class{constructor(t,{headers:e={},schema:n,fetch:o}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:o}=e??{},c=n?"HEAD":"GET";let d=!1;const g=(t??"*").split("").map(b=>/\s/.test(b)&&!d?"":(b==='"'&&(d=!d),b)).join(""),{url:y,headers:v}=this.cloneRequestState();return y.searchParams.set("select",g),o&&v.append("Prefer",`count=${o}`),new ha({method:c,url:y,headers:v,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var o;const c="POST",{url:d,headers:g}=this.cloneRequestState();if(e&&g.append("Prefer",`count=${e}`),n||g.append("Prefer","missing=default"),Array.isArray(t)){const y=t.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);d.searchParams.set("columns",v.join(","))}}return new ha({method:c,url:d,headers:g,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:o,defaultToNull:c=!0}={}){var d;const g="POST",{url:y,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&y.searchParams.set("on_conflict",e),o&&v.append("Prefer",`count=${o}`),c||v.append("Prefer","missing=default"),Array.isArray(t)){const b=t.reduce((S,N)=>S.concat(Object.keys(N)),[]);if(b.length>0){const S=[...new Set(b)].map(N=>`"${N}"`);y.searchParams.set("columns",S.join(","))}}return new ha({method:g,url:y,headers:v,schema:this.schema,body:t,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(t,{count:e}={}){var n;const o="PATCH",{url:c,headers:d}=this.cloneRequestState();return e&&d.append("Prefer",`count=${e}`),new ha({method:o,url:c,headers:d,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:o,headers:c}=this.cloneRequestState();return t&&c.append("Prefer",`count=${t}`),new ha({method:n,url:o,headers:c,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Q_=class Fy{constructor(e,{headers:n={},schema:o,fetch:c}={}){this.url=e,this.headers=new Headers(n),this.schemaName=o,this.fetch=c}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Z_(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Fy(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:o=!1,get:c=!1,count:d}={}){var g;let y;const v=new URL(`${this.url}/rpc/${e}`);let b;const S=T=>T!==null&&typeof T=="object"&&(!Array.isArray(T)||T.some(S)),N=o&&Object.values(n).some(S);N?(y="POST",b=n):o||c?(y=o?"HEAD":"GET",Object.entries(n).filter(([T,D])=>D!==void 0).map(([T,D])=>[T,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([T,D])=>{v.searchParams.append(T,D)})):(y="POST",b=n);const R=new Headers(this.headers);return N?R.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&R.set("Prefer",`count=${d}`),new ha({method:y,url:v,headers:R,schema:this.schemaName,body:b,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};class J_{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const o=n.versions;if(o&&o.node){const c=o.node,d=parseInt(c.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const o=this.getWebSocketConstructor();return new o(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const eS="2.90.1",tS=`realtime-js/${eS}`,Uy="1.0.0",rS="2.0.0",_p=Uy,Lh=1e4,nS=1e3,sS=100;var Ui;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ui||(Ui={}));var Ir;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ir||(Ir={}));var ms;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ms||(ms={}));var Bh;(function(t){t.websocket="websocket"})(Bh||(Bh={}));var Co;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Co||(Co={}));class iS{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let o=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,o;const c=(o=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(e){var n,o;const c=(o=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},g=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,g)}_encodeUserBroadcastPush(e,n,o){var c,d;const g=e.topic,y=(c=e.ref)!==null&&c!==void 0?c:"",v=(d=e.join_ref)!==null&&d!==void 0?d:"",b=e.payload.event,S=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},N=Object.keys(S).length===0?"":JSON.stringify(S);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`ref length ${y.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`topic length ${g.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`userEvent length ${b.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const R=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+y.length+g.length+b.length+N.length,T=new ArrayBuffer(this.HEADER_LENGTH+R);let D=new DataView(T),I=0;D.setUint8(I++,this.KINDS.userBroadcastPush),D.setUint8(I++,v.length),D.setUint8(I++,y.length),D.setUint8(I++,g.length),D.setUint8(I++,b.length),D.setUint8(I++,N.length),D.setUint8(I++,n),Array.from(v,z=>D.setUint8(I++,z.charCodeAt(0))),Array.from(y,z=>D.setUint8(I++,z.charCodeAt(0))),Array.from(g,z=>D.setUint8(I++,z.charCodeAt(0))),Array.from(b,z=>D.setUint8(I++,z.charCodeAt(0))),Array.from(N,z=>D.setUint8(I++,z.charCodeAt(0)));var M=new Uint8Array(T.byteLength+o.byteLength);return M.set(new Uint8Array(T),0),M.set(new Uint8Array(o),T.byteLength),M.buffer}decode(e,n){if(this._isArrayBuffer(e)){let o=this._binaryDecode(e);return n(o)}if(typeof e=="string"){const o=JSON.parse(e),[c,d,g,y,v]=o;return n({join_ref:c,ref:d,topic:g,event:y,payload:v})}return n({})}_binaryDecode(e){const n=new DataView(e),o=n.getUint8(0),c=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,c)}_decodeUserBroadcast(e,n,o){const c=n.getUint8(1),d=n.getUint8(2),g=n.getUint8(3),y=n.getUint8(4);let v=this.HEADER_LENGTH+4;const b=o.decode(e.slice(v,v+c));v=v+c;const S=o.decode(e.slice(v,v+d));v=v+d;const N=o.decode(e.slice(v,v+g));v=v+g;const R=e.slice(v,e.byteLength),T=y===this.JSON_ENCODING?JSON.parse(o.decode(R)):R,D={type:this.BROADCAST_EVENT,event:S,payload:T};return g>0&&(D.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:b,event:this.BROADCAST_EVENT,payload:D}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([o])=>n.includes(o)))}}class zy{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ht;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ht||(Ht={}));const Sp=(t,e,n={})=>{var o;const c=(o=n.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((d,g)=>(d[g]=oS(g,t,e,c),d),{}):{}},oS=(t,e,n,o)=>{const c=e.find(y=>y.name===t),d=c?.type,g=n[t];return d&&!o.includes(d)?Vy(d,g):Fh(g)},Vy=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return uS(e,n)}switch(t){case Ht.bool:return aS(e);case Ht.float4:case Ht.float8:case Ht.int2:case Ht.int4:case Ht.int8:case Ht.numeric:case Ht.oid:return lS(e);case Ht.json:case Ht.jsonb:return cS(e);case Ht.timestamp:return dS(e);case Ht.abstime:case Ht.date:case Ht.daterange:case Ht.int4range:case Ht.int8range:case Ht.money:case Ht.reltime:case Ht.text:case Ht.time:case Ht.timestamptz:case Ht.timetz:case Ht.tsrange:case Ht.tstzrange:return Fh(e);default:return Fh(e)}},Fh=t=>t,aS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},lS=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},cS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},uS=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,o=t[n];if(t[0]==="{"&&o==="}"){let d;const g=t.slice(1,n);try{d=JSON.parse("["+g+"]")}catch{d=g?g.split(","):[]}return d.map(y=>Vy(e,y))}return t},dS=t=>typeof t=="string"?t.replace(" ","T"):t,Hy=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Of{constructor(e,n,o={},c=Lh){this.channel=e,this.event=n,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var o;return this._hasReceived(e)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Np;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Np||(Np={}));class Cl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:d,onLeave:g,onSync:y}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cl.syncState(this.state,c,d,g),this.pendingDiffs.forEach(v=>{this.state=Cl.syncDiff(this.state,v,d,g)}),this.pendingDiffs=[],y()}),this.channel._on(o.diff,{},c=>{const{onJoin:d,onLeave:g,onSync:y}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Cl.syncDiff(this.state,c,d,g),y())}),this.onJoin((c,d,g)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:g})}),this.onLeave((c,d,g)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:g})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,o,c){const d=this.cloneDeep(e),g=this.transformState(n),y={},v={};return this.map(d,(b,S)=>{g[b]||(v[b]=S)}),this.map(g,(b,S)=>{const N=d[b];if(N){const R=S.map(M=>M.presence_ref),T=N.map(M=>M.presence_ref),D=S.filter(M=>T.indexOf(M.presence_ref)<0),I=N.filter(M=>R.indexOf(M.presence_ref)<0);D.length>0&&(y[b]=D),I.length>0&&(v[b]=I)}else y[b]=S}),this.syncDiff(d,{joins:y,leaves:v},o,c)}static syncDiff(e,n,o,c){const{joins:d,leaves:g}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(d,(y,v)=>{var b;const S=(b=e[y])!==null&&b!==void 0?b:[];if(e[y]=this.cloneDeep(v),S.length>0){const N=e[y].map(T=>T.presence_ref),R=S.filter(T=>N.indexOf(T.presence_ref)<0);e[y].unshift(...R)}o(y,S,v)}),this.map(g,(y,v)=>{let b=e[y];if(!b)return;const S=v.map(N=>N.presence_ref);b=b.filter(N=>S.indexOf(N.presence_ref)<0),e[y]=b,c(y,b,v),b.length===0&&delete e[y]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(o=>n(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,o)=>{const c=e[o];return"metas"in c?n[o]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):n[o]=c,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ap;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ap||(Ap={}));var _l;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_l||(_l={}));var Ys;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ys||(Ys={}));class ga{constructor(e,n={config:{}},o){var c,d;if(this.topic=e,this.params=n,this.socket=o,this.bindings={},this.state=Ir.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Of(this,ms.join,this.params,this.timeout),this.rejoinTimer=new zy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ir.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(g=>g.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ir.closed,this.socket._remove(this)}),this._onError(g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ms.reply,{},(g,y)=>{this._trigger(this._replyEventName(y),g)}),this.presence=new Cl(this),this.broadcastEndpointURL=Hy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var o,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Ir.closed){const{config:{broadcast:g,presence:y,private:v}}=this.params,b=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(T=>T.filter))!==null&&c!==void 0?c:[],S=!!this.bindings[_l.PRESENCE]&&this.bindings[_l.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,N={},R={broadcast:g,presence:Object.assign(Object.assign({},y),{enabled:S}),postgres_changes:b,private:v};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(T=>e?.(Ys.CHANNEL_ERROR,T)),this._onClose(()=>e?.(Ys.CLOSED)),this.updateJoinPayload(Object.assign({config:R},N)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var D;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e?.(Ys.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,M=(D=I?.length)!==null&&D!==void 0?D:0,z=[];for(let U=0;U<M;U++){const B=I[U],{filter:{event:V,schema:re,table:G,filter:H}}=B,se=T&&T[U];if(se&&se.event===V&&ga.isFilterValueEqual(se.schema,re)&&ga.isFilterValueEqual(se.table,G)&&ga.isFilterValueEqual(se.filter,H))z.push(Object.assign(Object.assign({},B),{id:se.id}));else{this.unsubscribe(),this.state=Ir.errored,e?.(Ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=z,e&&e(Ys.SUBSCRIBED);return}}).receive("error",T=>{this.state=Ir.errored,e?.(Ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,o){return this.state===Ir.joined&&e===_l.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,o)}async httpSend(e,n,o={}){var c;if(n==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},y=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);if(y.status===202)return{success:!0};let v=y.statusText;try{const b=await y.json();v=b.error||b.message||v}catch{}return Promise.reject(new Error(v))}async send(e,n={}){var o,c;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:g}=e,y={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(y.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:y,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:g,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=b.body)===null||c===void 0?void 0:c.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var g,y,v;const b=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((v=(y=(g=this.params)===null||g===void 0?void 0:g.config)===null||y===void 0?void 0:y.broadcast)===null||v===void 0)&&v.ack)&&d("ok"),b.receive("ok",()=>d("ok")),b.receive("error",()=>d("error")),b.receive("timeout",()=>d("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ir.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ms.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new Of(this,ms.leave,{},e),o.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ir.closed,this.bindings={}}async _fetchWithTimeout(e,n,o){const c=new AbortController,d=setTimeout(()=>c.abort(),o),g=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(d),g}_push(e,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Of(this,e,n,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,o){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,o){var c,d;const g=e.toLocaleLowerCase(),{close:y,error:v,leave:b,join:S}=ms;if(o&&[y,v,b,S].indexOf(g)>=0&&o!==this._joinRef())return;let R=this._onMessage(g,n,o);if(n&&!R)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(g)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(T=>{var D,I,M;return((D=T.filter)===null||D===void 0?void 0:D.event)==="*"||((M=(I=T.filter)===null||I===void 0?void 0:I.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===g}).map(T=>T.callback(R,o)):(d=this.bindings[g])===null||d===void 0||d.filter(T=>{var D,I,M,z,U,B,V,re;if(["broadcast","presence","postgres_changes"].includes(g))if("id"in T){const G=T.id,H=(D=T.filter)===null||D===void 0?void 0:D.event;return G&&((I=n.ids)===null||I===void 0?void 0:I.includes(G))&&(H==="*"||H?.toLocaleLowerCase()===((M=n.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))&&(!(!((z=T.filter)===null||z===void 0)&&z.table)||T.filter.table===((U=n.data)===null||U===void 0?void 0:U.table))}else{const G=(V=(B=T?.filter)===null||B===void 0?void 0:B.event)===null||V===void 0?void 0:V.toLocaleLowerCase();return G==="*"||G===((re=n?.event)===null||re===void 0?void 0:re.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===g}).map(T=>{if(typeof R=="object"&&"ids"in R){const D=R.data,{schema:I,table:M,commit_timestamp:z,type:U,errors:B}=D;R=Object.assign(Object.assign({},{schema:I,table:M,commit_timestamp:z,eventType:U,new:{},old:{},errors:B}),this._getPayloadRecords(D))}T.callback(R,o)})}_isClosed(){return this.state===Ir.closed}_isJoined(){return this.state===Ir.joined}_isJoining(){return this.state===Ir.joining}_isLeaving(){return this.state===Ir.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,o){const c=e.toLocaleLowerCase(),d={type:c,filter:n,callback:o};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(e,n){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&ga.isEqual(c.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const o in e)if(e[o]!==n[o])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ms.close,{},e)}_onError(e){this._on(ms.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ir.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Sp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Sp(e.columns,e.old_record)),n}}const jf=()=>{},ru={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},fS=[1e3,2e3,5e3,1e4],hS=1e4,mS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pS{constructor(e,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lh,this.transport=null,this.heartbeatIntervalMs=ru.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jf,this.ref=0,this.reconnectTimer=null,this.vsn=_p,this.logger=jf,this.conn=null,this.sendBuffer=[],this.serializer=new iS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=c=>c?(...d)=>c(...d):(...d)=>fetch(...d),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Bh.websocket}`,this.httpEndpoint=Hy(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=J_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,o){this.logger(e,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ui.connecting:return Co.Connecting;case Ui.open:return Co.Open;case Ui.closing:return Co.Closing;default:return Co.Closed}}isConnected(){return this.connectionState()===Co.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const o=`realtime:${e}`,c=this.getChannels().find(d=>d.topic===o);if(c)return c;{const d=new ga(`realtime:${e}`,n,this);return this.channels.push(d),d}}push(e){const{topic:n,event:o,payload:c,ref:d}=e,g=()=>{this.encode(e,y=>{var v;(v=this.conn)===null||v===void 0||v.send(y)})};this.log("push",`${n} ${o} (${d})`,c),this.isConnected()?g():this.sendBuffer.push(g)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(nS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ru.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",b)}catch(S){this.log("error","error in heartbeat callback",S)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:c,payload:d,ref:g}=n,y=g?`(${g})`:"",v=d.status||"";this.log("receive",`${v} ${o} ${c} ${y}`.trim(),d),this.channels.filter(b=>b._isMember(o)).forEach(b=>b._trigger(c,d,g)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ui.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ui.open||this.conn.readyState===Ui.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ms.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const o=e.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${e}${o}${c}`}_workerObjectUrl(e){let n;if(e)n=e;else{const o=new Blob([mS],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,o=!1;if(e)n=e,o=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),n=this.accessTokenValue}else n=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(c=>{const d={access_token:n,version:tS};n&&c.updateJoinPayload(d),c.joinedOnce&&c._isJoined()&&c._push(ms.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(n)}catch(c){this.log("error",`error in ${e} callback`,c)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new zy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ru.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,o,c,d,g,y,v,b,S,N,R,T;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=e?.timeout)!==null&&o!==void 0?o:Lh,this.heartbeatIntervalMs=(c=e?.heartbeatIntervalMs)!==null&&c!==void 0?c:ru.HEARTBEAT_INTERVAL,this.worker=(d=e?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(g=e?.accessToken)!==null&&g!==void 0?g:null,this.heartbeatCallback=(y=e?.heartbeatCallback)!==null&&y!==void 0?y:jf,this.vsn=(v=e?.vsn)!==null&&v!==void 0?v:_p,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=e?.reconnectAfterMs)!==null&&b!==void 0?b:(D=>fS[D-1]||hS),this.vsn){case Uy:this.encode=(S=e?.encode)!==null&&S!==void 0?S:((D,I)=>I(JSON.stringify(D))),this.decode=(N=e?.decode)!==null&&N!==void 0?N:((D,I)=>I(JSON.parse(D)));break;case rS:this.encode=(R=e?.encode)!==null&&R!==void 0?R:this.serializer.encode.bind(this.serializer),this.decode=(T=e?.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Ol=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function gS(t,e,n){const o=new URL(e,t);if(n)for(const[c,d]of Object.entries(n))d!==void 0&&o.searchParams.set(c,d);return o.toString()}async function xS(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function yS(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:c,body:d,headers:g}){const y=gS(t.baseUrl,o,c),v=await xS(t.auth),b=await e(y,{method:n,headers:{...d?{"Content-Type":"application/json"}:{},...v,...g},body:d?JSON.stringify(d):void 0}),S=await b.text(),N=(b.headers.get("content-type")||"").includes("application/json"),R=N&&S?JSON.parse(S):S;if(!b.ok){const T=N?R:void 0,D=T?.error;throw new Ol(D?.message??`Request failed with status ${b.status}`,{status:b.status,icebergType:D?.type,icebergCode:D?.code,details:T})}return{status:b.status,headers:b.headers,data:R}}}}function nu(t){return t.join("")}var wS=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:nu(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nu(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nu(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nu(t.namespace)}`}),!0}catch(e){if(e instanceof Ol&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Ol&&n.status===409)return;throw n}}};function na(t){return t.join("")}var vS=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${na(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${na(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${na(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${na(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${na(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${na(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Ol&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Ol&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},bS=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=yS({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new wS(this.client,e),this.tableOps=new vS(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},qu=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function sr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var ES=class extends qu{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Uh=class extends qu{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const _0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),CS=()=>Response,zh=t=>{if(Array.isArray(t))return t.map(n=>zh(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,o])=>{const c=n.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));e[c]=zh(o)}),e},_S=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},SS=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function jl(t){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}function NS(t,e){if(jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(jl(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AS(t){var e=NS(t,"string");return jl(e)=="symbol"?e:e+""}function TS(t,e,n){return(e=AS(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,o)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tp(Object(n),!0).forEach(function(o){TS(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tp(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}const Pf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},kS=async(t,e,n)=>{t instanceof await CS()&&!n?.noResolveJson?t.json().then(o=>{const c=t.status||500,d=o?.statusCode||c+"";e(new ES(Pf(o),c,d))}).catch(o=>{e(new Uh(Pf(o),o))}):e(new Uh(Pf(t),t))},IS=(t,e,n,o)=>{const c={method:t,headers:e?.headers||{}};return t==="GET"||!o?c:(_S(o)?(c.headers=st({"Content-Type":"application/json"},e?.headers),c.body=JSON.stringify(o)):c.body=o,e?.duplex&&(c.duplex=e.duplex),st(st({},c),n))};async function zl(t,e,n,o,c,d){return new Promise((g,y)=>{t(n,IS(e,o,c,d)).then(v=>{if(!v.ok)throw v;return o?.noResolveJson?v:v.json()}).then(v=>g(v)).catch(v=>kS(v,y,o))})}async function Pl(t,e,n,o){return zl(t,"GET",e,n,o)}async function hs(t,e,n,o,c){return zl(t,"POST",e,o,c,n)}async function Vh(t,e,n,o,c){return zl(t,"PUT",e,o,c,n)}async function RS(t,e,n,o){return zl(t,"HEAD",e,st(st({},n),{},{noResolveJson:!0}),o)}async function S0(t,e,n,o,c){return zl(t,"DELETE",e,o,c,n)}var OS=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(sr(e))return{data:null,error:e};throw e}}};let Wy;Wy=Symbol.toStringTag;var jS=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Wy]="BlobDownloadBuilder",this.promise=null}asStream(){return new OS(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(sr(e))return{data:null,error:e};throw e}}};const PS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var DS=class{constructor(t,e={},n,o){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=_0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,o){var c=this;try{let d;const g=st(st({},kp),o);let y=st(st({},c.headers),t==="POST"&&{"x-upsert":String(g.upsert)});const v=g.metadata;typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",g.cacheControl),v&&d.append("metadata",c.encodeMetadata(v)),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.has("cacheControl")||d.append("cacheControl",g.cacheControl),v&&!d.has("metadata")&&d.append("metadata",c.encodeMetadata(v))):(d=n,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType,v&&(y["x-metadata"]=c.toBase64(c.encodeMetadata(v))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!g.duplex&&(g.duplex="half")),o?.headers&&(y=st(st({},y),o.headers));const b=c._removeEmptyFolders(e),S=c._getFinalPath(b),N=await(t=="PUT"?Vh:hs)(c.fetch,`${c.url}/object/${S}`,d,st({headers:y},g?.duplex?{duplex:g.duplex}:{}));return{data:{path:b,id:N.Id,fullPath:N.Key},error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(sr(d))return{data:null,error:d};throw d}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,o){var c=this;const d=c._removeEmptyFolders(t),g=c._getFinalPath(d),y=new URL(c.url+`/object/upload/sign/${g}`);y.searchParams.set("token",e);try{let v;const b=st({upsert:kp.upsert},o),S=st(st({},c.headers),{"x-upsert":String(b.upsert)});return typeof Blob<"u"&&n instanceof Blob?(v=new FormData,v.append("cacheControl",b.cacheControl),v.append("",n)):typeof FormData<"u"&&n instanceof FormData?(v=n,v.append("cacheControl",b.cacheControl)):(v=n,S["cache-control"]=`max-age=${b.cacheControl}`,S["content-type"]=b.contentType),{data:{path:d,fullPath:(await Vh(c.fetch,y.toString(),v,{headers:S})).Key},error:null}}catch(v){if(c.shouldThrowOnError)throw v;if(sr(v))return{data:null,error:v};throw v}}async createSignedUploadUrl(t,e){var n=this;try{let o=n._getFinalPath(t);const c=st({},n.headers);e?.upsert&&(c["x-upsert"]="true");const d=await hs(n.fetch,`${n.url}/object/upload/sign/${o}`,{},{headers:c}),g=new URL(n.url+d.url),y=g.searchParams.get("token");if(!y)throw new qu("No token returned by API");return{data:{signedUrl:g.toString(),path:t,token:y},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(sr(o))return{data:null,error:o};throw o}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var o=this;try{return{data:await hs(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:o.headers}),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(sr(c))return{data:null,error:c};throw c}}async copy(t,e,n){var o=this;try{return{data:{path:(await hs(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(sr(c))return{data:null,error:c};throw c}}async createSignedUrl(t,e,n){var o=this;try{let c=o._getFinalPath(t),d=await hs(o.fetch,`${o.url}/object/sign/${c}`,st({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:o.headers});const g=n?.download?`&download=${n.download===!0?"":n.download}`:"";return d={signedUrl:encodeURI(`${o.url}${d.signedURL}${g}`)},{data:d,error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(sr(c))return{data:null,error:c};throw c}}async createSignedUrls(t,e,n){var o=this;try{const c=await hs(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:e,paths:t},{headers:o.headers}),d=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:c.map(g=>st(st({},g),{},{signedUrl:g.signedURL?encodeURI(`${o.url}${g.signedURL}${d}`):null})),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(sr(c))return{data:null,error:c};throw c}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),c=o?`?${o}`:"",d=this._getFinalPath(t),g=()=>Pl(this.fetch,`${this.url}/${n}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new jS(g,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:zh(await Pl(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(sr(o))return{data:null,error:o};throw o}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await RS(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(sr(o)&&o instanceof Uh){const c=o.originalError;if([400,404].includes(c?.status))return{data:!1,error:o}}throw o}}getPublicUrl(t,e){const n=this._getFinalPath(t),o=[],c=e?.download?`download=${e.download===!0?"":e.download}`:"";c!==""&&o.push(c);const d=typeof e?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(e?.transform||{});g!==""&&o.push(g);let y=o.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${y}`)}}}async remove(t){var e=this;try{return{data:await S0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}}async list(t,e,n){var o=this;try{const c=st(st(st({},PS),e),{},{prefix:t||""});return{data:await hs(o.fetch,`${o.url}/object/list/${o.bucketId}`,c,{headers:o.headers},n),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(sr(c))return{data:null,error:c};throw c}}async listV2(t,e){var n=this;try{const o=st({},t);return{data:await hs(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,o,{headers:n.headers},e),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(sr(o))return{data:null,error:o};throw o}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Gy="2.90.1",qy={"X-Client-Info":`storage-js/${Gy}`};var MS=class{constructor(t,e={},n,o){this.shouldThrowOnError=!1;const c=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=st(st({},qy),e),this.fetch=_0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Pl(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Pl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await hs(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(sr(o))return{data:null,error:o};throw o}}async updateBucket(t,e){var n=this;try{return{data:await Vh(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(sr(o))return{data:null,error:o};throw o}}async emptyBucket(t){var e=this;try{return{data:await hs(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await S0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},LS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=st(st({},qy),e),this.fetch=_0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await hs(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const o=n.toString(),c=o?`${e.url}/bucket?${o}`:`${e.url}/bucket`;return{data:await Pl(e.fetch,c,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await S0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!SS(t))throw new qu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new bS({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(n,{get(c,d){const g=c[d];return typeof g!="function"?g:async(...y)=>{try{return{data:await g.apply(c,y),error:null}}catch(v){if(o)throw v;return{data:null,error:v}}}}})}};const N0={"X-Client-Info":`storage-js/${Gy}`,"Content-Type":"application/json"};var $y=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ln(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Df=class extends $y{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},BS=class extends $y{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const A0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),FS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ip=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),US=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const o=t.status||500,c=t;if(typeof c.json=="function")c.json().then(d=>{const g=d?.statusCode||d?.code||o+"";e(new Df(Ip(d),o,g))}).catch(()=>{const d=o+"";e(new Df(c.statusText||`HTTP ${o} error`,o,d))});else{const d=o+"";e(new Df(c.statusText||`HTTP ${o} error`,o,d))}}else e(new BS(Ip(t),t))},zS=(t,e,n,o)=>{const c={method:t,headers:e?.headers||{}};return o?(FS(o)?(c.headers=st({"Content-Type":"application/json"},e?.headers),c.body=JSON.stringify(o)):c.body=o,st(st({},c),n)):c};async function VS(t,e,n,o,c,d){return new Promise((g,y)=>{t(n,zS(e,o,c,d)).then(v=>{if(!v.ok)throw v;if(o?.noResolveJson)return v;const b=v.headers.get("content-type");return!b||!b.includes("application/json")?{}:v.json()}).then(v=>g(v)).catch(v=>US(v,y,o))})}async function Bn(t,e,n,o,c){return VS(t,"POST",e,o,c,n)}var HS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=st(st({},N0),e),this.fetch=A0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Bn(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Ln(o))return{data:null,error:o};throw o}}async listIndexes(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Bn(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Ln(o))return{data:null,error:o};throw o}}},WS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=st(st({},N0),e),this.fetch=A0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Bn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Bn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Bn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}},GS=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=st(st({},N0),e),this.fetch=A0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Bn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ln(n))return{data:null,error:n};throw n}}},qS=class extends GS{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new $S(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},$S=class extends HS{constructor(t,e,n,o){super(t,e,o),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,st(st({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,st(st({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new KS(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},KS=class extends WS{constructor(t,e,n,o,c){super(t,e,c),this.vectorBucketName=n,this.indexName=o}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,st(st({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,st(st({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,st(st({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,st(st({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,st(st({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},XS=class extends MS{constructor(t,e={},n,o){super(t,e,n,o)}from(t){return new DS(this.url,this.headers,t,this.fetch)}get vectors(){return new qS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new LS(this.url+"/iceberg",this.headers,this.fetch)}};const Ky="2.90.1",ma=30*1e3,Hh=3,Mf=Hh*ma,YS="http://localhost:9999",ZS="supabase.auth.token",QS={"X-Client-Info":`gotrue-js/${Ky}`},Wh="X-Supabase-Api-Version",Xy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},JS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eN=600*1e3;class Dl extends Error{constructor(e,n,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class tN extends Dl{constructor(e,n,o){super(e,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function rN(t){return $e(t)&&t.name==="AuthApiError"}class _o extends Dl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ii extends Dl{constructor(e,n,o,c){super(e,o,c),this.name=n,this.status=o}}class Pn extends ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nN(t){return $e(t)&&t.name==="AuthSessionMissingError"}class sa extends ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class su extends ii{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class iu extends ii{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sN(t){return $e(t)&&t.name==="AuthImplicitGrantRedirectError"}class Rp extends ii{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class iN extends ii{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Gh extends ii{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Lf(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class Op extends ii{constructor(e,n,o){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class qh extends ii{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jp=` 	
\r=`.split(""),oN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<jp.length;e+=1)t[jp[e].charCodeAt(0)]=-2;for(let e=0;e<Nu.length;e+=1)t[Nu[e].charCodeAt(0)]=e;return t})();function Pp(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(Nu[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(Nu[o]),e.queuedBits-=6}}function Yy(t,e,n){const o=oN[t];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Dp(t){const e=[],n=g=>{e.push(String.fromCodePoint(g))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=g=>{cN(g,o,n)};for(let g=0;g<t.length;g+=1)Yy(t.charCodeAt(g),c,d);return e.join("")}function aN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function lN(t,e){for(let n=0;n<t.length;n+=1){let o=t.charCodeAt(n);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(t.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}aN(o,e)}}function cN(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let o=1;o<6;o+=1)if((t>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function va(t){const e=[],n={queue:0,queuedBits:0},o=c=>{e.push(c)};for(let c=0;c<t.length;c+=1)Yy(t.charCodeAt(c),n,o);return new Uint8Array(e)}function uN(t){const e=[];return lN(t,n=>e.push(n)),new Uint8Array(e)}function So(t){const e=[],n={queue:0,queuedBits:0},o=c=>{e.push(c)};return t.forEach(c=>Pp(c,n,o)),Pp(null,n,o),e.join("")}function dN(t){return Math.round(Date.now()/1e3)+t}function fN(){return Symbol("auth-callback")}const Gr=()=>typeof window<"u"&&typeof document<"u",vo={tested:!1,writable:!1},Zy=()=>{if(!Gr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vo.tested)return vo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vo.tested=!0,vo.writable=!0}catch{vo.tested=!0,vo.writable=!1}return vo.writable};function hN(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,d)=>{e[d]=c})}catch{}return n.searchParams.forEach((o,c)=>{e[c]=o}),e}const Qy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pa=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},bo=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Wr=async(t,e)=>{await t.removeItem(e)};class $u{constructor(){this.promise=new $u.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}$u.promiseConstructor=Promise;function Bf(t){const e=t.split(".");if(e.length!==3)throw new qh("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!JS.test(e[o]))throw new qh("JWT not in base64url format");return{header:JSON.parse(Dp(e[0])),payload:JSON.parse(Dp(e[1])),signature:va(e[2]),raw:{header:e[0],payload:e[1]}}}async function pN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function gN(t,e){return new Promise((o,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const g=await t(d);if(!e(d,null,g)){o(g);return}}catch(g){if(!e(d,g)){c(g);return}}})()})}function xN(t){return("0"+t.toString(16)).substr(-2)}function yN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let c="";for(let d=0;d<56;d++)c+=n.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(e),Array.from(e,xN).join("")}async function wN(t){const n=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(o);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function vN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await wN(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ia(t,e,n=!1){const o=yN();let c=o;n&&(c+="/PASSWORD_RECOVERY"),await pa(t,`${e}-code-verifier`,c);const d=await vN(o);return[d,o===d?"plain":"s256"]}const bN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function EN(t){const e=t.headers.get(Wh);if(!e||!e.match(bN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function CN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function _N(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const SN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oa(t){if(!SN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ff(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function NN(t,e){return new Proxy(t,{get:(n,o,c)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,c)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,o,c)}})}function Mp(t){return JSON.parse(JSON.stringify(t))}const Eo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AN=[502,503,504];async function Lp(t){var e;if(!mN(t))throw new Gh(Eo(t),0);if(AN.includes(t.status))throw new Gh(Eo(t),t.status);let n;try{n=await t.json()}catch(d){throw new _o(Eo(d),d)}let o;const c=EN(t);if(c&&c.getTime()>=Xy["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Op(Eo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Pn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((d,g)=>d&&typeof g=="string",!0))throw new Op(Eo(n),t.status,n.weak_password.reasons);throw new tN(Eo(n),t.status||500,o)}const TN=(t,e,n,o)=>{const c={method:t,headers:e?.headers||{}};return t==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),n))};async function nt(t,e,n,o){var c;const d=Object.assign({},o?.headers);d[Wh]||(d[Wh]=Xy["2024-01-01"].name),o?.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const g=(c=o?.query)!==null&&c!==void 0?c:{};o?.redirectTo&&(g.redirect_to=o.redirectTo);const y=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",v=await kN(t,e,n+y,{headers:d,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(v):{data:Object.assign({},v),error:null}}async function kN(t,e,n,o,c,d){const g=TN(e,o,c,d);let y;try{y=await t(n,Object.assign({},g))}catch(v){throw console.error(v),new Gh(Eo(v),0)}if(y.ok||await Lp(y),o?.noResolveJson)return y;try{return await y.json()}catch(v){await Lp(v)}}function ds(t){var e;let n=null;ON(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=dN(t.expires_in)));const o=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:o},error:null}}function Bp(t){const e=ds(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(e.data.weak_password=t.weak_password),e}function zi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function IN(t){return{data:t,error:null}}function RN(t){const{action_link:e,email_otp:n,hashed_token:o,redirect_to:c,verification_type:d}=t,g=Oa(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),y={action_link:e,email_otp:n,hashed_token:o,redirect_to:c,verification_type:d},v=Object.assign({},g);return{data:{properties:y,user:v},error:null}}function Fp(t){return t}function ON(t){return t.access_token&&t.refresh_token&&t.expires_in}const Uf=["global","local","others"];class jN{constructor({url:e="",headers:n={},fetch:o}){this.url=e,this.headers=n,this.fetch=Qy(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Uf[0]){if(Uf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Uf.join(", ")}`);try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if($e(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,n={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:zi})}catch(o){if($e(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:n}=e,o=Oa(e,["options"]),c=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(c.new_email=o?.newEmail,delete c.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:RN,redirectTo:n?.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zi})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,o,c,d,g,y,v;try{const b={nextPage:null,lastPage:0,total:0},S=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(c=e?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Fp});if(S.error)throw S.error;const N=await S.json(),R=(g=S.headers.get("x-total-count"))!==null&&g!==void 0?g:0,T=(v=(y=S.headers.get("link"))===null||y===void 0?void 0:y.split(","))!==null&&v!==void 0?v:[];return T.length>0&&(T.forEach(D=>{const I=parseInt(D.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(D.split(";")[1].split("=")[1]);b[`${M}Page`]=I}),b.total=parseInt(R)),{data:Object.assign(Object.assign({},N),b),error:null}}catch(b){if($e(b))return{data:{users:[]},error:b};throw b}}async getUserById(e){oa(e);try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zi})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){oa(e);try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:zi})}catch(o){if($e(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,n=!1){oa(e);try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:zi})}catch(o){if($e(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){oa(e.userId);try{const{data:n,error:o}=await nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:o}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){oa(e.userId),oa(e.id);try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,o,c,d,g,y,v;try{const b={nextPage:null,lastPage:0,total:0},S=await nt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(c=e?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Fp});if(S.error)throw S.error;const N=await S.json(),R=(g=S.headers.get("x-total-count"))!==null&&g!==void 0?g:0,T=(v=(y=S.headers.get("link"))===null||y===void 0?void 0:y.split(","))!==null&&v!==void 0?v:[];return T.length>0&&(T.forEach(D=>{const I=parseInt(D.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(D.split(";")[1].split("=")[1]);b[`${M}Page`]=I}),b.total=parseInt(R)),{data:Object.assign(Object.assign({},N),b),error:null}}catch(b){if($e(b))return{data:{clients:[]},error:b};throw b}}async _createOAuthClient(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await nt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await nt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if($e(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await nt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}}function Up(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const aa={debug:!!(globalThis&&Zy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PN extends Jy{}async function DN(t,e,n){aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),aa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,c.name);try{return await n()}finally{aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,c.name)}}else{if(e===0)throw aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new PN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(aa.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function MN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ew(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function LN(t){return parseInt(t,16)}function BN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function FN(t){var e;const{chainId:n,domain:o,expirationTime:c,issuedAt:d=new Date,nonce:g,notBefore:y,requestId:v,resources:b,scheme:S,uri:N,version:R}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(R!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${R}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=ew(t.address),D=S?`${S}://${o}`:o,I=t.statement?`${t.statement}
`:"",M=`${D} wants you to sign in with your Ethereum account:
${T}

${I}`;let z=`URI: ${N}
Version: ${R}
Chain ID: ${n}${g?`
Nonce: ${g}`:""}
Issued At: ${d.toISOString()}`;if(c&&(z+=`
Expiration Time: ${c.toISOString()}`),y&&(z+=`
Not Before: ${y.toISOString()}`),v&&(z+=`
Request ID: ${v}`),b){let U=`
Resources:`;for(const B of b){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);U+=`
- ${B}`}z+=U}return`${M}
${z}`}class vr extends Error{constructor({message:e,code:n,cause:o,name:c}){var d;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=c??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=n}}class Au extends vr{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function UN({error:t,options:e}){var n,o,c;const{publicKey:d}=e;if(!d)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new vr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=d.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new vr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new vr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new vr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new vr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new vr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return d.pubKeyCredParams.filter(y=>y.type==="public-key").length===0?new vr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new vr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const g=window.location.hostname;if(tw(g)){if(d.rp.id!==g)return new vr({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new vr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new vr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new vr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new vr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function zN({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new vr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new vr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(tw(o)){if(n.rpId!==o)return new vr({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new vr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new vr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new vr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class VN{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const HN=new VN;function WN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:o}=t,c=Oa(t,["challenge","user","excludeCredentials"]),d=va(e).buffer,g=Object.assign(Object.assign({},n),{id:va(n.id).buffer}),y=Object.assign(Object.assign({},c),{challenge:d,user:g});if(o&&o.length>0){y.excludeCredentials=new Array(o.length);for(let v=0;v<o.length;v++){const b=o[v];y.excludeCredentials[v]=Object.assign(Object.assign({},b),{id:va(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return y}function GN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,o=Oa(t,["challenge","allowCredentials"]),c=va(e).buffer,d=Object.assign(Object.assign({},o),{challenge:c});if(n&&n.length>0){d.allowCredentials=new Array(n.length);for(let g=0;g<n.length;g++){const y=n[g];d.allowCredentials[g]=Object.assign(Object.assign({},y),{id:va(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return d}function qN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:So(new Uint8Array(t.response.attestationObject)),clientDataJSON:So(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $N(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,o=t.getClientExtensionResults(),c=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:So(new Uint8Array(c.authenticatorData)),clientDataJSON:So(new Uint8Array(c.clientDataJSON)),signature:So(new Uint8Array(c.signature)),userHandle:c.userHandle?So(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function tw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function zp(){var t,e;return!!(Gr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function KN(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Au("Browser returned unexpected credential type",e)}:{data:null,error:new Au("Empty credential response",e)}}catch(e){return{data:null,error:UN({error:e,options:t})}}}async function XN(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Au("Browser returned unexpected credential type",e)}:{data:null,error:new Au("Empty credential response",e)}}catch(e){return{data:null,error:zN({error:e,options:t})}}}const YN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ZN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Tu(...t){const e=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),o={};for(const c of t)if(c)for(const d in c){const g=c[d];if(g!==void 0)if(Array.isArray(g))o[d]=g;else if(n(g))o[d]=g;else if(e(g)){const y=o[d];e(y)?o[d]=Tu(y,g):o[d]=Tu(g)}else o[d]=g}return o}function QN(t,e){return Tu(YN,t,e||{})}function JN(t,e){return Tu(ZN,t,e||{})}class eA{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:o,signal:c},d){try{const{data:g,error:y}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!g)return{data:null,error:y};const v=c??HN.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:b}=g.webauthn.credential_options.publicKey;b.name||(b.name=`${b.id}:${o}`),b.displayName||(b.displayName=b.name)}switch(g.webauthn.type){case"create":{const b=QN(g.webauthn.credential_options.publicKey,d?.create),{data:S,error:N}=await KN({publicKey:b,signal:v});return S?{data:{factorId:e,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:S}},error:null}:{data:null,error:N}}case"request":{const b=JN(g.webauthn.credential_options.publicKey,d?.request),{data:S,error:N}=await XN(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:b,signal:v}));return S?{data:{factorId:e,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:S}},error:null}:{data:null,error:N}}}}catch(g){return $e(g)?{data:null,error:g}:{data:null,error:new _o("Unexpected error in challenge",g)}}}async _verify({challengeId:e,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!n)return{data:null,error:new Dl("rpId is required for WebAuthn authentication")};try{if(!zp())return{data:null,error:new _o("Browser does not support WebAuthn",null)};const{data:g,error:y}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:o},signal:c},{request:d});if(!g)return{data:null,error:y};const{webauthn:v}=g;return this._verify({factorId:e,challengeId:g.challengeId,webauthn:{type:v.type,rpId:n,rpOrigins:o,credential_response:v.credential_response}})}catch(g){return $e(g)?{data:null,error:g}:{data:null,error:new _o("Unexpected error in authenticate",g)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!n)return{data:null,error:new Dl("rpId is required for WebAuthn registration")};try{if(!zp())return{data:null,error:new _o("Browser does not support WebAuthn",null)};const{data:g,error:y}=await this._enroll({friendlyName:e});if(!g)return await this.client.mfa.listFactors().then(S=>{var N;return(N=S.data)===null||N===void 0?void 0:N.all.find(R=>R.factor_type==="webauthn"&&R.friendly_name===e&&R.status!=="unverified")}).then(S=>S?this.client.mfa.unenroll({factorId:S?.id}):void 0),{data:null,error:y};const{data:v,error:b}=await this._challenge({factorId:g.id,friendlyName:g.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:c},{create:d});return v?this._verify({factorId:g.id,challengeId:v.challengeId,webauthn:{rpId:n,rpOrigins:o,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:b}}catch(g){return $e(g)?{data:null,error:g}:{data:null,error:new _o("Unexpected error in register",g)}}}}MN();const tA={url:YS,storageKey:ZS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Vp(t,e,n){return await n()}const la={};class Ml{get jwks(){var e,n;return(n=(e=la[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){la[this.storageKey]=Object.assign(Object.assign({},la[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=la[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){la[this.storageKey]=Object.assign(Object.assign({},la[this.storageKey]),{cachedAt:e})}constructor(e){var n,o,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},tA),e);if(this.storageKey=d.storageKey,this.instanceID=(n=Ml.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ml.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&Gr()){const g=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(g),this.logDebugMessages&&console.trace(g)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new jN({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Qy(d.fetch),this.lock=d.lock||Vp,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&Gr()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=DN:this.lock=Vp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new eA(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:Zy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Up(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Up(this.memoryStorage)),Gr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(g){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",g)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async g=>{this._debug("received broadcast notification from other tab or client",g),await this._notifyAllSubscribers(g.data.event,g.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ky}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},o="none";if(Gr()&&(n=hN(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),Gr()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:d}=await this._getSessionFromURL(n,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),sN(d)){const v=(e=d.details)===null||e===void 0?void 0:e.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:g,redirectType:y}=c;return this._debug("#_initialize()","detected session in URL",g,"redirect type",y),await this._saveSession(g),setTimeout(async()=>{y==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",g):await this._notifyAllSubscribers("SIGNED_IN",g)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $e(n)?this._returnResult({error:n}):this._returnResult({error:new _o("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,o,c;try{const d=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=e?.options)===null||c===void 0?void 0:c.captchaToken}},xform:ds}),{data:g,error:y}=d;if(y||!g)return this._returnResult({data:{user:null,session:null},error:y});const v=g.session,b=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(d){if($e(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(e){var n,o,c;try{let d;if("email"in e){const{email:S,password:N,options:R}=e;let T=null,D=null;this.flowType==="pkce"&&([T,D]=await ia(this.storage,this.storageKey)),d=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:R?.emailRedirectTo,body:{email:S,password:N,data:(n=R?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:R?.captchaToken},code_challenge:T,code_challenge_method:D},xform:ds})}else if("phone"in e){const{phone:S,password:N,options:R}=e;d=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:N,data:(o=R?.data)!==null&&o!==void 0?o:{},channel:(c=R?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:R?.captchaToken}},xform:ds})}else throw new su("You must provide either an email or phone number and a password");const{data:g,error:y}=d;if(y||!g)return await Wr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:y});const v=g.session,b=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(d){if(await Wr(this.storage,`${this.storageKey}-code-verifier`),$e(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(e){try{let n;if("email"in e){const{email:d,password:g,options:y}=e;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:g,gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:Bp})}else if("phone"in e){const{phone:d,password:g,options:y}=e;n=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:g,gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:Bp})}else throw new su("You must provide either an email or phone number and a password");const{data:o,error:c}=n;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const d=new sa;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,o,c,d;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=e.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,o,c,d,g,y,v,b,S,N,R;let T,D;if("message"in e)T=e.message,D=e.signature;else{const{chain:I,wallet:M,statement:z,options:U}=e;let B;if(Gr())if(typeof M=="object")B=M;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")B=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=M}const V=new URL((n=U?.url)!==null&&n!==void 0?n:window.location.href),re=await B.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!re||re.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=ew(re[0]);let H=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!H){const $=await B.request({method:"eth_chainId"});H=LN($)}const se={domain:V.host,address:G,statement:z,uri:V.href,version:"1",chainId:H,nonce:(c=U?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(g=(d=U?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&g!==void 0?g:new Date,expirationTime:(y=U?.signInWithEthereum)===null||y===void 0?void 0:y.expirationTime,notBefore:(v=U?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(b=U?.signInWithEthereum)===null||b===void 0?void 0:b.requestId,resources:(S=U?.signInWithEthereum)===null||S===void 0?void 0:S.resources};T=FN(se),D=await B.request({method:"personal_sign",params:[BN(T),G]})}try{const{data:I,error:M}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:D},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(R=e.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:ds});if(M)throw M;if(!I||!I.session||!I.user){const z=new sa;return this._returnResult({data:{user:null,session:null},error:z})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:M})}catch(I){if($e(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async signInWithSolana(e){var n,o,c,d,g,y,v,b,S,N,R,T;let D,I;if("message"in e)D=e.message,I=e.signature;else{const{chain:M,wallet:z,statement:U,options:B}=e;let V;if(Gr())if(typeof z=="object")V=z;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))V=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=z}const re=new URL((n=B?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in V&&V.signIn){const G=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:re.host,uri:re.href}),U?{statement:U}:null));let H;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")H=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)H=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)D=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),I=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");D=[`${re.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${re.href}`,`Issued At: ${(c=(o=B?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=B?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((g=B?.signInWithSolana)===null||g===void 0)&&g.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((y=B?.signInWithSolana)===null||y===void 0)&&y.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((v=B?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((b=B?.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((N=(S=B?.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||N===void 0)&&N.length?["Resources",...B.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const G=await V.signMessage(new TextEncoder().encode(D),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=G}}try{const{data:M,error:z}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:D,signature:So(I)},!((R=e.options)===null||R===void 0)&&R.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:ds});if(z)throw z;if(!M||!M.session||!M.user){const U=new sa;return this._returnResult({data:{user:null,session:null},error:U})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:z})}catch(M){if($e(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async _exchangeCodeForSession(e){const n=await bo(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(n??"").split("/");try{if(!o&&this.flowType==="pkce")throw new iN;const{data:d,error:g}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:ds});if(await Wr(this.storage,`${this.storageKey}-code-verifier`),g)throw g;if(!d||!d.session||!d.user){const y=new sa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:y})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:g})}catch(d){if(await Wr(this.storage,`${this.storageKey}-code-verifier`),$e(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(e){try{const{options:n,provider:o,token:c,access_token:d,nonce:g}=e,y=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:d,nonce:g,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ds}),{data:v,error:b}=y;if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!v||!v.session||!v.user){const S=new sa;return this._returnResult({data:{user:null,session:null},error:S})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:b})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,o,c,d,g;try{if("email"in e){const{email:y,options:v}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await ia(this.storage,this.storageKey));const{error:N}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:y,data:(n=v?.data)!==null&&n!==void 0?n:{},create_user:(o=v?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:S},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in e){const{phone:y,options:v}=e,{data:b,error:S}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:y,data:(c=v?.data)!==null&&c!==void 0?c:{},create_user:(d=v?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(g=v?.channel)!==null&&g!==void 0?g:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:S})}throw new su("You must provide either an email or phone number.")}catch(y){if(await Wr(this.storage,`${this.storageKey}-code-verifier`),$e(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async verifyOtp(e){var n,o;try{let c,d;"options"in e&&(c=(n=e.options)===null||n===void 0?void 0:n.redirectTo,d=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:g,error:y}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:ds});if(y)throw y;if(!g)throw new Error("An error occurred on token verification.");const v=g.session,b=g.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(c){if($e(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(e){var n,o,c,d,g;try{let y=null,v=null;this.flowType==="pkce"&&([y,v]=await ia(this.storage,this.storageKey));const b=await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=e?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:y,code_challenge_method:v}),headers:this.headers,xform:IN});return!((d=b.data)===null||d===void 0)&&d.url&&Gr()&&!(!((g=e.options)===null||g===void 0)&&g.skipBrowserRedirect)&&window.location.assign(b.data.url),this._returnResult(b)}catch(y){if(await Wr(this.storage,`${this.storageKey}-code-verifier`),$e(y))return this._returnResult({data:null,error:y});throw y}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:o}=e;if(o)throw o;if(!n)throw new Pn;const{error:c}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(e){if($e(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:o,type:c,options:d}=e,{error:g}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}else if("phone"in e){const{phone:o,type:c,options:d}=e,{data:g,error:y}=await nt(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:y})}throw new su("You must provide either an email or phone number and a type")}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await bo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<Mf:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const g=await bo(this.userStorage,this.storageKey+"-user");g?.user?e.user=g.user:e.user=Ff()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const g={value:this.suppressGetSessionWarning};e.user=NN(e.user,g),g.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zi}):await this._useSession(async n=>{var o,c,d;const{data:g,error:y}=n;if(y)throw y;return!(!((o=g.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=g.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:zi})})}catch(n){if($e(n))return nN(n)&&(await this._removeSession(),await Wr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async o=>{const{data:c,error:d}=o;if(d)throw d;if(!c.session)throw new Pn;const g=c.session;let y=null,v=null;this.flowType==="pkce"&&e.email!=null&&([y,v]=await ia(this.storage,this.storageKey));const{data:b,error:S}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:y,code_challenge_method:v}),jwt:g.access_token,xform:zi});if(S)throw S;return g.user=b.user,await this._saveSession(g),await this._notifyAllSubscribers("USER_UPDATED",g),this._returnResult({data:{user:g.user},error:null})})}catch(o){if(await Wr(this.storage,`${this.storageKey}-code-verifier`),$e(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pn;const n=Date.now()/1e3;let o=n,c=!0,d=null;const{payload:g}=Bf(e.access_token);if(g.exp&&(o=g.exp,c=o<=n),c){const{data:y,error:v}=await this._callRefreshToken(e.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!y)return{data:{user:null,session:null},error:null};d=y}else{const{data:y,error:v}=await this._getUser(e.access_token);if(v)throw v;d={access_token:e.access_token,refresh_token:e.refresh_token,user:y.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(n){if($e(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var o;if(!e){const{data:g,error:y}=n;if(y)throw y;e=(o=g.session)!==null&&o!==void 0?o:void 0}if(!e?.refresh_token)throw new Pn;const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Gr())throw new iu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new iu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Rp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new iu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rp("No code detected.");const{data:U,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:d,refresh_token:g,expires_in:y,expires_at:v,token_type:b}=e;if(!d||!y||!g||!b)throw new iu("No session defined in URL");const S=Math.round(Date.now()/1e3),N=parseInt(y);let R=S+N;v&&(R=parseInt(v));const T=R-S;T*1e3<=ma&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${N}s`);const D=R-N;S-D>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",D,R,S):S-D<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",D,R,S);const{data:I,error:M}=await this._getUser(d);if(M)throw M;const z={provider_token:o,provider_refresh_token:c,access_token:d,expires_in:N,expires_at:R,refresh_token:g,token_type:b,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:z,redirectType:e.type},error:null})}catch(o){if($e(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await bo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({error:d});const g=(o=c.session)===null||o===void 0?void 0:o.access_token;if(g){const{error:y}=await this.admin.signOut(g,e);if(y&&!(rN(y)&&(y.status===404||y.status===401||y.status===403)))return this._returnResult({error:y})}return e!=="others"&&(await this._removeSession(),await Wr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=fN(),o={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async n=>{var o,c;try{const{data:{session:d},error:g}=n;if(g)throw g;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",e,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(e))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",d),console.error(d)}})}async resetPasswordForEmail(e,n={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await ia(this.storage,this.storageKey,!0));try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(d){if(await Wr(this.storage,`${this.storageKey}-code-verifier`),$e(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var e;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:o,error:c}=await this._useSession(async d=>{var g,y,v,b,S;const{data:N,error:R}=d;if(R)throw R;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(g=e.options)===null||g===void 0?void 0:g.redirectTo,scopes:(y=e.options)===null||y===void 0?void 0:y.scopes,queryParams:(v=e.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await nt(this.fetch,"GET",T,{headers:this.headers,jwt:(S=(b=N.session)===null||b===void 0?void 0:b.access_token)!==null&&S!==void 0?S:void 0})});if(c)throw c;return Gr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:e.provider,url:o?.url},error:null})}catch(o){if($e(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var o;try{const{error:c,data:{session:d}}=n;if(c)throw c;const{options:g,provider:y,token:v,access_token:b,nonce:S}=e,N=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:y,id_token:v,access_token:b,nonce:S,link_identity:!0,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:ds}),{data:R,error:T}=N;return T?this._returnResult({data:{user:null,session:null},error:T}):!R||!R.session||!R.user?this._returnResult({data:{user:null,session:null},error:new sa}):(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("USER_UPDATED",R.session)),this._returnResult({data:R,error:T}))}catch(c){if(await Wr(this.storage,`${this.storageKey}-code-verifier`),$e(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var o,c;const{data:d,error:g}=n;if(g)throw g;return await nt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await gN(async c=>(c>0&&await pN(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ds})),(c,d)=>{const g=200*Math.pow(2,c);return d&&Lf(d)&&Date.now()+g-o<ma})}catch(o){if(this._debug(n,"error",o),$e(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",o),Gr()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await bo(this.storage,this.storageKey);if(c&&this.userStorage){let g=await bo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!g&&(g={user:c.user},await pa(this.userStorage,this.storageKey+"-user",g)),c.user=(e=g?.user)!==null&&e!==void 0?e:Ff()}else if(c&&!c.user&&!c.user){const g=await bo(this.storage,this.storageKey+"-user");g&&g?.user?(c.user=g.user,await Wr(this.storage,this.storageKey+"-user"),await pa(this.storage,this.storageKey,c)):c.user=Ff()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const d=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Mf;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${Mf}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:g}=await this._callRefreshToken(c.refresh_token);g&&(console.error(g),Lf(g)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",g),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:g,error:y}=await this._getUser(c.access_token);!y&&g?.user?(c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(g){console.error("Error getting user data:",g),this._debug(o,"error getting user data, skipping SIGNED_IN notification",g)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var n,o;if(!e)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new $u;const{data:d,error:g}=await this._refreshAccessToken(e);if(g)throw g;if(!d.session)throw new Pn;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const y={data:d.session,error:null};return this.refreshingDeferred.resolve(y),y}catch(d){if(this._debug(c,"error",d),$e(d)){const g={data:null,error:d};return Lf(d)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(g),g}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(e,n,o=!0){const c=`#_notifyAllSubscribers(${e})`;this._debug(c,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:n});const d=[],g=Array.from(this.stateChangeEmitters.values()).map(async y=>{try{await y.callback(e,n)}catch(v){d.push(v)}});if(await Promise.all(g),d.length>0){for(let y=0;y<d.length;y+=1)console.error(d[y]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Wr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await pa(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const d=Mp(c);await pa(this.storage,this.storageKey,d)}else{const c=Mp(n);await pa(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Wr(this.storage,this.storageKey),await Wr(this.storage,this.storageKey+"-code-verifier"),await Wr(this.storage,this.storageKey+"-user"),this.userStorage&&await Wr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Gr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ma);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-e)/ma);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ma}ms, refresh threshold is ${Hh} ticks`),c<=Hh&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Jy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,o){const c=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,g]=await ia(this.storage,this.storageKey),y=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(g)}`});c.push(y.toString())}if(o?.queryParams){const d=new URLSearchParams(o.queryParams);c.push(d.toString())}return o?.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${c.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;return d?this._returnResult({data:null,error:d}):await nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var o,c;const{data:d,error:g}=n;if(g)return this._returnResult({data:null,error:g});const y=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:v,error:b}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:y,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return b?this._returnResult({data:null,error:b}):(e.factorType==="totp"&&v.type==="totp"&&(!((c=v?.totp)===null||c===void 0)&&c.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const g=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?qN(e.webauthn.credential_response):$N(e.webauthn.credential_response)})}:{code:e.code}),{data:y,error:v}=await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:g,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+y.expires_in},y)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",y),this._returnResult({data:y,error:v}))})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const g=await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});if(g.error)return g;const{data:y}=g;if(y.type!=="webauthn")return{data:y,error:null};switch(y.webauthn.type){case"create":return{data:Object.assign(Object.assign({},y),{webauthn:Object.assign(Object.assign({},y.webauthn),{credential_options:Object.assign(Object.assign({},y.webauthn.credential_options),{publicKey:WN(y.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},y),{webauthn:Object.assign(Object.assign({},y.webauthn),{credential_options:Object.assign(Object.assign({},y.webauthn.credential_options),{publicKey:GN(y.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(e=n?.factors)!==null&&e!==void 0?e:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Bf(o.access_token);let g=null;d.aal&&(g=d.aal);let y=g;((n=(e=o.user.factors)===null||e===void 0?void 0:e.filter(S=>S.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(y="aal2");const b=d.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;return c?this._returnResult({data:null,error:c}):o?await nt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:c},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new Pn});const g=await nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:y=>({data:y,error:null})});return g.data&&g.data.redirect_url&&Gr()&&!n?.skipBrowserRedirect&&window.location.assign(g.data.redirect_url),g})}catch(o){if($e(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:c},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new Pn});const g=await nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:y=>({data:y,error:null})});return g.data&&g.data.redirect_url&&Gr()&&!n?.skipBrowserRedirect&&window.location.assign(g.data.redirect_url),g})}catch(o){if($e(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:o}=e;return o?this._returnResult({data:null,error:o}):n?await nt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(e){if($e(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;return c?this._returnResult({data:null,error:c}):o?(await nt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pn})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let o=n.keys.find(y=>y.kid===e);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(y=>y.kid===e),o&&this.jwks_cached_at+eN>c)return o;const{data:d,error:g}=await nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,o=d.keys.find(y=>y.kid===e),!o)?null:o}async getClaims(e,n={}){try{let o=e;if(!o){const{data:T,error:D}=await this.getSession();if(D||!T.session)return this._returnResult({data:null,error:D});o=T.session.access_token}const{header:c,payload:d,signature:g,raw:{header:y,payload:v}}=Bf(o);n?.allowExpired||CN(d.exp);const b=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!b){const{error:T}=await this.getUser(o);if(T)throw T;return{data:{claims:d,header:c,signature:g},error:null}}const S=_N(c.alg),N=await crypto.subtle.importKey("jwk",b,S,!0,["verify"]);if(!await crypto.subtle.verify(S,N,g,uN(`${y}.${v}`)))throw new qh("Invalid JWT signature");return{data:{claims:d,header:c,signature:g},error:null}}catch(o){if($e(o))return this._returnResult({data:null,error:o});throw o}}}Ml.nextInstanceID={};const rA=Ml,nA="2.90.1";let vl="";typeof Deno<"u"?vl="deno":typeof document<"u"?vl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vl="react-native":vl="node";const sA={"X-Client-Info":`supabase-js-${vl}/${nA}`},iA={headers:sA},oA={schema:"public"},aA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lA={};function Ll(t){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(t)}function cA(t,e){if(Ll(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(Ll(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uA(t){var e=cA(t,"string");return Ll(e)=="symbol"?e:e+""}function dA(t,e,n){return(e=uA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,o)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hp(Object(n),!0).forEach(function(o){dA(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hp(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}const fA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),hA=()=>Headers,mA=(t,e,n)=>{const o=fA(n),c=hA();return async(d,g)=>{var y;const v=(y=await e())!==null&&y!==void 0?y:t;let b=new c(g?.headers);return b.has("apikey")||b.set("apikey",t),b.has("Authorization")||b.set("Authorization",`Bearer ${v}`),o(d,ur(ur({},g),{},{headers:b}))}};function pA(t){return t.endsWith("/")?t:t+"/"}function gA(t,e){var n,o;const{db:c,auth:d,realtime:g,global:y}=t,{db:v,auth:b,realtime:S,global:N}=e,R={db:ur(ur({},v),c),auth:ur(ur({},b),d),realtime:ur(ur({},S),g),storage:{},global:ur(ur(ur({},N),y),{},{headers:ur(ur({},(n=N?.headers)!==null&&n!==void 0?n:{}),(o=y?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return t.accessToken?R.accessToken=t.accessToken:delete R.accessToken,R}function xA(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pA(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var yA=class extends rA{constructor(t){super(t)}},wA=class{constructor(t,e,n){var o,c;this.supabaseUrl=t,this.supabaseKey=e;const d=xA(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const g=`sb-${d.hostname.split(".")[0]}-auth-token`,y={db:oA,realtime:lA,auth:ur(ur({},aA),{},{storageKey:g}),global:iA},v=gA(n??{},y);if(this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(S,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}});else{var b;this.auth=this._initSupabaseAuthClient((b=v.auth)!==null&&b!==void 0?b:{},this.headers,v.global.fetch)}this.fetch=mA(e,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(ur({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(S=>this.realtime.setAuth(S)).catch(S=>console.warn("Failed to set initial Realtime auth token:",S)),this.rest=new Q_(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new XS(this.storageUrl.href,this.headers,this.fetch,n?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new $_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:o}=await t.auth.getSession();return(e=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:o,userStorage:c,storageKey:d,flowType:g,lock:y,debug:v,throwOnError:b},S,N){const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yA({url:this.authUrl.href,headers:ur(ur({},R),S),storageKey:d,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:o,userStorage:c,flowType:g,lock:y,debug:v,throwOnError:b,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new pS(this.realtimeUrl.href,ur(ur({},t),{},{params:ur(ur({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const vA=(t,e,n)=>new wA(t,e,n);function bA(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}bA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const EA="https://bvhkxzayughsawacacqo.supabase.co",CA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ2aGt4emF5dWdoc2F3YWNhY3FvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgxMTM4NjMsImV4cCI6MjA4MzY4OTg2M30.KKZQuLzyr5zGfL9vGuiZ-ow5x1BB7ArHPYEbYxyi3uM",Ze=vA(EA,CA,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),rw=O.createContext(void 0),oi=()=>{const t=O.useContext(rw);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},_A=({children:t})=>{const[e,n]=O.useState(null),[o,c]=O.useState(null),[d,g]=O.useState(null),[y,v]=O.useState(!0),b=async D=>{try{const{data:I,error:M}=await Ze.from("profiles").select("*").eq("id",D).single();return M||!I?(console.warn("Profile fetch failed:",M?.message),null):I}catch(I){return console.error("Profile fetch error:",I),null}},S=async()=>{if(e){const D=await b(e.id);D&&g(D)}};O.useEffect(()=>{let D=!0;const I=async z=>{if(D){if(z?.user){c(z),n(z.user);const U=await b(z.user.id);D&&g(U||{id:z.user.id,full_name:z.user.user_metadata?.full_name||z.user.user_metadata?.name||"",email:z.user.email||"",phone:z.user.user_metadata?.phone||"",referral_code:null,is_admin:!1,is_volunteer:!1})}else c(null),n(null),g(null);D&&v(!1)}};Ze.auth.getSession().then(({data:{session:z}})=>{I(z)}).catch(z=>{console.error("getSession error:",z),D&&v(!1)});const{data:{subscription:M}}=Ze.auth.onAuthStateChange((z,U)=>{I(U)});return()=>{D=!1,M.unsubscribe()}},[]);const N=async()=>{await Ze.auth.signOut(),n(null),c(null),g(null)},R=d?.is_admin??!1,T=d?.is_volunteer??!1;return h.jsx(rw.Provider,{value:{user:e,session:o,profile:d,loading:y,isAdmin:R,isVolunteer:T,signOut:N,refreshProfile:S},children:t})},Li=({children:t})=>{const{user:e,loading:n,isAdmin:o}=oi();return n?h.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"LOADING..."})}):e?o?h.jsx(h.Fragment,{children:t}):h.jsx(jh,{to:"/dashboard",replace:!0}):h.jsx(jh,{to:"/login",replace:!0})},Wp=({children:t})=>{const{user:e,loading:n,isAdmin:o,isVolunteer:c}=oi();return n?h.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"AUTHENTICATING..."})}):!e||!o&&!c?h.jsx(jh,{to:"/login",replace:!0}):h.jsx(h.Fragment,{children:t})},Gp=[{label:"HOME",href:"#home"},{label:"ABOUT",href:"#about"},{label:"EVENTS",href:"#events"},{label:"GALLERY",href:"#gallery"}],ai=({hideOnMobile:t=!1})=>{const[e,n]=O.useState(!1),[o,c]=O.useState("home");O.useEffect(()=>{const g=()=>{const y=Gp.map(b=>b.href.slice(1)),v=window.scrollY+200;for(const b of y){const S=document.getElementById(b);if(S){const{offsetTop:N,offsetHeight:R}=S;if(v>=N&&v<N+R){c(b);break}}}};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]);const d=g=>{n(!1);const y=document.querySelector(g);y&&y.scrollIntoView({behavior:"smooth"})};return h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>n(!e),className:`menu-button ${t?"hidden md:block":""}`,"aria-label":"Toggle navigation menu",children:e?h.jsx(ti,{className:"w-6 h-6 text-primary"}):h.jsxs("div",{className:"flex flex-col gap-1.5",children:[h.jsx("span",{className:"w-6 h-0.5 bg-primary rounded-full"}),h.jsx("span",{className:"w-6 h-0.5 bg-primary rounded-full"}),h.jsx("span",{className:"w-6 h-0.5 bg-primary rounded-full"})]})}),e&&h.jsx("div",{className:"nav-overlay animate-fade-in",children:h.jsx("nav",{className:"glass-card p-8 md:p-12 rounded-2xl",children:h.jsx("ul",{className:"space-y-6",children:Gp.map(g=>h.jsx("li",{children:h.jsxs("button",{onClick:()=>d(g.href),className:`nav-link ${o===g.href.slice(1)?"text-primary glow-text":""}`,children:[h.jsx("span",{className:"text-primary/60",children:">"}),g.label]})},g.href))})})})]})},SA=()=>h.jsx("div",{className:"fixed top-6 left-6 z-40 pointer-events-none select-none",children:h.jsx("div",{className:"glass-card bg-black/20 backdrop-blur-sm border border-white/10 px-6 py-2 rounded-2xl shadow-lg",children:h.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white tracking-wider font-sans",children:"IEEE"})})}),NA=new Date("2026-01-31T00:00:00"),qp=O.memo(({onClose:t})=>h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm animate-fade-in",onClick:t,children:h.jsxs("div",{className:"glass-card p-8 md:p-12 rounded-2xl relative max-w-md mx-4 text-center",onClick:e=>e.stopPropagation(),children:[h.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-primary hover:text-primary/80 transition-colors","aria-label":"Close popup",children:h.jsx(ti,{className:"w-6 h-6"})}),h.jsx("div",{className:"mb-6",children:h.jsx("span",{className:"text-6xl",children:""})}),h.jsx("h2",{className:"text-2xl md:text-3xl font-display font-bold text-primary glow-text mb-4",children:"REGISTRATION CLOSED"}),h.jsxs("p",{className:"text-primary/80 font-display tracking-wide mb-6",children:["Thank you for your interest in Tesseract 9.0!",h.jsx("br",{}),h.jsx("span",{className:"text-sm",children:"Registration is now closed."})]}),h.jsx("button",{onClick:t,className:"bg-primary text-background px-6 py-2 rounded-lg font-display font-bold tracking-wider hover:scale-105 transition-transform",children:"GOT IT"})]})})),AA=()=>{const[t,e]=O.useState({days:0,hours:0,minutes:0,seconds:0}),[n,o]=O.useState(!1),[c,d]=O.useState(!1);O.useEffect(()=>{const N=()=>{const T=NA.getTime()-new Date().getTime();T>0&&e({days:Math.floor(T/864e5),hours:Math.floor(T/36e5%24),minutes:Math.floor(T/1e3/60%60),seconds:Math.floor(T/1e3%60)})};N();const R=setInterval(N,1e3);return()=>clearInterval(R)},[]),O.useEffect(()=>{const N=setTimeout(()=>{d(!0)},1500);return()=>clearTimeout(N)},[]);const g=N=>N.toString().padStart(2,"0"),y=[{value:t.days,label:"DAYS"},{value:t.hours,label:"HOURS"},{value:t.minutes,label:"MINS"},{value:t.seconds,label:"SECS"}],v=()=>{o(!0)},b=()=>{o(!1)},S=()=>{d(!1)};return h.jsxs(h.Fragment,{children:[c&&h.jsx(qp,{onClose:S}),n&&h.jsx(qp,{onClose:b}),h.jsxs("div",{className:"flex flex-col items-center gap-12 w-full max-w-5xl mx-auto px-4",children:[h.jsxs("div",{className:"flex flex-row items-center justify-center w-full gap-4 md:gap-12",children:[h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[10px] md:text-2xl text-primary font-display tracking-widest mb-1 md:mb-2",children:"JANUARY"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("div",{className:"bg-primary text-background p-1 md:p-2 rounded w-8 h-12 md:w-24 md:h-32 flex items-center justify-center",children:h.jsx("span",{className:"text-2xl md:text-8xl font-bold font-display",children:"3"})}),h.jsx("div",{className:"bg-primary text-background p-1 md:p-2 rounded w-8 h-12 md:w-24 md:h-32 flex items-center justify-center",children:h.jsx("span",{className:"text-2xl md:text-8xl font-bold font-display",children:"1"})})]})]}),h.jsxs("div",{className:"relative group",children:[h.jsx("div",{className:"absolute -inset-1 bg-primary rounded-lg blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"}),h.jsx("button",{onClick:v,className:"relative glow-button bg-primary text-background px-3 py-2 md:px-8 md:py-4 text-xs md:text-2xl font-bold font-display tracking-wider rounded-lg hover:scale-105 transition-transform flex items-center gap-2 whitespace-nowrap cursor-pointer",children:"REGISTRATION CLOSED"})]}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[10px] md:text-2xl text-primary font-display tracking-widest mb-1 md:mb-2",children:"FEBRUARY"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("div",{className:"bg-primary text-background p-1 md:p-2 rounded w-8 h-12 md:w-24 md:h-32 flex items-center justify-center",children:h.jsx("span",{className:"text-2xl md:text-8xl font-bold font-display",children:"0"})}),h.jsx("div",{className:"bg-primary text-background p-1 md:p-2 rounded w-8 h-12 md:w-24 md:h-32 flex items-center justify-center",children:h.jsx("span",{className:"text-2xl md:text-8xl font-bold font-display",children:"1"})})]})]})]}),h.jsx("div",{className:"flex gap-2 md:gap-8 justify-center w-full",children:y.map((N,R)=>h.jsxs("div",{className:"countdown-box glow-border",children:[h.jsx("span",{className:"countdown-number font-display",children:g(N.value)}),h.jsx("span",{className:"countdown-label",children:N.label})]},N.label))})]})]})},Vl=()=>h.jsx("div",{className:"w-full overflow-hidden",children:h.jsx("div",{className:"relative w-full",style:{paddingTop:"15%"},children:h.jsx("img",{src:"/pixel-mountains-%20and-%20stuff.png",alt:"Pixel mountains",className:"absolute inset-0 w-full h-full object-cover"})})}),TA=()=>h.jsxs("section",{id:"home",className:"min-h-screen flex flex-col relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-30 pointer-events-none"}),h.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-4 pt-20 pb-8 relative z-10",children:[h.jsx("img",{src:"/tesseractlogo.png",alt:"Tesseract 9.0 logo",className:"w-20 h-20 md:w-28 md:h-28 mb-6 animate-float object-contain"}),h.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-display font-bold text-primary tracking-wider text-center glow-text mb-8",children:"TESSERACT 9.0"}),h.jsx(AA,{})]}),h.jsx("div",{className:"relative z-10 mt-auto",children:h.jsx(Vl,{})})]}),kA=[{icon:hb,title:"ABOUT TESSERACT 9.0",content:"Tesseract is no less than a celebration for the IEEE SB SJCET since it's our annual flagship event. Tesseract provides an avenue for all the minds out there to meet, network, and find new opportunities. Enjoy these two days with fun workshops, a cultural night, and, of course, the food fiesta."},{icon:Na,title:"ONCE IN A LIFETIME EXPERIENCE",content:"Join us at Tesseract 9.0 for a once-in-a-lifetime experience where you can immerse yourself in two days of tech, fun, networking, and insightful discussions on the ever-evolving world of technology."},{icon:ab,title:"ABOUT THE HOST",content:"St. Joseph's College of Engineering and Technology, Palai is a place where diversity is celebrated. Our campus is a melting pot of cultures, backgrounds, and perspectives. You will have the opportunity to engage with a diverse community of students and faculty, broadening your horizons and fostering a global mindset."}],IA=()=>h.jsxs("section",{id:"about",className:"py-20 px-4 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-20 pointer-events-none"}),h.jsxs("div",{className:"container mx-auto max-w-4xl relative z-10",children:[h.jsx("h2",{className:"section-title font-display",children:"ABOUT"}),h.jsx("div",{className:"section-underline mb-16"}),h.jsx("div",{className:"space-y-6",children:kA.map((t,e)=>h.jsxs("div",{className:"terminal-card animate-fade-in",style:{animationDelay:`${e*.1}s`},children:[h.jsxs("div",{className:"flex items-center gap-3 p-5 border-b border-border",children:[h.jsx("div",{className:"p-2 rounded-lg bg-secondary/50",children:h.jsx(t.icon,{className:"w-5 h-5 text-primary"})}),h.jsx("h3",{className:"text-lg md:text-xl font-display font-semibold text-primary tracking-wide",children:t.title})]}),h.jsxs("div",{className:"p-5",children:[h.jsx("p",{className:"text-foreground/80 leading-relaxed",children:t.content}),h.jsx("div",{className:"mt-4 h-1 bg-border rounded-full overflow-hidden",children:h.jsx("div",{className:"progress-bar w-full"})})]})]},e))}),h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsx("div",{className:"glass-card glow-border px-8 py-4 rounded-none",children:h.jsx("span",{className:"text-sm md:text-base font-display text-primary tracking-widest",children:"POWERED BY IEEE SB SJCET"})})})]})]}),RA=[{title:"TECHNICAL WORKSHOPS",locked:!1,path:"/workshops",description:"Explore our hands-on technical workshops.",image:"/technical-workshop.png"},{title:"MENTALISM",locked:!1,path:"/mentalism",description:"Think youre in control? Think again",image:"/mentalism-frame.png"},{title:"SPECIAL GUEST",locked:!0,icon:ob},{title:"CULTURAL NIGHT",locked:!1,path:"/cultural",description:"Expect chaos. Experience culture.",image:"/cultural.png"}],OA=()=>{const t=si();return h.jsxs("section",{id:"events",className:"py-20 px-4 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-20 pointer-events-none"}),h.jsxs("div",{className:"container mx-auto max-w-4xl relative z-10",children:[h.jsx("h2",{className:"section-title font-display",children:"EVENTS"}),h.jsx("div",{className:"section-underline mb-8"}),h.jsxs("p",{className:"section-subtitle mb-12",children:[h.jsx("span",{className:"text-primary",children:">"})," Plans loading",h.jsx("span",{className:"animate-blink",children:"..."})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:RA.map((e,n)=>{const o=e.icon;return h.jsxs("div",{className:`group transition-all duration-300 border border-border relative overflow-hidden
                  ${e.locked?"event-card-locked hover:border-primary/50":"glass-card p-6 cursor-pointer hover:border-primary hover:shadow-glow"}`,style:{animationDelay:`${n*.1}s`},onClick:()=>!e.locked&&e.path&&t(e.path),children:[e.image?h.jsx("div",{className:"mb-4 relative z-10 -mx-6 -mt-6",children:h.jsx("div",{className:"border border-primary/30 overflow-hidden",children:h.jsx("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover opacity-90 group-hover:opacity-100 transition-opacity"})})}):h.jsx("div",{className:"flex justify-center mb-4 relative z-10",children:h.jsx("div",{className:`p-4 rounded-xl border transition-colors
                      ${e.locked?"bg-secondary/80 border-border group-hover:border-primary/50":"bg-primary/10 border-primary/30 group-hover:bg-primary/20 group-hover:border-primary"}`,children:h.jsx(o,{className:`w-8 h-8 transition-colors
                        ${e.locked?"text-primary/70":"text-primary"}`})})}),h.jsx("h3",{className:"text-lg font-display font-semibold text-primary tracking-wide mb-2 relative z-10 text-center",children:e.title}),h.jsx("p",{className:"text-muted-foreground text-sm relative z-10 text-center",children:e.locked?"Event details will be revealed soon...":e.description}),!e.locked&&h.jsx("div",{className:"mt-4 flex justify-center relatives z-10",children:h.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-primary/80 group-hover:text-primary transition-colors",children:["[ ACCESS GRANTED ] ",h.jsx(Yv,{className:"w-3 h-3 animate-pulse"})]})}),e.locked&&h.jsx("div",{className:"mt-4 relative z-10",children:h.jsx("div",{className:"h-0.5 bg-border rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full w-1/4 bg-primary rounded-full"})})})]},n)})})]})]})},yl=[{id:"img1",src:"/gallery/img8.webp"},{id:"img2",src:"/gallery/tess7_2.jpg"},{id:"img3",src:"/gallery/tess7_4.jpg"},{id:"img4",src:"/gallery/img5.webp"},{id:"img5",src:"/gallery/img7.webp"},{id:"img6",src:"/gallery/tess7_1.jpg"}],jA=()=>{const[t,e]=O.useState(4),[n,o]=O.useState(!1),[c,d]=O.useState(!0);O.useEffect(()=>{const y=()=>{const v=typeof window<"u"?window.innerWidth<768:!0;d(v),e(v?Math.min(4,yl.length):yl.length)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]);const g=()=>{o(!0),setTimeout(()=>{e(y=>Math.min(y+2,yl.length)),o(!1)},800)};return h.jsxs("section",{id:"gallery",className:"py-20 px-4 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-20 pointer-events-none"}),h.jsxs("div",{className:"container mx-auto max-w-4xl relative z-10",children:[h.jsx("h2",{className:"section-title font-display",children:"GALLERY"}),h.jsx("div",{className:"section-underline mb-8"}),h.jsxs("p",{className:"section-subtitle mb-12",children:[h.jsx("span",{className:"text-primary",children:">"})," Memories from previous Tesseracts"]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:yl.slice(0,t).map((y,v)=>h.jsx("div",{className:"gallery-image animate-fade-in bg-card overflow-hidden rounded-none relative",style:{animationDelay:`${v*.05}s`},children:h.jsx("img",{src:y.src,alt:y.id,className:"w-full h-56 md:h-48 lg:h-64 object-cover block rounded-none"})},y.id))}),c&&t<yl.length&&h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsx("button",{onClick:g,disabled:n,className:"glass-card glow-button px-8 py-4 font-mono text-primary hover:border-primary/50 transition-all duration-300 disabled:opacity-50 rounded-none",children:n?h.jsxs("span",{children:[h.jsx("span",{className:"text-primary",children:">"})," Loading",h.jsx("span",{className:"animate-blink",children:"..."})]}):h.jsxs("span",{children:[h.jsx("span",{className:"text-primary",children:">"})," More memories"]})})})]})]})},PA=[{icon:tb,title:"IEEE SB SJCET",subtitle:"Official Website",href:"https://ieee.sjcetpalai.ac.in/"},{icon:nb,title:"INSTAGRAM",subtitle:"@ieee_sb_sjcet",href:"https://www.instagram.com/ieeesbsjcet/"},{icon:ib,title:"LINKEDIN",subtitle:"IEEE SB SJCET",href:"https://www.linkedin.com/in/ieee-sb-sjcet-palai-2a0a3a1a6/"},{icon:Ax,title:"EMAIL",subtitle:"contact@ieeesbsjcet.org",href:"mailto:contact@ieeesbsjcet@gmail.com"}],DA=()=>h.jsxs("section",{className:"py-20 px-4 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-20 pointer-events-none"}),h.jsxs("div",{className:"container mx-auto max-w-4xl relative z-10",children:[h.jsx("h2",{className:"section-title font-display",children:"LINKS"}),h.jsx("div",{className:"section-underline mb-8"}),h.jsxs("p",{className:"section-subtitle mb-12",children:[h.jsx("span",{className:"text-primary",children:">"})," Connect with us"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:PA.map((t,e)=>h.jsxs("a",{href:t.href,target:"_blank",rel:"noopener noreferrer",className:"link-card group",children:[h.jsx("div",{className:"p-3 rounded-xl bg-secondary/80 border border-border group-hover:border-primary/50 transition-colors",children:h.jsx(t.icon,{className:"w-6 h-6 text-primary"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-display font-semibold text-primary tracking-wide",children:t.title}),h.jsx("p",{className:"text-muted-foreground text-sm",children:t.subtitle})]})]},e))}),h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsx("div",{className:"glass-card glow-border px-8 py-4",children:h.jsxs("span",{className:"text-sm md:text-base font-mono text-primary",children:[h.jsx("span",{className:"text-primary/60",children:">"})," Stay connected for updates"]})})})]})]}),MA=[{terminal:"contact_terminal_1.exe",name:"Blesson K Tomy",role:"Chair, IEEE SB SJCET",phone:"+91 89213 03814"},{terminal:"contact_terminal_2.exe",name:"Ayswaryalakshmi R",role:"Program Co-ordinator, IEEE SB SJCET",phone:"+91 94002 06919"}],LA=()=>h.jsxs("section",{className:"py-20 px-4 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-20 pointer-events-none"}),h.jsxs("div",{className:"container mx-auto max-w-4xl relative z-10",children:[h.jsx("h2",{className:"section-title font-display",children:"ANY DOUBTS?"}),h.jsx("div",{className:"section-underline mb-8"}),h.jsxs("p",{className:"section-subtitle mb-12",children:[h.jsx("span",{className:"text-primary",children:">"})," Contact our organizers"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:MA.map((t,e)=>h.jsxs("div",{className:"terminal-card rounded-none",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot-red"}),h.jsx("span",{className:"terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot-green"}),h.jsx("span",{className:"text-muted-foreground text-sm ml-2 font-mono",children:t.terminal})]}),h.jsxs("div",{className:"p-5 space-y-4",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Sa,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground text-sm block",children:"> NAME"}),h.jsx("span",{className:"text-foreground font-semibold",children:t.name})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Zv,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground text-sm block",children:"> ROLE"}),h.jsx("span",{className:"text-foreground font-semibold",children:t.role})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Ix,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground text-sm block",children:"> PHONE"}),h.jsx("a",{href:`tel:${t.phone.replace(/\s/g,"")}`,className:"text-foreground font-semibold hover:text-primary transition-colors",children:t.phone})]})]})]})]},e))})]})]}),BA=()=>{const t="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3932.462339742505!2d76.7260948!3d9.7268467!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3b07cc024cb7c83f%3A0xc8944aaebb3ba492!2sSt.%20Joseph%27s%20College%20of%20Engineering%20and%20Technology%2C%20Palai%20(Autonomous)!5e0!3m2!1sen!2sin!4v1766851408365!5m2!1sen!2sin",e=()=>{window.open("https://www.google.com/maps/place/St.+Joseph's+College+of+Engineering+and+Technology,+Palai","_blank")};return h.jsxs("section",{className:"py-20 px-4 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-20 pointer-events-none"}),h.jsxs("div",{className:"container mx-auto max-w-4xl relative z-10",children:[h.jsx("h2",{className:"section-title font-display",children:"LOCATION"}),h.jsx("div",{className:"section-underline mb-8"}),h.jsxs("p",{className:"section-subtitle mb-12",children:[h.jsx("span",{className:"text-primary",children:">"})," Find us here"]}),h.jsxs("div",{className:"terminal-card mb-6 relative",children:[h.jsx("div",{className:"absolute top-4 left-4 z-10",children:h.jsx("div",{className:"glass-card px-4 py-2 backdrop-blur-md",children:h.jsx("span",{className:"font-mono text-sm text-muted-foreground",children:"St. Joseph's College of Engineering and Technology, Palai"})})}),h.jsxs("div",{className:"aspect-video bg-secondary/30 flex items-center justify-center relative overflow-hidden",children:[h.jsx("iframe",{title:"SJCET Palai - map",src:t,className:"absolute inset-0 w-full h-full border-0",allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}),h.jsx("div",{className:"absolute bottom-4 right-4 z-20",children:h.jsx("button",{onClick:e,className:"glass-card px-3 py-2 font-mono text-xs text-primary hover:border-primary/50",type:"button",children:"Open in Google Maps"})})]})]}),h.jsxs("div",{className:"terminal-card",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot-red"}),h.jsx("span",{className:"terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot-green"}),h.jsx("span",{className:"text-muted-foreground text-sm ml-2 font-mono",children:"location_data.txt"})]}),h.jsxs("div",{className:"p-5 space-y-4",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground text-sm block",children:"> VENUE"}),h.jsx("h3",{className:"text-lg md:text-xl font-display font-semibold text-primary tracking-wide",children:"ST. JOSEPH'S COLLEGE OF ENGINEERING AND TECHNOLOGY"}),h.jsx("p",{className:"text-foreground mt-1",children:"Palai, Kerala"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground text-sm block",children:"> ADDRESS"}),h.jsxs("p",{className:"text-foreground",children:["Choondacherry P.O.",h.jsx("br",{}),"Palai, Kottayam",h.jsx("br",{}),"Kerala - 686579"]})]})]})]}),h.jsx("div",{className:"mt-8 flex justify-center",children:h.jsxs("button",{onClick:e,className:"glass-card glow-button px-8 py-4 flex items-center gap-3 font-mono text-primary hover:border-primary/50 transition-all duration-300 group",type:"button",children:[h.jsx(cb,{className:"w-5 h-5 group-hover:animate-pulse"}),h.jsx("span",{children:"GET DIRECTIONS"})]})})]})]})},li=()=>h.jsxs("footer",{className:"py-12 px-4 border-t border-border relative",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-10 pointer-events-none"}),h.jsx("div",{className:"container mx-auto max-w-4xl relative z-10",children:h.jsxs("div",{className:"flex flex-col items-center gap-6",children:[h.jsx("img",{src:"/tesseractlogo.png",alt:"Tesseract 9.0 logo",className:"w-12 h-12 opacity-50 object-contain"}),h.jsx("p",{className:"font-display text-sm text-muted-foreground tracking-widest text-center",children:"TESSERACT 9.0  Annual Flagship Event of IEEE SB SJCET"})]})})]}),FA=()=>h.jsxs("div",{className:"min-h-screen bg-background relative scanlines",children:[h.jsx(SA,{}),h.jsx(ai,{}),h.jsxs("main",{children:[h.jsx(TA,{}),h.jsx(IA,{}),h.jsx(OA,{}),h.jsx(jA,{}),h.jsx(DA,{}),h.jsx(LA,{}),h.jsx(BA,{})]}),h.jsx(li,{})]}),UA=()=>{const t=si(),{toast:e}=an(),[n,o]=O.useState(""),[c,d]=O.useState(""),[g,y]=O.useState(!1),v=async S=>{if(S.preventDefault(),!n||!c){e({title:"Validation Error",description:"Please enter both email and password.",variant:"destructive"});return}y(!0);try{const{data:N,error:R}=await Ze.auth.signInWithPassword({email:n,password:c});if(R)e({title:"Login Failed",description:R.message,variant:"destructive"});else if(N.session){e({title:"Success",description:"Logged in successfully."}),t("/dashboard");return}else e({title:"Email Not Verified",description:"Please check your email to verify your account before logging in.",variant:"destructive"})}catch{e({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{y(!1)}},b=async()=>{y(!0);const{error:S}=await Ze.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/dashboard`}});S&&(e({title:"Login Failed",description:S.message,variant:"destructive"}),y(!1))};return h.jsxs("div",{className:"min-h-screen bg-background relative scanlines flex flex-col",children:[h.jsx(ai,{}),h.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-30 pointer-events-none"}),h.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[h.jsx("h1",{className:"text-3xl md:text-5xl font-display font-bold text-primary glow-text mb-8 text-center tracking-wider",children:"LOGIN"}),h.jsxs("div",{className:"terminal-card",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot terminal-dot-red"}),h.jsx("span",{className:"terminal-dot terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot terminal-dot-green"}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2 font-mono",children:"auth://login"})]}),h.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[h.jsxs("form",{onSubmit:v,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm text-primary/80 font-mono mb-2",children:"EMAIL"}),h.jsx("input",{id:"email",type:"email",value:n,onChange:S=>o(S.target.value),placeholder:"user@example.com",className:"w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors",disabled:g})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm text-primary/80 font-mono mb-2",children:"PASSWORD"}),h.jsx("input",{id:"password",type:"password",value:c,onChange:S=>d(S.target.value),placeholder:"",className:"w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors",disabled:g})]}),h.jsx("button",{type:"submit",disabled:g,className:"w-full glow-button bg-primary text-background py-3 font-display font-bold tracking-wider rounded hover:scale-[1.02] transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:g?"AUTHENTICATING...":"LOGIN"})]}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-border"})}),h.jsx("div",{className:"relative flex justify-center text-xs",children:h.jsx("span",{className:"bg-card px-4 text-muted-foreground font-mono",children:"OR"})})]}),h.jsxs("button",{onClick:b,disabled:g,className:"w-full flex items-center justify-center gap-3 border border-border bg-secondary/30 py-3 rounded font-mono text-primary hover:bg-secondary/50 hover:border-primary/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"CONTINUE WITH GOOGLE"]}),h.jsxs("p",{className:"text-center text-sm text-muted-foreground font-mono",children:["Don't have an account?"," ",h.jsx(qr,{to:"/register",className:"text-primary hover:underline hover:glow-text transition-all",children:"Register here"})]})]})]})]})]}),h.jsx(li,{})]})},zA=()=>{const t=si(),{toast:e}=an(),[n,o]=O.useState({name:"",email:"",phone:"",password:""}),[c,d]=O.useState(!1),g=b=>{const{name:S,value:N}=b.target;o(R=>({...R,[S]:N}))},y=async()=>{d(!0);const{error:b}=await Ze.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/dashboard`}});b&&(e({title:"Registration Failed",description:b.message,variant:"destructive"}),d(!1))},v=async b=>{if(b.preventDefault(),!n.name||!n.email||!n.phone||!n.password){e({title:"Validation Error",description:"Please fill in all fields.",variant:"destructive"});return}if(n.password.length<6){e({title:"Validation Error",description:"Password must be at least 6 characters.",variant:"destructive"});return}d(!0);const{error:S}=await Ze.auth.signUp({email:n.email,password:n.password,options:{data:{full_name:n.name,phone:n.phone}}});S?e({title:"Registration Failed",description:S.message,variant:"destructive"}):(e({title:"Registration Successful",description:"Please check your email inbox / spam to verify your account."}),t("/dashboard")),d(!1)};return h.jsxs("div",{className:"min-h-screen bg-background relative scanlines flex flex-col",children:[h.jsx(ai,{}),h.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-30 pointer-events-none"}),h.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[h.jsx("h1",{className:"text-3xl md:text-5xl font-display font-bold text-primary glow-text mb-8 text-center tracking-wider",children:"REGISTER"}),h.jsxs("div",{className:"terminal-card",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot terminal-dot-red"}),h.jsx("span",{className:"terminal-dot terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot terminal-dot-green"}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2 font-mono",children:"auth://register"})]}),h.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[h.jsxs("button",{onClick:y,disabled:c,className:"w-full flex items-center justify-center gap-3 border border-border bg-secondary/30 py-3 rounded font-mono text-primary hover:bg-secondary/50 hover:border-primary/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"CONTINUE WITH GOOGLE"]}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-border"})}),h.jsx("div",{className:"relative flex justify-center text-xs",children:h.jsx("span",{className:"bg-card px-4 text-muted-foreground font-mono",children:"OR"})})]}),h.jsxs("form",{onSubmit:v,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block text-sm text-primary/80 font-mono mb-2",children:"FULL NAME"}),h.jsx("input",{id:"name",name:"name",type:"text",value:n.name,onChange:g,placeholder:"John Doe",className:"w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors",disabled:c})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm text-primary/80 font-mono mb-2",children:"EMAIL"}),h.jsx("input",{id:"email",name:"email",type:"email",value:n.email,onChange:g,placeholder:"user@example.com",className:"w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors",disabled:c})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"phone",className:"block text-sm text-primary/80 font-mono mb-2",children:"PHONE"}),h.jsx("input",{id:"phone",name:"phone",type:"tel",value:n.phone,onChange:g,placeholder:"+91 9876543210",className:"w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors",disabled:c})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm text-primary/80 font-mono mb-2",children:"PASSWORD"}),h.jsx("input",{id:"password",name:"password",type:"password",value:n.password,onChange:g,placeholder:"",className:"w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors",disabled:c})]}),h.jsx("button",{type:"submit",disabled:c,className:"w-full glow-button bg-primary text-background py-3 font-display font-bold tracking-wider rounded hover:scale-[1.02] transition-transform disabled:opacity-50 disabled:cursor-not-allowed mt-6",children:c?"CREATING ACCOUNT...":"CREATE ACCOUNT"})]}),h.jsxs("p",{className:"text-center text-sm text-muted-foreground font-mono mt-6",children:["Already have an account?"," ",h.jsx(qr,{to:"/login",className:"text-primary hover:underline hover:glow-text transition-all",children:"Login here"})]})]})]})]})]}),h.jsx(li,{})]})};var zf="focusScope.autoFocusOnMount",Vf="focusScope.autoFocusOnUnmount",$p={bubbles:!1,cancelable:!0},VA="FocusScope",nw=O.forwardRef((t,e)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:c,onUnmountAutoFocus:d,...g}=t,[y,v]=O.useState(null),b=Rs(c),S=Rs(d),N=O.useRef(null),R=on(e,I=>v(I)),T=O.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;O.useEffect(()=>{if(o){let I=function(B){if(T.paused||!y)return;const V=B.target;y.contains(V)?N.current=V:Fi(N.current,{select:!0})},M=function(B){if(T.paused||!y)return;const V=B.relatedTarget;V!==null&&(y.contains(V)||Fi(N.current,{select:!0}))},z=function(B){if(document.activeElement===document.body)for(const re of B)re.removedNodes.length>0&&Fi(y)};document.addEventListener("focusin",I),document.addEventListener("focusout",M);const U=new MutationObserver(z);return y&&U.observe(y,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",I),document.removeEventListener("focusout",M),U.disconnect()}}},[o,y,T.paused]),O.useEffect(()=>{if(y){Xp.add(T);const I=document.activeElement;if(!y.contains(I)){const z=new CustomEvent(zf,$p);y.addEventListener(zf,b),y.dispatchEvent(z),z.defaultPrevented||(HA(KA(sw(y)),{select:!0}),document.activeElement===I&&Fi(y))}return()=>{y.removeEventListener(zf,b),setTimeout(()=>{const z=new CustomEvent(Vf,$p);y.addEventListener(Vf,S),y.dispatchEvent(z),z.defaultPrevented||Fi(I??document.body,{select:!0}),y.removeEventListener(Vf,S),Xp.remove(T)},0)}}},[y,b,S,T]);const D=O.useCallback(I=>{if(!n&&!o||T.paused)return;const M=I.key==="Tab"&&!I.altKey&&!I.ctrlKey&&!I.metaKey,z=document.activeElement;if(M&&z){const U=I.currentTarget,[B,V]=WA(U);B&&V?!I.shiftKey&&z===V?(I.preventDefault(),n&&Fi(B,{select:!0})):I.shiftKey&&z===B&&(I.preventDefault(),n&&Fi(V,{select:!0})):z===U&&I.preventDefault()}},[n,o,T.paused]);return h.jsx(br.div,{tabIndex:-1,...g,ref:R,onKeyDown:D})});nw.displayName=VA;function HA(t,{select:e=!1}={}){const n=document.activeElement;for(const o of t)if(Fi(o,{select:e}),document.activeElement!==n)return}function WA(t){const e=sw(t),n=Kp(e,t),o=Kp(e.reverse(),t);return[n,o]}function sw(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const c=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||c?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Kp(t,e){for(const n of t)if(!GA(n,{upTo:e}))return n}function GA(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function qA(t){return t instanceof HTMLInputElement&&"select"in t}function Fi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&qA(t)&&e&&t.select()}}var Xp=$A();function $A(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=Yp(t,e),t.unshift(e)},remove(e){t=Yp(t,e),t[0]?.resume()}}}function Yp(t,e){const n=[...t],o=n.indexOf(e);return o!==-1&&n.splice(o,1),n}function KA(t){return t.filter(e=>e.tagName!=="A")}var Hf=0;function XA(){O.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Zp()),document.body.insertAdjacentElement("beforeend",t[1]??Zp()),Hf++,()=>{Hf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Hf--}},[])}function Zp(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var gu="right-scroll-bar-position",xu="width-before-scroll-bar",YA="with-scroll-bars-hidden",ZA="--removed-body-scroll-bar-size";function Wf(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function QA(t,e){var n=O.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(o){var c=n.value;c!==o&&(n.value=o,n.callback(o,c))}}}})[0];return n.callback=e,n.facade}var JA=typeof window<"u"?O.useLayoutEffect:O.useEffect,Qp=new WeakMap;function e4(t,e){var n=QA(null,function(o){return t.forEach(function(c){return Wf(c,o)})});return JA(function(){var o=Qp.get(n);if(o){var c=new Set(o),d=new Set(t),g=n.current;c.forEach(function(y){d.has(y)||Wf(y,null)}),d.forEach(function(y){c.has(y)||Wf(y,g)})}Qp.set(n,t)},[t]),n}function t4(t){return t}function r4(t,e){e===void 0&&(e=t4);var n=[],o=!1,c={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(d){var g=e(d,o);return n.push(g),function(){n=n.filter(function(y){return y!==g})}},assignSyncMedium:function(d){for(o=!0;n.length;){var g=n;n=[],g.forEach(d)}n={push:function(y){return d(y)},filter:function(){return n}}},assignMedium:function(d){o=!0;var g=[];if(n.length){var y=n;n=[],y.forEach(d),g=n}var v=function(){var S=g;g=[],S.forEach(d)},b=function(){return Promise.resolve().then(v)};b(),n={push:function(S){g.push(S),b()},filter:function(S){return g=g.filter(S),n}}}};return c}function n4(t){t===void 0&&(t={});var e=r4(null);return e.options=Ts({async:!0,ssr:!1},t),e}var iw=function(t){var e=t.sideCar,n=Oa(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=e.read();if(!o)throw new Error("Sidecar medium not found");return O.createElement(o,Ts({},n))};iw.isSideCarExport=!0;function s4(t,e){return t.useMedium(e),iw}var ow=n4(),Gf=function(){},Ku=O.forwardRef(function(t,e){var n=O.useRef(null),o=O.useState({onScrollCapture:Gf,onWheelCapture:Gf,onTouchMoveCapture:Gf}),c=o[0],d=o[1],g=t.forwardProps,y=t.children,v=t.className,b=t.removeScrollBar,S=t.enabled,N=t.shards,R=t.sideCar,T=t.noRelative,D=t.noIsolation,I=t.inert,M=t.allowPinchZoom,z=t.as,U=z===void 0?"div":z,B=t.gapMode,V=Oa(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),re=R,G=e4([n,e]),H=Ts(Ts({},V),c);return O.createElement(O.Fragment,null,S&&O.createElement(re,{sideCar:ow,removeScrollBar:b,shards:N,noRelative:T,noIsolation:D,inert:I,setCallbacks:d,allowPinchZoom:!!M,lockRef:n,gapMode:B}),g?O.cloneElement(O.Children.only(y),Ts(Ts({},H),{ref:G})):O.createElement(U,Ts({},H,{className:v,ref:G}),y))});Ku.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ku.classNames={fullWidth:xu,zeroRight:gu};var i4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function o4(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=i4();return e&&t.setAttribute("nonce",e),t}function a4(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function l4(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var c4=function(){var t=0,e=null;return{add:function(n){t==0&&(e=o4())&&(a4(e,n),l4(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},u4=function(){var t=c4();return function(e,n){O.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},aw=function(){var t=u4(),e=function(n){var o=n.styles,c=n.dynamic;return t(o,c),null};return e},d4={left:0,top:0,right:0,gap:0},qf=function(t){return parseInt(t||"",10)||0},f4=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],o=e[t==="padding"?"paddingTop":"marginTop"],c=e[t==="padding"?"paddingRight":"marginRight"];return[qf(n),qf(o),qf(c)]},h4=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return d4;var e=f4(t),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,o-n+e[2]-e[0])}},m4=aw(),ba="data-scroll-locked",p4=function(t,e,n,o){var c=t.left,d=t.top,g=t.right,y=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(YA,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(y,"px ").concat(o,`;
  }
  body[`).concat(ba,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(o,";"),n==="margin"&&`
    padding-left: `.concat(c,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(g,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(y,"px ").concat(o,`;
    `),n==="padding"&&"padding-right: ".concat(y,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gu,` {
    right: `).concat(y,"px ").concat(o,`;
  }
  
  .`).concat(xu,` {
    margin-right: `).concat(y,"px ").concat(o,`;
  }
  
  .`).concat(gu," .").concat(gu,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(xu," .").concat(xu,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(ba,`] {
    `).concat(ZA,": ").concat(y,`px;
  }
`)},Jp=function(){var t=parseInt(document.body.getAttribute(ba)||"0",10);return isFinite(t)?t:0},g4=function(){O.useEffect(function(){return document.body.setAttribute(ba,(Jp()+1).toString()),function(){var t=Jp()-1;t<=0?document.body.removeAttribute(ba):document.body.setAttribute(ba,t.toString())}},[])},x4=function(t){var e=t.noRelative,n=t.noImportant,o=t.gapMode,c=o===void 0?"margin":o;g4();var d=O.useMemo(function(){return h4(c)},[c]);return O.createElement(m4,{styles:p4(d,!e,c,n?"":"!important")})},$h=!1;if(typeof window<"u")try{var ou=Object.defineProperty({},"passive",{get:function(){return $h=!0,!0}});window.addEventListener("test",ou,ou),window.removeEventListener("test",ou,ou)}catch{$h=!1}var ca=$h?{passive:!1}:!1,y4=function(t){return t.tagName==="TEXTAREA"},lw=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!y4(t)&&n[e]==="visible")},w4=function(t){return lw(t,"overflowY")},v4=function(t){return lw(t,"overflowX")},eg=function(t,e){var n=e.ownerDocument,o=e;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var c=cw(t,o);if(c){var d=uw(t,o),g=d[1],y=d[2];if(g>y)return!0}o=o.parentNode}while(o&&o!==n.body);return!1},b4=function(t){var e=t.scrollTop,n=t.scrollHeight,o=t.clientHeight;return[e,n,o]},E4=function(t){var e=t.scrollLeft,n=t.scrollWidth,o=t.clientWidth;return[e,n,o]},cw=function(t,e){return t==="v"?w4(e):v4(e)},uw=function(t,e){return t==="v"?b4(e):E4(e)},C4=function(t,e){return t==="h"&&e==="rtl"?-1:1},_4=function(t,e,n,o,c){var d=C4(t,window.getComputedStyle(e).direction),g=d*o,y=n.target,v=e.contains(y),b=!1,S=g>0,N=0,R=0;do{if(!y)break;var T=uw(t,y),D=T[0],I=T[1],M=T[2],z=I-M-d*D;(D||z)&&cw(t,y)&&(N+=z,R+=D);var U=y.parentNode;y=U&&U.nodeType===Node.DOCUMENT_FRAGMENT_NODE?U.host:U}while(!v&&y!==document.body||v&&(e.contains(y)||e===y));return(S&&Math.abs(N)<1||!S&&Math.abs(R)<1)&&(b=!0),b},au=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},tg=function(t){return[t.deltaX,t.deltaY]},rg=function(t){return t&&"current"in t?t.current:t},S4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},N4=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},A4=0,ua=[];function T4(t){var e=O.useRef([]),n=O.useRef([0,0]),o=O.useRef(),c=O.useState(A4++)[0],d=O.useState(aw)[0],g=O.useRef(t);O.useEffect(function(){g.current=t},[t]),O.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(c));var I=W_([t.lockRef.current],(t.shards||[]).map(rg),!0).filter(Boolean);return I.forEach(function(M){return M.classList.add("allow-interactivity-".concat(c))}),function(){document.body.classList.remove("block-interactivity-".concat(c)),I.forEach(function(M){return M.classList.remove("allow-interactivity-".concat(c))})}}},[t.inert,t.lockRef.current,t.shards]);var y=O.useCallback(function(I,M){if("touches"in I&&I.touches.length===2||I.type==="wheel"&&I.ctrlKey)return!g.current.allowPinchZoom;var z=au(I),U=n.current,B="deltaX"in I?I.deltaX:U[0]-z[0],V="deltaY"in I?I.deltaY:U[1]-z[1],re,G=I.target,H=Math.abs(B)>Math.abs(V)?"h":"v";if("touches"in I&&H==="h"&&G.type==="range")return!1;var se=eg(H,G);if(!se)return!0;if(se?re=H:(re=H==="v"?"h":"v",se=eg(H,G)),!se)return!1;if(!o.current&&"changedTouches"in I&&(B||V)&&(o.current=re),!re)return!0;var $=o.current||re;return _4($,M,I,$==="h"?B:V)},[]),v=O.useCallback(function(I){var M=I;if(!(!ua.length||ua[ua.length-1]!==d)){var z="deltaY"in M?tg(M):au(M),U=e.current.filter(function(re){return re.name===M.type&&(re.target===M.target||M.target===re.shadowParent)&&S4(re.delta,z)})[0];if(U&&U.should){M.cancelable&&M.preventDefault();return}if(!U){var B=(g.current.shards||[]).map(rg).filter(Boolean).filter(function(re){return re.contains(M.target)}),V=B.length>0?y(M,B[0]):!g.current.noIsolation;V&&M.cancelable&&M.preventDefault()}}},[]),b=O.useCallback(function(I,M,z,U){var B={name:I,delta:M,target:z,should:U,shadowParent:k4(z)};e.current.push(B),setTimeout(function(){e.current=e.current.filter(function(V){return V!==B})},1)},[]),S=O.useCallback(function(I){n.current=au(I),o.current=void 0},[]),N=O.useCallback(function(I){b(I.type,tg(I),I.target,y(I,t.lockRef.current))},[]),R=O.useCallback(function(I){b(I.type,au(I),I.target,y(I,t.lockRef.current))},[]);O.useEffect(function(){return ua.push(d),t.setCallbacks({onScrollCapture:N,onWheelCapture:N,onTouchMoveCapture:R}),document.addEventListener("wheel",v,ca),document.addEventListener("touchmove",v,ca),document.addEventListener("touchstart",S,ca),function(){ua=ua.filter(function(I){return I!==d}),document.removeEventListener("wheel",v,ca),document.removeEventListener("touchmove",v,ca),document.removeEventListener("touchstart",S,ca)}},[]);var T=t.removeScrollBar,D=t.inert;return O.createElement(O.Fragment,null,D?O.createElement(d,{styles:N4(c)}):null,T?O.createElement(x4,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function k4(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const I4=s4(ow,T4);var dw=O.forwardRef(function(t,e){return O.createElement(Ku,Ts({},t,{ref:e,sideCar:I4}))});dw.classNames=Ku.classNames;var R4=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},da=new WeakMap,lu=new WeakMap,cu={},$f=0,fw=function(t){return t&&(t.host||fw(t.parentNode))},O4=function(t,e){return e.map(function(n){if(t.contains(n))return n;var o=fw(n);return o&&t.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},j4=function(t,e,n,o){var c=O4(e,Array.isArray(t)?t:[t]);cu[n]||(cu[n]=new WeakMap);var d=cu[n],g=[],y=new Set,v=new Set(c),b=function(N){!N||y.has(N)||(y.add(N),b(N.parentNode))};c.forEach(b);var S=function(N){!N||v.has(N)||Array.prototype.forEach.call(N.children,function(R){if(y.has(R))S(R);else try{var T=R.getAttribute(o),D=T!==null&&T!=="false",I=(da.get(R)||0)+1,M=(d.get(R)||0)+1;da.set(R,I),d.set(R,M),g.push(R),I===1&&D&&lu.set(R,!0),M===1&&R.setAttribute(n,"true"),D||R.setAttribute(o,"true")}catch(z){console.error("aria-hidden: cannot operate on ",R,z)}})};return S(e),y.clear(),$f++,function(){g.forEach(function(N){var R=da.get(N)-1,T=d.get(N)-1;da.set(N,R),d.set(N,T),R||(lu.has(N)||N.removeAttribute(o),lu.delete(N)),T||N.removeAttribute(n)}),$f--,$f||(da=new WeakMap,da=new WeakMap,lu=new WeakMap,cu={})}},P4=function(t,e,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(t)?t:[t]),c=R4(t);return c?(o.push.apply(o,Array.from(c.querySelectorAll("[aria-live]"))),j4(o,c,n,"aria-hidden")):function(){return null}},Xu="Dialog",[hw]=Bl(Xu),[D4,ys]=hw(Xu),mw=t=>{const{__scopeDialog:e,children:n,open:o,defaultOpen:c,onOpenChange:d,modal:g=!0}=t,y=O.useRef(null),v=O.useRef(null),[b,S]=ex({prop:o,defaultProp:c??!1,onChange:d,caller:Xu});return h.jsx(D4,{scope:e,triggerRef:y,contentRef:v,contentId:Af(),titleId:Af(),descriptionId:Af(),open:b,onOpenChange:S,onOpenToggle:O.useCallback(()=>S(N=>!N),[S]),modal:g,children:n})};mw.displayName=Xu;var pw="DialogTrigger",M4=O.forwardRef((t,e)=>{const{__scopeDialog:n,...o}=t,c=ys(pw,n),d=on(e,c.triggerRef);return h.jsx(br.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":I0(c.open),...o,ref:d,onClick:Qt(t.onClick,c.onOpenToggle)})});M4.displayName=pw;var T0="DialogPortal",[L4,gw]=hw(T0,{forceMount:void 0}),xw=t=>{const{__scopeDialog:e,forceMount:n,children:o,container:c}=t,d=ys(T0,e);return h.jsx(L4,{scope:e,forceMount:n,children:O.Children.map(o,g=>h.jsx(_a,{present:n||d.open,children:h.jsx(Qh,{asChild:!0,container:c,children:g})}))})};xw.displayName=T0;var ku="DialogOverlay",yw=O.forwardRef((t,e)=>{const n=gw(ku,t.__scopeDialog),{forceMount:o=n.forceMount,...c}=t,d=ys(ku,t.__scopeDialog);return d.modal?h.jsx(_a,{present:o||d.open,children:h.jsx(F4,{...c,ref:e})}):null});yw.displayName=ku;var B4=yu("DialogOverlay.RemoveScroll"),F4=O.forwardRef((t,e)=>{const{__scopeDialog:n,...o}=t,c=ys(ku,n);return h.jsx(dw,{as:B4,allowPinchZoom:!0,shards:[c.contentRef],children:h.jsx(br.div,{"data-state":I0(c.open),...o,ref:e,style:{pointerEvents:"auto",...o.style}})})}),To="DialogContent",ww=O.forwardRef((t,e)=>{const n=gw(To,t.__scopeDialog),{forceMount:o=n.forceMount,...c}=t,d=ys(To,t.__scopeDialog);return h.jsx(_a,{present:o||d.open,children:d.modal?h.jsx(U4,{...c,ref:e}):h.jsx(z4,{...c,ref:e})})});ww.displayName=To;var U4=O.forwardRef((t,e)=>{const n=ys(To,t.__scopeDialog),o=O.useRef(null),c=on(e,n.contentRef,o);return O.useEffect(()=>{const d=o.current;if(d)return P4(d)},[]),h.jsx(vw,{...t,ref:c,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Qt(t.onCloseAutoFocus,d=>{d.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Qt(t.onPointerDownOutside,d=>{const g=d.detail.originalEvent,y=g.button===0&&g.ctrlKey===!0;(g.button===2||y)&&d.preventDefault()}),onFocusOutside:Qt(t.onFocusOutside,d=>d.preventDefault())})}),z4=O.forwardRef((t,e)=>{const n=ys(To,t.__scopeDialog),o=O.useRef(!1),c=O.useRef(!1);return h.jsx(vw,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{t.onCloseAutoFocus?.(d),d.defaultPrevented||(o.current||n.triggerRef.current?.focus(),d.preventDefault()),o.current=!1,c.current=!1},onInteractOutside:d=>{t.onInteractOutside?.(d),d.defaultPrevented||(o.current=!0,d.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const g=d.target;n.triggerRef.current?.contains(g)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&c.current&&d.preventDefault()}})}),vw=O.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:d,...g}=t,y=ys(To,n),v=O.useRef(null),b=on(e,v);return XA(),h.jsxs(h.Fragment,{children:[h.jsx(nw,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:c,onUnmountAutoFocus:d,children:h.jsx(Pu,{role:"dialog",id:y.contentId,"aria-describedby":y.descriptionId,"aria-labelledby":y.titleId,"data-state":I0(y.open),...g,ref:b,onDismiss:()=>y.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(V4,{titleId:y.titleId}),h.jsx(W4,{contentRef:v,descriptionId:y.descriptionId})]})]})}),k0="DialogTitle",bw=O.forwardRef((t,e)=>{const{__scopeDialog:n,...o}=t,c=ys(k0,n);return h.jsx(br.h2,{id:c.titleId,...o,ref:e})});bw.displayName=k0;var Ew="DialogDescription",Cw=O.forwardRef((t,e)=>{const{__scopeDialog:n,...o}=t,c=ys(Ew,n);return h.jsx(br.p,{id:c.descriptionId,...o,ref:e})});Cw.displayName=Ew;var _w="DialogClose",Sw=O.forwardRef((t,e)=>{const{__scopeDialog:n,...o}=t,c=ys(_w,n);return h.jsx(br.button,{type:"button",...o,ref:e,onClick:Qt(t.onClick,()=>c.onOpenChange(!1))})});Sw.displayName=_w;function I0(t){return t?"open":"closed"}var Nw="DialogTitleWarning",[C8,Aw]=J2(Nw,{contentName:To,titleName:k0,docsSlug:"dialog"}),V4=({titleId:t})=>{const e=Aw(Nw),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return O.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},H4="DialogDescriptionWarning",W4=({contentRef:t,descriptionId:e})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Aw(H4).contentName}}.`;return O.useEffect(()=>{const c=t.current?.getAttribute("aria-describedby");e&&c&&(document.getElementById(e)||console.warn(o))},[o,t,e]),null},G4=mw,q4=xw,Tw=yw,kw=ww,Iw=bw,Rw=Cw,$4=Sw;const Ow=G4,K4=q4,jw=O.forwardRef(({className:t,...e},n)=>h.jsx(Tw,{ref:n,className:Qn("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));jw.displayName=Tw.displayName;const R0=O.forwardRef(({className:t,children:e,...n},o)=>h.jsxs(K4,{children:[h.jsx(jw,{}),h.jsxs(kw,{ref:o,className:Qn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,h.jsxs($4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[h.jsx(ti,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));R0.displayName=kw.displayName;const O0=({className:t,...e})=>h.jsx("div",{className:Qn("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});O0.displayName="DialogHeader";const j0=O.forwardRef(({className:t,...e},n)=>h.jsx(Iw,{ref:n,className:Qn("text-lg font-semibold leading-none tracking-tight",t),...e}));j0.displayName=Iw.displayName;const Pw=O.forwardRef(({className:t,...e},n)=>h.jsx(Rw,{ref:n,className:Qn("text-sm text-muted-foreground",t),...e}));Pw.displayName=Rw.displayName;const X4=({open:t,onComplete:e})=>{const{user:n,refreshProfile:o}=oi(),{toast:c}=an(),[d,g]=O.useState(""),[y,v]=O.useState(!1),b=async S=>{if(S.preventDefault(),!d.trim()){c({title:"Validation Error",description:"Please enter your phone number.",variant:"destructive"});return}if(!n)return;v(!0);const{error:N}=await Ze.from("profiles").update({phone:d.trim()}).eq("id",n.id);N?c({title:"Error",description:"Failed to save phone number. Please try again.",variant:"destructive"}):(await o(),c({title:"Success",description:"Phone number saved successfully."}),e()),v(!1)};return h.jsx(Ow,{open:t,onOpenChange:()=>{},children:h.jsxs(R0,{className:"terminal-card border-primary/30 sm:max-w-md",onPointerDownOutside:S=>S.preventDefault(),children:[h.jsxs(O0,{children:[h.jsx(j0,{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"COMPLETE PROFILE"}),h.jsx(Pw,{className:"text-muted-foreground font-mono",children:"Please enter your phone number to continue."})]}),h.jsxs("form",{onSubmit:b,className:"space-y-4 mt-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"phone-dialog",className:"block text-sm text-primary/80 font-mono mb-2",children:"PHONE NUMBER"}),h.jsx("input",{id:"phone-dialog",type:"tel",value:d,onChange:S=>g(S.target.value),placeholder:"+91 9876543210",className:"w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors",disabled:y,autoFocus:!0})]}),h.jsx("button",{type:"submit",disabled:y,className:"w-full glow-button bg-primary text-background py-3 font-display font-bold tracking-wider rounded hover:scale-[1.02] transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:y?"SAVING...":"CONTINUE"})]})]})})};var fa={},Kf,ng;function Y4(){return ng||(ng=1,Kf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Kf}var Xf={},Bi={},sg;function ko(){if(sg)return Bi;sg=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Bi.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},Bi.getSymbolTotalCodewords=function(o){return e[o]},Bi.getBCHDigit=function(n){let o=0;for(;n!==0;)o++,n>>>=1;return o},Bi.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');t=o},Bi.isKanjiModeEnabled=function(){return typeof t<"u"},Bi.toSJIS=function(o){return t(o)},Bi}var Yf={},ig;function P0(){return ig||(ig=1,(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},t.from=function(o,c){if(t.isValid(o))return o;try{return e(o)}catch{return c}}})(Yf)),Yf}var Zf,og;function Z4(){if(og)return Zf;og=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let o=0;o<n;o++)this.putBit((e>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Zf=t,Zf}var Qf,ag;function Q4(){if(ag)return Qf;ag=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,n,o,c){const d=e*this.size+n;this.data[d]=o,c&&(this.reservedBit[d]=!0)},t.prototype.get=function(e,n){return this.data[e*this.size+n]},t.prototype.xor=function(e,n,o){this.data[e*this.size+n]^=o},t.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},Qf=t,Qf}var Jf={},lg;function J4(){return lg||(lg=1,(function(t){const e=ko().getSymbolSize;t.getRowColCoords=function(o){if(o===1)return[];const c=Math.floor(o/7)+2,d=e(o),g=d===145?26:Math.ceil((d-13)/(2*c-2))*2,y=[d-7];for(let v=1;v<c-1;v++)y[v]=y[v-1]-g;return y.push(6),y.reverse()},t.getPositions=function(o){const c=[],d=t.getRowColCoords(o),g=d.length;for(let y=0;y<g;y++)for(let v=0;v<g;v++)y===0&&v===0||y===0&&v===g-1||y===g-1&&v===0||c.push([d[y],d[v]]);return c}})(Jf)),Jf}var eh={},cg;function eT(){if(cg)return eh;cg=1;const t=ko().getSymbolSize,e=7;return eh.getPositions=function(o){const c=t(o);return[[0,0],[c-e,0],[0,c-e]]},eh}var th={},ug;function tT(){return ug||(ug=1,(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},t.from=function(c){return t.isValid(c)?parseInt(c,10):void 0},t.getPenaltyN1=function(c){const d=c.size;let g=0,y=0,v=0,b=null,S=null;for(let N=0;N<d;N++){y=v=0,b=S=null;for(let R=0;R<d;R++){let T=c.get(N,R);T===b?y++:(y>=5&&(g+=e.N1+(y-5)),b=T,y=1),T=c.get(R,N),T===S?v++:(v>=5&&(g+=e.N1+(v-5)),S=T,v=1)}y>=5&&(g+=e.N1+(y-5)),v>=5&&(g+=e.N1+(v-5))}return g},t.getPenaltyN2=function(c){const d=c.size;let g=0;for(let y=0;y<d-1;y++)for(let v=0;v<d-1;v++){const b=c.get(y,v)+c.get(y,v+1)+c.get(y+1,v)+c.get(y+1,v+1);(b===4||b===0)&&g++}return g*e.N2},t.getPenaltyN3=function(c){const d=c.size;let g=0,y=0,v=0;for(let b=0;b<d;b++){y=v=0;for(let S=0;S<d;S++)y=y<<1&2047|c.get(b,S),S>=10&&(y===1488||y===93)&&g++,v=v<<1&2047|c.get(S,b),S>=10&&(v===1488||v===93)&&g++}return g*e.N3},t.getPenaltyN4=function(c){let d=0;const g=c.data.length;for(let v=0;v<g;v++)d+=c.data[v];return Math.abs(Math.ceil(d*100/g/5)-10)*e.N4};function n(o,c,d){switch(o){case t.Patterns.PATTERN000:return(c+d)%2===0;case t.Patterns.PATTERN001:return c%2===0;case t.Patterns.PATTERN010:return d%3===0;case t.Patterns.PATTERN011:return(c+d)%3===0;case t.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(d/3))%2===0;case t.Patterns.PATTERN101:return c*d%2+c*d%3===0;case t.Patterns.PATTERN110:return(c*d%2+c*d%3)%2===0;case t.Patterns.PATTERN111:return(c*d%3+(c+d)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}t.applyMask=function(c,d){const g=d.size;for(let y=0;y<g;y++)for(let v=0;v<g;v++)d.isReserved(v,y)||d.xor(v,y,n(c,v,y))},t.getBestMask=function(c,d){const g=Object.keys(t.Patterns).length;let y=0,v=1/0;for(let b=0;b<g;b++){d(b),t.applyMask(b,c);const S=t.getPenaltyN1(c)+t.getPenaltyN2(c)+t.getPenaltyN3(c)+t.getPenaltyN4(c);t.applyMask(b,c),S<v&&(v=S,y=b)}return y}})(th)),th}var uu={},dg;function Dw(){if(dg)return uu;dg=1;const t=P0(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return uu.getBlocksCount=function(c,d){switch(d){case t.L:return e[(c-1)*4+0];case t.M:return e[(c-1)*4+1];case t.Q:return e[(c-1)*4+2];case t.H:return e[(c-1)*4+3];default:return}},uu.getTotalCodewordsCount=function(c,d){switch(d){case t.L:return n[(c-1)*4+0];case t.M:return n[(c-1)*4+1];case t.Q:return n[(c-1)*4+2];case t.H:return n[(c-1)*4+3];default:return}},uu}var rh={},wl={},fg;function rT(){if(fg)return wl;fg=1;const t=new Uint8Array(512),e=new Uint8Array(256);return(function(){let o=1;for(let c=0;c<255;c++)t[c]=o,e[o]=c,o<<=1,o&256&&(o^=285);for(let c=255;c<512;c++)t[c]=t[c-255]})(),wl.log=function(o){if(o<1)throw new Error("log("+o+")");return e[o]},wl.exp=function(o){return t[o]},wl.mul=function(o,c){return o===0||c===0?0:t[e[o]+e[c]]},wl}var hg;function nT(){return hg||(hg=1,(function(t){const e=rT();t.mul=function(o,c){const d=new Uint8Array(o.length+c.length-1);for(let g=0;g<o.length;g++)for(let y=0;y<c.length;y++)d[g+y]^=e.mul(o[g],c[y]);return d},t.mod=function(o,c){let d=new Uint8Array(o);for(;d.length-c.length>=0;){const g=d[0];for(let v=0;v<c.length;v++)d[v]^=e.mul(c[v],g);let y=0;for(;y<d.length&&d[y]===0;)y++;d=d.slice(y)}return d},t.generateECPolynomial=function(o){let c=new Uint8Array([1]);for(let d=0;d<o;d++)c=t.mul(c,new Uint8Array([1,e.exp(d)]));return c}})(rh)),rh}var nh,mg;function sT(){if(mg)return nh;mg=1;const t=nT();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(o){this.degree=o,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const c=new Uint8Array(o.length+this.degree);c.set(o);const d=t.mod(c,this.genPoly),g=this.degree-d.length;if(g>0){const y=new Uint8Array(this.degree);return y.set(d,g),y}return d},nh=e,nh}var sh={},ih={},oh={},pg;function Mw(){return pg||(pg=1,oh.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),oh}var As={},gg;function Lw(){if(gg)return As;gg=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;As.KANJI=new RegExp(n,"g"),As.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),As.BYTE=new RegExp(o,"g"),As.NUMERIC=new RegExp(t,"g"),As.ALPHANUMERIC=new RegExp(e,"g");const c=new RegExp("^"+n+"$"),d=new RegExp("^"+t+"$"),g=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return As.testKanji=function(v){return c.test(v)},As.testNumeric=function(v){return d.test(v)},As.testAlphanumeric=function(v){return g.test(v)},As}var xg;function Io(){return xg||(xg=1,(function(t){const e=Mw(),n=Lw();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(d,g){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!e.isValid(g))throw new Error("Invalid version: "+g);return g>=1&&g<10?d.ccBits[0]:g<27?d.ccBits[1]:d.ccBits[2]},t.getBestModeForData=function(d){return n.testNumeric(d)?t.NUMERIC:n.testAlphanumeric(d)?t.ALPHANUMERIC:n.testKanji(d)?t.KANJI:t.BYTE},t.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},t.isValid=function(d){return d&&d.bit&&d.ccBits};function o(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+c)}}t.from=function(d,g){if(t.isValid(d))return d;try{return o(d)}catch{return g}}})(ih)),ih}var yg;function iT(){return yg||(yg=1,(function(t){const e=ko(),n=Dw(),o=P0(),c=Io(),d=Mw(),g=7973,y=e.getBCHDigit(g);function v(R,T,D){for(let I=1;I<=40;I++)if(T<=t.getCapacity(I,D,R))return I}function b(R,T){return c.getCharCountIndicator(R,T)+4}function S(R,T){let D=0;return R.forEach(function(I){const M=b(I.mode,T);D+=M+I.getBitsLength()}),D}function N(R,T){for(let D=1;D<=40;D++)if(S(R,D)<=t.getCapacity(D,T,c.MIXED))return D}t.from=function(T,D){return d.isValid(T)?parseInt(T,10):D},t.getCapacity=function(T,D,I){if(!d.isValid(T))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=c.BYTE);const M=e.getSymbolTotalCodewords(T),z=n.getTotalCodewordsCount(T,D),U=(M-z)*8;if(I===c.MIXED)return U;const B=U-b(I,T);switch(I){case c.NUMERIC:return Math.floor(B/10*3);case c.ALPHANUMERIC:return Math.floor(B/11*2);case c.KANJI:return Math.floor(B/13);case c.BYTE:default:return Math.floor(B/8)}},t.getBestVersionForData=function(T,D){let I;const M=o.from(D,o.M);if(Array.isArray(T)){if(T.length>1)return N(T,M);if(T.length===0)return 1;I=T[0]}else I=T;return v(I.mode,I.getLength(),M)},t.getEncodedBits=function(T){if(!d.isValid(T)||T<7)throw new Error("Invalid QR Code version");let D=T<<12;for(;e.getBCHDigit(D)-y>=0;)D^=g<<e.getBCHDigit(D)-y;return T<<12|D}})(sh)),sh}var ah={},wg;function oT(){if(wg)return ah;wg=1;const t=ko(),e=1335,n=21522,o=t.getBCHDigit(e);return ah.getEncodedBits=function(d,g){const y=d.bit<<3|g;let v=y<<10;for(;t.getBCHDigit(v)-o>=0;)v^=e<<t.getBCHDigit(v)-o;return(y<<10|v)^n},ah}var lh={},ch,vg;function aT(){if(vg)return ch;vg=1;const t=Io();function e(n){this.mode=t.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(o){let c,d,g;for(c=0;c+3<=this.data.length;c+=3)d=this.data.substr(c,3),g=parseInt(d,10),o.put(g,10);const y=this.data.length-c;y>0&&(d=this.data.substr(c),g=parseInt(d,10),o.put(g,y*3+1))},ch=e,ch}var uh,bg;function lT(){if(bg)return uh;bg=1;const t=Io(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(o){this.mode=t.ALPHANUMERIC,this.data=o}return n.getBitsLength=function(c){return 11*Math.floor(c/2)+6*(c%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(c){let d;for(d=0;d+2<=this.data.length;d+=2){let g=e.indexOf(this.data[d])*45;g+=e.indexOf(this.data[d+1]),c.put(g,11)}this.data.length%2&&c.put(e.indexOf(this.data[d]),6)},uh=n,uh}var dh,Eg;function cT(){if(Eg)return dh;Eg=1;const t=Io();function e(n){this.mode=t.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(o){return o*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let o=0,c=this.data.length;o<c;o++)n.put(this.data[o],8)},dh=e,dh}var fh,Cg;function uT(){if(Cg)return fh;Cg=1;const t=Io(),e=ko();function n(o){this.mode=t.KANJI,this.data=o}return n.getBitsLength=function(c){return c*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(o){let c;for(c=0;c<this.data.length;c++){let d=e.toSJIS(this.data[c]);if(d>=33088&&d<=40956)d-=33088;else if(d>=57408&&d<=60351)d-=49472;else throw new Error("Invalid SJIS character: "+this.data[c]+`
Make sure your charset is UTF-8`);d=(d>>>8&255)*192+(d&255),o.put(d,13)}},fh=n,fh}var hh={exports:{}},_g;function dT(){return _g||(_g=1,(function(t){var e={single_source_shortest_paths:function(n,o,c){var d={},g={};g[o]=0;var y=e.PriorityQueue.make();y.push(o,0);for(var v,b,S,N,R,T,D,I,M;!y.empty();){v=y.pop(),b=v.value,N=v.cost,R=n[b]||{};for(S in R)R.hasOwnProperty(S)&&(T=R[S],D=N+T,I=g[S],M=typeof g[S]>"u",(M||I>D)&&(g[S]=D,y.push(S,D),d[S]=b))}if(typeof c<"u"&&typeof g[c]>"u"){var z=["Could not find a path from ",o," to ",c,"."].join("");throw new Error(z)}return d},extract_shortest_path_from_predecessor_list:function(n,o){for(var c=[],d=o;d;)c.push(d),n[d],d=n[d];return c.reverse(),c},find_path:function(n,o,c){var d=e.single_source_shortest_paths(n,o,c);return e.extract_shortest_path_from_predecessor_list(d,c)},PriorityQueue:{make:function(n){var o=e.PriorityQueue,c={},d;n=n||{};for(d in o)o.hasOwnProperty(d)&&(c[d]=o[d]);return c.queue=[],c.sorter=n.sorter||o.default_sorter,c},default_sorter:function(n,o){return n.cost-o.cost},push:function(n,o){var c={value:n,cost:o};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(hh)),hh.exports}var Sg;function fT(){return Sg||(Sg=1,(function(t){const e=Io(),n=aT(),o=lT(),c=cT(),d=uT(),g=Lw(),y=ko(),v=dT();function b(z){return unescape(encodeURIComponent(z)).length}function S(z,U,B){const V=[];let re;for(;(re=z.exec(B))!==null;)V.push({data:re[0],index:re.index,mode:U,length:re[0].length});return V}function N(z){const U=S(g.NUMERIC,e.NUMERIC,z),B=S(g.ALPHANUMERIC,e.ALPHANUMERIC,z);let V,re;return y.isKanjiModeEnabled()?(V=S(g.BYTE,e.BYTE,z),re=S(g.KANJI,e.KANJI,z)):(V=S(g.BYTE_KANJI,e.BYTE,z),re=[]),U.concat(B,V,re).sort(function(H,se){return H.index-se.index}).map(function(H){return{data:H.data,mode:H.mode,length:H.length}})}function R(z,U){switch(U){case e.NUMERIC:return n.getBitsLength(z);case e.ALPHANUMERIC:return o.getBitsLength(z);case e.KANJI:return d.getBitsLength(z);case e.BYTE:return c.getBitsLength(z)}}function T(z){return z.reduce(function(U,B){const V=U.length-1>=0?U[U.length-1]:null;return V&&V.mode===B.mode?(U[U.length-1].data+=B.data,U):(U.push(B),U)},[])}function D(z){const U=[];for(let B=0;B<z.length;B++){const V=z[B];switch(V.mode){case e.NUMERIC:U.push([V,{data:V.data,mode:e.ALPHANUMERIC,length:V.length},{data:V.data,mode:e.BYTE,length:V.length}]);break;case e.ALPHANUMERIC:U.push([V,{data:V.data,mode:e.BYTE,length:V.length}]);break;case e.KANJI:U.push([V,{data:V.data,mode:e.BYTE,length:b(V.data)}]);break;case e.BYTE:U.push([{data:V.data,mode:e.BYTE,length:b(V.data)}])}}return U}function I(z,U){const B={},V={start:{}};let re=["start"];for(let G=0;G<z.length;G++){const H=z[G],se=[];for(let $=0;$<H.length;$++){const be=H[$],X=""+G+$;se.push(X),B[X]={node:be,lastCount:0},V[X]={};for(let Y=0;Y<re.length;Y++){const fe=re[Y];B[fe]&&B[fe].node.mode===be.mode?(V[fe][X]=R(B[fe].lastCount+be.length,be.mode)-R(B[fe].lastCount,be.mode),B[fe].lastCount+=be.length):(B[fe]&&(B[fe].lastCount=be.length),V[fe][X]=R(be.length,be.mode)+4+e.getCharCountIndicator(be.mode,U))}}re=se}for(let G=0;G<re.length;G++)V[re[G]].end=0;return{map:V,table:B}}function M(z,U){let B;const V=e.getBestModeForData(z);if(B=e.from(U,V),B!==e.BYTE&&B.bit<V.bit)throw new Error('"'+z+'" cannot be encoded with mode '+e.toString(B)+`.
 Suggested mode is: `+e.toString(V));switch(B===e.KANJI&&!y.isKanjiModeEnabled()&&(B=e.BYTE),B){case e.NUMERIC:return new n(z);case e.ALPHANUMERIC:return new o(z);case e.KANJI:return new d(z);case e.BYTE:return new c(z)}}t.fromArray=function(U){return U.reduce(function(B,V){return typeof V=="string"?B.push(M(V,null)):V.data&&B.push(M(V.data,V.mode)),B},[])},t.fromString=function(U,B){const V=N(U,y.isKanjiModeEnabled()),re=D(V),G=I(re,B),H=v.find_path(G.map,"start","end"),se=[];for(let $=1;$<H.length-1;$++)se.push(G.table[H[$]].node);return t.fromArray(T(se))},t.rawSplit=function(U){return t.fromArray(N(U,y.isKanjiModeEnabled()))}})(lh)),lh}var Ng;function hT(){if(Ng)return Xf;Ng=1;const t=ko(),e=P0(),n=Z4(),o=Q4(),c=J4(),d=eT(),g=tT(),y=Dw(),v=sT(),b=iT(),S=oT(),N=Io(),R=fT();function T(G,H){const se=G.size,$=d.getPositions(H);for(let be=0;be<$.length;be++){const X=$[be][0],Y=$[be][1];for(let fe=-1;fe<=7;fe++)if(!(X+fe<=-1||se<=X+fe))for(let oe=-1;oe<=7;oe++)Y+oe<=-1||se<=Y+oe||(fe>=0&&fe<=6&&(oe===0||oe===6)||oe>=0&&oe<=6&&(fe===0||fe===6)||fe>=2&&fe<=4&&oe>=2&&oe<=4?G.set(X+fe,Y+oe,!0,!0):G.set(X+fe,Y+oe,!1,!0))}}function D(G){const H=G.size;for(let se=8;se<H-8;se++){const $=se%2===0;G.set(se,6,$,!0),G.set(6,se,$,!0)}}function I(G,H){const se=c.getPositions(H);for(let $=0;$<se.length;$++){const be=se[$][0],X=se[$][1];for(let Y=-2;Y<=2;Y++)for(let fe=-2;fe<=2;fe++)Y===-2||Y===2||fe===-2||fe===2||Y===0&&fe===0?G.set(be+Y,X+fe,!0,!0):G.set(be+Y,X+fe,!1,!0)}}function M(G,H){const se=G.size,$=b.getEncodedBits(H);let be,X,Y;for(let fe=0;fe<18;fe++)be=Math.floor(fe/3),X=fe%3+se-8-3,Y=($>>fe&1)===1,G.set(be,X,Y,!0),G.set(X,be,Y,!0)}function z(G,H,se){const $=G.size,be=S.getEncodedBits(H,se);let X,Y;for(X=0;X<15;X++)Y=(be>>X&1)===1,X<6?G.set(X,8,Y,!0):X<8?G.set(X+1,8,Y,!0):G.set($-15+X,8,Y,!0),X<8?G.set(8,$-X-1,Y,!0):X<9?G.set(8,15-X-1+1,Y,!0):G.set(8,15-X-1,Y,!0);G.set($-8,8,1,!0)}function U(G,H){const se=G.size;let $=-1,be=se-1,X=7,Y=0;for(let fe=se-1;fe>0;fe-=2)for(fe===6&&fe--;;){for(let oe=0;oe<2;oe++)if(!G.isReserved(be,fe-oe)){let ee=!1;Y<H.length&&(ee=(H[Y]>>>X&1)===1),G.set(be,fe-oe,ee),X--,X===-1&&(Y++,X=7)}if(be+=$,be<0||se<=be){be-=$,$=-$;break}}}function B(G,H,se){const $=new n;se.forEach(function(oe){$.put(oe.mode.bit,4),$.put(oe.getLength(),N.getCharCountIndicator(oe.mode,G)),oe.write($)});const be=t.getSymbolTotalCodewords(G),X=y.getTotalCodewordsCount(G,H),Y=(be-X)*8;for($.getLengthInBits()+4<=Y&&$.put(0,4);$.getLengthInBits()%8!==0;)$.putBit(0);const fe=(Y-$.getLengthInBits())/8;for(let oe=0;oe<fe;oe++)$.put(oe%2?17:236,8);return V($,G,H)}function V(G,H,se){const $=t.getSymbolTotalCodewords(H),be=y.getTotalCodewordsCount(H,se),X=$-be,Y=y.getBlocksCount(H,se),fe=$%Y,oe=Y-fe,ee=Math.floor($/Y),_e=Math.floor(X/Y),he=_e+1,me=ee-_e,ge=new v(me);let ve=0;const te=new Array(Y),ue=new Array(Y);let je=0;const Ie=new Uint8Array(G.buffer);for(let Ye=0;Ye<Y;Ye++){const ht=Ye<oe?_e:he;te[Ye]=Ie.slice(ve,ve+ht),ue[Ye]=ge.encode(te[Ye]),ve+=ht,je=Math.max(je,ht)}const we=new Uint8Array($);let ce=0,Ee,Te;for(Ee=0;Ee<je;Ee++)for(Te=0;Te<Y;Te++)Ee<te[Te].length&&(we[ce++]=te[Te][Ee]);for(Ee=0;Ee<me;Ee++)for(Te=0;Te<Y;Te++)we[ce++]=ue[Te][Ee];return we}function re(G,H,se,$){let be;if(Array.isArray(G))be=R.fromArray(G);else if(typeof G=="string"){let ee=H;if(!ee){const _e=R.rawSplit(G);ee=b.getBestVersionForData(_e,se)}be=R.fromString(G,ee||40)}else throw new Error("Invalid data");const X=b.getBestVersionForData(be,se);if(!X)throw new Error("The amount of data is too big to be stored in a QR Code");if(!H)H=X;else if(H<X)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+X+`.
`);const Y=B(H,se,be),fe=t.getSymbolSize(H),oe=new o(fe);return T(oe,H),D(oe),I(oe,H),z(oe,se,0),H>=7&&M(oe,H),U(oe,Y),isNaN($)&&($=g.getBestMask(oe,z.bind(null,oe,se))),g.applyMask($,oe),z(oe,se,$),{modules:oe,version:H,errorCorrectionLevel:se,maskPattern:$,segments:be}}return Xf.create=function(H,se){if(typeof H>"u"||H==="")throw new Error("No input text");let $=e.M,be,X;return typeof se<"u"&&($=e.from(se.errorCorrectionLevel,e.M),be=b.from(se.version),X=g.from(se.maskPattern),se.toSJISFunc&&t.setToSJISFunction(se.toSJISFunc)),re(H,be,$,X)},Xf}var mh={},ph={},Ag;function Bw(){return Ag||(Ag=1,(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let o=n.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+n);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(d){return[d,d]}))),o.length===6&&o.push("F","F");const c=parseInt(o.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+o.slice(0,6).join("")}}t.getOptions=function(o){o||(o={}),o.color||(o.color={});const c=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,d=o.width&&o.width>=21?o.width:void 0,g=o.scale||4;return{width:d,scale:d?4:g,margin:c,color:{dark:e(o.color.dark||"#000000ff"),light:e(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},t.getScale=function(o,c){return c.width&&c.width>=o+c.margin*2?c.width/(o+c.margin*2):c.scale},t.getImageWidth=function(o,c){const d=t.getScale(o,c);return Math.floor((o+c.margin*2)*d)},t.qrToImageData=function(o,c,d){const g=c.modules.size,y=c.modules.data,v=t.getScale(g,d),b=Math.floor((g+d.margin*2)*v),S=d.margin*v,N=[d.color.light,d.color.dark];for(let R=0;R<b;R++)for(let T=0;T<b;T++){let D=(R*b+T)*4,I=d.color.light;if(R>=S&&T>=S&&R<b-S&&T<b-S){const M=Math.floor((R-S)/v),z=Math.floor((T-S)/v);I=N[y[M*g+z]?1:0]}o[D++]=I.r,o[D++]=I.g,o[D++]=I.b,o[D]=I.a}}})(ph)),ph}var Tg;function mT(){return Tg||(Tg=1,(function(t){const e=Bw();function n(c,d,g){c.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=g,d.width=g,d.style.height=g+"px",d.style.width=g+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(d,g,y){let v=y,b=g;typeof v>"u"&&(!g||!g.getContext)&&(v=g,g=void 0),g||(b=o()),v=e.getOptions(v);const S=e.getImageWidth(d.modules.size,v),N=b.getContext("2d"),R=N.createImageData(S,S);return e.qrToImageData(R.data,d,v),n(N,b,S),N.putImageData(R,0,0),b},t.renderToDataURL=function(d,g,y){let v=y;typeof v>"u"&&(!g||!g.getContext)&&(v=g,g=void 0),v||(v={});const b=t.render(d,g,v),S=v.type||"image/png",N=v.rendererOpts||{};return b.toDataURL(S,N.quality)}})(mh)),mh}var gh={},kg;function pT(){if(kg)return gh;kg=1;const t=Bw();function e(c,d){const g=c.a/255,y=d+'="'+c.hex+'"';return g<1?y+" "+d+'-opacity="'+g.toFixed(2).slice(1)+'"':y}function n(c,d,g){let y=c+d;return typeof g<"u"&&(y+=" "+g),y}function o(c,d,g){let y="",v=0,b=!1,S=0;for(let N=0;N<c.length;N++){const R=Math.floor(N%d),T=Math.floor(N/d);!R&&!b&&(b=!0),c[N]?(S++,N>0&&R>0&&c[N-1]||(y+=b?n("M",R+g,.5+T+g):n("m",v,0),v=0,b=!1),R+1<d&&c[N+1]||(y+=n("h",S),S=0)):v++}return y}return gh.render=function(d,g,y){const v=t.getOptions(g),b=d.modules.size,S=d.modules.data,N=b+v.margin*2,R=v.color.light.a?"<path "+e(v.color.light,"fill")+' d="M0 0h'+N+"v"+N+'H0z"/>':"",T="<path "+e(v.color.dark,"stroke")+' d="'+o(S,b,v.margin)+'"/>',D='viewBox="0 0 '+N+" "+N+'"',M='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+D+' shape-rendering="crispEdges">'+R+T+`</svg>
`;return typeof y=="function"&&y(null,M),M},gh}var Ig;function gT(){if(Ig)return fa;Ig=1;const t=Y4(),e=hT(),n=mT(),o=pT();function c(d,g,y,v,b){const S=[].slice.call(arguments,1),N=S.length,R=typeof S[N-1]=="function";if(!R&&!t())throw new Error("Callback required as last argument");if(R){if(N<2)throw new Error("Too few arguments provided");N===2?(b=y,y=g,g=v=void 0):N===3&&(g.getContext&&typeof b>"u"?(b=v,v=void 0):(b=v,v=y,y=g,g=void 0))}else{if(N<1)throw new Error("Too few arguments provided");return N===1?(y=g,g=v=void 0):N===2&&!g.getContext&&(v=y,y=g,g=void 0),new Promise(function(T,D){try{const I=e.create(y,v);T(d(I,g,v))}catch(I){D(I)}})}try{const T=e.create(y,v);b(null,d(T,g,v))}catch(T){b(T)}}return fa.create=e.create,fa.toCanvas=c.bind(null,n.render),fa.toDataURL=c.bind(null,n.renderToDataURL),fa.toString=c.bind(null,function(d,g,y){return o.render(d,y)}),fa}var xT=gT();const yT=Xh(xT);async function Fw(t,e){return new Promise((n,o)=>{const c=document.createElement("canvas"),d=c.getContext("2d");if(!d){o(new Error("Could not get canvas context"));return}const g=new Image;g.crossOrigin="anonymous",g.onload=async()=>{c.width=g.width,c.height=g.height,d.drawImage(g,0,0);for(const y of t.fields)await wT(d,y,e);c.toBlob(y=>{y?n(y):o(new Error("Could not generate image blob"))},"image/png")},g.onerror=()=>{o(new Error("Could not load background image"))},g.src=t.background_url})}async function wT(t,e,n){const o=vT(e,n);if(e.type==="text"){const c=e.fontSize||24,d=e.fontFamily||"Arial",g=e.color||"#000000",y=e.align||"left";t.font=`${c}px ${d}`,t.fillStyle=g,t.textAlign=y,t.textBaseline="top",t.fillText(o,e.x,e.y)}else if(e.type==="qrcode"){const c=e.size||100;try{const d=await yT.toDataURL(o,{width:c,margin:1,color:{dark:e.color||"#000000",light:"#ffffff"}}),g=new Image;await new Promise((y,v)=>{g.onload=()=>{t.drawImage(g,e.x,e.y,c,c),y()},g.onerror=v,g.src=d})}catch(d){console.error("Error generating QR code:",d)}}}function vT(t,e){return t.field==="custom"&&t.customValue?t.customValue:e[t.field]||""}function bT(t,e){const n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}async function Uw(t,e){const n=await Fw(t,e);return URL.createObjectURL(n)}const ET=()=>{const t=si(),e=ni(),{toast:n}=an(),{user:o,profile:c,loading:d,signOut:g,isAdmin:y,isVolunteer:v}=oi(),[b,S]=O.useState(!1),[N,R]=O.useState([]),[T,D]=O.useState([]),[I,M]=O.useState(0),[z,U]=O.useState(!1),[B,V]=O.useState(!0),[re,G]=O.useState(null),[H,se]=O.useState(!1),[$,be]=O.useState(null);O.useEffect(()=>{!d&&!o&&t("/login")},[o,d,t]),O.useEffect(()=>{c&&!c.phone&&S(!0)},[c]),O.useEffect(()=>{o&&(async()=>{if(!o)return;const[me,ge]=await Promise.all([Ze.from("tickets").select("*").eq("is_active",!0),Ze.from("registrations").select("*, ticket:tickets(*)").eq("user_id",o.id).order("created_at",{ascending:!1})]);me.error||R(me.data||[]),ge.error||D(ge.data||[]),V(!1)})()},[o]),O.useEffect(()=>{(async()=>{if(!c?.referral_code)return;const{count:me}=await Ze.from("registrations").select("id",{count:"exact",head:!0}).eq("referred_by",c.referral_code);M(me||0)})()},[c?.referral_code,e.key]);const X=()=>{c?.referral_code&&(navigator.clipboard.writeText(c.referral_code),U(!0),setTimeout(()=>U(!1),2e3))},Y=async()=>{await g(),t("/")},fe=()=>{S(!1)},oe=async he=>{if(!(!he.registration_id||!he.ticket_id)){se(!0);try{const{data:me,error:ge}=await Ze.from("ticket_templates").select("*").eq("ticket_id",he.ticket_id).single();if(ge||!me){n({title:"No Template",description:"No ticket template has been created for this event yet.",variant:"destructive"}),se(!1);return}const ve={user_name:c?.full_name||"User",ticket_name:he.ticket?.title||"Event",registration_id:he.registration_id,date:new Date(he.created_at).toLocaleDateString()},te=await Uw(me,ve);G(te),be({template:me,data:ve})}catch{n({title:"Error",description:"Could not generate ticket. Please try again.",variant:"destructive"})}se(!1)}},ee=async()=>{if($)try{const he=await Fw($.template,$.data);bT(he,`ticket-${$.data.registration_id}.png`)}catch{n({title:"Error",description:"Could not download ticket.",variant:"destructive"})}},_e=()=>{re&&URL.revokeObjectURL(re),G(null),be(null)};return d?h.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"LOADING..."})}):o?h.jsxs("div",{className:"min-h-screen bg-background relative scanlines flex flex-col",children:[h.jsx(ai,{}),h.jsxs("main",{className:"flex-1 p-4 pt-20",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-30 pointer-events-none"}),h.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto space-y-8",children:[h.jsx("h1",{className:"text-3xl md:text-5xl font-display font-bold text-primary glow-text text-center tracking-wider",children:"DASHBOARD"}),y&&h.jsxs(qr,{to:"/admin",className:"flex items-center justify-center gap-2 bg-secondary/30 border border-primary/30 py-3 rounded font-mono text-primary hover:bg-secondary/50 hover:border-primary transition-colors",children:[h.jsx(fb,{className:"w-5 h-5"}),"ADMIN PANEL"]}),(v||y)&&h.jsxs(qr,{to:"/volunteer",className:"flex items-center justify-center gap-2 bg-secondary/30 border border-green-500/30 py-3 rounded font-mono text-green-400 hover:bg-secondary/50 hover:border-green-500 transition-colors",children:[h.jsx(n0,{className:"w-5 h-5"}),"VOLUNTEER PANEL"]}),h.jsxs("div",{className:"terminal-card",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot terminal-dot-red"}),h.jsx("span",{className:"terminal-dot terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot terminal-dot-green"}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2 font-mono",children:"user://profile"})]}),h.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[h.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-primary/20 border border-primary/50 flex items-center justify-center shrink-0",children:h.jsx(Sa,{className:"w-6 h-6 sm:w-7 sm:h-7 text-primary"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("h2",{className:"text-base sm:text-lg font-display text-primary break-words",children:c?.full_name||"User"}),h.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:"Welcome back"})]})]}),h.jsxs("button",{onClick:Y,className:"flex items-center justify-center gap-2 px-3 py-2 border border-destructive/50 bg-destructive/10 rounded font-mono text-sm text-destructive hover:bg-destructive/20 shrink-0",children:[h.jsx(r0,{className:"w-4 h-4"}),"SIGN OUT"]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background border border-border rounded",children:[h.jsx(Ax,{className:"w-4 h-4 text-primary/60"}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("span",{className:"text-xs text-muted-foreground font-mono block",children:"EMAIL"}),h.jsx("span",{className:"text-sm text-primary font-mono truncate block",children:c?.email||o.email})]})]}),h.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background border border-border rounded",children:[h.jsx(Ix,{className:"w-4 h-4 text-primary/60"}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("span",{className:"text-xs text-muted-foreground font-mono block",children:"PHONE"}),h.jsx("span",{className:"text-sm text-primary font-mono truncate block",children:c?.phone||"Not provided"})]})]})]})]})]}),h.jsxs("div",{className:"terminal-card",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot terminal-dot-red"}),h.jsx("span",{className:"terminal-dot terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot terminal-dot-green"}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2 font-mono",children:"tickets://available"})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-lg font-display text-primary mb-4",children:"AVAILABLE TICKETS"}),B?h.jsx("div",{className:"text-muted-foreground font-mono text-sm animate-pulse",children:"Loading..."}):N.length===0?h.jsx("p",{className:"text-muted-foreground font-mono text-sm",children:"No tickets available at the moment."}):h.jsx("div",{className:"grid gap-3",children:N.map(he=>h.jsxs("div",{className:"p-4 bg-background border border-border rounded hover:border-primary/50 transition-colors",children:[h.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[h.jsx(Gi,{className:"w-5 h-5 text-primary/60 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-display text-primary",children:he.title}),he.description&&h.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:he.description})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-primary font-display font-bold",children:he.price>0?`${he.price}`:"FREE"}),h.jsx(qr,{to:`/tickets/${he.id}/register`,className:"bg-primary text-background px-4 py-2 font-display font-bold text-sm rounded hover:scale-105 transition-transform",children:"REGISTER"})]})]},he.id))})]})]}),h.jsxs("div",{className:"terminal-card",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot terminal-dot-red"}),h.jsx("span",{className:"terminal-dot terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot terminal-dot-green"}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2 font-mono",children:"registrations://mine"})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-lg font-display text-primary mb-4",children:"MY REGISTRATIONS"}),B?h.jsx("div",{className:"text-muted-foreground font-mono text-sm animate-pulse",children:"Loading..."}):T.length===0?h.jsx("p",{className:"text-muted-foreground font-mono text-sm",children:"You haven't registered for any events yet."}):h.jsx("div",{className:"space-y-3",children:T.map(he=>h.jsxs("div",{className:"p-4 bg-background border border-border rounded",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h4",{className:"font-display text-primary",children:he.ticket?.title||"Unknown"}),h.jsx("span",{className:`text-xs px-2 py-1 rounded font-mono ${he.status==="confirmed"?"bg-green-500/20 text-green-500":he.status==="cancelled"?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"}`,children:he.status.toUpperCase()})]}),h.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground font-mono",children:[h.jsx("span",{children:new Date(he.created_at).toLocaleDateString()}),he.registration_id&&h.jsxs("span",{className:"text-primary bg-primary/10 px-2 py-0.5 rounded tracking-wider",children:["ID: ",he.registration_id]})]}),he.status==="confirmed"&&he.registration_id&&h.jsxs("button",{onClick:()=>oe(he),disabled:H,className:"mt-3 w-full flex items-center justify-center gap-2 px-3 py-2 border border-primary text-primary rounded font-mono text-sm hover:bg-primary/10 disabled:opacity-50",children:[h.jsx(Sx,{className:"w-4 h-4"}),H?"Loading...":"View Ticket"]})]},he.id))})]})]}),h.jsxs("div",{className:"terminal-card",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot terminal-dot-red"}),h.jsx("span",{className:"terminal-dot terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot terminal-dot-green"}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2 font-mono",children:"referrals://code"})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(Rx,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-display text-primary",children:"YOUR REFERRAL CODE"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"p-4 bg-background border border-border rounded",children:[h.jsx("span",{className:"text-xs text-muted-foreground font-mono block mb-2",children:"REFERRAL CODE"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-2xl font-display font-bold text-primary tracking-widest",children:c?.referral_code||"-----"}),h.jsx("button",{onClick:X,className:"p-2 hover:bg-secondary/50 rounded transition-colors",title:"Copy code",children:z?h.jsx(bh,{className:"w-4 h-4 text-green-500"}):h.jsx(Jv,{className:"w-4 h-4 text-muted-foreground"})})]})]}),h.jsxs("div",{className:"p-4 bg-background border border-border rounded",children:[h.jsx("span",{className:"text-xs text-muted-foreground font-mono block mb-2",children:"TOTAL REFERRALS"}),h.jsx("span",{className:"text-2xl font-display font-bold text-primary",children:I})]})]}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-4",children:"Share your referral code with friends. When they use it during registration, you'll see them in your referral count!"})]})]})]})]}),h.jsx(li,{}),re&&h.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] overflow-auto",children:[h.jsx("button",{onClick:_e,className:"absolute top-2 right-2 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 z-10",children:h.jsx(ti,{className:"w-5 h-5"})}),h.jsx("img",{src:re,alt:"Your Ticket",className:"max-w-full h-auto"}),h.jsxs("div",{className:"mt-4 flex justify-center gap-3",children:[h.jsxs("button",{onClick:ee,className:"flex items-center gap-2 bg-primary text-background px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform",children:[h.jsx(_x,{className:"w-5 h-5"}),"Download Ticket"]}),h.jsx("button",{onClick:_e,className:"flex items-center gap-2 border border-white text-white px-6 py-3 font-mono rounded hover:bg-white/10",children:"Close"})]})]})}),h.jsx(X4,{open:b,onComplete:fe})]}):null},CT="rzp_test_S2f6BTNSbUj77I",Rg="https://bvhkxzayughsawacacqo.supabase.co",Og="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ2aGt4emF5dWdoc2F3YWNhY3FvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgxMTM4NjMsImV4cCI6MjA4MzY4OTg2M30.KKZQuLzyr5zGfL9vGuiZ-ow5x1BB7ArHPYEbYxyi3uM",_T=()=>{const{ticketId:t}=E0(),e=si(),{user:n,profile:o,session:c,loading:d}=oi(),{toast:g}=an(),[y,v]=O.useState(null),[b,S]=O.useState(!0),[N,R]=O.useState(!1),[T,D]=O.useState({}),[I,M]=O.useState("");O.useEffect(()=>{if(!d&&!n){e("/login");return}d||(async()=>{if(!t)return;const{data:se,error:$}=await Ze.from("tickets").select("*").eq("id",t).eq("is_active",!0).single();if($||!se){g({title:"Error",description:"Ticket not found or unavailable",variant:"destructive"}),e("/dashboard");return}v(se);const be={};(se.form_fields||[]).forEach(X=>{be[X.id]=X.type==="checkbox"?!1:""}),D(be),S(!1)})()},[t,n,d,e,g]);const z=(H,se)=>{D($=>({...$,[H]:se}))},U=()=>{const H="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let se="";for(let $=0;$<10;$++)se+=H.charAt(Math.floor(Math.random()*H.length));return se},B=()=>new Promise(H=>{if(window.Razorpay){H(!0);return}const se=document.createElement("script");se.src="https://checkout.razorpay.com/v1/checkout.js",se.onload=()=>H(!0),se.onerror=()=>H(!1),document.body.appendChild(se)}),V=async(H,se)=>{if(!(!y||!n))try{if(!await B())throw new Error("Failed to load payment gateway");const be=c?.access_token;if(!be)throw new Error("No valid session. Please log in again.");const Y=await(await fetch(`${Rg}/functions/v1/create-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${be}`,apikey:Og},body:JSON.stringify({amount:y.price,user_id:n.id,registration_id:se})})).json();if(!Y.success)throw new Error(Y.error||"Failed to create order");const fe={key:CT,amount:Y.amount,currency:Y.currency,order_id:Y.order_id,name:"TESSERACT 9.0",description:`Registration for ${y.title}`,prefill:{name:o?.full_name||"",email:o?.email||"",contact:o?.phone||""},handler:async ee=>{try{const he=await(await fetch(`${Rg}/functions/v1/verify-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${be}`,apikey:Og},body:JSON.stringify({razorpay_order_id:Y.order_id,razorpay_payment_id:ee.razorpay_payment_id,razorpay_signature:ee.razorpay_signature,registration_id:se})})).json();if(!he.success)throw new Error(he.error||"Payment verification failed");g({title:"Payment Successful!",description:`Your registration ID is ${H}`}),e("/dashboard")}catch(_e){console.error("Payment verification error:",_e),g({title:"Verification Error",description:_e instanceof Error?_e.message:"Payment verification failed",variant:"destructive"})}finally{R(!1)}},theme:{color:"#00ff88"},modal:{ondismiss:()=>{g({title:"Payment Cancelled",description:"You can retry payment from your dashboard."}),R(!1),e("/dashboard")}}},oe=new window.Razorpay(fe);oe.on("payment.failed",ee=>{g({title:"Payment Failed",description:ee.error.description,variant:"destructive"}),R(!1)}),oe.open()}catch($){console.error("Payment error:",$),g({title:"Payment Error",description:$ instanceof Error?$.message:"Failed to initiate payment",variant:"destructive"}),R(!1)}},re=async H=>{if(H.preventDefault(),!n||!y)return;const se=(y.form_fields||[]).filter(_e=>_e.required&&!T[_e.id]);if(se.length>0){g({title:"Validation Error",description:`Please fill in: ${se.map(_e=>_e.label).join(", ")}`,variant:"destructive"});return}R(!0);let $=null;if(I.trim()){const{data:_e,error:he}=await Ze.from("profiles").select("id").eq("referral_code",I.trim()).maybeSingle();if(he){console.error("Referral validation error:",he),g({title:"Validation Error",description:"Could not validate referral code. Please try again.",variant:"destructive"}),R(!1);return}if(_e)$=I.trim();else{g({title:"Invalid Referral Code",description:"The referral code you entered does not exist.",variant:"destructive"}),R(!1);return}}const be=U(),X=y.price===0,{data:Y,error:fe}=await Ze.from("profiles").select("id").eq("id",n.id).single();if(fe||!Y){console.error("Profile verification failed:",fe),g({title:"Profile Error",description:"Your profile was not found. Please try logging out and back in.",variant:"destructive"}),R(!1);return}const{data:oe,error:ee}=await Ze.from("registrations").insert({user_id:n.id,ticket_id:y.id,form_data:T,status:X?"confirmed":"pending",referred_by:$,registration_id:be}).select("id").single();if(ee||!oe){g({title:"Error",description:ee?.message||"Failed to create registration",variant:"destructive"}),R(!1);return}if(X){g({title:"Registration Successful!",description:`Your registration ID is ${be}`}),e("/dashboard");return}await V(be,oe.id)},G=H=>{const se="w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors";switch(H.type){case"textarea":return h.jsx("textarea",{value:String(T[H.id]||""),onChange:$=>z(H.id,$.target.value),placeholder:H.placeholder,className:`${se} h-24 resize-none`,required:H.required});case"select":return h.jsxs("select",{value:String(T[H.id]||""),onChange:$=>z(H.id,$.target.value),className:se,required:H.required,children:[h.jsx("option",{value:"",children:"Select an option"}),(H.options||[]).map($=>h.jsx("option",{value:$,children:$},$))]});case"checkbox":return h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:!!T[H.id],onChange:$=>z(H.id,$.target.checked),className:"w-5 h-5 accent-primary"}),h.jsx("span",{className:"text-primary font-mono",children:H.label})]});default:return h.jsx("input",{type:H.type,value:String(T[H.id]||""),onChange:$=>z(H.id,$.target.value),placeholder:H.placeholder,className:se,required:H.required})}};return b||d?h.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"LOADING..."})}):y?h.jsxs("div",{className:"min-h-screen bg-background relative scanlines flex flex-col",children:[h.jsx(ai,{}),h.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-30 pointer-events-none"}),h.jsxs("div",{className:"relative z-10 w-full max-w-lg",children:[h.jsx("h1",{className:"text-2xl md:text-4xl font-display font-bold text-primary glow-text mb-2 text-center tracking-wider",children:y.title}),y.description&&h.jsx("p",{className:"text-muted-foreground font-mono text-sm text-center mb-6",children:y.description}),h.jsxs("div",{className:"terminal-card",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot terminal-dot-red"}),h.jsx("span",{className:"terminal-dot terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot terminal-dot-green"}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2 font-mono",children:"register://ticket"})]}),h.jsxs("div",{className:"p-6 md:p-8",children:[h.jsxs("div",{className:"mb-6 pb-6 border-b border-border",children:[h.jsx("p",{className:"text-xs text-muted-foreground font-mono mb-3",children:"YOUR INFO"}),h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Name:"}),h.jsx("span",{className:"text-primary font-mono",children:o?.full_name||"-"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Email:"}),h.jsx("span",{className:"text-primary font-mono",children:o?.email||"-"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),h.jsx("span",{className:"text-primary font-mono",children:o?.phone||"-"})]})]})]}),h.jsxs("form",{onSubmit:re,className:"space-y-4",children:[(y.form_fields||[]).map(H=>h.jsxs("div",{children:[H.type!=="checkbox"&&h.jsxs("label",{className:"block text-sm text-primary/80 font-mono mb-2",children:[H.label.toUpperCase(),H.required&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),G(H)]},H.id)),h.jsxs("div",{className:"pt-4 border-t border-border",children:[h.jsx("label",{className:"block text-sm text-primary/80 font-mono mb-2",children:"REFERRAL CODE (OPTIONAL)"}),h.jsx("input",{type:"text",value:I,onChange:H=>M(H.target.value.toUpperCase()),placeholder:"Enter 5-digit referral code",maxLength:5,className:"w-full bg-background border border-border rounded px-4 py-3 text-primary font-mono placeholder:text-muted-foreground focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-colors tracking-widest"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:"Have a friend's referral code? Enter it here."})]}),y.price>0&&h.jsxs("div",{className:"flex justify-between items-center py-4 border-t border-border",children:[h.jsx("span",{className:"text-muted-foreground font-mono",children:"Ticket Price:"}),h.jsxs("span",{className:"text-xl font-display font-bold text-primary",children:["",y.price]})]}),h.jsx("button",{type:"submit",disabled:N,className:"w-full glow-button bg-primary text-background py-3 font-display font-bold tracking-wider rounded hover:scale-[1.02] transition-transform disabled:opacity-50 disabled:cursor-not-allowed mt-4",children:N?"PROCESSING...":y.price>0?"PROCEED TO PAYMENT":"REGISTER NOW"})]})]})]})]})]}),h.jsx(li,{})]}):null},ST=[{href:"/admin",label:"Dashboard",icon:sb},{href:"/admin/tickets",label:"Tickets",icon:Gi},{href:"/admin/registrations",label:"Registrations",icon:Na},{href:"/admin/referrals",label:"Referrals",icon:Rx},{href:"/admin/coupons",label:"Coupons",icon:Hi},{href:"/admin/checkin",label:"Scanners",icon:n0},{href:"/admin/verify-payments",label:"Verify Payments",icon:Ox}],ei=({children:t})=>{const{profile:e,signOut:n}=oi(),o=ni(),[c,d]=O.useState(!1),g=()=>d(!1);return h.jsxs("div",{className:"min-h-screen bg-background flex",children:[c&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:g}),h.jsxs("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-card border-r border-border flex flex-col transform transition-transform duration-300 ease-in-out ${c?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[h.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(qr,{to:"/",className:"flex items-center gap-2",onClick:g,children:h.jsx("span",{className:"text-xl font-display font-bold text-primary glow-text tracking-wider",children:"TESSERACT"})}),h.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:"Admin Panel"})]}),h.jsx("button",{onClick:g,className:"lg:hidden p-2 text-primary hover:bg-secondary/50 rounded",children:h.jsx(ti,{className:"w-5 h-5"})})]}),h.jsx("nav",{className:"flex-1 p-4 space-y-2",children:ST.map(y=>{const v=o.pathname===y.href,b=y.icon;return h.jsxs(qr,{to:y.href,onClick:g,className:`flex items-center gap-3 px-3 py-2 rounded font-mono text-sm transition-colors ${v?"bg-primary text-background":"text-primary/70 hover:bg-secondary/50 hover:text-primary"}`,children:[h.jsx(b,{className:"w-4 h-4"}),y.label]},y.href)})}),h.jsxs("div",{className:"p-4 border-t border-border space-y-2",children:[h.jsxs(qr,{to:"/",onClick:g,className:"flex items-center gap-3 px-3 py-2 rounded font-mono text-sm text-primary/70 hover:bg-secondary/50 hover:text-primary transition-colors",children:[h.jsx(Nx,{className:"w-4 h-4"}),"Back to Site"]}),h.jsxs("button",{onClick:()=>{g(),n()},className:"w-full flex items-center gap-3 px-3 py-2 rounded font-mono text-sm text-destructive hover:bg-destructive/10 transition-colors",children:[h.jsx(r0,{className:"w-4 h-4"}),"Sign Out"]})]})]}),h.jsxs("main",{className:"flex-1 flex flex-col min-w-0",children:[h.jsxs("header",{className:"h-16 bg-card border-b border-border flex items-center justify-between px-4 lg:px-6",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>d(!0),className:"lg:hidden p-2 text-primary hover:bg-secondary/50 rounded",children:h.jsx(Tx,{className:"w-5 h-5"})}),h.jsx("h1",{className:"text-lg font-display text-primary",children:"Admin Panel"})]}),h.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[h.jsx("span",{className:"text-sm text-muted-foreground font-mono hidden sm:block",children:e?.full_name||e?.email}),h.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 border border-primary/50 flex items-center justify-center",children:h.jsx("span",{className:"text-xs font-bold text-primary",children:(e?.full_name||e?.email||"A")[0].toUpperCase()})})]})]}),h.jsx("div",{className:"flex-1 p-4 lg:p-6 overflow-auto",children:t})]})]})},NT=()=>{const[t,e]=O.useState({totalTickets:0,activeTickets:0,totalRegistrations:0,pendingRegistrations:0}),[n,o]=O.useState(!0);O.useEffect(()=>{(async()=>{try{const[g,y,v,b]=await Promise.all([Ze.from("tickets").select("id",{count:"exact",head:!0}),Ze.from("tickets").select("id",{count:"exact",head:!0}).eq("is_active",!0),Ze.from("registrations").select("id",{count:"exact",head:!0}),Ze.from("registrations").select("id",{count:"exact",head:!0}).eq("status","pending")]);e({totalTickets:g.count||0,activeTickets:y.count||0,totalRegistrations:v.count||0,pendingRegistrations:b.count||0})}catch(g){console.error("Error fetching stats:",g)}finally{o(!1)}})()},[]);const c=[{label:"Total Tickets",value:t.totalTickets,icon:Gi,color:"text-primary"},{label:"Active Tickets",value:t.activeTickets,icon:Gi,color:"text-green-500"},{label:"Total Registrations",value:t.totalRegistrations,icon:Na,color:"text-blue-500"},{label:"Pending",value:t.pendingRegistrations,icon:eb,color:"text-yellow-500"}];return h.jsx(ei,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"DASHBOARD"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"Overview of your ticket system"})]}),n?h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Loading stats..."}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(d=>{const g=d.icon;return h.jsx("div",{className:"terminal-card p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-wider",children:d.label}),h.jsx("p",{className:`text-3xl font-display font-bold mt-2 ${d.color}`,children:d.value})]}),h.jsx(g,{className:`w-8 h-8 ${d.color} opacity-50`})]})},d.label)})}),h.jsxs("div",{className:"terminal-card p-6",children:[h.jsxs("div",{className:"terminal-header mb-4 -mx-6 -mt-6 px-4",children:[h.jsx("span",{className:"terminal-dot terminal-dot-red"}),h.jsx("span",{className:"terminal-dot terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot terminal-dot-green"}),h.jsx("span",{className:"text-xs text-muted-foreground ml-2 font-mono",children:"quick_actions.sh"})]}),h.jsxs("div",{className:"space-y-2 font-mono text-sm",children:[h.jsxs("p",{className:"text-muted-foreground",children:[h.jsx("span",{className:"text-primary",children:">"})," Navigate to"," ",h.jsx("a",{href:"/admin/tickets",className:"text-primary hover:underline",children:"Tickets"})," ","to create and manage event tickets"]}),h.jsxs("p",{className:"text-muted-foreground",children:[h.jsx("span",{className:"text-primary",children:">"})," View"," ",h.jsx("a",{href:"/admin/registrations",className:"text-primary hover:underline",children:"Registrations"})," ","to see all user submissions"]})]})]})]})})},AT=["text","email","tel","number","textarea","select","checkbox"],jg={title:"",description:"",price:0,is_active:!0,form_fields:[],max_registrations:null},TT={id:"",label:"",type:"text",required:!1,options:[],placeholder:""},kT=()=>{const{toast:t}=an(),[e,n]=O.useState([]),[o,c]=O.useState(!0),[d,g]=O.useState(!1),[y,v]=O.useState(jg),[b,S]=O.useState(!1),N=async()=>{const{data:V,error:re}=await Ze.from("tickets").select("*").order("created_at",{ascending:!1});re?t({title:"Error",description:re.message,variant:"destructive"}):n(V||[]),c(!1)};O.useEffect(()=>{N()},[]);const R=()=>{v(jg),g(!0)},T=V=>{v({...V}),g(!0)},D=async()=>{if(!y.title?.trim()){t({title:"Validation Error",description:"Title is required",variant:"destructive"});return}if(S(!0),y.id){const{error:V}=await Ze.from("tickets").update({title:y.title,description:y.description,price:y.price,is_active:y.is_active,form_fields:y.form_fields,max_registrations:y.max_registrations,updated_at:new Date().toISOString()}).eq("id",y.id);V?t({title:"Error",description:V.message,variant:"destructive"}):(t({title:"Success",description:"Ticket updated"}),g(!1),N())}else{const{error:V}=await Ze.from("tickets").insert({title:y.title,description:y.description,price:y.price||0,is_active:y.is_active??!0,form_fields:y.form_fields||[],max_registrations:y.max_registrations});V?t({title:"Error",description:V.message,variant:"destructive"}):(t({title:"Success",description:"Ticket created"}),g(!1),N())}S(!1)},I=async V=>{const{error:re}=await Ze.from("tickets").update({is_active:!V.is_active}).eq("id",V.id);re?t({title:"Error",description:re.message,variant:"destructive"}):N()},M=async V=>{if(!confirm(`Delete "${V.title}"? This cannot be undone.`))return;const{error:re}=await Ze.from("tickets").delete().eq("id",V.id);re?t({title:"Error",description:re.message,variant:"destructive"}):(t({title:"Deleted",description:"Ticket removed"}),N())},z=()=>{const V={...TT,id:`field_${Date.now()}`};v({...y,form_fields:[...y.form_fields||[],V]})},U=(V,re)=>{const G=[...y.form_fields||[]];G[V]={...G[V],...re},v({...y,form_fields:G})},B=V=>{const re=[...y.form_fields||[]];re.splice(V,1),v({...y,form_fields:re})};return h.jsxs(ei,{children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"TICKETS"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"Manage event tickets and registration forms"})]}),h.jsxs("button",{onClick:R,className:"flex items-center justify-center gap-2 bg-primary text-background px-4 py-2 font-display font-bold rounded hover:scale-105 transition-transform",children:[h.jsx(wu,{className:"w-4 h-4"}),"NEW TICKET"]})]}),o?h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Loading tickets..."}):e.length===0?h.jsx("div",{className:"terminal-card p-8 text-center",children:h.jsx("p",{className:"text-muted-foreground font-mono",children:"No tickets created yet."})}):h.jsx("div",{className:"space-y-4",children:e.map(V=>h.jsx("div",{className:`terminal-card p-4 ${V.is_active?"":"opacity-60"}`,children:h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.jsx("h3",{className:"font-display text-primary",children:V.title}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-mono ${V.is_active?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:V.is_active?"ACTIVE":"INACTIVE"})]}),h.jsxs("p",{className:"text-sm text-muted-foreground font-mono mt-1",children:["",V.price,"  ",V.form_fields?.length||0," custom fields"]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(qr,{to:`/admin/tickets/${V.id}/template`,className:"p-2 rounded hover:bg-secondary/50 transition-colors text-primary",title:"Edit Ticket Template",children:h.jsx(rb,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>I(V),className:`p-2 rounded hover:bg-secondary/50 transition-colors ${V.is_active?"text-green-500":"text-muted-foreground"}`,title:V.is_active?"Deactivate":"Activate",children:h.jsx(ub,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>T(V),className:"p-2 rounded hover:bg-secondary/50 transition-colors text-primary",title:"Edit",children:h.jsx(kx,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>M(V),className:"p-2 rounded hover:bg-secondary/50 transition-colors text-destructive",title:"Delete",children:h.jsx(s0,{className:"w-4 h-4"})})]})]})},V.id))})]}),h.jsx(Ow,{open:d,onOpenChange:g,children:h.jsxs(R0,{className:"terminal-card border-primary/30 max-w-2xl max-h-[90vh] overflow-y-auto mx-4",children:[h.jsx(O0,{children:h.jsx(j0,{className:"text-xl font-display text-primary tracking-wider",children:y.id?"EDIT TICKET":"CREATE TICKET"})}),h.jsxs("div",{className:"space-y-4 mt-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-primary/80 font-mono mb-2",children:"TITLE *"}),h.jsx("input",{type:"text",value:y.title||"",onChange:V=>v({...y,title:V.target.value}),className:"w-full bg-background border border-border rounded px-4 py-2 text-primary font-mono focus:border-primary focus:ring-1 focus:ring-primary",placeholder:"Event Name"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-primary/80 font-mono mb-2",children:"DESCRIPTION"}),h.jsx("textarea",{value:y.description||"",onChange:V=>v({...y,description:V.target.value}),className:"w-full bg-background border border-border rounded px-4 py-2 text-primary font-mono focus:border-primary focus:ring-1 focus:ring-primary h-20 resize-none",placeholder:"Event description..."})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-primary/80 font-mono mb-2",children:"PRICE ()"}),h.jsx("input",{type:"number",value:y.price||0,onChange:V=>v({...y,price:parseFloat(V.target.value)||0}),className:"w-full bg-background border border-border rounded px-4 py-2 text-primary font-mono focus:border-primary focus:ring-1 focus:ring-primary",min:"0",step:"0.01"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-primary/80 font-mono mb-2",children:"MAX REGISTRATIONS"}),h.jsx("input",{type:"number",value:y.max_registrations||"",onChange:V=>v({...y,max_registrations:V.target.value?parseInt(V.target.value):null}),className:"w-full bg-background border border-border rounded px-4 py-2 text-primary font-mono focus:border-primary focus:ring-1 focus:ring-primary",min:"0",placeholder:"Unlimited"})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"checkbox",id:"is_active",checked:y.is_active??!0,onChange:V=>v({...y,is_active:V.target.checked}),className:"w-4 h-4 accent-primary"}),h.jsx("label",{htmlFor:"is_active",className:"text-sm text-primary/80 font-mono",children:"Active (visible to users)"})]}),h.jsxs("div",{className:"border-t border-border pt-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("label",{className:"text-sm text-primary/80 font-mono",children:"CUSTOM FORM FIELDS"}),h.jsx("button",{type:"button",onClick:z,className:"text-xs bg-secondary text-primary px-3 py-1 rounded font-mono hover:bg-secondary/80",children:"+ Add Field"})]}),(y.form_fields||[]).length===0?h.jsx("p",{className:"text-sm text-muted-foreground font-mono text-center py-4",children:"No custom fields. User profile data (name, email, phone) is collected by default."}):h.jsx("div",{className:"space-y-3",children:(y.form_fields||[]).map((V,re)=>h.jsxs("div",{className:"bg-secondary/20 p-3 rounded border border-border",children:[h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[h.jsx("input",{type:"text",value:V.label,onChange:G=>U(re,{label:G.target.value}),className:"bg-background border border-border rounded px-3 py-1.5 text-sm text-primary font-mono",placeholder:"Field Label"}),h.jsx("select",{value:V.type,onChange:G=>U(re,{type:G.target.value}),className:"bg-background border border-border rounded px-3 py-1.5 text-sm text-primary font-mono",children:AT.map(G=>h.jsx("option",{value:G,children:G},G))})]}),h.jsx("button",{type:"button",onClick:()=>B(re),className:"p-1.5 text-destructive hover:bg-destructive/10 rounded",children:h.jsx(ti,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[h.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground font-mono",children:[h.jsx("input",{type:"checkbox",checked:V.required,onChange:G=>U(re,{required:G.target.checked}),className:"w-3 h-3 accent-primary"}),"Required"]}),V.type==="select"&&h.jsx("input",{type:"text",value:V.options?.join(", ")||"",onChange:G=>U(re,{options:G.target.value.split(",").map(H=>H.trim())}),className:"flex-1 bg-background border border-border rounded px-2 py-1 text-xs text-primary font-mono",placeholder:"Options (comma separated)"})]})]},V.id))})]}),h.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[h.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border border-border rounded font-mono text-sm hover:bg-secondary/50",children:"Cancel"}),h.jsx("button",{onClick:D,disabled:b,className:"px-4 py-2 bg-primary text-background rounded font-display font-bold hover:scale-105 transition-transform disabled:opacity-50",children:b?"SAVING...":"SAVE"})]})]})]})})]})},du=t=>{if(!t.form_data||!t.ticket?.form_fields)return"";const e=t.ticket.form_fields.find(n=>n.label.toLowerCase().includes("college"));return e&&t.form_data[e.id]?String(t.form_data[e.id]):""},IT=()=>{const{toast:t}=an(),[e,n]=O.useState([]),[o,c]=O.useState([]),[d,g]=O.useState(!0),[y,v]=O.useState(new Set),[b,S]=O.useState("created_at"),[N,R]=O.useState("desc"),[T,D]=O.useState(""),[I,M]=O.useState(""),[z,U]=O.useState(""),B=async()=>{const[X,Y]=await Promise.all([Ze.from("registrations").select("*, ticket:tickets(*), profile:profiles!fk_registrations_profile(full_name, email, phone)").order("created_at",{ascending:!1}),Ze.from("tickets").select("*")]);X.error?t({title:"Error",description:X.error.message,variant:"destructive"}):n(X.data||[]),Y.error||c(Y.data||[]),g(!1)};O.useEffect(()=>{B()},[]);const V=X=>{const Y=new Set(y);Y.has(X)?Y.delete(X):Y.add(X),v(Y)},re=X=>{b===X?R(N==="asc"?"desc":"asc"):(S(X),R("asc"))},G=(X,Y)=>X?.form_fields&&X.form_fields.find(oe=>oe.id===Y)?.label||Y,H=(X,Y)=>{switch(Y){case"profile.full_name":return X.profile?.full_name||"";case"profile.email":return X.profile?.email||"";case"college":return du(X);case"ticket.title":return X.ticket?.title||"";case"status":return X.status;default:return new Date(X.created_at).getTime()}},se=O.useMemo(()=>{let X=[...e];if(T){const Y=T.toLowerCase();X=X.filter(fe=>fe.profile?.full_name?.toLowerCase().includes(Y)||fe.profile?.email?.toLowerCase().includes(Y)||fe.profile?.phone?.includes(Y)||du(fe).toLowerCase().includes(Y)||fe.ticket?.title?.toLowerCase().includes(Y))}return I&&(X=X.filter(Y=>Y.ticket_id===I)),z&&(X=X.filter(Y=>Y.status===z)),X.sort((Y,fe)=>{const oe=H(Y,b),ee=H(fe,b);return typeof oe=="string"&&typeof ee=="string"?N==="asc"?oe.localeCompare(ee):ee.localeCompare(oe):N==="asc"?oe-ee:ee-oe}),X},[e,T,I,z,b,N]),$=()=>{if(se.length===0){t({title:"No Data",description:"No registrations to export",variant:"destructive"});return}const X=["Name","Email","Phone","College","Ticket","Status","Check-in","Referred By","Date"],Y=new Map;se.forEach(ge=>{Object.keys(ge.form_data||{}).forEach(ve=>{Y.has(ve)||Y.set(ve,G(ge.ticket,ve))})});const fe=[...X,...Array.from(Y.values())],oe=Array.from(Y.keys()),ee=se.map(ge=>{const ve=[ge.profile?.full_name||"",ge.profile?.email||"",ge.profile?.phone||"",du(ge),ge.ticket?.title||"",ge.status,ge.checked_in?"Yes":"No",ge.referred_by||"",new Date(ge.created_at).toLocaleDateString()],te=oe.map(ue=>{const je=ge.form_data?.[ue];return typeof je=="object"?JSON.stringify(je):String(je??"")});return[...ve,...te]}),_e=[fe.join(","),...ee.map(ge=>ge.map(ve=>`"${String(ve).replace(/"/g,'""')}"`).join(","))].join(`
`),he=new Blob([_e],{type:"text/csv;charset=utf-8;"}),me=document.createElement("a");me.href=URL.createObjectURL(he),me.download=`registrations_${new Date().toISOString().split("T")[0]}.csv`,me.click(),t({title:"Exported",description:`${se.length} registrations exported`})},be=({field:X,label:Y})=>h.jsx("th",{onClick:()=>re(X),className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider cursor-pointer hover:text-primary",children:h.jsxs("div",{className:"flex items-center gap-1",children:[Y,b===X&&(N==="asc"?h.jsx(Eh,{className:"w-3 h-3"}):h.jsx(Sl,{className:"w-3 h-3"}))]})});return h.jsx(ei,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"REGISTRATIONS"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"View and export all user registrations"})]}),h.jsxs("button",{onClick:$,className:"flex items-center justify-center gap-2 bg-primary text-background px-4 py-2 font-display font-bold rounded hover:scale-105 transition-transform",children:[h.jsx(_x,{className:"w-4 h-4"}),"EXPORT CSV"]})]}),h.jsx("div",{className:"terminal-card p-4",children:h.jsxs("div",{className:"flex flex-wrap gap-4",children:[h.jsx("div",{className:"flex-1 min-w-[200px]",children:h.jsxs("div",{className:"relative",children:[h.jsx(Lu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),h.jsx("input",{type:"text",value:T,onChange:X=>D(X.target.value),placeholder:"Search by name, email, phone...",className:"w-full bg-background border border-border rounded pl-10 pr-4 py-2 text-sm text-primary font-mono focus:border-primary"})]})}),h.jsxs("select",{value:I,onChange:X=>M(X.target.value),className:"bg-background border border-border rounded px-4 py-2 text-sm text-primary font-mono focus:border-primary",children:[h.jsx("option",{value:"",children:"All Tickets"}),o.map(X=>h.jsx("option",{value:X.id,children:X.title},X.id))]}),h.jsxs("select",{value:z,onChange:X=>U(X.target.value),className:"bg-background border border-border rounded px-4 py-2 text-sm text-primary font-mono focus:border-primary",children:[h.jsx("option",{value:"",children:"All Status"}),h.jsx("option",{value:"pending",children:"Pending"}),h.jsx("option",{value:"confirmed",children:"Confirmed"}),h.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})}),d?h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Loading registrations..."}):se.length===0?h.jsx("div",{className:"terminal-card p-8 text-center",children:h.jsx("p",{className:"text-muted-foreground font-mono",children:"No registrations found."})}):h.jsx("div",{className:"terminal-card overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-secondary/30 border-b border-border",children:h.jsxs("tr",{children:[h.jsx("th",{className:"w-10"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider",children:"Reg ID"}),h.jsx(be,{field:"profile.full_name",label:"Name"}),h.jsx(be,{field:"profile.email",label:"Email"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider",children:"Phone"}),h.jsx(be,{field:"college",label:"College"}),h.jsx(be,{field:"ticket.title",label:"Ticket"}),h.jsx(be,{field:"status",label:"Status"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider",children:"Check-in"}),h.jsx(be,{field:"created_at",label:"Date"})]})}),h.jsx("tbody",{className:"divide-y divide-border",children:se.map(X=>h.jsxs(h.Fragment,{children:[h.jsxs("tr",{className:"hover:bg-secondary/20 cursor-pointer",onClick:()=>V(X.id),children:[h.jsx("td",{className:"px-4 py-3",children:Object.keys(X.form_data||{}).length>0&&(y.has(X.id)?h.jsx(Eh,{className:"w-4 h-4 text-muted-foreground"}):h.jsx(Sl,{className:"w-4 h-4 text-muted-foreground"}))}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-primary",children:X.registration_id||"-"}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-primary",children:X.profile?.full_name||"-"}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:X.profile?.email||"-"}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:X.profile?.phone||"-"}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:du(X)||"-"}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-primary",children:X.ticket?.title||"-"}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-mono ${X.status==="confirmed"?"bg-green-500/20 text-green-500":X.status==="cancelled"?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"}`,children:X.status.toUpperCase()})}),h.jsx("td",{className:"px-4 py-3",children:X.checked_in?h.jsx("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded font-mono bg-green-500/20 text-green-500",children:" CHECKED IN"}):h.jsx("span",{className:"text-xs px-2 py-0.5 rounded font-mono bg-secondary/30 text-muted-foreground",children:""})}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:new Date(X.created_at).toLocaleDateString()})]},X.id),y.has(X.id)&&h.jsx("tr",{children:h.jsx("td",{colSpan:10,className:"px-4 py-4 bg-secondary/10",children:h.jsxs("div",{className:"space-y-4",children:[X.referred_by&&h.jsxs("div",{children:[h.jsx("div",{className:"text-xs font-mono text-muted-foreground mb-2",children:"REFERRED BY"}),h.jsx("div",{className:"bg-background p-2 rounded border border-border inline-block",children:h.jsx("span",{className:"text-sm text-primary font-mono",children:X.referred_by})})]}),X.checked_in&&X.checked_in_at&&h.jsxs("div",{children:[h.jsx("div",{className:"text-xs font-mono text-muted-foreground mb-2",children:"CHECK-IN DETAILS"}),h.jsx("div",{className:"bg-background p-2 rounded border border-green-500/30 inline-block",children:h.jsxs("span",{className:"text-sm text-green-500 font-mono",children:["Checked in at ",new Date(X.checked_in_at).toLocaleString()]})})]}),Object.keys(X.form_data||{}).length>0&&h.jsxs("div",{children:[h.jsx("div",{className:"text-xs font-mono text-muted-foreground mb-2",children:"CUSTOM FORM DATA"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(X.form_data||{}).map(([Y,fe])=>h.jsxs("div",{className:"bg-background p-2 rounded border border-border",children:[h.jsx("span",{className:"text-xs text-muted-foreground block",children:G(X.ticket,Y)}),h.jsx("span",{className:"text-sm text-primary font-mono",children:typeof fe=="boolean"?fe?"Yes":"No":String(fe)})]},Y))})]})]})})},`${X.id}-details`)]}))})]})})}),h.jsxs("div",{className:"text-sm text-muted-foreground font-mono",children:["Showing ",se.length," of ",e.length," registrations"]})]})})},RT=()=>{const{toast:t}=an(),[e,n]=O.useState([]),[o,c]=O.useState(!0),[d,g]=O.useState(new Set),[y,v]=O.useState({}),[b,S]=O.useState(new Set);O.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:T,error:D}=await Ze.from("profiles").select("id, full_name, email, phone, referral_code").not("referral_code","is",null);if(D){t({title:"Error",description:D.message,variant:"destructive"}),c(!1);return}const{data:I,error:M}=await Ze.from("registrations").select("referred_by").not("referred_by","is",null);if(M){t({title:"Error",description:M.message,variant:"destructive"}),c(!1);return}const z={};(I||[]).forEach(B=>{B.referred_by&&(z[B.referred_by]=(z[B.referred_by]||0)+1)});const U=(T||[]).map(B=>({...B,referral_count:z[B.referral_code]||0})).filter(B=>B.referral_count>=1).sort((B,V)=>V.referral_count-B.referral_count);n(U)}catch(T){console.error("Fetch error:",T),t({title:"Error",description:"Failed to load referral data",variant:"destructive"})}c(!1)},R=async(T,D)=>{const I=new Set(d);if(I.has(T)){I.delete(T),g(I);return}if(!y[T]){S(U=>new Set([...U,T]));const{data:M,error:z}=await Ze.from("registrations").select("id, created_at, user_id, ticket:tickets(title), profile:profiles!fk_registrations_profile(full_name, phone)").eq("referred_by",D);if(z)t({title:"Error",description:z.message,variant:"destructive"});else{const U=(M||[]).map(B=>({id:B.id,full_name:B.profile?.full_name||"Unknown",phone:B.profile?.phone||"-",ticket_title:B.ticket?.title||"Unknown",created_at:B.created_at}));v(B=>({...B,[T]:U}))}S(U=>{const B=new Set(U);return B.delete(T),B})}I.add(T),g(I)};return h.jsx(ei,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"REFERRALS"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"Users with successful referrals"})]}),o?h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Loading referrals..."}):e.length===0?h.jsxs("div",{className:"terminal-card p-8 text-center",children:[h.jsx(Na,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),h.jsx("p",{className:"text-muted-foreground font-mono",children:"No users with referrals yet."})]}):h.jsx("div",{className:"terminal-card overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-secondary/30 border-b border-border",children:h.jsxs("tr",{children:[h.jsx("th",{className:"w-10"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider",children:"Name"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider",children:"Email"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider",children:"Phone"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider",children:"Referral Code"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-mono text-primary/80 uppercase tracking-wider",children:"Referrals"})]})}),h.jsx("tbody",{className:"divide-y divide-border",children:e.map(T=>h.jsxs(h.Fragment,{children:[h.jsxs("tr",{className:"hover:bg-secondary/20 cursor-pointer",onClick:()=>R(T.id,T.referral_code),children:[h.jsx("td",{className:"px-4 py-3",children:d.has(T.id)?h.jsx(Eh,{className:"w-4 h-4 text-muted-foreground"}):h.jsx(Sl,{className:"w-4 h-4 text-muted-foreground"})}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-primary",children:T.full_name||"-"}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:T.email}),h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-muted-foreground",children:T.phone||"-"}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:"text-sm font-mono text-primary bg-primary/10 px-2 py-1 rounded tracking-widest",children:T.referral_code})}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:"text-sm font-display font-bold text-primary",children:T.referral_count})})]},T.id),d.has(T.id)&&h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"px-4 py-4 bg-secondary/10",children:b.has(T.id)?h.jsx("div",{className:"text-muted-foreground font-mono text-sm animate-pulse",children:"Loading referred users..."}):h.jsxs("div",{children:[h.jsx("div",{className:"text-xs font-mono text-muted-foreground mb-3",children:"REFERRED USERS"}),h.jsx("div",{className:"grid gap-2",children:(y[T.id]||[]).map(D=>h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 bg-background border border-border rounded gap-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-sm font-mono text-primary",children:D.full_name}),h.jsx("span",{className:"text-xs text-muted-foreground ml-3",children:D.phone})]}),h.jsxs("div",{className:"sm:text-right",children:[h.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:D.ticket_title}),h.jsx("span",{className:"text-xs text-muted-foreground ml-3",children:new Date(D.created_at).toLocaleDateString()})]})]},D.id))})]})})},`${T.id}-details`)]}))})]})})}),h.jsxs("div",{className:"text-sm text-muted-foreground font-mono",children:["Showing ",e.length," users with referrals"]})]})})},Pg=[{value:"user_name",label:"User Name"},{value:"ticket_name",label:"Ticket/Event Name"},{value:"registration_id",label:"Registration ID"},{value:"date",label:"Registration Date"}],OT=["Arial","Helvetica","Times New Roman","Georgia","Courier New","Verdana","Impact"],jT=()=>{const{ticketId:t}=E0(),e=si(),{toast:n}=an(),o=O.useRef(null),c=O.useRef(null),[d,g]=O.useState(null),[y,v]=O.useState(""),[b,S]=O.useState(null),[N,R]=O.useState([]),[T,D]=O.useState(null),[I,M]=O.useState(!0),[z,U]=O.useState(!1),[B,V]=O.useState(""),[re,G]=O.useState(!1),[H,se]=O.useState(!1),[$,be]=O.useState({x:0,y:0}),X={user_name:"John Doe",ticket_name:d?.title||"Event Name",registration_id:"ABC123XYZ0",date:new Date().toLocaleDateString()};O.useEffect(()=>{Y()},[t]),O.useEffect(()=>{fe()},[y,N,T]);const Y=async()=>{if(!t)return;const{data:we,error:ce}=await Ze.from("tickets").select("id, title").eq("id",t).single();if(ce){n({title:"Error",description:"Could not load ticket",variant:"destructive"}),e("/admin/tickets");return}g(we);const{data:Ee}=await Ze.from("ticket_templates").select("*").eq("ticket_id",t).single();Ee&&(v(Ee.background_url||""),R(Ee.fields||[])),M(!1)},fe=()=>{const we=o.current;if(!we)return;const ce=we.getContext("2d");if(!ce)return;if(!y){we.width=800,we.height=400,ce.fillStyle="#1a1a1a",ce.fillRect(0,0,we.width,we.height),ce.fillStyle="#333",ce.font="20px Arial",ce.textAlign="center",ce.fillText("Upload a background image to get started",we.width/2,we.height/2);return}const Ee=new Image;Ee.crossOrigin="anonymous",Ee.onload=()=>{we.width=Ee.width,we.height=Ee.height,ce.drawImage(Ee,0,0),N.forEach((Te,Ye)=>{const ht=Ye===T,wt=X[Te.field]||Te.customValue||"[Field]";if(Te.type==="text"){if(ce.font=`${Te.fontSize||24}px ${Te.fontFamily||"Arial"}`,ce.fillStyle=Te.color||"#000000",ce.textAlign=Te.align||"left",ce.textBaseline="top",ce.fillText(wt,Te.x,Te.y),ht){const At=ce.measureText(wt),Ke=Te.fontSize||24;let Er=Te.x;Te.align==="center"?Er-=At.width/2:Te.align==="right"&&(Er-=At.width),ce.strokeStyle="#00ff00",ce.lineWidth=2,ce.setLineDash([5,5]),ce.strokeRect(Er-5,Te.y-5,At.width+10,Ke+10),ce.setLineDash([])}}else if(Te.type==="qrcode"){const At=Te.size||100;ce.fillStyle="#ffffff",ce.fillRect(Te.x,Te.y,At,At),ce.fillStyle="#000000",ce.font="12px Arial",ce.textAlign="center",ce.fillText("QR Code",Te.x+At/2,Te.y+At/2),ht&&(ce.strokeStyle="#00ff00",ce.lineWidth=2,ce.setLineDash([5,5]),ce.strokeRect(Te.x-5,Te.y-5,At+10,At+10),ce.setLineDash([]))}})},Ee.src=y},oe=async we=>{const ce=we.target.files?.[0];if(!ce)return;S(ce);const Ee=URL.createObjectURL(ce);v(Ee)},ee=we=>{const ce=o.current;if(!ce)return;const Ee=ce.getBoundingClientRect(),Te=ce.width/Ee.width,Ye=ce.height/Ee.height,ht=(we.clientX-Ee.left)*Te,wt=(we.clientY-Ee.top)*Ye;for(let At=N.length-1;At>=0;At--){const Ke=N[At],Er=Ke.type==="qrcode"?Ke.size||100:Ke.fontSize||24,Lr=Ke.type==="qrcode"?Er:200,wn=Ke.type==="qrcode"?Er:Ke.fontSize||24;if(ht>=Ke.x&&ht<=Ke.x+Lr&&wt>=Ke.y&&wt<=Ke.y+wn){D(At);return}}D(null)},_e=we=>{if(T===null)return;const ce=o.current;if(!ce)return;const Ee=ce.getBoundingClientRect(),Te=ce.width/Ee.width,Ye=ce.height/Ee.height,ht=(we.clientX-Ee.left)*Te,wt=(we.clientY-Ee.top)*Ye,At=N[T];be({x:ht-At.x,y:wt-At.y}),se(!0)},he=we=>{if(!H||T===null)return;const ce=o.current;if(!ce)return;const Ee=ce.getBoundingClientRect(),Te=ce.width/Ee.width,Ye=ce.height/Ee.height,ht=(we.clientX-Ee.left)*Te,wt=(we.clientY-Ee.top)*Ye;ve(T,{x:Math.max(0,ht-$.x),y:Math.max(0,wt-$.y)})},me=()=>{se(!1)},ge=we=>{const ce={type:we,field:we==="qrcode"?"registration_id":"user_name",x:50,y:50+N.length*40,fontSize:24,fontFamily:"Arial",color:"#000000",align:"left",size:100};R([...N,ce]),D(N.length)},ve=(we,ce)=>{const Ee=[...N];Ee[we]={...Ee[we],...ce},R(Ee)},te=we=>{R(N.filter((ce,Ee)=>Ee!==we)),D(null)},ue=async()=>{if(!y||N.length===0){n({title:"Error",description:"Add background and fields first",variant:"destructive"});return}try{const we=await Uw({ticket_id:t,background_url:y,fields:N},X);V(we),G(!0)}catch{n({title:"Error",description:"Could not generate preview",variant:"destructive"})}},je=async()=>{if(t){U(!0);try{let we=y;if(b){const Ee=`ticket-templates/${t}-${Date.now()}.${b.name.split(".").pop()}`,{error:Te}=await Ze.storage.from("tickets").upload(Ee,b,{upsert:!0});if(Te)throw Te;const{data:Ye}=Ze.storage.from("tickets").getPublicUrl(Ee);we=Ye.publicUrl}const{error:ce}=await Ze.from("ticket_templates").upsert({ticket_id:t,background_url:we,fields:N,updated_at:new Date().toISOString()},{onConflict:"ticket_id"});if(ce)throw ce;v(we),S(null),n({title:"Success",description:"Template saved successfully!"})}catch(we){const ce=we instanceof Error?we.message:"Could not save template";n({title:"Error",description:ce,variant:"destructive"})}U(!1)}};if(I)return h.jsx(ei,{children:h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Loading template editor..."})});const Ie=T!==null?N[T]:null;return h.jsxs(ei,{children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>e("/admin/tickets"),className:"p-2 hover:bg-secondary/50 rounded",children:h.jsx(Xv,{className:"w-5 h-5 text-primary"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"TICKET TEMPLATE"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:d?.title})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:ue,className:"flex items-center gap-2 px-4 py-2 border border-primary text-primary rounded font-mono text-sm hover:bg-primary/10",children:[h.jsx(Sx,{className:"w-4 h-4"}),"Preview"]}),h.jsxs("button",{onClick:je,disabled:z,className:"flex items-center gap-2 bg-primary text-background px-4 py-2 font-display font-bold rounded hover:scale-105 transition-transform disabled:opacity-50",children:[h.jsx(db,{className:"w-4 h-4"}),z?"SAVING...":"SAVE"]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"lg:col-span-2 terminal-card p-4",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:"Canvas Editor"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:oe,className:"hidden"}),h.jsxs("button",{onClick:()=>c.current?.click(),className:"flex items-center gap-2 px-3 py-1.5 border border-border rounded text-sm font-mono hover:bg-secondary/50",children:[h.jsx(mb,{className:"w-4 h-4"}),"Upload Background"]})]})]}),h.jsx("div",{className:"overflow-auto max-h-[600px] border border-border rounded",children:h.jsx("canvas",{ref:o,onClick:ee,onMouseDown:_e,onMouseMove:he,onMouseUp:me,onMouseLeave:me,className:"cursor-crosshair max-w-full",style:{display:"block"}})}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-2",children:"Click to select fields. Drag to reposition. Use the panel on the right to customize."})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("h3",{className:"text-sm font-mono text-primary mb-3",children:"Add Fields"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>ge("text"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-border rounded text-sm font-mono hover:bg-secondary/50",children:[h.jsx(wu,{className:"w-4 h-4"}),"Text"]}),h.jsxs("button",{onClick:()=>ge("qrcode"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 border border-border rounded text-sm font-mono hover:bg-secondary/50",children:[h.jsx(wu,{className:"w-4 h-4"}),"QR Code"]})]})]}),h.jsxs("div",{className:"terminal-card p-4",children:[h.jsxs("h3",{className:"text-sm font-mono text-primary mb-3",children:["Fields (",N.length,")"]}),N.length===0?h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"No fields added yet."}):h.jsx("div",{className:"space-y-2",children:N.map((we,ce)=>h.jsxs("div",{onClick:()=>D(ce),className:`flex items-center justify-between p-2 rounded cursor-pointer ${ce===T?"bg-primary/20 border border-primary":"bg-secondary/20 border border-transparent hover:border-border"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(lb,{className:"w-3 h-3 text-muted-foreground"}),h.jsx("span",{className:"text-xs font-mono text-primary",children:we.type==="qrcode"?"QR":Pg.find(Ee=>Ee.value===we.field)?.label||we.field})]}),h.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),te(ce)},className:"p-1 text-destructive hover:bg-destructive/10 rounded",children:h.jsx(s0,{className:"w-3 h-3"})})]},ce))})]}),Ie&&h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("h3",{className:"text-sm font-mono text-primary mb-3",children:"Field Properties"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-muted-foreground font-mono mb-1",children:"Data Field"}),h.jsx("select",{value:Ie.field,onChange:we=>ve(T,{field:we.target.value}),className:"w-full bg-background border border-border rounded px-3 py-1.5 text-sm font-mono text-primary",children:Pg.map(we=>h.jsx("option",{value:we.value,children:we.label},we.value))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-muted-foreground font-mono mb-1",children:"X"}),h.jsx("input",{type:"number",value:Math.round(Ie.x),onChange:we=>ve(T,{x:parseInt(we.target.value)||0}),className:"w-full bg-background border border-border rounded px-3 py-1.5 text-sm font-mono text-primary"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-muted-foreground font-mono mb-1",children:"Y"}),h.jsx("input",{type:"number",value:Math.round(Ie.y),onChange:we=>ve(T,{y:parseInt(we.target.value)||0}),className:"w-full bg-background border border-border rounded px-3 py-1.5 text-sm font-mono text-primary"})]})]}),Ie.type==="text"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-muted-foreground font-mono mb-1",children:"Font Family"}),h.jsx("select",{value:Ie.fontFamily||"Arial",onChange:we=>ve(T,{fontFamily:we.target.value}),className:"w-full bg-background border border-border rounded px-3 py-1.5 text-sm font-mono text-primary",children:OT.map(we=>h.jsx("option",{value:we,children:we},we))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-muted-foreground font-mono mb-1",children:"Size"}),h.jsx("input",{type:"number",value:Ie.fontSize||24,onChange:we=>ve(T,{fontSize:parseInt(we.target.value)||24}),className:"w-full bg-background border border-border rounded px-3 py-1.5 text-sm font-mono text-primary"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-muted-foreground font-mono mb-1",children:"Color"}),h.jsx("input",{type:"color",value:Ie.color||"#000000",onChange:we=>ve(T,{color:we.target.value}),className:"w-full h-8 bg-background border border-border rounded cursor-pointer"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-muted-foreground font-mono mb-1",children:"Align"}),h.jsx("div",{className:"flex gap-1",children:["left","center","right"].map(we=>h.jsx("button",{onClick:()=>ve(T,{align:we}),className:`flex-1 py-1.5 text-xs font-mono rounded ${Ie.align===we?"bg-primary text-background":"bg-secondary/50 text-primary hover:bg-secondary"}`,children:we.charAt(0).toUpperCase()+we.slice(1)},we))})]})]}):h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-muted-foreground font-mono mb-1",children:"QR Size"}),h.jsx("input",{type:"number",value:Ie.size||100,onChange:we=>ve(T,{size:parseInt(we.target.value)||100}),className:"w-full bg-background border border-border rounded px-3 py-1.5 text-sm font-mono text-primary"})]})]})]})]})]})]}),re&&B&&h.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>G(!1),children:h.jsx("div",{className:"max-w-4xl max-h-[90vh] overflow-auto",children:h.jsx("img",{src:B,alt:"Ticket Preview",className:"max-w-full h-auto"})})})]})};var Ue;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ue||(Ue={}));var Dg=new Map([[Ue.QR_CODE,"QR_CODE"],[Ue.AZTEC,"AZTEC"],[Ue.CODABAR,"CODABAR"],[Ue.CODE_39,"CODE_39"],[Ue.CODE_93,"CODE_93"],[Ue.CODE_128,"CODE_128"],[Ue.DATA_MATRIX,"DATA_MATRIX"],[Ue.MAXICODE,"MAXICODE"],[Ue.ITF,"ITF"],[Ue.EAN_13,"EAN_13"],[Ue.EAN_8,"EAN_8"],[Ue.PDF_417,"PDF_417"],[Ue.RSS_14,"RSS_14"],[Ue.RSS_EXPANDED,"RSS_EXPANDED"],[Ue.UPC_A,"UPC_A"],[Ue.UPC_E,"UPC_E"],[Ue.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Mg;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Mg||(Mg={}));function PT(t){return Object.values(Ue).includes(t)}var Iu;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Iu||(Iu={}));var DT=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Iu.SCAN_TYPE_CAMERA,Iu.SCAN_TYPE_FILE],t})(),zw=(function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Dg.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Dg.get(e))},t})(),Lg=(function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),Kh;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Kh||(Kh={}));var MT=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Kh.UNKWOWN_ERROR}},t})(),LT=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function Xs(t){return typeof t>"u"||t===null}var xa=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),Vw=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(c),g=Object.keys(e),y=0,v=g;y<v.length;y++){var b=v[y];if(d.has(b))return n.logError("".concat(b," is not supported videoConstaints."),!0),!1}return!0},t})(),bl={exports:{}},BT=bl.exports,Bg;function FT(){return Bg||(Bg=1,(function(t,e){(function(n,o){o(e)})(BT,(function(n){function o(j){return j==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,r){j.__proto__=r}||function(j,r){for(var i in r)r.hasOwnProperty(i)&&(j[i]=r[i])};function d(j,r){c(j,r);function i(){this.constructor=j}j.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}function g(j,r){var i=Object.setPrototypeOf;i?i(j,r):j.__proto__=r}function y(j,r){r===void 0&&(r=j.constructor);var i=Error.captureStackTrace;i&&i(j,r)}var v=(function(j){d(r,j);function r(i){var a=this.constructor,u=j.call(this,i)||this;return Object.defineProperty(u,"name",{value:a.name,enumerable:!1}),g(u,a.prototype),y(u),u}return r})(Error);class b extends v{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}b.kind="Exception";class S extends b{}S.kind="ArgumentException";class N extends b{}N.kind="IllegalArgumentException";class R{constructor(r){if(this.binarizer=r,r===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,i){return this.binarizer.getBlackRow(r,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,i,a,u){const f=this.binarizer.getLuminanceSource().crop(r,i,a,u);return new R(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends b{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class D{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class I{static arraycopy(r,i,a,u,f){for(;f--;)a[u++]=r[i++]}static currentTimeMillis(){return Date.now()}}class M extends b{}M.kind="IndexOutOfBoundsException";class z extends M{constructor(r=void 0,i=void 0){super(i),this.index=r,this.message=i}}z.kind="ArrayIndexOutOfBoundsException";class U{static fill(r,i){for(let a=0,u=r.length;a<u;a++)r[a]=i}static fillWithin(r,i,a,u){U.rangeCheck(r.length,i,a);for(let f=i;f<a;f++)r[f]=u}static rangeCheck(r,i,a){if(i>a)throw new N("fromIndex("+i+") > toIndex("+a+")");if(i<0)throw new z(i);if(a>r)throw new z(a)}static asList(...r){return r}static create(r,i,a){return Array.from({length:r}).map(f=>Array.from({length:i}).fill(a))}static createInt32Array(r,i,a){return Array.from({length:r}).map(f=>Int32Array.from({length:i}).fill(a))}static equals(r,i){if(!r||!i||!r.length||!i.length||r.length!==i.length)return!1;for(let a=0,u=r.length;a<u;a++)if(r[a]!==i[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let i=1;for(const a of r)i=31*i+a;return i}static fillUint8Array(r,i){for(let a=0;a!==r.length;a++)r[a]=i}static copyOf(r,i){return r.slice(0,i)}static copyOfUint8Array(r,i){if(r.length<=i){const a=new Uint8Array(i);return a.set(r),a}return r.slice(0,i)}static copyOfRange(r,i,a){const u=a-i,f=new Int32Array(u);return I.arraycopy(r,i,f,0,u),f}static binarySearch(r,i,a){a===void 0&&(a=U.numberComparator);let u=0,f=r.length-1;for(;u<=f;){const m=f+u>>1,x=a(i,r[m]);if(x>0)u=m+1;else if(x<0)f=m-1;else return m}return-u-1}static numberComparator(r,i){return r-i}}class B{static numberOfTrailingZeros(r){let i;if(r===0)return 32;let a=31;return i=r<<16,i!==0&&(a-=16,r=i),i=r<<8,i!==0&&(a-=8,r=i),i=r<<4,i!==0&&(a-=4,r=i),i=r<<2,i!==0&&(a-=2,r=i),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let i=1;return r>>>16||(i+=16,r<<=16),r>>>24||(i+=8,r<<=8),r>>>28||(i+=4,r<<=4),r>>>30||(i+=2,r<<=2),i-=r>>>31,i}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,i){return Math.trunc(r/i)}static parseInt(r,i=void 0){return parseInt(r,i)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(r,i){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,i==null?this.bits=V.makeArray(r):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const i=V.makeArray(r);I.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const i=this.size;if(r>=i)return i;const a=this.bits;let u=Math.floor(r/32),f=a[u];f&=~((1<<(r&31))-1);const m=a.length;for(;f===0;){if(++u===m)return i;f=a[u]}const x=u*32+B.numberOfTrailingZeros(f);return x>i?i:x}getNextUnset(r){const i=this.size;if(r>=i)return i;const a=this.bits;let u=Math.floor(r/32),f=~a[u];f&=~((1<<(r&31))-1);const m=a.length;for(;f===0;){if(++u===m)return i;f=~a[u]}const x=u*32+B.numberOfTrailingZeros(f);return x>i?i:x}setBulk(r,i){this.bits[Math.floor(r/32)]=i}setRange(r,i){if(i<r||r<0||i>this.size)throw new N;if(i===r)return;i--;const a=Math.floor(r/32),u=Math.floor(i/32),f=this.bits;for(let m=a;m<=u;m++){const x=m>a?0:r&31,C=(2<<(m<u?31:i&31))-(1<<x);f[m]|=C}}clear(){const r=this.bits.length,i=this.bits;for(let a=0;a<r;a++)i[a]=0}isRange(r,i,a){if(i<r||r<0||i>this.size)throw new N;if(i===r)return!0;i--;const u=Math.floor(r/32),f=Math.floor(i/32),m=this.bits;for(let x=u;x<=f;x++){const E=x>u?0:r&31,k=(2<<(x<f?31:i&31))-(1<<E)&4294967295;if((m[x]&k)!==(a?k:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,i){if(i<0||i>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let a=i;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const i=r.size;this.ensureCapacity(this.size+i);for(let a=0;a<i;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new N("Sizes don't match");const i=this.bits;for(let a=0,u=i.length;a<u;a++)i[a]^=r.bits[a]}toBytes(r,i,a,u){for(let f=0;f<u;f++){let m=0;for(let x=0;x<8;x++)this.get(r)&&(m|=1<<7-x),r++;i[a+f]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),a=i+1,u=this.bits;for(let f=0;f<a;f++){let m=u[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[i-f]=m}if(this.size!==a*32){const f=a*32-this.size;let m=r[0]>>>f;for(let x=1;x<a;x++){const E=r[x];m|=E<<32-f,r[x-1]=m,m=E>>>f}r[a-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof V))return!1;const i=r;return this.size===i.size&&U.equals(this.bits,i.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let r="";for(let i=0,a=this.size;i<a;i++)(i&7)===0&&(r+=" "),r+=this.get(i)?"X":".";return r}clone(){return new V(this.size,this.bits.slice())}}var re;(function(j){j[j.OTHER=0]="OTHER",j[j.PURE_BARCODE=1]="PURE_BARCODE",j[j.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",j[j.TRY_HARDER=3]="TRY_HARDER",j[j.CHARACTER_SET=4]="CHARACTER_SET",j[j.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",j[j.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",j[j.ASSUME_GS1=7]="ASSUME_GS1",j[j.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",j[j.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",j[j.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(re||(re={}));var G=re;class H extends b{static getFormatInstance(){return new H}}H.kind="FormatException";var se;(function(j){j[j.Cp437=0]="Cp437",j[j.ISO8859_1=1]="ISO8859_1",j[j.ISO8859_2=2]="ISO8859_2",j[j.ISO8859_3=3]="ISO8859_3",j[j.ISO8859_4=4]="ISO8859_4",j[j.ISO8859_5=5]="ISO8859_5",j[j.ISO8859_6=6]="ISO8859_6",j[j.ISO8859_7=7]="ISO8859_7",j[j.ISO8859_8=8]="ISO8859_8",j[j.ISO8859_9=9]="ISO8859_9",j[j.ISO8859_10=10]="ISO8859_10",j[j.ISO8859_11=11]="ISO8859_11",j[j.ISO8859_13=12]="ISO8859_13",j[j.ISO8859_14=13]="ISO8859_14",j[j.ISO8859_15=14]="ISO8859_15",j[j.ISO8859_16=15]="ISO8859_16",j[j.SJIS=16]="SJIS",j[j.Cp1250=17]="Cp1250",j[j.Cp1251=18]="Cp1251",j[j.Cp1252=19]="Cp1252",j[j.Cp1256=20]="Cp1256",j[j.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",j[j.UTF8=22]="UTF8",j[j.ASCII=23]="ASCII",j[j.Big5=24]="Big5",j[j.GB18030=25]="GB18030",j[j.EUC_KR=26]="EUC_KR"})(se||(se={}));class ${constructor(r,i,a,...u){this.valueIdentifier=r,this.name=a,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=u,$.VALUE_IDENTIFIER_TO_ECI.set(r,this),$.NAME_TO_ECI.set(a,this);const f=this.values;for(let m=0,x=f.length;m!==x;m++){const E=f[m];$.VALUES_TO_ECI.set(E,this)}for(const m of u)$.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new H("incorect value");const i=$.VALUES_TO_ECI.get(r);if(i===void 0)throw new H("incorect value");return i}static getCharacterSetECIByName(r){const i=$.NAME_TO_ECI.get(r);if(i===void 0)throw new H("incorect value");return i}equals(r){if(!(r instanceof $))return!1;const i=r;return this.getName()===i.getName()}}$.VALUE_IDENTIFIER_TO_ECI=new Map,$.VALUES_TO_ECI=new Map,$.NAME_TO_ECI=new Map,$.Cp437=new $(se.Cp437,Int32Array.from([0,2]),"Cp437"),$.ISO8859_1=new $(se.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),$.ISO8859_2=new $(se.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),$.ISO8859_3=new $(se.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),$.ISO8859_4=new $(se.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),$.ISO8859_5=new $(se.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),$.ISO8859_6=new $(se.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),$.ISO8859_7=new $(se.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),$.ISO8859_8=new $(se.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),$.ISO8859_9=new $(se.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),$.ISO8859_10=new $(se.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),$.ISO8859_11=new $(se.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),$.ISO8859_13=new $(se.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),$.ISO8859_14=new $(se.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),$.ISO8859_15=new $(se.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),$.ISO8859_16=new $(se.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),$.SJIS=new $(se.SJIS,20,"SJIS","Shift_JIS"),$.Cp1250=new $(se.Cp1250,21,"Cp1250","windows-1250"),$.Cp1251=new $(se.Cp1251,22,"Cp1251","windows-1251"),$.Cp1252=new $(se.Cp1252,23,"Cp1252","windows-1252"),$.Cp1256=new $(se.Cp1256,24,"Cp1256","windows-1256"),$.UnicodeBigUnmarked=new $(se.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),$.UTF8=new $(se.UTF8,26,"UTF8","UTF-8"),$.ASCII=new $(se.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),$.Big5=new $(se.Big5,28,"Big5"),$.GB18030=new $(se.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),$.EUC_KR=new $(se.EUC_KR,30,"EUC_KR","EUC-KR");class be extends b{}be.kind="UnsupportedOperationException";class X{static decode(r,i){const a=this.encodingName(i);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!X.isBrowser()&&r==="ISO-8859-1"}static encode(r,i){const a=this.encodingName(i);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof $?r:$.getCharacterSetECIByName(r)}static decodeFallback(r,i){const a=this.encodingCharacterSet(i);if(X.isDecodeFallbackSupported(a)){let u="";for(let f=0,m=r.length;f<m;f++){let x=r[f].toString(16);x.length<2&&(x="0"+x),u+="%"+x}return decodeURIComponent(u)}if(a.equals($.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new be(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals($.UTF8)||r.equals($.ISO8859_1)||r.equals($.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let f=0;f<a.length;f++)u.push(a[f].charCodeAt(0));return new Uint8Array(u)}}class Y{static castAsNonUtf8Char(r,i=null){const a=i?i.getName():this.ISO88591;return X.decode(new Uint8Array([r]),a)}static guessEncoding(r,i){if(i!=null&&i.get(G.CHARACTER_SET)!==void 0)return i.get(G.CHARACTER_SET).toString();const a=r.length;let u=!0,f=!0,m=!0,x=0,E=0,C=0,k=0,P=0,F=0,q=0,Z=0,J=0,ie=0,pe=0;const Re=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Oe=0;Oe<a&&(u||f||m);Oe++){const Ne=r[Oe]&255;m&&(x>0?(Ne&128)===0?m=!1:x--:(Ne&128)!==0&&((Ne&64)===0?m=!1:(x++,(Ne&32)===0?E++:(x++,(Ne&16)===0?C++:(x++,(Ne&8)===0?k++:m=!1))))),u&&(Ne>127&&Ne<160?u=!1:Ne>159&&(Ne<192||Ne===215||Ne===247)&&pe++),f&&(P>0?Ne<64||Ne===127||Ne>252?f=!1:P--:Ne===128||Ne===160||Ne>239?f=!1:Ne>160&&Ne<224?(F++,Z=0,q++,q>J&&(J=q)):Ne>127?(P++,q=0,Z++,Z>ie&&(ie=Z)):(q=0,Z=0))}return m&&x>0&&(m=!1),f&&P>0&&(f=!1),m&&(Re||E+C+k>0)?Y.UTF8:f&&(Y.ASSUME_SHIFT_JIS||J>=3||ie>=3)?Y.SHIFT_JIS:u&&f?J===2&&F===2||pe*10>=a?Y.SHIFT_JIS:Y.ISO88591:u?Y.ISO88591:f?Y.SHIFT_JIS:m?Y.UTF8:Y.PLATFORM_DEFAULT_ENCODING}static format(r,...i){let a=-1;function u(m,x,E,C,k,P){if(m==="%%")return"%";if(i[++a]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let F=k?parseInt(k.substr(1)):void 0,q;switch(P){case"s":q=i[a];break;case"c":q=i[a][0];break;case"f":q=parseFloat(i[a]).toFixed(m);break;case"p":q=parseFloat(i[a]).toPrecision(m);break;case"e":q=parseFloat(i[a]).toExponential(m);break;case"x":q=parseInt(i[a]).toString(F||16);break;case"d":q=parseFloat(parseInt(i[a],F||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(F);let Z=parseInt(E),J=E&&E[0]+""=="0"?"0":" ";for(;q.length<Z;)q=x!==void 0?q+J:J+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,u)}static getBytes(r,i){return X.encode(r,i)}static getCharCode(r,i=0){return r.charCodeAt(i)}static getCharAt(r){return String.fromCharCode(r)}}Y.SHIFT_JIS=$.SJIS.getName(),Y.GB2312="GB2312",Y.ISO88591=$.ISO8859_1.getName(),Y.EUC_JP="EUC_JP",Y.UTF8=$.UTF8.getName(),Y.PLATFORM_DEFAULT_ENCODING=Y.UTF8,Y.ASSUME_SHIFT_JIS=!1;class fe{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=Y.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,i,a){for(let u=i;i<i+a;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,i){this.value=this.value.substr(0,r)+i+this.value.substr(r+1)}substring(r,i){return this.value.substring(r,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,i){this.value=this.value.substr(0,r)+i+this.value.substr(r+i.length)}}class oe{constructor(r,i,a,u){if(this.width=r,this.height=i,this.rowSize=a,this.bits=u,i==null&&(i=r),this.height=i,r<1||i<1)throw new N("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const i=r.length,a=r[0].length,u=new oe(a,i);for(let f=0;f<i;f++){const m=r[f];for(let x=0;x<a;x++)m[x]&&u.set(x,f)}return u}static parseFromString(r,i,a){if(r===null)throw new N("stringRepresentation cannot be null");const u=new Array(r.length);let f=0,m=0,x=-1,E=0,C=0;for(;C<r.length;)if(r.charAt(C)===`
`||r.charAt(C)==="\r"){if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new N("row lengths do not match");m=f,E++}C++}else if(r.substring(C,C+i.length)===i)C+=i.length,u[f]=!0,f++;else if(r.substring(C,C+a.length)===a)C+=a.length,u[f]=!1,f++;else throw new N("illegal character encountered: "+r.substring(C));if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new N("row lengths do not match");E++}const k=new oe(x,E);for(let P=0;P<f;P++)u[P]&&k.set(Math.floor(P%x),Math.floor(P/x));return k}get(r,i){const a=i*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,i){const a=i*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,i){const a=i*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,i){const a=i*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new N("input matrix dimensions do not match");const i=new V(Math.floor(this.width/32)+1),a=this.rowSize,u=this.bits;for(let f=0,m=this.height;f<m;f++){const x=f*a,E=r.getRow(f,i).getBitArray();for(let C=0;C<a;C++)u[x+C]^=E[C]}}clear(){const r=this.bits,i=r.length;for(let a=0;a<i;a++)r[a]=0}setRegion(r,i,a,u){if(i<0||r<0)throw new N("Left and top must be nonnegative");if(u<1||a<1)throw new N("Height and width must be at least 1");const f=r+a,m=i+u;if(m>this.height||f>this.width)throw new N("The region must fit inside the matrix");const x=this.rowSize,E=this.bits;for(let C=i;C<m;C++){const k=C*x;for(let P=r;P<f;P++)E[k+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(r,i){i==null||i.getSize()<this.width?i=new V(this.width):i.clear();const a=this.rowSize,u=this.bits,f=r*a;for(let m=0;m<a;m++)i.setBulk(m*32,u[f+m]);return i}setRow(r,i){I.arraycopy(i.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),i=this.getHeight();let a=new V(r),u=new V(r);for(let f=0,m=Math.floor((i+1)/2);f<m;f++)a=this.getRow(f,a),u=this.getRow(i-1-f,u),a.reverse(),u.reverse(),this.setRow(f,u),this.setRow(i-1-f,a)}getEnclosingRectangle(){const r=this.width,i=this.height,a=this.rowSize,u=this.bits;let f=r,m=i,x=-1,E=-1;for(let C=0;C<i;C++)for(let k=0;k<a;k++){const P=u[C*a+k];if(P!==0){if(C<m&&(m=C),C>E&&(E=C),k*32<f){let F=0;for(;(P<<31-F&4294967295)===0;)F++;k*32+F<f&&(f=k*32+F)}if(k*32+31>x){let F=31;for(;!(P>>>F);)F--;k*32+F>x&&(x=k*32+F)}}}return x<f||E<m?null:Int32Array.from([f,m,x-f+1,E-m+1])}getTopLeftOnBit(){const r=this.rowSize,i=this.bits;let a=0;for(;a<i.length&&i[a]===0;)a++;if(a===i.length)return null;const u=a/r;let f=a%r*32;const m=i[a];let x=0;for(;(m<<31-x&4294967295)===0;)x++;return f+=x,Int32Array.from([f,u])}getBottomRightOnBit(){const r=this.rowSize,i=this.bits;let a=i.length-1;for(;a>=0&&i[a]===0;)a--;if(a<0)return null;const u=Math.floor(a/r);let f=Math.floor(a%r)*32;const m=i[a];let x=31;for(;!(m>>>x);)x--;return f+=x,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof oe))return!1;const i=r;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&U.equals(this.bits,i.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+U.hashCode(this.bits),r}toString(r="X ",i="  ",a=`
`){return this.buildToString(r,i,a)}buildToString(r,i,a){let u=new fe;for(let f=0,m=this.height;f<m;f++){for(let x=0,E=this.width;x<E;x++)u.append(this.get(x,f)?r:i);u.append(a)}return u.toString()}clone(){return new oe(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends b{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class _e extends D{constructor(r){super(r),this.luminances=_e.EMPTY,this.buckets=new Int32Array(_e.LUMINANCE_BUCKETS)}getBlackRow(r,i){const a=this.getLuminanceSource(),u=a.getWidth();i==null||i.getSize()<u?i=new V(u):i.clear(),this.initArrays(u);const f=a.getRow(r,this.luminances),m=this.buckets;for(let E=0;E<u;E++)m[(f[E]&255)>>_e.LUMINANCE_SHIFT]++;const x=_e.estimateBlackPoint(m);if(u<3)for(let E=0;E<u;E++)(f[E]&255)<x&&i.set(E);else{let E=f[0]&255,C=f[1]&255;for(let k=1;k<u-1;k++){const P=f[k+1]&255;(C*4-E-P)/2<x&&i.set(k),E=C,C=P}}return i}getBlackMatrix(){const r=this.getLuminanceSource(),i=r.getWidth(),a=r.getHeight(),u=new oe(i,a);this.initArrays(i);const f=this.buckets;for(let E=1;E<5;E++){const C=Math.floor(a*E/5),k=r.getRow(C,this.luminances),P=Math.floor(i*4/5);for(let F=Math.floor(i/5);F<P;F++){const q=k[F]&255;f[q>>_e.LUMINANCE_SHIFT]++}}const m=_e.estimateBlackPoint(f),x=r.getMatrix();for(let E=0;E<a;E++){const C=E*i;for(let k=0;k<i;k++)(x[C+k]&255)<m&&u.set(k,E)}return u}createBinarizer(r){return new _e(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const i=this.buckets;for(let a=0;a<_e.LUMINANCE_BUCKETS;a++)i[a]=0}static estimateBlackPoint(r){const i=r.length;let a=0,u=0,f=0;for(let k=0;k<i;k++)r[k]>f&&(u=k,f=r[k]),r[k]>a&&(a=r[k]);let m=0,x=0;for(let k=0;k<i;k++){const P=k-u,F=r[k]*P*P;F>x&&(m=k,x=F)}if(u>m){const k=u;u=m,m=k}if(m-u<=i/16)throw new ee;let E=m-1,C=-1;for(let k=m-1;k>u;k--){const P=k-u,F=P*P*(m-k)*(a-r[k]);F>C&&(E=k,C=F)}return E<<_e.LUMINANCE_SHIFT}}_e.LUMINANCE_BITS=5,_e.LUMINANCE_SHIFT=8-_e.LUMINANCE_BITS,_e.LUMINANCE_BUCKETS=1<<_e.LUMINANCE_BITS,_e.EMPTY=Uint8ClampedArray.from([0]);class he extends _e{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),i=r.getWidth(),a=r.getHeight();if(i>=he.MINIMUM_DIMENSION&&a>=he.MINIMUM_DIMENSION){const u=r.getMatrix();let f=i>>he.BLOCK_SIZE_POWER;(i&he.BLOCK_SIZE_MASK)!==0&&f++;let m=a>>he.BLOCK_SIZE_POWER;(a&he.BLOCK_SIZE_MASK)!==0&&m++;const x=he.calculateBlackPoints(u,f,m,i,a),E=new oe(i,a);he.calculateThresholdForBlock(u,f,m,i,a,x,E),this.matrix=E}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new he(r)}static calculateThresholdForBlock(r,i,a,u,f,m,x){const E=f-he.BLOCK_SIZE,C=u-he.BLOCK_SIZE;for(let k=0;k<a;k++){let P=k<<he.BLOCK_SIZE_POWER;P>E&&(P=E);const F=he.cap(k,2,a-3);for(let q=0;q<i;q++){let Z=q<<he.BLOCK_SIZE_POWER;Z>C&&(Z=C);const J=he.cap(q,2,i-3);let ie=0;for(let Re=-2;Re<=2;Re++){const Oe=m[F+Re];ie+=Oe[J-2]+Oe[J-1]+Oe[J]+Oe[J+1]+Oe[J+2]}const pe=ie/25;he.thresholdBlock(r,Z,P,pe,u,x)}}}static cap(r,i,a){return r<i?i:r>a?a:r}static thresholdBlock(r,i,a,u,f,m){for(let x=0,E=a*f+i;x<he.BLOCK_SIZE;x++,E+=f)for(let C=0;C<he.BLOCK_SIZE;C++)(r[E+C]&255)<=u&&m.set(i+C,a+x)}static calculateBlackPoints(r,i,a,u,f){const m=f-he.BLOCK_SIZE,x=u-he.BLOCK_SIZE,E=new Array(a);for(let C=0;C<a;C++){E[C]=new Int32Array(i);let k=C<<he.BLOCK_SIZE_POWER;k>m&&(k=m);for(let P=0;P<i;P++){let F=P<<he.BLOCK_SIZE_POWER;F>x&&(F=x);let q=0,Z=255,J=0;for(let pe=0,Re=k*u+F;pe<he.BLOCK_SIZE;pe++,Re+=u){for(let Oe=0;Oe<he.BLOCK_SIZE;Oe++){const Ne=r[Re+Oe]&255;q+=Ne,Ne<Z&&(Z=Ne),Ne>J&&(J=Ne)}if(J-Z>he.MIN_DYNAMIC_RANGE)for(pe++,Re+=u;pe<he.BLOCK_SIZE;pe++,Re+=u)for(let Oe=0;Oe<he.BLOCK_SIZE;Oe++)q+=r[Re+Oe]&255}let ie=q>>he.BLOCK_SIZE_POWER*2;if(J-Z<=he.MIN_DYNAMIC_RANGE&&(ie=Z/2,C>0&&P>0)){const pe=(E[C-1][P]+2*E[C][P-1]+E[C-1][P-1])/4;Z<pe&&(ie=pe)}E[C][P]=ie}}return E}}he.BLOCK_SIZE_POWER=3,he.BLOCK_SIZE=1<<he.BLOCK_SIZE_POWER,he.BLOCK_SIZE_MASK=he.BLOCK_SIZE-1,he.MINIMUM_DIMENSION=he.BLOCK_SIZE*5,he.MIN_DYNAMIC_RANGE=24;class me{constructor(r,i){this.width=r,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,i,a,u){throw new be("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new be("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new be("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let i=new fe;for(let a=0;a<this.height;a++){const u=this.getRow(a,r);for(let f=0;f<this.width;f++){const m=u[f]&255;let x;m<64?x="#":m<128?x="+":m<192?x=".":x=" ",i.append(x)}i.append(`
`)}return i.toString()}}class ge extends me{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,i){const a=this.delegate.getRow(r,i),u=this.getWidth();for(let f=0;f<u;f++)a[f]=255-(a[f]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(i);for(let u=0;u<i;u++)a[u]=255-(r[u]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,i,a,u){return new ge(this.delegate.crop(r,i,a,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ge(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ge(this.delegate.rotateCounterClockwise45())}}class ve extends me{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ve.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const i=r.getContext("2d").getImageData(0,0,r.width,r.height);return ve.toGrayscaleBuffer(i.data,r.width,r.height)}static toGrayscaleBuffer(r,i,a){const u=new Uint8ClampedArray(i*a);for(let f=0,m=0,x=r.length;f<x;f+=4,m++){let E;if(r[f+3]===0)E=255;else{const k=r[f],P=r[f+1],F=r[f+2];E=306*k+601*P+117*F+512>>10}u[m]=E}return u}getRow(r,i){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const a=this.getWidth(),u=r*a;return i===null?i=this.buffer.slice(u,u+a):(i.length<a&&(i=new Uint8ClampedArray(a)),i.set(this.buffer.slice(u,u+a))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,i,a,u){return super.crop(r,i,a,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const i=this.getTempCanvasElement(),a=i.getContext("2d"),u=r*ve.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*m),E=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*m);return i.width=x,i.height=E,a.translate(x/2,E/2),a.rotate(u),a.drawImage(this.canvas,f/-2,m/-2),this.buffer=ve.makeBufferFromCanvasImageData(i),this}invert(){return new ge(this)}}ve.DEGREE_TO_RADIANS=Math.PI/180;class te{constructor(r,i,a){this.deviceId=r,this.label=i,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ue=(globalThis||Xc||self||window||void 0)&&(globalThis||Xc||self||window||void 0).__awaiter||function(j,r,i,a){function u(f){return f instanceof i?f:new i(function(m){m(f)})}return new(i||(i=Promise))(function(f,m){function x(k){try{C(a.next(k))}catch(P){m(P)}}function E(k){try{C(a.throw(k))}catch(P){m(P)}}function C(k){k.done?f(k.value):u(k.value).then(x,E)}C((a=a.apply(j,r||[])).next())})};class je{constructor(r,i=500,a){this.reader=r,this.timeBetweenScansMillis=i,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return ue(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const a of r){const u=a.kind==="video"?"videoinput":a.kind;if(u!=="videoinput")continue;const f=a.deviceId||a.id,m=a.label||`Video device ${i.length+1}`,x=a.groupId,E={deviceId:f,label:m,kind:u,groupId:x};i.push(E)}return i})}getVideoInputDevices(){return ue(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new te(i.deviceId,i.label))})}findDeviceById(r){return ue(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,i){return ue(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,i)})}decodeOnceFromVideoDevice(r,i){return ue(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeOnceFromConstraints(u,i)})}decodeOnceFromConstraints(r,i){return ue(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,i)})}decodeOnceFromStream(r,i){return ue(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,i);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,i,a){return ue(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,i,a)})}decodeFromVideoDevice(r,i,a){return ue(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,i,a)})}decodeFromConstraints(r,i,a){return ue(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,i,a)})}decodeFromStream(r,i,a){return ue(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,i);return yield this.decodeContinuously(u,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,i){return ue(this,void 0,void 0,function*(){const a=this.prepareVideoElement(i);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((i,a)=>this.playVideoOnLoad(r,()=>i()))}playVideoOnLoad(r,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",i),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return ue(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,i){const a=document.getElementById(r);if(!a)throw new S(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==i.toLowerCase())throw new S(`element with id '${r}' must be an ${i} element`);return a}decodeFromImage(r,i){if(!r&&!i)throw new S("either imageElement with a src set or an url must be provided");return i&&!r?this.decodeFromImageUrl(i):this.decodeFromImageElement(r)}decodeFromVideo(r,i){if(!r&&!i)throw new S("Either an element with a src set or an URL must be provided");return i&&!r?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,i,a){if(r===void 0&&i===void 0)throw new S("Either an element with a src set or an URL must be provided");return i&&!r?this.decodeFromVideoUrlContinuously(i,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const i=this.prepareImageElement(r);this.imageElement=i;let a;return this.isImageLoaded(i)?a=this.decodeOnce(i,!1,!0):a=this._decodeOnLoadImage(i),a}decodeFromVideoElement(r){const i=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(r,i){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,i)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const i=this.prepareVideoElement(r);return this.videoElement=i,i}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const a=this._decodeOnLoadImage(i);return i.src=r,a}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElement(i);return i.src=r,a}decodeFromVideoUrlContinuously(r,i){if(!r)throw new S("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(a,i);return a.src=r,u}_decodeOnLoadImage(r){return new Promise((i,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(i,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return ue(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,i){return ue(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,i)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let i;return typeof r>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof r=="string"&&(i=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(i=r),i}prepareVideoElement(r){let i;return!r&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof r=="string"&&(i=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(i=r),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(r,i=!0,a=!0){this._stopAsyncDecode=!1;const u=(f,m)=>{if(this._stopAsyncDecode){m(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(r);f(x)}catch(x){const E=i&&x instanceof ee,k=(x instanceof T||x instanceof H)&&a;if(E||k)return setTimeout(u,this._timeBetweenDecodingAttempts,f,m);m(x)}};return new Promise((f,m)=>u(f,m))}decodeContinuously(r,i){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);i(u,null),setTimeout(a,this.timeBetweenScansMillis)}catch(u){i(null,u);const f=u instanceof T||u instanceof H,m=u instanceof ee;(f||m)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const i=this.createBinaryBitmap(r);return this.decodeBitmap(i)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,i,a){i||(i={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(r,i,a=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const i=this.getCaptureCanvas(r),a=new ve(i),u=new he(a);return new R(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const i=this.createCaptureCanvas(r);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let a,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),i.style.width=a+"px",i.style.height=u+"px",i.width=a,i.height=u,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,i){try{r.srcObject=i}catch{r.src=URL.createObjectURL(i)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ie{constructor(r,i,a=i==null?0:8*i.length,u,f,m=I.currentTimeMillis()){this.text=r,this.rawBytes=i,this.numBits=a,this.resultPoints=u,this.format=f,this.timestamp=m,this.text=r,this.rawBytes=i,a==null?this.numBits=i==null?0:8*i.length:this.numBits=a,this.resultPoints=u,this.format=f,this.resultMetadata=null,m==null?this.timestamp=I.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,i)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const i=this.resultPoints;if(i===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(i.length+r.length);I.arraycopy(i,0,a,0,i.length),I.arraycopy(r,0,a,i.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var we;(function(j){j[j.AZTEC=0]="AZTEC",j[j.CODABAR=1]="CODABAR",j[j.CODE_39=2]="CODE_39",j[j.CODE_93=3]="CODE_93",j[j.CODE_128=4]="CODE_128",j[j.DATA_MATRIX=5]="DATA_MATRIX",j[j.EAN_8=6]="EAN_8",j[j.EAN_13=7]="EAN_13",j[j.ITF=8]="ITF",j[j.MAXICODE=9]="MAXICODE",j[j.PDF_417=10]="PDF_417",j[j.QR_CODE=11]="QR_CODE",j[j.RSS_14=12]="RSS_14",j[j.RSS_EXPANDED=13]="RSS_EXPANDED",j[j.UPC_A=14]="UPC_A",j[j.UPC_E=15]="UPC_E",j[j.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(we||(we={}));var ce=we,Ee;(function(j){j[j.OTHER=0]="OTHER",j[j.ORIENTATION=1]="ORIENTATION",j[j.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",j[j.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",j[j.ISSUE_NUMBER=4]="ISSUE_NUMBER",j[j.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",j[j.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",j[j.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",j[j.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",j[j.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",j[j.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ee||(Ee={}));var Te=Ee;class Ye{constructor(r,i,a,u,f=-1,m=-1){this.rawBytes=r,this.text=i,this.byteSegments=a,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ht{exp(r){return this.expTable[r]}log(r){if(r===0)throw new N;return this.logTable[r]}static addOrSubtract(r,i){return r^i}}class wt{constructor(r,i){if(i.length===0)throw new N;this.field=r;const a=i.length;if(a>1&&i[0]===0){let u=1;for(;u<a&&i[u]===0;)u++;u===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-u),I.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const i=this.coefficients;let a;if(r===1){a=0;for(let m=0,x=i.length;m!==x;m++){const E=i[m];a=ht.addOrSubtract(a,E)}return a}a=i[0];const u=i.length,f=this.field;for(let m=1;m<u;m++)a=ht.addOrSubtract(f.multiply(r,a),i[m]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let i=this.coefficients,a=r.coefficients;if(i.length>a.length){const m=i;i=a,a=m}let u=new Int32Array(a.length);const f=a.length-i.length;I.arraycopy(a,0,u,0,f);for(let m=f;m<a.length;m++)u[m]=ht.addOrSubtract(i[m-f],a[m]);return new wt(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const i=this.coefficients,a=i.length,u=r.coefficients,f=u.length,m=new Int32Array(a+f-1),x=this.field;for(let E=0;E<a;E++){const C=i[E];for(let k=0;k<f;k++)m[E+k]=ht.addOrSubtract(m[E+k],x.multiply(C,u[k]))}return new wt(x,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const i=this.coefficients.length,a=this.field,u=new Int32Array(i),f=this.coefficients;for(let m=0;m<i;m++)u[m]=a.multiply(f[m],r);return new wt(a,u)}multiplyByMonomial(r,i){if(r<0)throw new N;if(i===0)return this.field.getZero();const a=this.coefficients,u=a.length,f=new Int32Array(u+r),m=this.field;for(let x=0;x<u;x++)f[x]=m.multiply(a[x],i);return new wt(m,f)}divide(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new N("Divide by 0");const i=this.field;let a=i.getZero(),u=this;const f=r.getCoefficient(r.getDegree()),m=i.inverse(f);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const x=u.getDegree()-r.getDegree(),E=i.multiply(u.getCoefficient(u.getDegree()),m),C=r.multiplyByMonomial(x,E),k=i.buildMonomial(x,E);a=a.addOrSubtract(k),u=u.addOrSubtract(C)}return[a,u]}toString(){let r="";for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),i===0||a!==1){const u=this.field.log(a);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}i!==0&&(i===1?r+="x":(r+="x^",r+=i))}}return r}}class At extends b{}At.kind="ArithmeticException";class Ke extends ht{constructor(r,i,a){super(),this.primitive=r,this.size=i,this.generatorBase=a;const u=new Int32Array(i);let f=1;for(let x=0;x<i;x++)u[x]=f,f*=2,f>=i&&(f^=r,f&=i-1);this.expTable=u;const m=new Int32Array(i);for(let x=0;x<i-1;x++)m[u[x]]=x;this.logTable=m,this.zero=new wt(this,Int32Array.from([0])),this.one=new wt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,i){if(r<0)throw new N;if(i===0)return this.zero;const a=new Int32Array(r+1);return a[0]=i,new wt(this,a)}inverse(r){if(r===0)throw new At;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,i){return r===0||i===0?0:this.expTable[(this.logTable[r]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ke.AZTEC_DATA_12=new Ke(4201,4096,1),Ke.AZTEC_DATA_10=new Ke(1033,1024,1),Ke.AZTEC_DATA_6=new Ke(67,64,1),Ke.AZTEC_PARAM=new Ke(19,16,1),Ke.QR_CODE_FIELD_256=new Ke(285,256,0),Ke.DATA_MATRIX_FIELD_256=new Ke(301,256,1),Ke.AZTEC_DATA_8=Ke.DATA_MATRIX_FIELD_256,Ke.MAXICODE_FIELD_64=Ke.AZTEC_DATA_6;class Er extends b{}Er.kind="ReedSolomonException";class Lr extends b{}Lr.kind="IllegalStateException";class wn{constructor(r){this.field=r}decode(r,i){const a=this.field,u=new wt(a,r),f=new Int32Array(i);let m=!0;for(let q=0;q<i;q++){const Z=u.evaluateAt(a.exp(q+a.getGeneratorBase()));f[f.length-1-q]=Z,Z!==0&&(m=!1)}if(m)return;const x=new wt(a,f),E=this.runEuclideanAlgorithm(a.buildMonomial(i,1),x,i),C=E[0],k=E[1],P=this.findErrorLocations(C),F=this.findErrorMagnitudes(k,P);for(let q=0;q<P.length;q++){const Z=r.length-1-a.log(P[q]);if(Z<0)throw new Er("Bad error location");r[Z]=Ke.addOrSubtract(r[Z],F[q])}}runEuclideanAlgorithm(r,i,a){if(r.getDegree()<i.getDegree()){const q=r;r=i,i=q}const u=this.field;let f=r,m=i,x=u.getZero(),E=u.getOne();for(;m.getDegree()>=(a/2|0);){let q=f,Z=x;if(f=m,x=E,f.isZero())throw new Er("r_{i-1} was zero");m=q;let J=u.getZero();const ie=f.getCoefficient(f.getDegree()),pe=u.inverse(ie);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Re=m.getDegree()-f.getDegree(),Oe=u.multiply(m.getCoefficient(m.getDegree()),pe);J=J.addOrSubtract(u.buildMonomial(Re,Oe)),m=m.addOrSubtract(f.multiplyByMonomial(Re,Oe))}if(E=J.multiply(x).addOrSubtract(Z),m.getDegree()>=f.getDegree())throw new Lr("Division algorithm failed to reduce polynomial?")}const C=E.getCoefficient(0);if(C===0)throw new Er("sigmaTilde(0) was zero");const k=u.inverse(C),P=E.multiplyScalar(k),F=m.multiplyScalar(k);return[P,F]}findErrorLocations(r){const i=r.getDegree();if(i===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(i);let u=0;const f=this.field;for(let m=1;m<f.getSize()&&u<i;m++)r.evaluateAt(m)===0&&(a[u]=f.inverse(m),u++);if(u!==i)throw new Er("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,i){const a=i.length,u=new Int32Array(a),f=this.field;for(let m=0;m<a;m++){const x=f.inverse(i[m]);let E=1;for(let C=0;C<a;C++)if(m!==C){const k=f.multiply(i[C],x),P=(k&1)===0?k|1:k&-2;E=f.multiply(E,P)}u[m]=f.multiply(r.evaluateAt(x),f.inverse(E)),f.getGeneratorBase()!==0&&(u[m]=f.multiply(u[m],x))}return u}}var Jt;(function(j){j[j.UPPER=0]="UPPER",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.DIGIT=3]="DIGIT",j[j.PUNCT=4]="PUNCT",j[j.BINARY=5]="BINARY"})(Jt||(Jt={}));class _t{decode(r){this.ddata=r;let i=r.getBits(),a=this.extractBits(i),u=this.correctBits(a),f=_t.convertBoolArrayToByteArray(u),m=_t.getEncodedData(u),x=new Ye(f,m,null,null);return x.setNumBits(u.length),x}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let i=r.length,a=Jt.UPPER,u=Jt.UPPER,f="",m=0;for(;m<i;)if(u===Jt.BINARY){if(i-m<5)break;let x=_t.readCode(r,m,5);if(m+=5,x===0){if(i-m<11)break;x=_t.readCode(r,m,11)+31,m+=11}for(let E=0;E<x;E++){if(i-m<8){m=i;break}const C=_t.readCode(r,m,8);f+=Y.castAsNonUtf8Char(C),m+=8}u=a}else{let x=u===Jt.DIGIT?4:5;if(i-m<x)break;let E=_t.readCode(r,m,x);m+=x;let C=_t.getCharacter(u,E);C.startsWith("CTRL_")?(a=u,u=_t.getTable(C.charAt(5)),C.charAt(6)==="L"&&(a=u)):(f+=C,u=a)}return f}static getTable(r){switch(r){case"L":return Jt.LOWER;case"P":return Jt.PUNCT;case"M":return Jt.MIXED;case"D":return Jt.DIGIT;case"B":return Jt.BINARY;default:return Jt.UPPER}}static getCharacter(r,i){switch(r){case Jt.UPPER:return _t.UPPER_TABLE[i];case Jt.LOWER:return _t.LOWER_TABLE[i];case Jt.MIXED:return _t.MIXED_TABLE[i];case Jt.PUNCT:return _t.PUNCT_TABLE[i];case Jt.DIGIT:return _t.DIGIT_TABLE[i];default:throw new Lr("Bad table")}}correctBits(r){let i,a;this.ddata.getNbLayers()<=2?(a=6,i=Ke.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,i=Ke.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,i=Ke.AZTEC_DATA_10):(a=12,i=Ke.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=r.length/a;if(f<u)throw new H;let m=r.length%a,x=new Int32Array(f);for(let F=0;F<f;F++,m+=a)x[F]=_t.readCode(r,m,a);try{new wn(i).decode(x,f-u)}catch(F){throw new H(F)}let E=(1<<a)-1,C=0;for(let F=0;F<u;F++){let q=x[F];if(q===0||q===E)throw new H;(q===1||q===E-1)&&C++}let k=new Array(u*a-C),P=0;for(let F=0;F<u;F++){let q=x[F];if(q===1||q===E-1)k.fill(q>1,P,P+a-1),P+=a-1;else for(let Z=a-1;Z>=0;--Z)k[P++]=(q&1<<Z)!==0}return k}extractBits(r){let i=this.ddata.isCompact(),a=this.ddata.getNbLayers(),u=(i?11:14)+a*4,f=new Int32Array(u),m=new Array(this.totalBitsInLayer(a,i));if(i)for(let x=0;x<f.length;x++)f[x]=x;else{let x=u+1+2*B.truncDivision(B.truncDivision(u,2)-1,15),E=u/2,C=B.truncDivision(x,2);for(let k=0;k<E;k++){let P=k+B.truncDivision(k,15);f[E-k-1]=C-P-1,f[E+k]=C+P+1}}for(let x=0,E=0;x<a;x++){let C=(a-x)*4+(i?9:12),k=x*2,P=u-1-k;for(let F=0;F<C;F++){let q=F*2;for(let Z=0;Z<2;Z++)m[E+q+Z]=r.get(f[k+Z],f[k+F]),m[E+2*C+q+Z]=r.get(f[k+F],f[P-Z]),m[E+4*C+q+Z]=r.get(f[P-Z],f[P-F]),m[E+6*C+q+Z]=r.get(f[P-F],f[k+Z])}E+=C*8}return m}static readCode(r,i,a){let u=0;for(let f=i;f<i+a;f++)u<<=1,r[f]&&(u|=1);return u}static readByte(r,i){let a=r.length-i;return a>=8?_t.readCode(r,i,8):_t.readCode(r,i,a)<<8-a}static convertBoolArrayToByteArray(r){let i=new Uint8Array((r.length+7)/8);for(let a=0;a<i.length;a++)i[a]=_t.readByte(r,8*a);return i}totalBitsInLayer(r,i){return((i?88:112)+16*r)*r}}_t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],_t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],_t.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],_t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],_t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pt{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,i,a,u){const f=r-a,m=i-u;return Math.sqrt(f*f+m*m)}static sum(r){let i=0;for(let a=0,u=r.length;a!==u;a++){const f=r[a];i+=f}return i}}class vn{static floatToIntBits(r){return r}}vn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Le{constructor(r,i){this.x=r,this.y=i}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Le){const i=r;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*vn.floatToIntBits(this.x)+vn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const i=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let f,m,x;if(a>=i&&a>=u?(m=r[0],f=r[1],x=r[2]):u>=a&&u>=i?(m=r[1],f=r[0],x=r[2]):(m=r[2],f=r[0],x=r[1]),this.crossProductZ(f,m,x)<0){const E=f;f=x,x=E}r[0]=f,r[1]=m,r[2]=x}static distance(r,i){return pt.distance(r.x,r.y,i.x,i.y)}static crossProductZ(r,i,a){const u=i.x,f=i.y;return(a.x-u)*(r.y-f)-(a.y-f)*(r.x-u)}}class Jn{constructor(r,i){this.bits=r,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class bn extends Jn{constructor(r,i,a,u,f){super(r,i),this.compact=a,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ln{constructor(r,i,a,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),i==null&&(i=ln.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const f=i/2|0;if(this.leftInit=a-f,this.rightInit=a+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let r=this.leftInit,i=this.rightInit,a=this.upInit,u=this.downInit,f=!1,m=!0,x=!1,E=!1,C=!1,k=!1,P=!1;const F=this.width,q=this.height;for(;m;){m=!1;let Z=!0;for(;(Z||!E)&&i<F;)Z=this.containsBlackPoint(a,u,i,!1),Z?(i++,m=!0,E=!0):E||i++;if(i>=F){f=!0;break}let J=!0;for(;(J||!C)&&u<q;)J=this.containsBlackPoint(r,i,u,!0),J?(u++,m=!0,C=!0):C||u++;if(u>=q){f=!0;break}let ie=!0;for(;(ie||!k)&&r>=0;)ie=this.containsBlackPoint(a,u,r,!1),ie?(r--,m=!0,k=!0):k||r--;if(r<0){f=!0;break}let pe=!0;for(;(pe||!P)&&a>=0;)pe=this.containsBlackPoint(r,i,a,!0),pe?(a--,m=!0,P=!0):P||a--;if(a<0){f=!0;break}m&&(x=!0)}if(!f&&x){const Z=i-r;let J=null;for(let Oe=1;J===null&&Oe<Z;Oe++)J=this.getBlackPointOnSegment(r,u-Oe,r+Oe,u);if(J==null)throw new ee;let ie=null;for(let Oe=1;ie===null&&Oe<Z;Oe++)ie=this.getBlackPointOnSegment(r,a+Oe,r+Oe,a);if(ie==null)throw new ee;let pe=null;for(let Oe=1;pe===null&&Oe<Z;Oe++)pe=this.getBlackPointOnSegment(i,a+Oe,i-Oe,a);if(pe==null)throw new ee;let Re=null;for(let Oe=1;Re===null&&Oe<Z;Oe++)Re=this.getBlackPointOnSegment(i,u-Oe,i-Oe,u);if(Re==null)throw new ee;return this.centerEdges(Re,J,pe,ie)}else throw new ee}getBlackPointOnSegment(r,i,a,u){const f=pt.round(pt.distance(r,i,a,u)),m=(a-r)/f,x=(u-i)/f,E=this.image;for(let C=0;C<f;C++){const k=pt.round(r+C*m),P=pt.round(i+C*x);if(E.get(k,P))return new Le(k,P)}return null}centerEdges(r,i,a,u){const f=r.getX(),m=r.getY(),x=i.getX(),E=i.getY(),C=a.getX(),k=a.getY(),P=u.getX(),F=u.getY(),q=ln.CORR;return f<this.width/2?[new Le(P-q,F+q),new Le(x+q,E+q),new Le(C-q,k-q),new Le(f+q,m-q)]:[new Le(P+q,F+q),new Le(x+q,E-q),new Le(C-q,k+q),new Le(f-q,m-q)]}containsBlackPoint(r,i,a,u){const f=this.image;if(u){for(let m=r;m<=i;m++)if(f.get(m,a))return!0}else for(let m=r;m<=i;m++)if(f.get(a,m))return!0;return!1}}ln.INIT_SIZE=10,ln.CORR=1;class ci{static checkAndNudgePoints(r,i){const a=r.getWidth(),u=r.getHeight();let f=!0;for(let m=0;m<i.length&&f;m+=2){const x=Math.floor(i[m]),E=Math.floor(i[m+1]);if(x<-1||x>a||E<-1||E>u)throw new ee;f=!1,x===-1?(i[m]=0,f=!0):x===a&&(i[m]=a-1,f=!0),E===-1?(i[m+1]=0,f=!0):E===u&&(i[m+1]=u-1,f=!0)}f=!0;for(let m=i.length-2;m>=0&&f;m-=2){const x=Math.floor(i[m]),E=Math.floor(i[m+1]);if(x<-1||x>a||E<-1||E>u)throw new ee;f=!1,x===-1?(i[m]=0,f=!0):x===a&&(i[m]=a-1,f=!0),E===-1?(i[m+1]=0,f=!0):E===u&&(i[m+1]=u-1,f=!0)}}}class Dt{constructor(r,i,a,u,f,m,x,E,C){this.a11=r,this.a21=i,this.a31=a,this.a12=u,this.a22=f,this.a32=m,this.a13=x,this.a23=E,this.a33=C}static quadrilateralToQuadrilateral(r,i,a,u,f,m,x,E,C,k,P,F,q,Z,J,ie){const pe=Dt.quadrilateralToSquare(r,i,a,u,f,m,x,E);return Dt.squareToQuadrilateral(C,k,P,F,q,Z,J,ie).times(pe)}transformPoints(r){const i=r.length,a=this.a11,u=this.a12,f=this.a13,m=this.a21,x=this.a22,E=this.a23,C=this.a31,k=this.a32,P=this.a33;for(let F=0;F<i;F+=2){const q=r[F],Z=r[F+1],J=f*q+E*Z+P;r[F]=(a*q+m*Z+C)/J,r[F+1]=(u*q+x*Z+k)/J}}transformPointsWithValues(r,i){const a=this.a11,u=this.a12,f=this.a13,m=this.a21,x=this.a22,E=this.a23,C=this.a31,k=this.a32,P=this.a33,F=r.length;for(let q=0;q<F;q++){const Z=r[q],J=i[q],ie=f*Z+E*J+P;r[q]=(a*Z+m*J+C)/ie,i[q]=(u*Z+x*J+k)/ie}}static squareToQuadrilateral(r,i,a,u,f,m,x,E){const C=r-a+f-x,k=i-u+m-E;if(C===0&&k===0)return new Dt(a-r,f-a,r,u-i,m-u,i,0,0,1);{const P=a-f,F=x-f,q=u-m,Z=E-m,J=P*Z-F*q,ie=(C*Z-F*k)/J,pe=(P*k-C*q)/J;return new Dt(a-r+ie*a,x-r+pe*x,r,u-i+ie*u,E-i+pe*E,i,ie,pe,1)}}static quadrilateralToSquare(r,i,a,u,f,m,x,E){return Dt.squareToQuadrilateral(r,i,a,u,f,m,x,E).buildAdjoint()}buildAdjoint(){return new Dt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Dt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class En extends ci{sampleGrid(r,i,a,u,f,m,x,E,C,k,P,F,q,Z,J,ie,pe,Re,Oe){const Ne=Dt.quadrilateralToQuadrilateral(u,f,m,x,E,C,k,P,F,q,Z,J,ie,pe,Re,Oe);return this.sampleGridWithTransform(r,i,a,Ne)}sampleGridWithTransform(r,i,a,u){if(i<=0||a<=0)throw new ee;const f=new oe(i,a),m=new Float32Array(2*i);for(let x=0;x<a;x++){const E=m.length,C=x+.5;for(let k=0;k<E;k+=2)m[k]=k/2+.5,m[k+1]=C;u.transformPoints(m),ci.checkAndNudgePoints(r,m);try{for(let k=0;k<E;k+=2)r.get(Math.floor(m[k]),Math.floor(m[k+1]))&&f.set(k/2,x)}catch{throw new ee}}return f}}class en{static setGridSampler(r){en.gridSampler=r}static getInstance(){return en.gridSampler}}en.gridSampler=new En;class xr{constructor(r,i){this.x=r,this.y=i}toResultPoint(){return new Le(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Cn{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let i=this.getMatrixCenter(),a=this.getBullsEyeCorners(i);if(r){let m=a[0];a[0]=a[2],a[2]=m}this.extractParameters(a);let u=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),f=this.getMatrixCornerPoints(a);return new bn(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ee;let i=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],i),this.sampleLine(r[1],r[2],i),this.sampleLine(r[2],r[3],i),this.sampleLine(r[3],r[0],i)]);this.shift=this.getRotation(a,i);let u=0;for(let m=0;m<4;m++){let x=a[(this.shift+m)%4];this.compact?(u<<=7,u+=x>>1&127):(u<<=10,u+=(x>>2&992)+(x>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(r,i){let a=0;r.forEach((u,f,m)=>{let x=(u>>i-2<<1)+(u&1);a=(a<<3)+x}),a=((a&1)<<11)+(a>>1);for(let u=0;u<4;u++)if(B.bitCount(a^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ee}getCorrectedParameterData(r,i){let a,u;i?(a=7,u=2):(a=10,u=4);let f=a-u,m=new Int32Array(a);for(let E=a-1;E>=0;--E)m[E]=r&15,r>>=4;try{new wn(Ke.AZTEC_PARAM).decode(m,f)}catch{throw new ee}let x=0;for(let E=0;E<u;E++)x=(x<<4)+m[E];return x}getBullsEyeCorners(r){let i=r,a=r,u=r,f=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(i,m,1,-1),F=this.getFirstDifferent(a,m,1,1),q=this.getFirstDifferent(u,m,-1,1),Z=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(Z,P)*this.nbCenterLayers/(this.distancePoint(f,i)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(P,F,q,Z))break}i=P,a=F,u=q,f=Z,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let x=new Le(i.getX()+.5,i.getY()-.5),E=new Le(a.getX()+.5,a.getY()+.5),C=new Le(u.getX()-.5,u.getY()+.5),k=new Le(f.getX()-.5,f.getY()-.5);return this.expandSquare([x,E,C,k],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,i,a,u;try{let x=new ln(this.image).detect();r=x[0],i=x[1],a=x[2],u=x[3]}catch{let E=this.image.getWidth()/2,C=this.image.getHeight()/2;r=this.getFirstDifferent(new xr(E+7,C-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new xr(E+7,C+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new xr(E-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new xr(E-7,C-7),!1,-1,-1).toResultPoint()}let f=pt.round((r.getX()+u.getX()+i.getX()+a.getX())/4),m=pt.round((r.getY()+u.getY()+i.getY()+a.getY())/4);try{let x=new ln(this.image,15,f,m).detect();r=x[0],i=x[1],a=x[2],u=x[3]}catch{r=this.getFirstDifferent(new xr(f+7,m-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new xr(f+7,m+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new xr(f-7,m+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new xr(f-7,m-7),!1,-1,-1).toResultPoint()}return f=pt.round((r.getX()+u.getX()+i.getX()+a.getX())/4),m=pt.round((r.getY()+u.getY()+i.getY()+a.getY())/4),new xr(f,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,i,a,u,f){let m=en.getInstance(),x=this.getDimension(),E=x/2-this.nbCenterLayers,C=x/2+this.nbCenterLayers;return m.sampleGrid(r,x,x,E,E,C,E,C,C,E,C,i.getX(),i.getY(),a.getX(),a.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(r,i,a){let u=0,f=this.distanceResultPoint(r,i),m=f/a,x=r.getX(),E=r.getY(),C=m*(i.getX()-r.getX())/f,k=m*(i.getY()-r.getY())/f;for(let P=0;P<a;P++)this.image.get(pt.round(x+P*C),pt.round(E+P*k))&&(u|=1<<a-P-1);return u}isWhiteOrBlackRectangle(r,i,a,u){let f=3;r=new xr(r.getX()-f,r.getY()+f),i=new xr(i.getX()-f,i.getY()-f),a=new xr(a.getX()+f,a.getY()-f),u=new xr(u.getX()+f,u.getY()+f);let m=this.getColor(u,r);if(m===0)return!1;let x=this.getColor(r,i);return x!==m||(x=this.getColor(i,a),x!==m)?!1:(x=this.getColor(a,u),x===m)}getColor(r,i){let a=this.distancePoint(r,i),u=(i.getX()-r.getX())/a,f=(i.getY()-r.getY())/a,m=0,x=r.getX(),E=r.getY(),C=this.image.get(r.getX(),r.getY()),k=Math.ceil(a);for(let F=0;F<k;F++)x+=u,E+=f,this.image.get(pt.round(x),pt.round(E))!==C&&m++;let P=m/a;return P>.1&&P<.9?0:P<=.1===C?1:-1}getFirstDifferent(r,i,a,u){let f=r.getX()+a,m=r.getY()+u;for(;this.isValid(f,m)&&this.image.get(f,m)===i;)f+=a,m+=u;for(f-=a,m-=u;this.isValid(f,m)&&this.image.get(f,m)===i;)f+=a;for(f-=a;this.isValid(f,m)&&this.image.get(f,m)===i;)m+=u;return m-=u,new xr(f,m)}expandSquare(r,i,a){let u=a/(2*i),f=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),x=(r[0].getX()+r[2].getX())/2,E=(r[0].getY()+r[2].getY())/2,C=new Le(x+u*f,E+u*m),k=new Le(x-u*f,E-u*m);f=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),x=(r[1].getX()+r[3].getX())/2,E=(r[1].getY()+r[3].getY())/2;let P=new Le(x+u*f,E+u*m),F=new Le(x-u*f,E-u*m);return[C,P,k,F]}isValid(r,i){return r>=0&&r<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(r){let i=pt.round(r.getX()),a=pt.round(r.getY());return this.isValid(i,a)}distancePoint(r,i){return pt.distance(r.getX(),r.getY(),i.getX(),i.getY())}distanceResultPoint(r,i){return pt.distance(r.getX(),r.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class Un{decode(r,i=null){let a=null,u=new Cn(r.getBlackMatrix()),f=null,m=null;try{let k=u.detectMirror(!1);f=k.getPoints(),this.reportFoundResultPoints(i,f),m=new _t().decode(k)}catch(k){a=k}if(m==null)try{let k=u.detectMirror(!0);f=k.getPoints(),this.reportFoundResultPoints(i,f),m=new _t().decode(k)}catch(k){throw a??k}let x=new Ie(m.getText(),m.getRawBytes(),m.getNumBits(),f,ce.AZTEC,I.currentTimeMillis()),E=m.getByteSegments();E!=null&&x.putMetadata(Te.BYTE_SEGMENTS,E);let C=m.getECLevel();return C!=null&&x.putMetadata(Te.ERROR_CORRECTION_LEVEL,C),x}reportFoundResultPoints(r,i){if(r!=null){let a=r.get(G.NEED_RESULT_POINT_CALLBACK);a!=null&&i.forEach((u,f,m)=>{a.foundPossibleResultPoint(u)})}}reset(){}}class Ro extends je{constructor(r=500){super(new Un,r)}}class Mt{decode(r,i){try{return this.doDecode(r,i)}catch{if(i&&i.get(G.TRY_HARDER)===!0&&r.isRotateSupported()){const f=r.rotateCounterClockwise(),m=this.doDecode(f,i),x=m.getResultMetadata();let E=270;x!==null&&x.get(Te.ORIENTATION)===!0&&(E=E+x.get(Te.ORIENTATION)%360),m.putMetadata(Te.ORIENTATION,E);const C=m.getResultPoints();if(C!==null){const k=f.getHeight();for(let P=0;P<C.length;P++)C[P]=new Le(k-C[P].getY()-1,C[P].getX())}return m}else throw new ee}}reset(){}doDecode(r,i){const a=r.getWidth(),u=r.getHeight();let f=new V(a);const m=i&&i.get(G.TRY_HARDER)===!0,x=Math.max(1,u>>(m?8:5));let E;m?E=u:E=15;const C=Math.trunc(u/2);for(let k=0;k<E;k++){const P=Math.trunc((k+1)/2),F=(k&1)===0,q=C+x*(F?P:-P);if(q<0||q>=u)break;try{f=r.getBlackRow(q,f)}catch{continue}for(let Z=0;Z<2;Z++){if(Z===1&&(f.reverse(),i&&i.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;i.forEach((ie,pe)=>J.set(pe,ie)),J.delete(G.NEED_RESULT_POINT_CALLBACK),i=J}try{const J=this.decodeRow(q,f,i);if(Z===1){J.putMetadata(Te.ORIENTATION,180);const ie=J.getResultPoints();ie!==null&&(ie[0]=new Le(a-ie[0].getX()-1,ie[0].getY()),ie[1]=new Le(a-ie[1].getX()-1,ie[1].getY()))}return J}catch{}}}throw new ee}static recordPattern(r,i,a){const u=a.length;for(let C=0;C<u;C++)a[C]=0;const f=r.getSize();if(i>=f)throw new ee;let m=!r.get(i),x=0,E=i;for(;E<f;){if(r.get(E)!==m)a[x]++;else{if(++x===u)break;a[x]=1,m=!m}E++}if(!(x===u||x===u-1&&E===f))throw new ee}static recordPatternInReverse(r,i,a){let u=a.length,f=r.get(i);for(;i>0&&u>=0;)r.get(--i)!==f&&(u--,f=!f);if(u>=0)throw new ee;Mt.recordPattern(r,i+1,a)}static patternMatchVariance(r,i,a){const u=r.length;let f=0,m=0;for(let C=0;C<u;C++)f+=r[C],m+=i[C];if(f<m)return Number.POSITIVE_INFINITY;const x=f/m;a*=x;let E=0;for(let C=0;C<u;C++){const k=r[C],P=i[C]*x,F=k>P?k-P:P-k;if(F>a)return Number.POSITIVE_INFINITY;E+=F}return E/f}}class Pe extends Mt{static findStartPattern(r){const i=r.getSize(),a=r.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),m=a,x=!1;const E=6;for(let C=a;C<i;C++)if(r.get(C)!==x)f[u]++;else{if(u===E-1){let k=Pe.MAX_AVG_VARIANCE,P=-1;for(let F=Pe.CODE_START_A;F<=Pe.CODE_START_C;F++){const q=Mt.patternMatchVariance(f,Pe.CODE_PATTERNS[F],Pe.MAX_INDIVIDUAL_VARIANCE);q<k&&(k=q,P=F)}if(P>=0&&r.isRange(Math.max(0,m-(C-m)/2),m,!1))return Int32Array.from([m,C,P]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,x=!x}throw new ee}static decodeCode(r,i,a){Mt.recordPattern(r,a,i);let u=Pe.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<Pe.CODE_PATTERNS.length;m++){const x=Pe.CODE_PATTERNS[m],E=this.patternMatchVariance(i,x,Pe.MAX_INDIVIDUAL_VARIANCE);E<u&&(u=E,f=m)}if(f>=0)return f;throw new ee}decodeRow(r,i,a){const u=a&&a.get(G.ASSUME_GS1)===!0,f=Pe.findStartPattern(i),m=f[2];let x=0;const E=new Uint8Array(20);E[x++]=m;let C;switch(m){case Pe.CODE_START_A:C=Pe.CODE_CODE_A;break;case Pe.CODE_START_B:C=Pe.CODE_CODE_B;break;case Pe.CODE_START_C:C=Pe.CODE_CODE_C;break;default:throw new H}let k=!1,P=!1,F="",q=f[0],Z=f[1];const J=Int32Array.from([0,0,0,0,0,0]);let ie=0,pe=0,Re=m,Oe=0,Ne=!0,gt=!1,at=!1;for(;!k;){const ss=P;switch(P=!1,ie=pe,pe=Pe.decodeCode(i,J,Z),E[x++]=pe,pe!==Pe.CODE_STOP&&(Ne=!0),pe!==Pe.CODE_STOP&&(Oe++,Re+=Oe*pe),q=Z,Z+=J.reduce((vi,Xa)=>vi+Xa,0),pe){case Pe.CODE_START_A:case Pe.CODE_START_B:case Pe.CODE_START_C:throw new H}switch(C){case Pe.CODE_CODE_A:if(pe<64)at===gt?F+=String.fromCharCode(32+pe):F+=String.fromCharCode(32+pe+128),at=!1;else if(pe<96)at===gt?F+=String.fromCharCode(pe-64):F+=String.fromCharCode(pe+64),at=!1;else switch(pe!==Pe.CODE_STOP&&(Ne=!1),pe){case Pe.CODE_FNC_1:u&&(F.length===0?F+="]C1":F+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_A:!gt&&at?(gt=!0,at=!1):gt&&at?(gt=!1,at=!1):at=!0;break;case Pe.CODE_SHIFT:P=!0,C=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_B:C=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_C:C=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:k=!0;break}break;case Pe.CODE_CODE_B:if(pe<96)at===gt?F+=String.fromCharCode(32+pe):F+=String.fromCharCode(32+pe+128),at=!1;else switch(pe!==Pe.CODE_STOP&&(Ne=!1),pe){case Pe.CODE_FNC_1:u&&(F.length===0?F+="]C1":F+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_B:!gt&&at?(gt=!0,at=!1):gt&&at?(gt=!1,at=!1):at=!0;break;case Pe.CODE_SHIFT:P=!0,C=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_A:C=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_C:C=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:k=!0;break}break;case Pe.CODE_CODE_C:if(pe<100)pe<10&&(F+="0"),F+=pe;else switch(pe!==Pe.CODE_STOP&&(Ne=!1),pe){case Pe.CODE_FNC_1:u&&(F.length===0?F+="]C1":F+="");break;case Pe.CODE_CODE_A:C=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_B:C=Pe.CODE_CODE_B;break;case Pe.CODE_STOP:k=!0;break}break}ss&&(C=C===Pe.CODE_CODE_A?Pe.CODE_CODE_B:Pe.CODE_CODE_A)}const Xr=Z-q;if(Z=i.getNextUnset(Z),!i.isRange(Z,Math.min(i.getSize(),Z+(Z-q)/2),!1))throw new ee;if(Re-=Oe*ie,Re%103!==ie)throw new T;const In=F.length;if(In===0)throw new ee;In>0&&Ne&&(C===Pe.CODE_CODE_C?F=F.substring(0,In-2):F=F.substring(0,In-1));const hr=(f[1]+f[0])/2,kt=q+Xr/2,er=E.length,zr=new Uint8Array(er);for(let ss=0;ss<er;ss++)zr[ss]=E[ss];const Fs=[new Le(hr,r),new Le(kt,r)];return new Ie(F,zr,0,Fs,ce.CODE_128,new Date().getTime())}}Pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Pe.MAX_AVG_VARIANCE=.25,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.CODE_SHIFT=98,Pe.CODE_CODE_C=99,Pe.CODE_CODE_B=100,Pe.CODE_CODE_A=101,Pe.CODE_FNC_1=102,Pe.CODE_FNC_2=97,Pe.CODE_FNC_3=96,Pe.CODE_FNC_4_A=101,Pe.CODE_FNC_4_B=100,Pe.CODE_START_A=103,Pe.CODE_START_B=104,Pe.CODE_START_C=105,Pe.CODE_STOP=106;class Xt extends Mt{constructor(r=!1,i=!1){super(),this.usingCheckDigit=r,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,i,a){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=Xt.findAsteriskPattern(i,u),m=i.getNextSet(f[1]),x=i.getSize(),E,C;do{Xt.recordPattern(i,m,u);let J=Xt.toNarrowWidePattern(u);if(J<0)throw new ee;E=Xt.patternToChar(J),this.decodeRowResult+=E,C=m;for(let ie of u)m+=ie;m=i.getNextSet(m)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let k=0;for(let J of u)k+=J;let P=m-C-k;if(m!==x&&P*2<k)throw new ee;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,ie=0;for(let pe=0;pe<J;pe++)ie+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt(J)!==Xt.ALPHABET_STRING.charAt(ie%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new ee;let F;this.extendedMode?F=Xt.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;let q=(f[1]+f[0])/2,Z=C+k/2;return new Ie(F,null,0,[new Le(q,r),new Le(Z,r)],ce.CODE_39,new Date().getTime())}static findAsteriskPattern(r,i){let a=r.getSize(),u=r.getNextSet(0),f=0,m=u,x=!1,E=i.length;for(let C=u;C<a;C++)if(r.get(C)!==x)i[f]++;else{if(f===E-1){if(this.toNarrowWidePattern(i)===Xt.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((C-m)/2)),m,!1))return[m,C];m+=i[0]+i[1],i.copyWithin(0,2,2+f-1),i[f-1]=0,i[f]=0,f--}else f++;i[f]=1,x=!x}throw new ee}static toNarrowWidePattern(r){let i=r.length,a=0,u;do{let f=2147483647;for(let E of r)E<f&&E>a&&(f=E);a=f,u=0;let m=0,x=0;for(let E=0;E<i;E++){let C=r[E];C>a&&(x|=1<<i-1-E,u++,m+=C)}if(u===3){for(let E=0;E<i&&u>0;E++){let C=r[E];if(C>a&&(u--,C*2>=m))return-1}return x}}while(u>3);return-1}static patternToChar(r){for(let i=0;i<Xt.CHARACTER_ENCODINGS.length;i++)if(Xt.CHARACTER_ENCODINGS[i]===r)return Xt.ALPHABET_STRING.charAt(i);if(r===Xt.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(r){let i=r.length,a="";for(let u=0;u<i;u++){let f=r.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=r.charAt(u+1),x="\0";switch(f){case"+":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)+32);else throw new H;break;case"$":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)-64);else throw new H;break;case"%":if(m>="A"&&m<="E")x=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")x=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")x=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")x="\0";else if(m==="V")x="@";else if(m==="W")x="`";else if(m==="X"||m==="Y"||m==="Z")x="";else throw new H;break;case"/":if(m>="A"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")x=":";else throw new H;break}a+=x,u++}else a+=f}return a}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class xt extends Mt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,i,a){let u=this.decodeStart(i),f=this.decodeEnd(i),m=new fe;xt.decodeMiddle(i,u[1],f[0],m);let x=m.toString(),E=null;a!=null&&(E=a.get(G.ALLOWED_LENGTHS)),E==null&&(E=xt.DEFAULT_ALLOWED_LENGTHS);let C=x.length,k=!1,P=0;for(let Z of E){if(C===Z){k=!0;break}Z>P&&(P=Z)}if(!k&&C>P&&(k=!0),!k)throw new H;const F=[new Le(u[1],r),new Le(f[0],r)];return new Ie(x,null,0,F,ce.ITF,new Date().getTime())}static decodeMiddle(r,i,a,u){let f=new Int32Array(10),m=new Int32Array(5),x=new Int32Array(5);for(f.fill(0),m.fill(0),x.fill(0);i<a;){Mt.recordPattern(r,i,f);for(let C=0;C<5;C++){let k=2*C;m[C]=f[k],x[C]=f[k+1]}let E=xt.decodeDigit(m);u.append(E.toString()),E=this.decodeDigit(x),u.append(E.toString()),f.forEach(function(C){i+=C})}}decodeStart(r){let i=xt.skipWhiteSpace(r),a=xt.findGuardPattern(r,i,xt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,i){let a=this.narrowLineWidth*10;a=a<i?a:i;for(let u=i-1;a>0&&u>=0&&!r.get(u);u--)a--;if(a!==0)throw new ee}static skipWhiteSpace(r){const i=r.getSize(),a=r.getNextSet(0);if(a===i)throw new ee;return a}decodeEnd(r){r.reverse();try{let i=xt.skipWhiteSpace(r),a;try{a=xt.findGuardPattern(r,i,xt.END_PATTERN_REVERSED[0])}catch(f){f instanceof ee&&(a=xt.findGuardPattern(r,i,xt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let u=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-u,a}finally{r.reverse()}}static findGuardPattern(r,i,a){let u=a.length,f=new Int32Array(u),m=r.getSize(),x=!1,E=0,C=i;f.fill(0);for(let k=i;k<m;k++)if(r.get(k)!==x)f[E]++;else{if(E===u-1){if(Mt.patternMatchVariance(f,a,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return[C,k];C+=f[0]+f[1],I.arraycopy(f,2,f,0,E-1),f[E-1]=0,f[E]=0,E--}else E++;f[E]=1,x=!x}throw new ee}static decodeDigit(r){let i=xt.MAX_AVG_VARIANCE,a=-1,u=xt.PATTERNS.length;for(let f=0;f<u;f++){let m=xt.PATTERNS[f],x=Mt.patternMatchVariance(r,m,xt.MAX_INDIVIDUAL_VARIANCE);x<i?(i=x,a=f):x===i&&(a=-1)}if(a>=0)return a%10;throw new ee}}xt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xt.MAX_AVG_VARIANCE=.38,xt.MAX_INDIVIDUAL_VARIANCE=.5,xt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xt.START_PATTERN=Int32Array.from([1,1,1,1]),xt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class jt extends Mt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let i=!1,a,u=0,f=Int32Array.from([0,0,0]);for(;!i;){f=Int32Array.from([0,0,0]),a=jt.findGuardPattern(r,u,!1,this.START_END_PATTERN,f);let m=a[0];u=a[1];let x=m-(u-m);x>=0&&(i=r.isRange(x,m,!1))}return a}static checkChecksum(r){return jt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let i=r.length;if(i===0)return!1;let a=parseInt(r.charAt(i-1),10);return jt.getStandardUPCEANChecksum(r.substring(0,i-1))===a}static getStandardUPCEANChecksum(r){let i=r.length,a=0;for(let u=i-1;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new H;a+=f}a*=3;for(let u=i-2;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new H;a+=f}return(1e3-a)%10}static decodeEnd(r,i){return jt.findGuardPattern(r,i,!1,jt.START_END_PATTERN,new Int32Array(jt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,i,a,u){return this.findGuardPattern(r,i,a,u,new Int32Array(u.length))}static findGuardPattern(r,i,a,u,f){let m=r.getSize();i=a?r.getNextUnset(i):r.getNextSet(i);let x=0,E=i,C=u.length,k=a;for(let P=i;P<m;P++)if(r.get(P)!==k)f[x]++;else{if(x===C-1){if(Mt.patternMatchVariance(f,u,jt.MAX_INDIVIDUAL_VARIANCE)<jt.MAX_AVG_VARIANCE)return Int32Array.from([E,P]);E+=f[0]+f[1];let F=f.slice(2,f.length-1);for(let q=0;q<x-1;q++)f[q]=F[q];f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,k=!k}throw new ee}static decodeDigit(r,i,a,u){this.recordPattern(r,a,i);let f=this.MAX_AVG_VARIANCE,m=-1,x=u.length;for(let E=0;E<x;E++){let C=u[E],k=Mt.patternMatchVariance(i,C,jt.MAX_INDIVIDUAL_VARIANCE);k<f&&(f=k,m=E)}if(m>=0)return m;throw new ee}}jt.MAX_AVG_VARIANCE=.48,jt.MAX_INDIVIDUAL_VARIANCE=.7,jt.START_END_PATTERN=Int32Array.from([1,1,1]),jt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),jt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class es{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,i,a){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(i,a,u),m=u.toString(),x=es.parseExtensionString(m),E=[new Le((a[0]+a[1])/2,r),new Le(f,r)],C=new Ie(m,null,0,E,ce.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(r,i,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m=i[1],x=0;for(let C=0;C<5&&m<f;C++){let k=jt.decodeDigit(r,u,m,jt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+k%10);for(let P of u)m+=P;k>=10&&(x|=1<<4-C),C!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(a.length!==5)throw new ee;let E=this.determineCheckDigit(x);if(es.extensionChecksum(a.toString())!==E)throw new ee;return m}static extensionChecksum(r){let i=r.length,a=0;for(let u=i-2;u>=0;u-=2)a+=r.charAt(u).charCodeAt(0)-48;a*=3;for(let u=i-1;u>=0;u-=2)a+=r.charAt(u).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let i=0;i<10;i++)if(r===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new ee}static parseExtensionString(r){if(r.length!==5)return null;let i=es.parseExtension5String(r);return i==null?null:new Map([[Te.SUGGESTED_PRICE,i]])}static parseExtension5String(r){let i;switch(r.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let a=parseInt(r.substring(1)),u=(a/100).toString(),f=a%100,m=f<10?"0"+f:f.toString();return i+u+"."+m}}class ws{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,i,a){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(i,a,u),m=u.toString(),x=ws.parseExtensionString(m),E=[new Le((a[0]+a[1])/2,r),new Le(f,r)],C=new Ie(m,null,0,E,ce.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(r,i,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m=i[1],x=0;for(let E=0;E<2&&m<f;E++){let C=jt.decodeDigit(r,u,m,jt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let k of u)m+=k;C>=10&&(x|=1<<1-E),E!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(a.length!==2)throw new ee;if(parseInt(a.toString())%4!==x)throw new ee;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[Te.ISSUE_NUMBER,parseInt(r)]])}}class Ps{static decodeRow(r,i,a){let u=jt.findGuardPattern(i,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new es().decodeRow(r,i,u)}catch{return new ws().decodeRow(r,i,u)}}}Ps.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class mt extends jt{constructor(){super(),this.decodeRowStringBuffer="",mt.L_AND_G_PATTERNS=mt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let i=mt.L_PATTERNS[r-10],a=new Int32Array(i.length);for(let u=0;u<i.length;u++)a[u]=i[i.length-u-1];mt.L_AND_G_PATTERNS[r]=a}}decodeRow(r,i,a){let u=mt.findStartGuardPattern(i),f=a==null?null:a.get(G.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Ne=new Le((u[0]+u[1])/2,r);f.foundPossibleResultPoint(Ne)}let m=this.decodeMiddle(i,u,this.decodeRowStringBuffer),x=m.rowOffset,E=m.resultString;if(f!=null){const Ne=new Le(x,r);f.foundPossibleResultPoint(Ne)}let C=this.decodeEnd(i,x);if(f!=null){const Ne=new Le((C[0]+C[1])/2,r);f.foundPossibleResultPoint(Ne)}let k=C[1],P=k+(k-C[0]);if(P>=i.getSize()||!i.isRange(k,P,!1))throw new ee;let F=E.toString();if(F.length<8)throw new H;if(!mt.checkChecksum(F))throw new T;let q=(u[1]+u[0])/2,Z=(C[1]+C[0])/2,J=this.getBarcodeFormat(),ie=[new Le(q,r),new Le(Z,r)],pe=new Ie(F,null,0,ie,J,new Date().getTime()),Re=0;try{let Ne=Ps.decodeRow(r,i,C[1]);pe.putMetadata(Te.UPC_EAN_EXTENSION,Ne.getText()),pe.putAllMetadata(Ne.getResultMetadata()),pe.addResultPoints(Ne.getResultPoints()),Re=Ne.getText().length}catch{}let Oe=a==null?null:a.get(G.ALLOWED_EAN_EXTENSIONS);if(Oe!=null){let Ne=!1;for(let gt in Oe)if(Re.toString()===gt){Ne=!0;break}if(!Ne)throw new ee}return pe}decodeEnd(r,i){return mt.findGuardPattern(r,i,!1,mt.START_END_PATTERN,new Int32Array(mt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return mt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let i=r.length;if(i===0)return!1;let a=parseInt(r.charAt(i-1),10);return mt.getStandardUPCEANChecksum(r.substring(0,i-1))===a}static getStandardUPCEANChecksum(r){let i=r.length,a=0;for(let u=i-1;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new H;a+=f}a*=3;for(let u=i-2;u>=0;u-=2){let f=r.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new H;a+=f}return(1e3-a)%10}}class Rr extends mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,i,a){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m=i[1],x=0;for(let C=0;C<6&&m<f;C++){let k=mt.decodeDigit(r,u,m,mt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+k%10);for(let P of u)m+=P;k>=10&&(x|=1<<5-C)}a=Rr.determineFirstDigit(a,x),m=mt.findGuardPattern(r,m,!0,mt.MIDDLE_PATTERN,new Int32Array(mt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&m<f;C++){let k=mt.decodeDigit(r,u,m,mt.L_PATTERNS);a+=String.fromCharCode(48+k);for(let P of u)m+=P}return{rowOffset:m,resultString:a}}getBarcodeFormat(){return ce.EAN_13}static determineFirstDigit(r,i){for(let a=0;a<10;a++)if(i===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new ee}}Rr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class cn extends mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,i,a){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m=i[1];for(let E=0;E<4&&m<f;E++){let C=mt.decodeDigit(r,u,m,mt.L_PATTERNS);a+=String.fromCharCode(48+C);for(let k of u)m+=k}m=mt.findGuardPattern(r,m,!0,mt.MIDDLE_PATTERN,new Int32Array(mt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<4&&m<f;E++){let C=mt.decodeDigit(r,u,m,mt.L_PATTERNS);a+=String.fromCharCode(48+C);for(let k of u)m+=k}return{rowOffset:m,resultString:a}}getBarcodeFormat(){return ce.EAN_8}}class Xi extends mt{constructor(){super(...arguments),this.ean13Reader=new Rr}getBarcodeFormat(){return ce.UPC_A}decode(r,i){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,i,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,i,a))}decodeMiddle(r,i,a){return this.ean13Reader.decodeMiddle(r,i,a)}maybeReturnResult(r){let i=r.getText();if(i.charAt(0)==="0"){let a=new Ie(i.substring(1),null,null,r.getResultPoints(),ce.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new ee}reset(){this.ean13Reader.reset()}}class Ge extends mt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,i,a){const u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=r.getSize();let m=i[1],x=0;for(let C=0;C<6&&m<f;C++){const k=Ge.decodeDigit(r,u,m,Ge.L_AND_G_PATTERNS);a+=String.fromCharCode(48+k%10);for(let P of u)m+=P;k>=10&&(x|=1<<5-C)}let E=Ge.determineNumSysAndCheckDigit(a,x);return{rowOffset:m,resultString:E}}decodeEnd(r,i){return Ge.findGuardPatternWithoutCounters(r,i,!0,Ge.MIDDLE_END_PATTERN)}checkChecksum(r){return mt.checkChecksum(Ge.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,i){for(let a=0;a<=1;a++)for(let u=0;u<10;u++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][u]){let f=String.fromCharCode(48+a),m=String.fromCharCode(48+u);return f+r+m}throw ee.getNotFoundInstance()}getBarcodeFormat(){return ce.UPC_E}static convertUPCEtoUPCA(r){const i=r.slice(1,7).split("").map(f=>f.charCodeAt(0)),a=new fe;a.append(r.charAt(0));let u=i[5];switch(u){case 0:case 1:case 2:a.appendChars(i,0,2),a.append(u),a.append("0000"),a.appendChars(i,2,3);break;case 3:a.appendChars(i,0,3),a.append("00000"),a.appendChars(i,3,2);break;case 4:a.appendChars(i,0,4),a.append("00000"),a.append(i[4]);break;default:a.appendChars(i,0,5),a.append("0000"),a.append(u);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}Ge.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ge.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Et extends Mt{constructor(r){super();let i=r==null?null:r.get(G.POSSIBLE_FORMATS),a=[];o(i)?(a.push(new Rr),a.push(new Xi),a.push(new cn),a.push(new Ge)):(i.indexOf(ce.EAN_13)>-1&&a.push(new Rr),i.indexOf(ce.UPC_A)>-1&&a.push(new Xi),i.indexOf(ce.EAN_8)>-1&&a.push(new cn),i.indexOf(ce.UPC_E)>-1&&a.push(new Ge)),this.readers=a}decodeRow(r,i,a){for(let u of this.readers)try{const f=u.decodeRow(r,i,a),m=f.getBarcodeFormat()===ce.EAN_13&&f.getText().charAt(0)==="0",x=a==null?null:a.get(G.POSSIBLE_FORMATS),E=x==null||x.includes(ce.UPC_A);if(m&&E){const C=f.getRawBytes(),k=new Ie(f.getText().substring(1),C,C?C.length:null,f.getResultPoints(),ce.UPC_A);return k.putAllMetadata(f.getResultMetadata()),k}return f}catch{}throw new ee}reset(){for(let r of this.readers)r.reset()}}class ct extends Mt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,i){for(let a=0;a<i.length;a++)if(Mt.patternMatchVariance(r,i[a],ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE)return a;throw new ee}static count(r){return pt.sum(new Int32Array(r))}static increment(r,i){let a=0,u=i[0];for(let f=1;f<r.length;f++)i[f]>u&&(u=i[f],a=f);r[a]++}static decrement(r,i){let a=0,u=i[0];for(let f=1;f<r.length;f++)i[f]<u&&(u=i[f],a=f);r[a]--}static isFinderPattern(r){let i=r[0]+r[1],a=i+r[2]+r[3],u=i/a;if(u>=ct.MIN_FINDER_PATTERN_RATIO&&u<=ct.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let x of r)x>m&&(m=x),x<f&&(f=x);return m<10*f}return!1}}ct.MAX_AVG_VARIANCE=.2,ct.MAX_INDIVIDUAL_VARIANCE=.45,ct.MIN_FINDER_PATTERN_RATIO=9.5/12,ct.MAX_FINDER_PATTERN_RATIO=12.5/14;class ir{constructor(r,i){this.value=r,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof ir))return!1;const i=r;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Cr{constructor(r,i,a,u,f){this.value=r,this.startEnd=i,this.value=r,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Le(a,f)),this.resultPoints.push(new Le(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Cr))return!1;const i=r;return this.value===i.value}hashCode(){return this.value}}class Wt{constructor(){}static getRSSvalue(r,i,a){let u=0;for(let E of r)u+=E;let f=0,m=0,x=r.length;for(let E=0;E<x-1;E++){let C;for(C=1,m|=1<<E;C<r[E];C++,m&=~(1<<E)){let k=Wt.combins(u-C-1,x-E-2);if(a&&m===0&&u-C-(x-E-1)>=x-E-1&&(k-=Wt.combins(u-C-(x-E),x-E-2)),x-E-1>1){let P=0;for(let F=u-C-(x-E-2);F>i;F--)P+=Wt.combins(u-C-F-1,x-E-3);k-=P*(x-1-E)}else u-C>i&&k--;f+=k}u-=C}return f}static combins(r,i){let a,u;r-i>i?(u=i,a=r-i):(u=r-i,a=i);let f=1,m=1;for(let x=r;x>a;x--)f*=x,m<=u&&(f/=m,m++);for(;m<=u;)f/=m,m++;return f}}class _n{static buildBitArray(r){let i=r.length*2-1;r[r.length-1].getRightChar()==null&&(i-=1);let a=12*i,u=new V(a),f=0,x=r[0].getRightChar().getValue();for(let E=11;E>=0;--E)(x&1<<E)!=0&&u.set(f),f++;for(let E=1;E<r.length;++E){let C=r[E],k=C.getLeftChar().getValue();for(let P=11;P>=0;--P)(k&1<<P)!=0&&u.set(f),f++;if(C.getRightChar()!=null){let P=C.getRightChar().getValue();for(let F=11;F>=0;--F)(P&1<<F)!=0&&u.set(f),f++}}return u}}class Gt{constructor(r,i){i?this.decodedInformation=null:(this.finished=r,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class un{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class yr extends un{constructor(r,i){super(r),this.value=i}getValue(){return this.value}isFNC1(){return this.value===yr.FNC1}}yr.FNC1="$";class zn extends un{constructor(r,i,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Br extends un{constructor(r,i,a){if(super(r),i<0||i>10||a<0||a>10)throw new H;this.firstDigit=i,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Br.FNC1}isSecondDigitFNC1(){return this.secondDigit===Br.FNC1}isAnyFNC1(){return this.firstDigit===Br.FNC1||this.secondDigit===Br.FNC1}}Br.FNC1=10;class Be{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ee;let i=r.substring(0,2);for(let f of Be.TWO_DIGIT_DATA_LENGTH)if(f[0]===i)return f[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(2,f[2],r):Be.processFixedAI(2,f[1],r);if(r.length<3)throw new ee;let a=r.substring(0,3);for(let f of Be.THREE_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(3,f[2],r):Be.processFixedAI(3,f[1],r);for(let f of Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,f[2],r):Be.processFixedAI(4,f[1],r);if(r.length<4)throw new ee;let u=r.substring(0,4);for(let f of Be.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,f[2],r):Be.processFixedAI(4,f[1],r);throw new ee}static processFixedAI(r,i,a){if(a.length<r)throw new ee;let u=a.substring(0,r);if(a.length<r+i)throw new ee;let f=a.substring(r,r+i),m=a.substring(r+i),x="("+u+")"+f,E=Be.parseFieldsInGeneralPurpose(m);return E==null?x:x+E}static processVariableAI(r,i,a){let u=a.substring(0,r),f;a.length<r+i?f=a.length:f=r+i;let m=a.substring(r,f),x=a.substring(f),E="("+u+")"+m,C=Be.parseFieldsInGeneralPurpose(x);return C==null?E:E+C}}Be.VARIABLE_LENGTH=[],Be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Be.VARIABLE_LENGTH,20],["22",Be.VARIABLE_LENGTH,29],["30",Be.VARIABLE_LENGTH,8],["37",Be.VARIABLE_LENGTH,8],["90",Be.VARIABLE_LENGTH,30],["91",Be.VARIABLE_LENGTH,30],["92",Be.VARIABLE_LENGTH,30],["93",Be.VARIABLE_LENGTH,30],["94",Be.VARIABLE_LENGTH,30],["95",Be.VARIABLE_LENGTH,30],["96",Be.VARIABLE_LENGTH,30],["97",Be.VARIABLE_LENGTH,3],["98",Be.VARIABLE_LENGTH,30],["99",Be.VARIABLE_LENGTH,30]],Be.THREE_DIGIT_DATA_LENGTH=[["240",Be.VARIABLE_LENGTH,30],["241",Be.VARIABLE_LENGTH,30],["242",Be.VARIABLE_LENGTH,6],["250",Be.VARIABLE_LENGTH,30],["251",Be.VARIABLE_LENGTH,30],["253",Be.VARIABLE_LENGTH,17],["254",Be.VARIABLE_LENGTH,20],["400",Be.VARIABLE_LENGTH,30],["401",Be.VARIABLE_LENGTH,30],["402",17],["403",Be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Be.VARIABLE_LENGTH,20],["421",Be.VARIABLE_LENGTH,15],["422",3],["423",Be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Be.VARIABLE_LENGTH,15],["391",Be.VARIABLE_LENGTH,18],["392",Be.VARIABLE_LENGTH,15],["393",Be.VARIABLE_LENGTH,18],["703",Be.VARIABLE_LENGTH,30]],Be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Be.VARIABLE_LENGTH,20],["8003",Be.VARIABLE_LENGTH,30],["8004",Be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Be.VARIABLE_LENGTH,30],["8008",Be.VARIABLE_LENGTH,12],["8018",18],["8020",Be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Be.VARIABLE_LENGTH,70],["8200",Be.VARIABLE_LENGTH,70]];class ui{constructor(r){this.buffer=new fe,this.information=r}decodeAllCodes(r,i){let a=i,u=null;do{let f=this.decodeGeneralPurposeField(a,u),m=Be.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&r.append(m),f.isRemaining()?u=""+f.getRemainingValue():u=null,a===f.getNewPosition())break;a=f.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let i=r;i<r+3;++i)if(this.information.get(i))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(r,4);return f===0?new Br(this.information.getSize(),Br.FNC1,Br.FNC1):new Br(this.information.getSize(),f-1,Br.FNC1)}let i=this.extractNumericValueFromBitArray(r,7),a=(i-8)/11,u=(i-8)%11;return new Br(r+7,a,u)}extractNumericValueFromBitArray(r,i){return ui.extractNumericValueFromBitArray(this.information,r,i)}static extractNumericValueFromBitArray(r,i,a){let u=0;for(let f=0;f<a;++f)r.get(i+f)&&(u|=1<<a-f-1);return u}decodeGeneralPurposeField(r,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new zn(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new zn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,i;do{let a=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),r=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),r=i.isFinished()):(i=this.parseNumericBlock(),r=i.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let i;return r.isSecondDigitFNC1()?i=new zn(this.current.getPosition(),this.buffer.toString()):i=new zn(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Gt(!0,i)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let i=new zn(this.current.getPosition(),this.buffer.toString());return new Gt(!0,i)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Gt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let i=new zn(this.current.getPosition(),this.buffer.toString());return new Gt(!0,i)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Gt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let i=new zn(this.current.getPosition(),this.buffer.toString());return new Gt(!0,i)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Gt(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(r,5);if(i>=5&&i<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let i=this.extractNumericValueFromBitArray(r,5);if(i===15)return new yr(r+5,yr.FNC1);if(i>=5&&i<15)return new yr(r+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new yr(r+7,""+(a+1));if(a>=90&&a<116)return new yr(r+7,""+(a+7));let u=this.extractNumericValueFromBitArray(r,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new H}return new yr(r+8,f)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(r,5);if(i>=5&&i<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let i=this.extractNumericValueFromBitArray(r,5);if(i===15)return new yr(r+5,yr.FNC1);if(i>=5&&i<15)return new yr(r+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new yr(r+6,""+(a+33));let u;switch(a){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Lr("Decoding invalid alphanumeric value: "+a)}return new yr(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let i=0;i<5&&i+r<this.information.getSize();++i)if(i===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+i))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let i=r;i<r+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let i=0;i<4&&i+r<this.information.getSize();++i)if(this.information.get(r+i))return!1;return!0}}class ja{constructor(r){this.information=r,this.generalDecoder=new ui(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class $r extends ja{constructor(r){super(r)}encodeCompressedGtin(r,i){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,i,a)}encodeCompressedGtinWithoutAI(r,i,a){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*u,10);f/100===0&&r.append("0"),f/10===0&&r.append("0"),r.append(f)}$r.appendCheckDigit(r,a)}static appendCheckDigit(r,i){let a=0;for(let u=0;u<13;u++){let f=r.charAt(u+i).charCodeAt(0)-48;a+=(u&1)===0?3*f:f}a=10-a%10,a===10&&(a=0),r.append(a)}}$r.GTIN_SIZE=40;class dn extends $r{constructor(r){super(r)}parseInformation(){let r=new fe;r.append("(01)");let i=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,dn.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(r,dn.HEADER_SIZE+44)}}dn.HEADER_SIZE=4;class Yi extends ja{constructor(r){super(r)}parseInformation(){let r=new fe;return this.getGeneralDecoder().decodeAllCodes(r,Yi.HEADER_SIZE)}}Yi.HEADER_SIZE=5;class Zi extends $r{constructor(r){super(r)}encodeCompressedWeight(r,i,a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i,a);this.addWeightCode(r,u);let f=this.checkWeight(u),m=1e5;for(let x=0;x<5;++x)f/m===0&&r.append("0"),m/=10;r.append(f)}}class Vn extends Zi{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Vn.HEADER_SIZE+Zi.GTIN_SIZE+Vn.WEIGHT_SIZE)throw new ee;let r=new fe;return this.encodeCompressedGtin(r,Vn.HEADER_SIZE),this.encodeCompressedWeight(r,Vn.HEADER_SIZE+Zi.GTIN_SIZE,Vn.WEIGHT_SIZE),r.toString()}}Vn.HEADER_SIZE=5,Vn.WEIGHT_SIZE=15;class Hl extends Vn{constructor(r){super(r)}addWeightCode(r,i){r.append("(3103)")}checkWeight(r){return r}}class Wl extends Vn{constructor(r){super(r)}addWeightCode(r,i){i<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Sn extends $r{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Sn.HEADER_SIZE+$r.GTIN_SIZE)throw new ee;let r=new fe;this.encodeCompressedGtin(r,Sn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+$r.GTIN_SIZE,Sn.LAST_DIGIT_SIZE);r.append("(392"),r.append(i),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Sn.HEADER_SIZE+$r.GTIN_SIZE+Sn.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Sn.HEADER_SIZE=8,Sn.LAST_DIGIT_SIZE=2;class Or extends $r{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Or.HEADER_SIZE+$r.GTIN_SIZE)throw new ee;let r=new fe;this.encodeCompressedGtin(r,Or.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Or.HEADER_SIZE+$r.GTIN_SIZE,Or.LAST_DIGIT_SIZE);r.append("(393"),r.append(i),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Or.HEADER_SIZE+$r.GTIN_SIZE+Or.LAST_DIGIT_SIZE,Or.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Or.HEADER_SIZE+$r.GTIN_SIZE+Or.LAST_DIGIT_SIZE+Or.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}Or.HEADER_SIZE=8,Or.LAST_DIGIT_SIZE=2,Or.FIRST_THREE_DIGITS_SIZE=10;class Ft extends Zi{constructor(r,i,a){super(r),this.dateCode=a,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Ft.HEADER_SIZE+Ft.GTIN_SIZE+Ft.WEIGHT_SIZE+Ft.DATE_SIZE)throw new ee;let r=new fe;return this.encodeCompressedGtin(r,Ft.HEADER_SIZE),this.encodeCompressedWeight(r,Ft.HEADER_SIZE+Ft.GTIN_SIZE,Ft.WEIGHT_SIZE),this.encodeCompressedDate(r,Ft.HEADER_SIZE+Ft.GTIN_SIZE+Ft.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Ft.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=a%32;a/=32;let f=a%12+1;a/=12;let m=a;m/10==0&&r.append("0"),r.append(m),f/10==0&&r.append("0"),r.append(f),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,i){r.append("("),r.append(this.firstAIdigits),r.append(i/1e5),r.append(")")}checkWeight(r){return r%1e5}}Ft.HEADER_SIZE=8,Ft.WEIGHT_SIZE=20,Ft.DATE_SIZE=16;function Gl(j){try{if(j.get(1))return new dn(j);if(!j.get(2))return new Yi(j);switch(ui.extractNumericValueFromBitArray(j,1,4)){case 4:return new Hl(j);case 5:return new Wl(j)}switch(ui.extractNumericValueFromBitArray(j,1,5)){case 12:return new Sn(j);case 13:return new Or(j)}switch(ui.extractNumericValueFromBitArray(j,1,7)){case 56:return new Ft(j,"310","11");case 57:return new Ft(j,"320","11");case 58:return new Ft(j,"310","13");case 59:return new Ft(j,"320","13");case 60:return new Ft(j,"310","15");case 61:return new Ft(j,"320","15");case 62:return new Ft(j,"310","17");case 63:return new Ft(j,"320","17")}}catch(r){throw console.log(r),new Lr("unknown decoder: "+j)}}class It{constructor(r,i,a,u){this.leftchar=r,this.rightchar=i,this.finderpattern=a,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,i){return r instanceof It?It.equalsOrNull(r.leftchar,i.leftchar)&&It.equalsOrNull(r.rightchar,i.rightchar)&&It.equalsOrNull(r.finderpattern,i.finderpattern):!1}static equalsOrNull(r,i){return r===null?i===null:It.equals(r,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Pa{constructor(r,i,a){this.pairs=r,this.rowNumber=i,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,i){return r instanceof Pa?this.checkEqualitity(r,i)&&r.wasReversed===i.wasReversed:!1}checkEqualitity(r,i){if(!r||!i)return;let a;return r.forEach((u,f)=>{i.forEach(m=>{u.getLeftChar().getValue()===m.getLeftChar().getValue()&&u.getRightChar().getValue()===m.getRightChar().getValue()&&u.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(a=!0)})}),a}}class Ce extends ct{constructor(r){super(...arguments),this.pairs=new Array(Ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,i,a){this.pairs.length=0,this.startFromEven=!1;try{return Ce.constructResult(this.decodeRow2pairs(r,i))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Ce.constructResult(this.decodeRow2pairs(r,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,i){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,r))}catch(f){if(f instanceof ee){if(!this.pairs.length)throw new ee;a=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new ee}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),i}checkRows(r,i){for(let a=i;a<this.rows.length;a++){let u=this.rows[a];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(u.getPairs()),!Ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(r);f.push(u);try{return this.checkRows(f,a+1)}catch(m){this.verbose&&console.log(m)}}throw new ee}static isValidSequence(r){for(let i of Ce.FINDER_PATTERN_SEQUENCES){if(r.length>i.length)continue;let a=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=i[u]){a=!1;break}if(a)return!0}return!1}storeRow(r,i){let a=0,u=!1,f=!1;for(;a<this.rows.length;){let m=this.rows[a];if(m.getRowNumber()>r){f=m.isEquivalent(this.pairs);break}u=m.isEquivalent(this.pairs),a++}f||u||Ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Pa(this.pairs,r,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,i){for(let a of i)if(a.getPairs().length!==r.length){for(let u of a.getPairs())for(let f of r)if(It.equals(u,f))break}}static isPartialRow(r,i){for(let a of i){let u=!0;for(let f of r){let m=!1;for(let x of a.getPairs())if(f.equals(x)){m=!0;break}if(!m){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let i=_n.buildBitArray(r),u=Gl(i).parseInformation(),f=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),x=[f[0],f[1],m[0],m[1]];return new Ie(u,null,null,x,ce.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),i=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let u=a.getChecksumPortion(),f=2;for(let x=1;x<this.pairs.size();++x){let E=this.pairs.get(x);u+=E.getLeftChar().getChecksumPortion(),f++;let C=E.getRightChar();C!=null&&(u+=C.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==i.getValue()}static getNextSecondBar(r,i){let a;return r.get(i)?(a=r.getNextUnset(i),a=r.getNextSet(a)):(a=r.getNextSet(i),a=r.getNextUnset(a)),a}retrieveNextPair(r,i,a){let u=i.length%2==0;this.startFromEven&&(u=!u);let f,m=!0,x=-1;do this.findNextPair(r,i,x),f=this.parseFoundFinderPattern(r,a,u),f==null?x=Ce.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let E=this.decodeDataCharacter(r,f,u,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new ee;let C;try{C=this.decodeDataCharacter(r,f,u,!1)}catch(k){C=null,this.verbose&&console.log(k)}return new It(E,C,f,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,i,a){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),m;a>=0?m=a:this.isEmptyPair(i)?m=0:m=i[i.length-1].getFinderPattern().getStartEnd()[1];let x=i.length%2!=0;this.startFromEven&&(x=!x);let E=!1;for(;m<f&&(E=!r.get(m),!!E);)m++;let C=0,k=m;for(let P=m;P<f;P++)if(r.get(P)!=E)u[C]++;else{if(C==3){if(x&&Ce.reverseCounters(u),Ce.isFinderPattern(u)){this.startEnd[0]=k,this.startEnd[1]=P;return}x&&Ce.reverseCounters(u),k+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,E=!E}throw new ee}static reverseCounters(r){let i=r.length;for(let a=0;a<i/2;++a){let u=r[a];r[a]=r[i-a-1],r[i-a-1]=u}}parseFoundFinderPattern(r,i,a){let u,f,m;if(a){let C=this.startEnd[0]-1;for(;C>=0&&!r.get(C);)C--;C++,u=this.startEnd[0]-C,f=C,m=this.startEnd[1]}else f=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),u=m-this.startEnd[1];let x=this.getDecodeFinderCounters();I.arraycopy(x,0,x,1,x.length-1),x[0]=u;let E;try{E=this.parseFinderValue(x,Ce.FINDER_PATTERNS)}catch{return null}return new Cr(E,[f,m],f,m,i)}decodeDataCharacter(r,i,a,u){let f=this.getDataCharacterCounters();for(let kt=0;kt<f.length;kt++)f[kt]=0;if(u)Ce.recordPatternInReverse(r,i.getStartEnd()[0],f);else{Ce.recordPattern(r,i.getStartEnd()[1],f);for(let kt=0,er=f.length-1;kt<er;kt++,er--){let zr=f[kt];f[kt]=f[er],f[er]=zr}}let m=17,x=pt.sum(new Int32Array(f))/m,E=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(x-E)/E>.3)throw new ee;let C=this.getOddCounts(),k=this.getEvenCounts(),P=this.getOddRoundingErrors(),F=this.getEvenRoundingErrors();for(let kt=0;kt<f.length;kt++){let er=1*f[kt]/x,zr=er+.5;if(zr<1){if(er<.3)throw new ee;zr=1}else if(zr>8){if(er>8.7)throw new ee;zr=8}let Fs=kt/2;(kt&1)==0?(C[Fs]=zr,P[Fs]=er-zr):(k[Fs]=zr,F[Fs]=er-zr)}this.adjustOddEvenCounts(m);let q=4*i.getValue()+(a?0:2)+(u?0:1)-1,Z=0,J=0;for(let kt=C.length-1;kt>=0;kt--){if(Ce.isNotA1left(i,a,u)){let er=Ce.WEIGHTS[q][2*kt];J+=C[kt]*er}Z+=C[kt]}let ie=0;for(let kt=k.length-1;kt>=0;kt--)if(Ce.isNotA1left(i,a,u)){let er=Ce.WEIGHTS[q][2*kt+1];ie+=k[kt]*er}let pe=J+ie;if((Z&1)!=0||Z>13||Z<4)throw new ee;let Re=(13-Z)/2,Oe=Ce.SYMBOL_WIDEST[Re],Ne=9-Oe,gt=Wt.getRSSvalue(C,Oe,!0),at=Wt.getRSSvalue(k,Ne,!1),Xr=Ce.EVEN_TOTAL_SUBSET[Re],In=Ce.GSUM[Re],hr=gt*Xr+at+In;return new ir(hr,pe)}static isNotA1left(r,i,a){return!(r.getValue()==0&&i&&a)}adjustOddEvenCounts(r){let i=pt.sum(new Int32Array(this.getOddCounts())),a=pt.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;i>13?f=!0:i<4&&(u=!0);let m=!1,x=!1;a>13?x=!0:a<4&&(m=!0);let E=i+a-r,C=(i&1)==1,k=(a&1)==0;if(E==1)if(C){if(k)throw new ee;f=!0}else{if(!k)throw new ee;x=!0}else if(E==-1)if(C){if(k)throw new ee;u=!0}else{if(!k)throw new ee;m=!0}else if(E==0){if(C){if(!k)throw new ee;i<a?(u=!0,x=!0):(f=!0,m=!0)}else if(k)throw new ee}else throw new ee;if(u){if(f)throw new ee;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(x)throw new ee;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ce.SYMBOL_WIDEST=[7,5,4,3,1],Ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ce.GSUM=[0,348,1388,2948,3988],Ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ce.FINDER_PAT_A=0,Ce.FINDER_PAT_B=1,Ce.FINDER_PAT_C=2,Ce.FINDER_PAT_D=3,Ce.FINDER_PAT_E=4,Ce.FINDER_PAT_F=5,Ce.FINDER_PATTERN_SEQUENCES=[[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_C,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_C],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F]],Ce.MAX_PAIRS=11;class ql extends ir{constructor(r,i,a){super(r,i),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Lt extends ct{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,i,a){const u=this.decodePair(i,!1,r,a);Lt.addOrTally(this.possibleLeftPairs,u),i.reverse();let f=this.decodePair(i,!0,r,a);Lt.addOrTally(this.possibleRightPairs,f),i.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&Lt.checkChecksum(m,x))return Lt.constructResult(m,x)}throw new ee}static addOrTally(r,i){if(i==null)return;let a=!1;for(let u of r)if(u.getValue()===i.getValue()){u.incrementCount(),a=!0;break}a||r.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,i){let a=4537077*r.getValue()+i.getValue(),u=new String(a).toString(),f=new fe;for(let C=13-u.length;C>0;C--)f.append("0");f.append(u);let m=0;for(let C=0;C<13;C++){let k=f.charAt(C).charCodeAt(0)-48;m+=(C&1)===0?3*k:k}m=10-m%10,m===10&&(m=0),f.append(m.toString());let x=r.getFinderPattern().getResultPoints(),E=i.getFinderPattern().getResultPoints();return new Ie(f.toString(),null,0,[x[0],x[1],E[0],E[1]],ce.RSS_14,new Date().getTime())}static checkChecksum(r,i){let a=(r.getChecksumPortion()+16*i.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+i.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,a===u}decodePair(r,i,a,u){try{let f=this.findFinderPattern(r,i),m=this.parseFoundFinderPattern(r,a,i,f),x=u==null?null:u.get(G.NEED_RESULT_POINT_CALLBACK);if(x!=null){let k=(f[0]+f[1])/2;i&&(k=r.getSize()-1-k),x.foundPossibleResultPoint(new Le(k,a))}let E=this.decodeDataCharacter(r,m,!0),C=this.decodeDataCharacter(r,m,!1);return new ql(1597*E.getValue()+C.getValue(),E.getChecksumPortion()+4*C.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,i,a){let u=this.getDataCharacterCounters();for(let ie=0;ie<u.length;ie++)u[ie]=0;if(a)Mt.recordPatternInReverse(r,i.getStartEnd()[0],u);else{Mt.recordPattern(r,i.getStartEnd()[1]+1,u);for(let ie=0,pe=u.length-1;ie<pe;ie++,pe--){let Re=u[ie];u[ie]=u[pe],u[pe]=Re}}let f=a?16:15,m=pt.sum(new Int32Array(u))/f,x=this.getOddCounts(),E=this.getEvenCounts(),C=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let ie=0;ie<u.length;ie++){let pe=u[ie]/m,Re=Math.floor(pe+.5);Re<1?Re=1:Re>8&&(Re=8);let Oe=Math.floor(ie/2);(ie&1)===0?(x[Oe]=Re,C[Oe]=pe-Re):(E[Oe]=Re,k[Oe]=pe-Re)}this.adjustOddEvenCounts(a,f);let P=0,F=0;for(let ie=x.length-1;ie>=0;ie--)F*=9,F+=x[ie],P+=x[ie];let q=0,Z=0;for(let ie=E.length-1;ie>=0;ie--)q*=9,q+=E[ie],Z+=E[ie];let J=F+3*q;if(a){if((P&1)!==0||P>12||P<4)throw new ee;let ie=(12-P)/2,pe=Lt.OUTSIDE_ODD_WIDEST[ie],Re=9-pe,Oe=Wt.getRSSvalue(x,pe,!1),Ne=Wt.getRSSvalue(E,Re,!0),gt=Lt.OUTSIDE_EVEN_TOTAL_SUBSET[ie],at=Lt.OUTSIDE_GSUM[ie];return new ir(Oe*gt+Ne+at,J)}else{if((Z&1)!==0||Z>10||Z<4)throw new ee;let ie=(10-Z)/2,pe=Lt.INSIDE_ODD_WIDEST[ie],Re=9-pe,Oe=Wt.getRSSvalue(x,pe,!0),Ne=Wt.getRSSvalue(E,Re,!1),gt=Lt.INSIDE_ODD_TOTAL_SUBSET[ie],at=Lt.INSIDE_GSUM[ie];return new ir(Ne*gt+Oe+at,J)}}findFinderPattern(r,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=r.getSize(),f=!1,m=0;for(;m<u&&(f=!r.get(m),i!==f);)m++;let x=0,E=m;for(let C=m;C<u;C++)if(r.get(C)!==f)a[x]++;else{if(x===3){if(ct.isFinderPattern(a))return[E,C];E+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,x--}else x++;a[x]=1,f=!f}throw new ee}parseFoundFinderPattern(r,i,a,u){let f=r.get(u[0]),m=u[0]-1;for(;m>=0&&f!==r.get(m);)m--;m++;const x=u[0]-m,E=this.getDecodeFinderCounters(),C=new Int32Array(E.length);I.arraycopy(E,0,C,1,E.length-1),C[0]=x;const k=this.parseFinderValue(C,Lt.FINDER_PATTERNS);let P=m,F=u[1];return a&&(P=r.getSize()-1-P,F=r.getSize()-1-F),new Cr(k,[m,u[1]],P,F,i)}adjustOddEvenCounts(r,i){let a=pt.sum(new Int32Array(this.getOddCounts())),u=pt.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,x=!1,E=!1;r?(a>12?m=!0:a<4&&(f=!0),u>12?E=!0:u<4&&(x=!0)):(a>11?m=!0:a<5&&(f=!0),u>10?E=!0:u<4&&(x=!0));let C=a+u-i,k=(a&1)===(r?1:0),P=(u&1)===1;if(C===1)if(k){if(P)throw new ee;m=!0}else{if(!P)throw new ee;E=!0}else if(C===-1)if(k){if(P)throw new ee;f=!0}else{if(!P)throw new ee;x=!0}else if(C===0){if(k){if(!P)throw new ee;a<u?(f=!0,E=!0):(m=!0,x=!0)}else if(P)throw new ee}else throw new ee;if(f){if(m)throw new ee;ct.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&ct.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(E)throw new ee;ct.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&ct.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Lt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Lt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Lt.OUTSIDE_GSUM=[0,161,961,2015,2715],Lt.INSIDE_GSUM=[0,336,1036,1516],Lt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Lt.INSIDE_ODD_WIDEST=[2,4,6,8],Lt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class di extends Mt{constructor(r,i){super(),this.readers=[],this.verbose=i===!0;const a=r?r.get(G.POSSIBLE_FORMATS):null,u=r&&r.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ce.EAN_13)||a.includes(ce.UPC_A)||a.includes(ce.EAN_8)||a.includes(ce.UPC_E))&&this.readers.push(new Et(r)),a.includes(ce.CODE_39)&&this.readers.push(new Xt(u)),a.includes(ce.CODE_128)&&this.readers.push(new Pe),a.includes(ce.ITF)&&this.readers.push(new xt),a.includes(ce.RSS_14)&&this.readers.push(new Lt),a.includes(ce.RSS_EXPANDED)&&this.readers.push(new Ce(this.verbose))):(this.readers.push(new Et(r)),this.readers.push(new Xt),this.readers.push(new Et(r)),this.readers.push(new Pe),this.readers.push(new xt),this.readers.push(new Lt),this.readers.push(new Ce(this.verbose)))}decodeRow(r,i,a){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,i,a)}catch{}throw new ee}reset(){this.readers.forEach(r=>r.reset())}}class $l extends je{constructor(r=500,i){super(new di(i),r,i)}}class Ct{constructor(r,i,a){this.ecCodewords=r,this.ecBlocks=[i],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ut{constructor(r,i){this.count=r,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class vt{constructor(r,i,a,u,f,m){this.versionNumber=r,this.symbolSizeRows=i,this.symbolSizeColumns=a,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=m;let x=0;const E=m.getECCodewords(),C=m.getECBlocks();for(let k of C)x+=k.getCount()*(k.getDataCodewords()+E);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,i){if((r&1)!==0||(i&1)!==0)throw new H;for(let a of vt.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===i)return a;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new vt(1,10,10,8,8,new Ct(5,new ut(1,3))),new vt(2,12,12,10,10,new Ct(7,new ut(1,5))),new vt(3,14,14,12,12,new Ct(10,new ut(1,8))),new vt(4,16,16,14,14,new Ct(12,new ut(1,12))),new vt(5,18,18,16,16,new Ct(14,new ut(1,18))),new vt(6,20,20,18,18,new Ct(18,new ut(1,22))),new vt(7,22,22,20,20,new Ct(20,new ut(1,30))),new vt(8,24,24,22,22,new Ct(24,new ut(1,36))),new vt(9,26,26,24,24,new Ct(28,new ut(1,44))),new vt(10,32,32,14,14,new Ct(36,new ut(1,62))),new vt(11,36,36,16,16,new Ct(42,new ut(1,86))),new vt(12,40,40,18,18,new Ct(48,new ut(1,114))),new vt(13,44,44,20,20,new Ct(56,new ut(1,144))),new vt(14,48,48,22,22,new Ct(68,new ut(1,174))),new vt(15,52,52,24,24,new Ct(42,new ut(2,102))),new vt(16,64,64,14,14,new Ct(56,new ut(2,140))),new vt(17,72,72,16,16,new Ct(36,new ut(4,92))),new vt(18,80,80,18,18,new Ct(48,new ut(4,114))),new vt(19,88,88,20,20,new Ct(56,new ut(4,144))),new vt(20,96,96,22,22,new Ct(68,new ut(4,174))),new vt(21,104,104,24,24,new Ct(56,new ut(6,136))),new vt(22,120,120,18,18,new Ct(68,new ut(6,175))),new vt(23,132,132,20,20,new Ct(62,new ut(8,163))),new vt(24,144,144,22,22,new Ct(62,new ut(8,156),new ut(2,155))),new vt(25,8,18,6,16,new Ct(7,new ut(1,5))),new vt(26,8,32,6,14,new Ct(11,new ut(1,10))),new vt(27,12,26,10,24,new Ct(14,new ut(1,16))),new vt(28,12,36,10,16,new Ct(18,new ut(1,22))),new vt(29,16,36,14,16,new Ct(24,new ut(1,32))),new vt(30,16,48,14,22,new Ct(28,new ut(1,49)))]}}vt.VERSIONS=vt.buildVersions();class tn{constructor(r){const i=r.getHeight();if(i<8||i>144||(i&1)!==0)throw new H;this.version=tn.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new oe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const i=r.getHeight(),a=r.getWidth();return vt.getVersionForDimensions(i,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let i=0,a=4,u=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let x=!1,E=!1,C=!1,k=!1;do if(a===f&&u===0&&!x)r[i++]=this.readCorner1(f,m)&255,a-=2,u+=2,x=!0;else if(a===f-2&&u===0&&(m&3)!==0&&!E)r[i++]=this.readCorner2(f,m)&255,a-=2,u+=2,E=!0;else if(a===f+4&&u===2&&(m&7)===0&&!C)r[i++]=this.readCorner3(f,m)&255,a-=2,u+=2,C=!0;else if(a===f-2&&u===0&&(m&7)===4&&!k)r[i++]=this.readCorner4(f,m)&255,a-=2,u+=2,k=!0;else{do a<f&&u>=0&&!this.readMappingMatrix.get(u,a)&&(r[i++]=this.readUtah(a,u,f,m)&255),a-=2,u+=2;while(a>=0&&u<m);a+=1,u+=3;do a>=0&&u<m&&!this.readMappingMatrix.get(u,a)&&(r[i++]=this.readUtah(a,u,f,m)&255),a+=2,u-=2;while(a<f&&u>=0);a+=3,u+=1}while(a<f||u<m);if(i!==this.version.getTotalCodewords())throw new H;return r}readModule(r,i,a,u){return r<0&&(r+=a,i+=4-(a+4&7)),i<0&&(i+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(i,r),this.mappingBitMatrix.get(i,r)}readUtah(r,i,a,u){let f=0;return this.readModule(r-2,i-2,a,u)&&(f|=1),f<<=1,this.readModule(r-2,i-1,a,u)&&(f|=1),f<<=1,this.readModule(r-1,i-2,a,u)&&(f|=1),f<<=1,this.readModule(r-1,i-1,a,u)&&(f|=1),f<<=1,this.readModule(r-1,i,a,u)&&(f|=1),f<<=1,this.readModule(r,i-2,a,u)&&(f|=1),f<<=1,this.readModule(r,i-1,a,u)&&(f|=1),f<<=1,this.readModule(r,i,a,u)&&(f|=1),f}readCorner1(r,i){let a=0;return this.readModule(r-1,0,r,i)&&(a|=1),a<<=1,this.readModule(r-1,1,r,i)&&(a|=1),a<<=1,this.readModule(r-1,2,r,i)&&(a|=1),a<<=1,this.readModule(0,i-2,r,i)&&(a|=1),a<<=1,this.readModule(0,i-1,r,i)&&(a|=1),a<<=1,this.readModule(1,i-1,r,i)&&(a|=1),a<<=1,this.readModule(2,i-1,r,i)&&(a|=1),a<<=1,this.readModule(3,i-1,r,i)&&(a|=1),a}readCorner2(r,i){let a=0;return this.readModule(r-3,0,r,i)&&(a|=1),a<<=1,this.readModule(r-2,0,r,i)&&(a|=1),a<<=1,this.readModule(r-1,0,r,i)&&(a|=1),a<<=1,this.readModule(0,i-4,r,i)&&(a|=1),a<<=1,this.readModule(0,i-3,r,i)&&(a|=1),a<<=1,this.readModule(0,i-2,r,i)&&(a|=1),a<<=1,this.readModule(0,i-1,r,i)&&(a|=1),a<<=1,this.readModule(1,i-1,r,i)&&(a|=1),a}readCorner3(r,i){let a=0;return this.readModule(r-1,0,r,i)&&(a|=1),a<<=1,this.readModule(r-1,i-1,r,i)&&(a|=1),a<<=1,this.readModule(0,i-3,r,i)&&(a|=1),a<<=1,this.readModule(0,i-2,r,i)&&(a|=1),a<<=1,this.readModule(0,i-1,r,i)&&(a|=1),a<<=1,this.readModule(1,i-3,r,i)&&(a|=1),a<<=1,this.readModule(1,i-2,r,i)&&(a|=1),a<<=1,this.readModule(1,i-1,r,i)&&(a|=1),a}readCorner4(r,i){let a=0;return this.readModule(r-3,0,r,i)&&(a|=1),a<<=1,this.readModule(r-2,0,r,i)&&(a|=1),a<<=1,this.readModule(r-1,0,r,i)&&(a|=1),a<<=1,this.readModule(0,i-2,r,i)&&(a|=1),a<<=1,this.readModule(0,i-1,r,i)&&(a|=1),a<<=1,this.readModule(1,i-1,r,i)&&(a|=1),a<<=1,this.readModule(2,i-1,r,i)&&(a|=1),a<<=1,this.readModule(3,i-1,r,i)&&(a|=1),a}extractDataRegion(r){const i=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==i)throw new N("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=i/u|0,x=a/f|0,E=m*u,C=x*f,k=new oe(C,E);for(let P=0;P<m;++P){const F=P*u;for(let q=0;q<x;++q){const Z=q*f;for(let J=0;J<u;++J){const ie=P*(u+2)+1+J,pe=F+J;for(let Re=0;Re<f;++Re){const Oe=q*(f+2)+1+Re;if(r.get(Oe,ie)){const Ne=Z+Re;k.set(Ne,pe)}}}}}return k}}class Da{constructor(r,i){this.numDataCodewords=r,this.codewords=i}static getDataBlocks(r,i){const a=i.getECBlocks();let u=0;const f=a.getECBlocks();for(let J of f)u+=J.getCount();const m=new Array(u);let x=0;for(let J of f)for(let ie=0;ie<J.getCount();ie++){const pe=J.getDataCodewords(),Re=a.getECCodewords()+pe;m[x++]=new Da(pe,new Uint8Array(Re))}const C=m[0].codewords.length-a.getECCodewords(),k=C-1;let P=0;for(let J=0;J<k;J++)for(let ie=0;ie<x;ie++)m[ie].codewords[J]=r[P++];const F=i.getVersionNumber()===24,q=F?8:x;for(let J=0;J<q;J++)m[J].codewords[C-1]=r[P++];const Z=m[0].codewords.length;for(let J=C;J<Z;J++)for(let ie=0;ie<x;ie++){const pe=F?(ie+8)%x:ie,Re=F&&pe>7?J-1:J;m[pe].codewords[Re]=r[P++]}if(P!==r.length)throw new N;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ma{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new N(""+r);let i=0,a=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(a>0){const m=8-a,x=r<m?r:m,E=m-x,C=255>>8-x<<E;i=(f[u]&C)>>E,r-=x,a+=x,a===8&&(a=0,u++)}if(r>0){for(;r>=8;)i=i<<8|f[u]&255,u++,r-=8;if(r>0){const m=8-r,x=255>>m<<m;i=i<<r|(f[u]&x)>>m,a+=r}}return this.bitOffset=a,this.byteOffset=u,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var dr;(function(j){j[j.PAD_ENCODE=0]="PAD_ENCODE",j[j.ASCII_ENCODE=1]="ASCII_ENCODE",j[j.C40_ENCODE=2]="C40_ENCODE",j[j.TEXT_ENCODE=3]="TEXT_ENCODE",j[j.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",j[j.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",j[j.BASE256_ENCODE=6]="BASE256_ENCODE"})(dr||(dr={}));class Nn{static decode(r){const i=new Ma(r),a=new fe,u=new fe,f=new Array;let m=dr.ASCII_ENCODE;do if(m===dr.ASCII_ENCODE)m=this.decodeAsciiSegment(i,a,u);else{switch(m){case dr.C40_ENCODE:this.decodeC40Segment(i,a);break;case dr.TEXT_ENCODE:this.decodeTextSegment(i,a);break;case dr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,a);break;case dr.EDIFACT_ENCODE:this.decodeEdifactSegment(i,a);break;case dr.BASE256_ENCODE:this.decodeBase256Segment(i,a,f);break;default:throw new H}m=dr.ASCII_ENCODE}while(m!==dr.PAD_ENCODE&&i.available()>0);return u.length()>0&&a.append(u.toString()),new Ye(r,a.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(r,i,a){let u=!1;do{let f=r.readBits(8);if(f===0)throw new H;if(f<=128)return u&&(f+=128),i.append(String.fromCharCode(f-1)),dr.ASCII_ENCODE;if(f===129)return dr.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&i.append("0"),i.append(""+m)}else switch(f){case 230:return dr.C40_ENCODE;case 231:return dr.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:i.append("[)>05"),a.insert(0,"");break;case 237:i.append("[)>06"),a.insert(0,"");break;case 238:return dr.ANSIX12_ENCODE;case 239:return dr.TEXT_ENCODE;case 240:return dr.EDIFACT_ENCODE;case 241:break;default:if(f!==254||r.available()!==0)throw new H;break}}while(r.available()>0);return dr.ASCII_ENCODE}static decodeC40Segment(r,i){let a=!1;const u=[];let f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),u);for(let x=0;x<3;x++){const E=u[x];switch(f){case 0:if(E<3)f=E+1;else if(E<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[E];a?(i.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):i.append(C)}else throw new H;break;case 1:a?(i.append(String.fromCharCode(E+128)),a=!1):i.append(String.fromCharCode(E)),f=0;break;case 2:if(E<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[E];a?(i.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):i.append(C)}else switch(E){case 27:i.append("");break;case 30:a=!0;break;default:throw new H}f=0;break;case 3:a?(i.append(String.fromCharCode(E+224)),a=!1):i.append(String.fromCharCode(E+96)),f=0;break;default:throw new H}}}while(r.available()>0)}static decodeTextSegment(r,i){let a=!1,u=[],f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),u);for(let x=0;x<3;x++){const E=u[x];switch(f){case 0:if(E<3)f=E+1;else if(E<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[E];a?(i.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):i.append(C)}else throw new H;break;case 1:a?(i.append(String.fromCharCode(E+128)),a=!1):i.append(String.fromCharCode(E)),f=0;break;case 2:if(E<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[E];a?(i.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):i.append(C)}else switch(E){case 27:i.append("");break;case 30:a=!0;break;default:throw new H}f=0;break;case 3:if(E<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[E];a?(i.append(String.fromCharCode(C.charCodeAt(0)+128)),a=!1):i.append(C),f=0}else throw new H;break;default:throw new H}}}while(r.available()>0)}static decodeAnsiX12Segment(r,i){const a=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),a);for(let f=0;f<3;f++){const m=a[f];switch(m){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(m<14)i.append(String.fromCharCode(m+44));else if(m<40)i.append(String.fromCharCode(m+51));else throw new H;break}}}while(r.available()>0)}static parseTwoBytes(r,i,a){let u=(r<<8)+i-1,f=Math.floor(u/1600);a[0]=f,u-=f*1600,f=Math.floor(u/40),a[1]=f,a[2]=u-f*40}static decodeEdifactSegment(r,i){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let u=r.readBits(6);if(u===31){const f=8-r.getBitOffset();f!==8&&r.readBits(f);return}(u&32)===0&&(u|=64),i.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,i,a){let u=1+r.getByteOffset();const f=this.unrandomize255State(r.readBits(8),u++);let m;if(f===0?m=r.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(r.readBits(8),u++),m<0)throw new H;const x=new Uint8Array(m);for(let E=0;E<m;E++){if(r.available()<8)throw new H;x[E]=this.unrandomize255State(r.readBits(8),u++)}a.push(x);try{i.append(X.decode(x,Y.ISO88591))}catch(E){throw new Lr("Platform does not support required encoding: "+E.message)}}static unrandomize255State(r,i){const a=149*i%255+1,u=r-a;return u>=0?u:u+256}}Nn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Nn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Nn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Nn.TEXT_SHIFT2_SET_CHARS=Nn.C40_SHIFT2_SET_CHARS,Nn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Oo{constructor(){this.rsDecoder=new wn(Ke.DATA_MATRIX_FIELD_256)}decode(r){const i=new tn(r),a=i.getVersion(),u=i.readCodewords(),f=Da.getDataBlocks(u,a);let m=0;for(let C of f)m+=C.getNumDataCodewords();const x=new Uint8Array(m),E=f.length;for(let C=0;C<E;C++){const k=f[C],P=k.getCodewords(),F=k.getNumDataCodewords();this.correctErrors(P,F);for(let q=0;q<F;q++)x[q*E+C]=P[q]}return Nn.decode(x)}correctErrors(r,i){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-i)}catch{throw new T}for(let u=0;u<i;u++)r[u]=a[u]}}class Bt{constructor(r){this.image=r,this.rectangleDetector=new ln(this.image)}detect(){const r=this.rectangleDetector.detect();let i=this.detectSolid1(r);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new ee;i=this.shiftToModuleCenter(i);const a=i[0],u=i[1],f=i[2],m=i[3];let x=this.transitionsBetween(a,m)+1,E=this.transitionsBetween(f,m)+1;(x&1)===1&&(x+=1),(E&1)===1&&(E+=1),4*x<7*E&&4*E<7*x&&(x=E=Math.max(x,E));let C=Bt.sampleGrid(this.image,a,u,f,m,x,E);return new Jn(C,[a,u,f,m])}static shiftPoint(r,i,a){let u=(i.getX()-r.getX())/(a+1),f=(i.getY()-r.getY())/(a+1);return new Le(r.getX()+u,r.getY()+f)}static moveAway(r,i,a){let u=r.getX(),f=r.getY();return u<i?u-=1:u+=1,f<a?f-=1:f+=1,new Le(u,f)}detectSolid1(r){let i=r[0],a=r[1],u=r[3],f=r[2],m=this.transitionsBetween(i,a),x=this.transitionsBetween(a,u),E=this.transitionsBetween(u,f),C=this.transitionsBetween(f,i),k=m,P=[f,i,a,u];return k>x&&(k=x,P[0]=i,P[1]=a,P[2]=u,P[3]=f),k>E&&(k=E,P[0]=a,P[1]=u,P[2]=f,P[3]=i),k>C&&(P[0]=u,P[1]=f,P[2]=i,P[3]=a),P}detectSolid2(r){let i=r[0],a=r[1],u=r[2],f=r[3],m=this.transitionsBetween(i,f),x=Bt.shiftPoint(a,u,(m+1)*4),E=Bt.shiftPoint(u,a,(m+1)*4),C=this.transitionsBetween(x,i),k=this.transitionsBetween(E,f);return C<k?(r[0]=i,r[1]=a,r[2]=u,r[3]=f):(r[0]=a,r[1]=u,r[2]=f,r[3]=i),r}correctTopRight(r){let i=r[0],a=r[1],u=r[2],f=r[3],m=this.transitionsBetween(i,f),x=this.transitionsBetween(a,f),E=Bt.shiftPoint(i,a,(x+1)*4),C=Bt.shiftPoint(u,a,(m+1)*4);m=this.transitionsBetween(E,f),x=this.transitionsBetween(C,f);let k=new Le(f.getX()+(u.getX()-a.getX())/(m+1),f.getY()+(u.getY()-a.getY())/(m+1)),P=new Le(f.getX()+(i.getX()-a.getX())/(x+1),f.getY()+(i.getY()-a.getY())/(x+1));if(!this.isValid(k))return this.isValid(P)?P:null;if(!this.isValid(P))return k;let F=this.transitionsBetween(E,k)+this.transitionsBetween(C,k),q=this.transitionsBetween(E,P)+this.transitionsBetween(C,P);return F>q?k:P}shiftToModuleCenter(r){let i=r[0],a=r[1],u=r[2],f=r[3],m=this.transitionsBetween(i,f)+1,x=this.transitionsBetween(u,f)+1,E=Bt.shiftPoint(i,a,x*4),C=Bt.shiftPoint(u,a,m*4);m=this.transitionsBetween(E,f)+1,x=this.transitionsBetween(C,f)+1,(m&1)===1&&(m+=1),(x&1)===1&&(x+=1);let k=(i.getX()+a.getX()+u.getX()+f.getX())/4,P=(i.getY()+a.getY()+u.getY()+f.getY())/4;i=Bt.moveAway(i,k,P),a=Bt.moveAway(a,k,P),u=Bt.moveAway(u,k,P),f=Bt.moveAway(f,k,P);let F,q;return E=Bt.shiftPoint(i,a,x*4),E=Bt.shiftPoint(E,f,m*4),F=Bt.shiftPoint(a,i,x*4),F=Bt.shiftPoint(F,u,m*4),C=Bt.shiftPoint(u,f,x*4),C=Bt.shiftPoint(C,a,m*4),q=Bt.shiftPoint(f,u,x*4),q=Bt.shiftPoint(q,i,m*4),[E,F,C,q]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,i,a,u,f,m,x){return en.getInstance().sampleGrid(r,m,x,.5,.5,m-.5,.5,m-.5,x-.5,.5,x-.5,i.getX(),i.getY(),f.getX(),f.getY(),u.getX(),u.getY(),a.getX(),a.getY())}transitionsBetween(r,i){let a=Math.trunc(r.getX()),u=Math.trunc(r.getY()),f=Math.trunc(i.getX()),m=Math.trunc(i.getY()),x=Math.abs(m-u)>Math.abs(f-a);if(x){let J=a;a=u,u=J,J=f,f=m,m=J}let E=Math.abs(f-a),C=Math.abs(m-u),k=-E/2,P=u<m?1:-1,F=a<f?1:-1,q=0,Z=this.image.get(x?u:a,x?a:u);for(let J=a,ie=u;J!==f;J+=F){let pe=this.image.get(x?ie:J,x?J:ie);if(pe!==Z&&(q++,Z=pe),k+=C,k>0){if(ie===m)break;ie+=P,k-=E}}return q}}class An{constructor(){this.decoder=new Oo}decode(r,i=null){let a,u;if(i!=null&&i.has(G.PURE_BARCODE)){const C=An.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(C),u=An.NO_POINTS}else{const C=new Bt(r.getBlackMatrix()).detect();a=this.decoder.decode(C.getBits()),u=C.getPoints()}const f=a.getRawBytes(),m=new Ie(a.getText(),f,8*f.length,u,ce.DATA_MATRIX,I.currentTimeMillis()),x=a.getByteSegments();x!=null&&m.putMetadata(Te.BYTE_SEGMENTS,x);const E=a.getECLevel();return E!=null&&m.putMetadata(Te.ERROR_CORRECTION_LEVEL,E),m}reset(){}static extractPureBits(r){const i=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(i==null||a==null)throw new ee;const u=this.moduleSize(i,r);let f=i[1];const m=a[1];let x=i[0];const C=(a[0]-x+1)/u,k=(m-f+1)/u;if(C<=0||k<=0)throw new ee;const P=u/2;f+=P,x+=P;const F=new oe(C,k);for(let q=0;q<k;q++){const Z=f+q*u;for(let J=0;J<C;J++)r.get(x+J*u,Z)&&F.set(J,q)}return F}static moduleSize(r,i){const a=i.getWidth();let u=r[0];const f=r[1];for(;u<a&&i.get(u,f);)u++;if(u===a)throw new ee;const m=u-r[0];if(m===0)throw new ee;return m}}An.NO_POINTS=[];class Yu extends je{constructor(r=500){super(new An,r)}}var fi;(function(j){j[j.L=0]="L",j[j.M=1]="M",j[j.Q=2]="Q",j[j.H=3]="H"})(fi||(fi={}));class Rt{constructor(r,i,a){this.value=r,this.stringValue=i,this.bits=a,Rt.FOR_BITS.set(a,this),Rt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Rt.L;case"M":return Rt.M;case"Q":return Rt.Q;case"H":return Rt.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Rt))return!1;const i=r;return this.value===i.value}static forBits(r){if(r<0||r>=Rt.FOR_BITS.size)throw new N;return Rt.FOR_BITS.get(r)}}Rt.FOR_BITS=new Map,Rt.FOR_VALUE=new Map,Rt.L=new Rt(fi.L,"L",1),Rt.M=new Rt(fi.M,"M",0),Rt.Q=new Rt(fi.Q,"Q",3),Rt.H=new Rt(fi.H,"H",2);class _r{constructor(r){this.errorCorrectionLevel=Rt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,i){return B.bitCount(r^i)}static decodeFormatInformation(r,i){const a=_r.doDecodeFormatInformation(r,i);return a!==null?a:_r.doDecodeFormatInformation(r^_r.FORMAT_INFO_MASK_QR,i^_r.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,i){let a=Number.MAX_SAFE_INTEGER,u=0;for(const f of _r.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===r||m===i)return new _r(f[1]);let x=_r.numBitsDiffering(r,m);x<a&&(u=f[1],a=x),r!==i&&(x=_r.numBitsDiffering(i,m),x<a&&(u=f[1],a=x))}return a<=3?new _r(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof _r))return!1;const i=r;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}_r.FORMAT_INFO_MASK_QR=21522,_r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ae{constructor(r,...i){this.ecCodewordsPerBlock=r,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const i=this.ecBlocks;for(const a of i)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class W{constructor(r,i){this.count=r,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(r,i,...a){this.versionNumber=r,this.alignmentPatternCenters=i,this.ecBlocks=a;let u=0;const f=a[0].getECCodewordsPerBlock(),m=a[0].getECBlocks();for(const x of m)u+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new H;try{return this.getVersionForNumber((r-17)/4)}catch{throw new H}}static getVersionForNumber(r){if(r<1||r>40)throw new N;return qe.VERSIONS[r-1]}static decodeVersionInformation(r){let i=Number.MAX_SAFE_INTEGER,a=0;for(let u=0;u<qe.VERSION_DECODE_INFO.length;u++){const f=qe.VERSION_DECODE_INFO[u];if(f===r)return qe.getVersionForNumber(u+7);const m=_r.numBitsDiffering(r,f);m<i&&(a=u+7,i=m)}return i<=3?qe.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),i=new oe(r);i.setRegion(0,0,9,9),i.setRegion(r-8,0,8,9),i.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let u=0;u<a;u++){const f=this.alignmentPatternCenters[u]-2;for(let m=0;m<a;m++)u===0&&(m===0||m===a-1)||u===a-1&&m===0||i.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return i.setRegion(6,9,1,r-17),i.setRegion(9,6,r-17,1),this.versionNumber>6&&(i.setRegion(r-11,0,3,6),i.setRegion(0,r-11,6,3)),i}toString(){return""+this.versionNumber}}qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),qe.VERSIONS=[new qe(1,new Int32Array(0),new ae(7,new W(1,19)),new ae(10,new W(1,16)),new ae(13,new W(1,13)),new ae(17,new W(1,9))),new qe(2,Int32Array.from([6,18]),new ae(10,new W(1,34)),new ae(16,new W(1,28)),new ae(22,new W(1,22)),new ae(28,new W(1,16))),new qe(3,Int32Array.from([6,22]),new ae(15,new W(1,55)),new ae(26,new W(1,44)),new ae(18,new W(2,17)),new ae(22,new W(2,13))),new qe(4,Int32Array.from([6,26]),new ae(20,new W(1,80)),new ae(18,new W(2,32)),new ae(26,new W(2,24)),new ae(16,new W(4,9))),new qe(5,Int32Array.from([6,30]),new ae(26,new W(1,108)),new ae(24,new W(2,43)),new ae(18,new W(2,15),new W(2,16)),new ae(22,new W(2,11),new W(2,12))),new qe(6,Int32Array.from([6,34]),new ae(18,new W(2,68)),new ae(16,new W(4,27)),new ae(24,new W(4,19)),new ae(28,new W(4,15))),new qe(7,Int32Array.from([6,22,38]),new ae(20,new W(2,78)),new ae(18,new W(4,31)),new ae(18,new W(2,14),new W(4,15)),new ae(26,new W(4,13),new W(1,14))),new qe(8,Int32Array.from([6,24,42]),new ae(24,new W(2,97)),new ae(22,new W(2,38),new W(2,39)),new ae(22,new W(4,18),new W(2,19)),new ae(26,new W(4,14),new W(2,15))),new qe(9,Int32Array.from([6,26,46]),new ae(30,new W(2,116)),new ae(22,new W(3,36),new W(2,37)),new ae(20,new W(4,16),new W(4,17)),new ae(24,new W(4,12),new W(4,13))),new qe(10,Int32Array.from([6,28,50]),new ae(18,new W(2,68),new W(2,69)),new ae(26,new W(4,43),new W(1,44)),new ae(24,new W(6,19),new W(2,20)),new ae(28,new W(6,15),new W(2,16))),new qe(11,Int32Array.from([6,30,54]),new ae(20,new W(4,81)),new ae(30,new W(1,50),new W(4,51)),new ae(28,new W(4,22),new W(4,23)),new ae(24,new W(3,12),new W(8,13))),new qe(12,Int32Array.from([6,32,58]),new ae(24,new W(2,92),new W(2,93)),new ae(22,new W(6,36),new W(2,37)),new ae(26,new W(4,20),new W(6,21)),new ae(28,new W(7,14),new W(4,15))),new qe(13,Int32Array.from([6,34,62]),new ae(26,new W(4,107)),new ae(22,new W(8,37),new W(1,38)),new ae(24,new W(8,20),new W(4,21)),new ae(22,new W(12,11),new W(4,12))),new qe(14,Int32Array.from([6,26,46,66]),new ae(30,new W(3,115),new W(1,116)),new ae(24,new W(4,40),new W(5,41)),new ae(20,new W(11,16),new W(5,17)),new ae(24,new W(11,12),new W(5,13))),new qe(15,Int32Array.from([6,26,48,70]),new ae(22,new W(5,87),new W(1,88)),new ae(24,new W(5,41),new W(5,42)),new ae(30,new W(5,24),new W(7,25)),new ae(24,new W(11,12),new W(7,13))),new qe(16,Int32Array.from([6,26,50,74]),new ae(24,new W(5,98),new W(1,99)),new ae(28,new W(7,45),new W(3,46)),new ae(24,new W(15,19),new W(2,20)),new ae(30,new W(3,15),new W(13,16))),new qe(17,Int32Array.from([6,30,54,78]),new ae(28,new W(1,107),new W(5,108)),new ae(28,new W(10,46),new W(1,47)),new ae(28,new W(1,22),new W(15,23)),new ae(28,new W(2,14),new W(17,15))),new qe(18,Int32Array.from([6,30,56,82]),new ae(30,new W(5,120),new W(1,121)),new ae(26,new W(9,43),new W(4,44)),new ae(28,new W(17,22),new W(1,23)),new ae(28,new W(2,14),new W(19,15))),new qe(19,Int32Array.from([6,30,58,86]),new ae(28,new W(3,113),new W(4,114)),new ae(26,new W(3,44),new W(11,45)),new ae(26,new W(17,21),new W(4,22)),new ae(26,new W(9,13),new W(16,14))),new qe(20,Int32Array.from([6,34,62,90]),new ae(28,new W(3,107),new W(5,108)),new ae(26,new W(3,41),new W(13,42)),new ae(30,new W(15,24),new W(5,25)),new ae(28,new W(15,15),new W(10,16))),new qe(21,Int32Array.from([6,28,50,72,94]),new ae(28,new W(4,116),new W(4,117)),new ae(26,new W(17,42)),new ae(28,new W(17,22),new W(6,23)),new ae(30,new W(19,16),new W(6,17))),new qe(22,Int32Array.from([6,26,50,74,98]),new ae(28,new W(2,111),new W(7,112)),new ae(28,new W(17,46)),new ae(30,new W(7,24),new W(16,25)),new ae(24,new W(34,13))),new qe(23,Int32Array.from([6,30,54,78,102]),new ae(30,new W(4,121),new W(5,122)),new ae(28,new W(4,47),new W(14,48)),new ae(30,new W(11,24),new W(14,25)),new ae(30,new W(16,15),new W(14,16))),new qe(24,Int32Array.from([6,28,54,80,106]),new ae(30,new W(6,117),new W(4,118)),new ae(28,new W(6,45),new W(14,46)),new ae(30,new W(11,24),new W(16,25)),new ae(30,new W(30,16),new W(2,17))),new qe(25,Int32Array.from([6,32,58,84,110]),new ae(26,new W(8,106),new W(4,107)),new ae(28,new W(8,47),new W(13,48)),new ae(30,new W(7,24),new W(22,25)),new ae(30,new W(22,15),new W(13,16))),new qe(26,Int32Array.from([6,30,58,86,114]),new ae(28,new W(10,114),new W(2,115)),new ae(28,new W(19,46),new W(4,47)),new ae(28,new W(28,22),new W(6,23)),new ae(30,new W(33,16),new W(4,17))),new qe(27,Int32Array.from([6,34,62,90,118]),new ae(30,new W(8,122),new W(4,123)),new ae(28,new W(22,45),new W(3,46)),new ae(30,new W(8,23),new W(26,24)),new ae(30,new W(12,15),new W(28,16))),new qe(28,Int32Array.from([6,26,50,74,98,122]),new ae(30,new W(3,117),new W(10,118)),new ae(28,new W(3,45),new W(23,46)),new ae(30,new W(4,24),new W(31,25)),new ae(30,new W(11,15),new W(31,16))),new qe(29,Int32Array.from([6,30,54,78,102,126]),new ae(30,new W(7,116),new W(7,117)),new ae(28,new W(21,45),new W(7,46)),new ae(30,new W(1,23),new W(37,24)),new ae(30,new W(19,15),new W(26,16))),new qe(30,Int32Array.from([6,26,52,78,104,130]),new ae(30,new W(5,115),new W(10,116)),new ae(28,new W(19,47),new W(10,48)),new ae(30,new W(15,24),new W(25,25)),new ae(30,new W(23,15),new W(25,16))),new qe(31,Int32Array.from([6,30,56,82,108,134]),new ae(30,new W(13,115),new W(3,116)),new ae(28,new W(2,46),new W(29,47)),new ae(30,new W(42,24),new W(1,25)),new ae(30,new W(23,15),new W(28,16))),new qe(32,Int32Array.from([6,34,60,86,112,138]),new ae(30,new W(17,115)),new ae(28,new W(10,46),new W(23,47)),new ae(30,new W(10,24),new W(35,25)),new ae(30,new W(19,15),new W(35,16))),new qe(33,Int32Array.from([6,30,58,86,114,142]),new ae(30,new W(17,115),new W(1,116)),new ae(28,new W(14,46),new W(21,47)),new ae(30,new W(29,24),new W(19,25)),new ae(30,new W(11,15),new W(46,16))),new qe(34,Int32Array.from([6,34,62,90,118,146]),new ae(30,new W(13,115),new W(6,116)),new ae(28,new W(14,46),new W(23,47)),new ae(30,new W(44,24),new W(7,25)),new ae(30,new W(59,16),new W(1,17))),new qe(35,Int32Array.from([6,30,54,78,102,126,150]),new ae(30,new W(12,121),new W(7,122)),new ae(28,new W(12,47),new W(26,48)),new ae(30,new W(39,24),new W(14,25)),new ae(30,new W(22,15),new W(41,16))),new qe(36,Int32Array.from([6,24,50,76,102,128,154]),new ae(30,new W(6,121),new W(14,122)),new ae(28,new W(6,47),new W(34,48)),new ae(30,new W(46,24),new W(10,25)),new ae(30,new W(2,15),new W(64,16))),new qe(37,Int32Array.from([6,28,54,80,106,132,158]),new ae(30,new W(17,122),new W(4,123)),new ae(28,new W(29,46),new W(14,47)),new ae(30,new W(49,24),new W(10,25)),new ae(30,new W(24,15),new W(46,16))),new qe(38,Int32Array.from([6,32,58,84,110,136,162]),new ae(30,new W(4,122),new W(18,123)),new ae(28,new W(13,46),new W(32,47)),new ae(30,new W(48,24),new W(14,25)),new ae(30,new W(42,15),new W(32,16))),new qe(39,Int32Array.from([6,26,54,82,110,138,166]),new ae(30,new W(20,117),new W(4,118)),new ae(28,new W(40,47),new W(7,48)),new ae(30,new W(43,24),new W(22,25)),new ae(30,new W(10,15),new W(67,16))),new qe(40,Int32Array.from([6,30,58,86,114,142,170]),new ae(30,new W(19,118),new W(6,119)),new ae(28,new W(18,47),new W(31,48)),new ae(30,new W(34,24),new W(34,25)),new ae(30,new W(20,15),new W(61,16)))];var or;(function(j){j[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111"})(or||(or={}));class dt{constructor(r,i){this.value=r,this.isMasked=i}unmaskBitMatrix(r,i){for(let a=0;a<i;a++)for(let u=0;u<i;u++)this.isMasked(a,u)&&r.flip(u,a)}}dt.values=new Map([[or.DATA_MASK_000,new dt(or.DATA_MASK_000,(j,r)=>(j+r&1)===0)],[or.DATA_MASK_001,new dt(or.DATA_MASK_001,(j,r)=>(j&1)===0)],[or.DATA_MASK_010,new dt(or.DATA_MASK_010,(j,r)=>r%3===0)],[or.DATA_MASK_011,new dt(or.DATA_MASK_011,(j,r)=>(j+r)%3===0)],[or.DATA_MASK_100,new dt(or.DATA_MASK_100,(j,r)=>(Math.floor(j/2)+Math.floor(r/3)&1)===0)],[or.DATA_MASK_101,new dt(or.DATA_MASK_101,(j,r)=>j*r%6===0)],[or.DATA_MASK_110,new dt(or.DATA_MASK_110,(j,r)=>j*r%6<3)],[or.DATA_MASK_111,new dt(or.DATA_MASK_111,(j,r)=>(j+r+j*r%3&1)===0)]]);class Kl{constructor(r){const i=r.getHeight();if(i<21||(i&3)!==1)throw new H;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let f=0;f<6;f++)r=this.copyBit(f,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let f=5;f>=0;f--)r=this.copyBit(8,f,r);const i=this.bitMatrix.getHeight();let a=0;const u=i-7;for(let f=i-1;f>=u;f--)a=this.copyBit(8,f,a);for(let f=i-8;f<i;f++)a=this.copyBit(f,8,a);if(this.parsedFormatInfo=_r.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),i=Math.floor((r-17)/4);if(i<=6)return qe.getVersionForNumber(i);let a=0;const u=r-11;for(let m=5;m>=0;m--)for(let x=r-9;x>=u;x--)a=this.copyBit(x,m,a);let f=qe.decodeVersionInformation(a);if(f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;a=0;for(let m=5;m>=0;m--)for(let x=r-9;x>=u;x--)a=this.copyBit(m,x,a);if(f=qe.decodeVersionInformation(a),f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;throw new H}copyBit(r,i,a){return(this.isMirror?this.bitMatrix.get(i,r):this.bitMatrix.get(r,i))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),i=this.readVersion(),a=dt.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,u);const f=i.buildFunctionPattern();let m=!0;const x=new Uint8Array(i.getTotalCodewords());let E=0,C=0,k=0;for(let P=u-1;P>0;P-=2){P===6&&P--;for(let F=0;F<u;F++){const q=m?u-1-F:F;for(let Z=0;Z<2;Z++)f.get(P-Z,q)||(k++,C<<=1,this.bitMatrix.get(P-Z,q)&&(C|=1),k===8&&(x[E++]=C,k=0,C=0))}m=!m}if(E!==i.getTotalCodewords())throw new H;return x}remask(){if(this.parsedFormatInfo===null)return;const r=dt.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let i=0,a=r.getWidth();i<a;i++)for(let u=i+1,f=r.getHeight();u<f;u++)r.get(i,u)!==r.get(u,i)&&(r.flip(u,i),r.flip(i,u))}}class jo{constructor(r,i){this.numDataCodewords=r,this.codewords=i}static getDataBlocks(r,i,a){if(r.length!==i.getTotalCodewords())throw new N;const u=i.getECBlocksForLevel(a);let f=0;const m=u.getECBlocks();for(const Z of m)f+=Z.getCount();const x=new Array(f);let E=0;for(const Z of m)for(let J=0;J<Z.getCount();J++){const ie=Z.getDataCodewords(),pe=u.getECCodewordsPerBlock()+ie;x[E++]=new jo(ie,new Uint8Array(pe))}const C=x[0].codewords.length;let k=x.length-1;for(;k>=0&&x[k].codewords.length!==C;)k--;k++;const P=C-u.getECCodewordsPerBlock();let F=0;for(let Z=0;Z<P;Z++)for(let J=0;J<E;J++)x[J].codewords[Z]=r[F++];for(let Z=k;Z<E;Z++)x[Z].codewords[P]=r[F++];const q=x[0].codewords.length;for(let Z=P;Z<q;Z++)for(let J=0;J<E;J++){const ie=J<k?Z:Z+1;x[J].codewords[ie]=r[F++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Kr;(function(j){j[j.TERMINATOR=0]="TERMINATOR",j[j.NUMERIC=1]="NUMERIC",j[j.ALPHANUMERIC=2]="ALPHANUMERIC",j[j.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",j[j.BYTE=4]="BYTE",j[j.ECI=5]="ECI",j[j.KANJI=6]="KANJI",j[j.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",j[j.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",j[j.HANZI=9]="HANZI"})(Kr||(Kr={}));class Xe{constructor(r,i,a,u){this.value=r,this.stringValue=i,this.characterCountBitsForVersions=a,this.bits=u,Xe.FOR_BITS.set(u,this),Xe.FOR_VALUE.set(r,this)}static forBits(r){const i=Xe.FOR_BITS.get(r);if(i===void 0)throw new N;return i}getCharacterCountBits(r){const i=r.getVersionNumber();let a;return i<=9?a=0:i<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Xe))return!1;const i=r;return this.value===i.value}toString(){return this.stringValue}}Xe.FOR_BITS=new Map,Xe.FOR_VALUE=new Map,Xe.TERMINATOR=new Xe(Kr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Xe.NUMERIC=new Xe(Kr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Xe.ALPHANUMERIC=new Xe(Kr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Xe.STRUCTURED_APPEND=new Xe(Kr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Xe.BYTE=new Xe(Kr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Xe.ECI=new Xe(Kr.ECI,"ECI",Int32Array.from([0,0,0]),7),Xe.KANJI=new Xe(Kr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Xe.FNC1_FIRST_POSITION=new Xe(Kr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Xe.FNC1_SECOND_POSITION=new Xe(Kr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Xe.HANZI=new Xe(Kr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ut{static decode(r,i,a,u){const f=new Ma(r);let m=new fe;const x=new Array;let E=-1,C=-1;try{let k=null,P=!1,F;do{if(f.available()<4)F=Xe.TERMINATOR;else{const q=f.readBits(4);F=Xe.forBits(q)}switch(F){case Xe.TERMINATOR:break;case Xe.FNC1_FIRST_POSITION:case Xe.FNC1_SECOND_POSITION:P=!0;break;case Xe.STRUCTURED_APPEND:if(f.available()<16)throw new H;E=f.readBits(8),C=f.readBits(8);break;case Xe.ECI:const q=Ut.parseECIValue(f);if(k=$.getCharacterSetECIByValue(q),k===null)throw new H;break;case Xe.HANZI:const Z=f.readBits(4),J=f.readBits(F.getCharacterCountBits(i));Z===Ut.GB2312_SUBSET&&Ut.decodeHanziSegment(f,m,J);break;default:const ie=f.readBits(F.getCharacterCountBits(i));switch(F){case Xe.NUMERIC:Ut.decodeNumericSegment(f,m,ie);break;case Xe.ALPHANUMERIC:Ut.decodeAlphanumericSegment(f,m,ie,P);break;case Xe.BYTE:Ut.decodeByteSegment(f,m,ie,k,x,u);break;case Xe.KANJI:Ut.decodeKanjiSegment(f,m,ie);break;default:throw new H}break}}while(F!==Xe.TERMINATOR)}catch{throw new H}return new Ye(r,m.toString(),x.length===0?null:x,a===null?null:a.toString(),E,C)}static decodeHanziSegment(r,i,a){if(a*13>r.available())throw new H;const u=new Uint8Array(2*a);let f=0;for(;a>0;){const m=r.readBits(13);let x=m/96<<8&4294967295|m%96;x<959?x+=41377:x+=42657,u[f]=x>>8&255,u[f+1]=x&255,f+=2,a--}try{i.append(X.decode(u,Y.GB2312))}catch(m){throw new H(m)}}static decodeKanjiSegment(r,i,a){if(a*13>r.available())throw new H;const u=new Uint8Array(2*a);let f=0;for(;a>0;){const m=r.readBits(13);let x=m/192<<8&4294967295|m%192;x<7936?x+=33088:x+=49472,u[f]=x>>8,u[f+1]=x,f+=2,a--}try{i.append(X.decode(u,Y.SHIFT_JIS))}catch(m){throw new H(m)}}static decodeByteSegment(r,i,a,u,f,m){if(8*a>r.available())throw new H;const x=new Uint8Array(a);for(let C=0;C<a;C++)x[C]=r.readBits(8);let E;u===null?E=Y.guessEncoding(x,m):E=u.getName();try{i.append(X.decode(x,E))}catch(C){throw new H(C)}f.push(x)}static toAlphaNumericChar(r){if(r>=Ut.ALPHANUMERIC_CHARS.length)throw new H;return Ut.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,i,a,u){const f=i.length();for(;a>1;){if(r.available()<11)throw new H;const m=r.readBits(11);i.append(Ut.toAlphaNumericChar(Math.floor(m/45))),i.append(Ut.toAlphaNumericChar(m%45)),a-=2}if(a===1){if(r.available()<6)throw new H;i.append(Ut.toAlphaNumericChar(r.readBits(6)))}if(u)for(let m=f;m<i.length();m++)i.charAt(m)==="%"&&(m<i.length()-1&&i.charAt(m+1)==="%"?i.deleteCharAt(m+1):i.setCharAt(m,""))}static decodeNumericSegment(r,i,a){for(;a>=3;){if(r.available()<10)throw new H;const u=r.readBits(10);if(u>=1e3)throw new H;i.append(Ut.toAlphaNumericChar(Math.floor(u/100))),i.append(Ut.toAlphaNumericChar(Math.floor(u/10)%10)),i.append(Ut.toAlphaNumericChar(u%10)),a-=3}if(a===2){if(r.available()<7)throw new H;const u=r.readBits(7);if(u>=100)throw new H;i.append(Ut.toAlphaNumericChar(Math.floor(u/10))),i.append(Ut.toAlphaNumericChar(u%10))}else if(a===1){if(r.available()<4)throw new H;const u=r.readBits(4);if(u>=10)throw new H;i.append(Ut.toAlphaNumericChar(u))}}static parseECIValue(r){const i=r.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const a=r.readBits(8);return(i&63)<<8&4294967295|a}if((i&224)===192){const a=r.readBits(16);return(i&31)<<16&4294967295|a}throw new H}}Ut.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ut.GB2312_SUBSET=1;class La{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const i=r[0];r[0]=r[2],r[2]=i}}class Ba{constructor(){this.rsDecoder=new wn(Ke.QR_CODE_FIELD_256)}decodeBooleanArray(r,i){return this.decodeBitMatrix(oe.parseFromBooleanArray(r),i)}decodeBitMatrix(r,i){const a=new Kl(r);let u=null;try{return this.decodeBitMatrixParser(a,i)}catch(f){u=f}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const f=this.decodeBitMatrixParser(a,i);return f.setOther(new La(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(r,i){const a=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),f=r.readCodewords(),m=jo.getDataBlocks(f,a,u);let x=0;for(const k of m)x+=k.getNumDataCodewords();const E=new Uint8Array(x);let C=0;for(const k of m){const P=k.getCodewords(),F=k.getNumDataCodewords();this.correctErrors(P,F);for(let q=0;q<F;q++)E[C++]=P[q]}return Ut.decode(E,a,u,i)}correctErrors(r,i){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-i)}catch{throw new T}for(let u=0;u<i;u++)r[u]=a[u]}}class hi extends Le{constructor(r,i,a){super(r,i),this.estimatedModuleSize=a}aboutEquals(r,i,a){if(Math.abs(i-this.getY())<=r&&Math.abs(a-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,i,a){const u=(this.getX()+i)/2,f=(this.getY()+r)/2,m=(this.estimatedModuleSize+a)/2;return new hi(u,f,m)}}class Tn{constructor(r,i,a,u,f,m,x){this.image=r,this.startX=i,this.startY=a,this.width=u,this.height=f,this.moduleSize=m,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,i=this.height,a=this.width,u=r+a,f=this.startY+i/2,m=new Int32Array(3),x=this.image;for(let E=0;E<i;E++){const C=f+((E&1)===0?Math.floor((E+1)/2):-Math.floor((E+1)/2));m[0]=0,m[1]=0,m[2]=0;let k=r;for(;k<u&&!x.get(k,C);)k++;let P=0;for(;k<u;){if(x.get(k,C))if(P===1)m[1]++;else if(P===2){if(this.foundPatternCross(m)){const F=this.handlePossibleCenter(m,C,k);if(F!==null)return F}m[0]=m[2],m[1]=1,m[2]=0,P=1}else m[++P]++;else P===1&&P++,m[P]++;k++}if(this.foundPatternCross(m)){const F=this.handlePossibleCenter(m,C,u);if(F!==null)return F}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(r,i){return i-r[2]-r[1]/2}foundPatternCross(r){const i=this.moduleSize,a=i/2;for(let u=0;u<3;u++)if(Math.abs(i-r[u])>=a)return!1;return!0}crossCheckVertical(r,i,a,u){const f=this.image,m=f.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let E=r;for(;E>=0&&f.get(i,E)&&x[1]<=a;)x[1]++,E--;if(E<0||x[1]>a)return NaN;for(;E>=0&&!f.get(i,E)&&x[0]<=a;)x[0]++,E--;if(x[0]>a)return NaN;for(E=r+1;E<m&&f.get(i,E)&&x[1]<=a;)x[1]++,E++;if(E===m||x[1]>a)return NaN;for(;E<m&&!f.get(i,E)&&x[2]<=a;)x[2]++,E++;if(x[2]>a)return NaN;const C=x[0]+x[1]+x[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(x)?Tn.centerFromEnd(x,E):NaN}handlePossibleCenter(r,i,a){const u=r[0]+r[1]+r[2],f=Tn.centerFromEnd(r,a),m=this.crossCheckVertical(i,f,2*r[1],u);if(!isNaN(m)){const x=(r[0]+r[1]+r[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(x,m,f))return C.combineEstimate(m,f,x);const E=new hi(f,m,x);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null}}class Hn extends Le{constructor(r,i,a,u){super(r,i),this.estimatedModuleSize=a,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,i,a){if(Math.abs(i-this.getY())<=r&&Math.abs(a-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,i,a){const u=this.count+1,f=(this.count*this.getX()+i)/u,m=(this.count*this.getY()+r)/u,x=(this.count*this.estimatedModuleSize+a)/u;return new Hn(f,m,x,u)}}class vs{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Yt{constructor(r,i){this.image=r,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const i=r!=null&&r.get(G.TRY_HARDER)!==void 0,a=r!=null&&r.get(G.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),m=u.getWidth();let x=Math.floor(3*f/(4*Yt.MAX_MODULES));(x<Yt.MIN_SKIP||i)&&(x=Yt.MIN_SKIP);let E=!1;const C=new Int32Array(5);for(let P=x-1;P<f&&!E;P+=x){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let F=0;for(let q=0;q<m;q++)if(u.get(q,P))(F&1)===1&&F++,C[F]++;else if((F&1)===0)if(F===4)if(Yt.foundPatternCross(C)){if(this.handlePossibleCenter(C,P,q,a)===!0)if(x=2,this.hasSkipped===!0)E=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>C[2]&&(P+=J-C[2]-x,q=m-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,F=3;continue}F=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,F=3;else C[++F]++;else C[F]++;Yt.foundPatternCross(C)&&this.handlePossibleCenter(C,P,m,a)===!0&&(x=C[0],this.hasSkipped&&(E=this.haveMultiplyConfirmedCenters()))}const k=this.selectBestPatterns();return Le.orderBestPatterns(k),new vs(k)}static centerFromEnd(r,i){return i-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let i=0;for(let f=0;f<5;f++){const m=r[f];if(m===0)return!1;i+=m}if(i<7)return!1;const a=i/7,u=a/2;return Math.abs(a-r[0])<u&&Math.abs(a-r[1])<u&&Math.abs(3*a-r[2])<3*u&&Math.abs(a-r[3])<u&&Math.abs(a-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,i,a,u){const f=this.getCrossCheckStateCount();let m=0;const x=this.image;for(;r>=m&&i>=m&&x.get(i-m,r-m);)f[2]++,m++;if(r<m||i<m)return!1;for(;r>=m&&i>=m&&!x.get(i-m,r-m)&&f[1]<=a;)f[1]++,m++;if(r<m||i<m||f[1]>a)return!1;for(;r>=m&&i>=m&&x.get(i-m,r-m)&&f[0]<=a;)f[0]++,m++;if(f[0]>a)return!1;const E=x.getHeight(),C=x.getWidth();for(m=1;r+m<E&&i+m<C&&x.get(i+m,r+m);)f[2]++,m++;if(r+m>=E||i+m>=C)return!1;for(;r+m<E&&i+m<C&&!x.get(i+m,r+m)&&f[3]<a;)f[3]++,m++;if(r+m>=E||i+m>=C||f[3]>=a)return!1;for(;r+m<E&&i+m<C&&x.get(i+m,r+m)&&f[4]<a;)f[4]++,m++;if(f[4]>=a)return!1;const k=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(k-u)<2*u&&Yt.foundPatternCross(f)}crossCheckVertical(r,i,a,u){const f=this.image,m=f.getHeight(),x=this.getCrossCheckStateCount();let E=r;for(;E>=0&&f.get(i,E);)x[2]++,E--;if(E<0)return NaN;for(;E>=0&&!f.get(i,E)&&x[1]<=a;)x[1]++,E--;if(E<0||x[1]>a)return NaN;for(;E>=0&&f.get(i,E)&&x[0]<=a;)x[0]++,E--;if(x[0]>a)return NaN;for(E=r+1;E<m&&f.get(i,E);)x[2]++,E++;if(E===m)return NaN;for(;E<m&&!f.get(i,E)&&x[3]<a;)x[3]++,E++;if(E===m||x[3]>=a)return NaN;for(;E<m&&f.get(i,E)&&x[4]<a;)x[4]++,E++;if(x[4]>=a)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-u)>=2*u?NaN:Yt.foundPatternCross(x)?Yt.centerFromEnd(x,E):NaN}crossCheckHorizontal(r,i,a,u){const f=this.image,m=f.getWidth(),x=this.getCrossCheckStateCount();let E=r;for(;E>=0&&f.get(E,i);)x[2]++,E--;if(E<0)return NaN;for(;E>=0&&!f.get(E,i)&&x[1]<=a;)x[1]++,E--;if(E<0||x[1]>a)return NaN;for(;E>=0&&f.get(E,i)&&x[0]<=a;)x[0]++,E--;if(x[0]>a)return NaN;for(E=r+1;E<m&&f.get(E,i);)x[2]++,E++;if(E===m)return NaN;for(;E<m&&!f.get(E,i)&&x[3]<a;)x[3]++,E++;if(E===m||x[3]>=a)return NaN;for(;E<m&&f.get(E,i)&&x[4]<a;)x[4]++,E++;if(x[4]>=a)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-u)>=u?NaN:Yt.foundPatternCross(x)?Yt.centerFromEnd(x,E):NaN}handlePossibleCenter(r,i,a,u){const f=r[0]+r[1]+r[2]+r[3]+r[4];let m=Yt.centerFromEnd(r,a),x=this.crossCheckVertical(i,Math.floor(m),r[2],f);if(!isNaN(x)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(x),r[2],f),!isNaN(m)&&(!u||this.crossCheckDiagonal(Math.floor(x),Math.floor(m),r[2],f)))){const E=f/7;let C=!1;const k=this.possibleCenters;for(let P=0,F=k.length;P<F;P++){const q=k[P];if(q.aboutEquals(E,x,m)){k[P]=q.combineEstimate(x,m,E),C=!0;break}}if(!C){const P=new Hn(m,x,E);k.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const a of this.possibleCenters)if(a.getCount()>=Yt.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,i=0;const a=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Yt.CENTER_QUORUM&&(r++,i+=m.getEstimatedModuleSize());if(r<3)return!1;const u=i/a;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-u);return f<=.05*i}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ee;const i=this.possibleCenters;let a;if(r>3){let u=0,f=0;for(const E of this.possibleCenters){const C=E.getEstimatedModuleSize();u+=C,f+=C*C}a=u/r;let m=Math.sqrt(f/r-a*a);i.sort((E,C)=>{const k=Math.abs(C.getEstimatedModuleSize()-a),P=Math.abs(E.getEstimatedModuleSize()-a);return k<P?-1:k>P?1:0});const x=Math.max(.2*a,m);for(let E=0;E<i.length&&i.length>3;E++){const C=i[E];Math.abs(C.getEstimatedModuleSize()-a)>x&&(i.splice(E,1),E--)}}if(i.length>3){let u=0;for(const f of i)u+=f.getEstimatedModuleSize();a=u/i.length,i.sort((f,m)=>{if(m.getCount()===f.getCount()){const x=Math.abs(m.getEstimatedModuleSize()-a),E=Math.abs(f.getEstimatedModuleSize()-a);return x<E?1:x>E?-1:0}else return m.getCount()-f.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Yt.CENTER_QUORUM=2,Yt.MIN_SKIP=3,Yt.MAX_MODULES=57;class ts{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(G.NEED_RESULT_POINT_CALLBACK);const a=new Yt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const i=r.getTopLeft(),a=r.getTopRight(),u=r.getBottomLeft(),f=this.calculateModuleSize(i,a,u);if(f<1)throw new ee("No pattern found in proccess finder.");const m=ts.computeDimension(i,a,u,f),x=qe.getProvisionalVersionForDimension(m),E=x.getDimensionForVersion()-7;let C=null;if(x.getAlignmentPatternCenters().length>0){const q=a.getX()-i.getX()+u.getX(),Z=a.getY()-i.getY()+u.getY(),J=1-3/E,ie=Math.floor(i.getX()+J*(q-i.getX())),pe=Math.floor(i.getY()+J*(Z-i.getY()));for(let Re=4;Re<=16;Re<<=1)try{C=this.findAlignmentInRegion(f,ie,pe,Re);break}catch(Oe){if(!(Oe instanceof ee))throw Oe}}const k=ts.createTransform(i,a,u,C,m),P=ts.sampleGrid(this.image,k,m);let F;return C===null?F=[u,i,a]:F=[u,i,a,C],new Jn(P,F)}static createTransform(r,i,a,u,f){const m=f-3.5;let x,E,C,k;return u!==null?(x=u.getX(),E=u.getY(),C=m-3,k=C):(x=i.getX()-r.getX()+a.getX(),E=i.getY()-r.getY()+a.getY(),C=m,k=m),Dt.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,C,k,3.5,m,r.getX(),r.getY(),i.getX(),i.getY(),x,E,a.getX(),a.getY())}static sampleGrid(r,i,a){return en.getInstance().sampleGridWithTransform(r,a,a,i)}static computeDimension(r,i,a,u){const f=pt.round(Le.distance(r,i)/u),m=pt.round(Le.distance(r,a)/u);let x=Math.floor((f+m)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new ee("Dimensions could be not found.")}return x}calculateModuleSize(r,i,a){return(this.calculateModuleSizeOneWay(r,i)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,i){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(i.getX()),Math.floor(i.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?u/7:isNaN(u)?a/7:(a+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,i,a,u){let f=this.sizeOfBlackWhiteBlackRun(r,i,a,u),m=1,x=r-(a-r);x<0?(m=r/(r-x),x=0):x>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(x-r),x=this.image.getWidth()-1);let E=Math.floor(i-(u-i)*m);return m=1,E<0?(m=i/(i-E),E=0):E>=this.image.getHeight()&&(m=(this.image.getHeight()-1-i)/(E-i),E=this.image.getHeight()-1),x=Math.floor(r+(x-r)*m),f+=this.sizeOfBlackWhiteBlackRun(r,i,x,E),f-1}sizeOfBlackWhiteBlackRun(r,i,a,u){const f=Math.abs(u-i)>Math.abs(a-r);if(f){let q=r;r=i,i=q,q=a,a=u,u=q}const m=Math.abs(a-r),x=Math.abs(u-i);let E=-m/2;const C=r<a?1:-1,k=i<u?1:-1;let P=0;const F=a+C;for(let q=r,Z=i;q!==F;q+=C){const J=f?Z:q,ie=f?q:Z;if(P===1===this.image.get(J,ie)){if(P===2)return pt.distance(q,Z,r,i);P++}if(E+=x,E>0){if(Z===u)break;Z+=k,E-=m}}return P===2?pt.distance(a+C,u,r,i):NaN}findAlignmentInRegion(r,i,a,u){const f=Math.floor(u*r),m=Math.max(0,i-f),x=Math.min(this.image.getWidth()-1,i+f);if(x-m<r*3)throw new ee("Alignment top exceeds estimated module size.");const E=Math.max(0,a-f),C=Math.min(this.image.getHeight()-1,a+f);if(C-E<r*3)throw new ee("Alignment bottom exceeds estimated module size.");return new Tn(this.image,m,E,x-m,C-E,r,this.resultPointCallback).find()}}class Fr{constructor(){this.decoder=new Ba}getDecoder(){return this.decoder}decode(r,i){let a,u;if(i!=null&&i.get(G.PURE_BARCODE)!==void 0){const E=Fr.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(E,i),u=Fr.NO_POINTS}else{const E=new ts(r.getBlackMatrix()).detect(i);a=this.decoder.decodeBitMatrix(E.getBits(),i),u=E.getPoints()}a.getOther()instanceof La&&a.getOther().applyMirroredCorrection(u);const f=new Ie(a.getText(),a.getRawBytes(),void 0,u,ce.QR_CODE,void 0),m=a.getByteSegments();m!==null&&f.putMetadata(Te.BYTE_SEGMENTS,m);const x=a.getECLevel();return x!==null&&f.putMetadata(Te.ERROR_CORRECTION_LEVEL,x),a.hasStructuredAppend()&&(f.putMetadata(Te.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),f.putMetadata(Te.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),f}reset(){}static extractPureBits(r){const i=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(i===null||a===null)throw new ee;const u=this.moduleSize(i,r);let f=i[1],m=a[1],x=i[0],E=a[0];if(x>=E||f>=m)throw new ee;if(m-f!==E-x&&(E=x+(m-f),E>=r.getWidth()))throw new ee;const C=Math.round((E-x+1)/u),k=Math.round((m-f+1)/u);if(C<=0||k<=0)throw new ee;if(k!==C)throw new ee;const P=Math.floor(u/2);f+=P,x+=P;const F=x+Math.floor((C-1)*u)-E;if(F>0){if(F>P)throw new ee;x-=F}const q=f+Math.floor((k-1)*u)-m;if(q>0){if(q>P)throw new ee;f-=q}const Z=new oe(C,k);for(let J=0;J<k;J++){const ie=f+Math.floor(J*u);for(let pe=0;pe<C;pe++)r.get(x+Math.floor(pe*u),ie)&&Z.set(pe,J)}return Z}static moduleSize(r,i){const a=i.getHeight(),u=i.getWidth();let f=r[0],m=r[1],x=!0,E=0;for(;f<u&&m<a;){if(x!==i.get(f,m)){if(++E===5)break;x=!x}f++,m++}if(f===u||m===a)throw new ee;return(f-r[0])/7}}Fr.NO_POINTS=new Array;class tt{PDF417Common(){}static getBitCountSum(r){return pt.sum(r)}static toIntArray(r){if(r==null||!r.length)return tt.EMPTY_INT_ARRAY;const i=new Int32Array(r.length);let a=0;for(const u of r)i[a++]=u;return i}static getCodeword(r){const i=U.binarySearch(tt.SYMBOL_TABLE,r&262143);return i<0?-1:(tt.CODEWORD_TABLE[i]-1)%tt.NUMBER_OF_CODEWORDS}}tt.NUMBER_OF_CODEWORDS=929,tt.MAX_CODEWORDS_IN_BARCODE=tt.NUMBER_OF_CODEWORDS-1,tt.MIN_ROWS_IN_BARCODE=3,tt.MAX_ROWS_IN_BARCODE=90,tt.MODULES_IN_CODEWORD=17,tt.MODULES_IN_STOP_PATTERN=18,tt.BARS_IN_MODULE=8,tt.EMPTY_INT_ARRAY=new Int32Array([]),tt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),tt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Xl{constructor(r,i){this.bits=r,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class ot{static detectMultiple(r,i,a){let u=r.getBlackMatrix(),f=ot.detect(a,u);return f.length||(u=u.clone(),u.rotate180(),f=ot.detect(a,u)),new Xl(u,f)}static detect(r,i){const a=new Array;let u=0,f=0,m=!1;for(;u<i.getHeight();){const x=ot.findVertices(i,u,f);if(x[0]==null&&x[3]==null){if(!m)break;m=!1,f=0;for(const E of a)E[1]!=null&&(u=Math.trunc(Math.max(u,E[1].getY()))),E[3]!=null&&(u=Math.max(u,Math.trunc(E[3].getY())));u+=ot.ROW_STEP;continue}if(m=!0,a.push(x),!r)break;x[2]!=null?(f=Math.trunc(x[2].getX()),u=Math.trunc(x[2].getY())):(f=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY()))}return a}static findVertices(r,i,a){const u=r.getHeight(),f=r.getWidth(),m=new Array(8);return ot.copyToResult(m,ot.findRowsWithPattern(r,u,f,i,a,ot.START_PATTERN),ot.INDEXES_START_PATTERN),m[4]!=null&&(a=Math.trunc(m[4].getX()),i=Math.trunc(m[4].getY())),ot.copyToResult(m,ot.findRowsWithPattern(r,u,f,i,a,ot.STOP_PATTERN),ot.INDEXES_STOP_PATTERN),m}static copyToResult(r,i,a){for(let u=0;u<a.length;u++)r[a[u]]=i[u]}static findRowsWithPattern(r,i,a,u,f,m){const x=new Array(4);let E=!1;const C=new Int32Array(m.length);for(;u<i;u+=ot.ROW_STEP){let P=ot.findGuardPattern(r,f,u,a,!1,m,C);if(P!=null){for(;u>0;){const F=ot.findGuardPattern(r,f,--u,a,!1,m,C);if(F!=null)P=F;else{u++;break}}x[0]=new Le(P[0],u),x[1]=new Le(P[1],u),E=!0;break}}let k=u+1;if(E){let P=0,F=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;k<i;k++){const q=ot.findGuardPattern(r,F[0],k,a,!1,m,C);if(q!=null&&Math.abs(F[0]-q[0])<ot.MAX_PATTERN_DRIFT&&Math.abs(F[1]-q[1])<ot.MAX_PATTERN_DRIFT)F=q,P=0;else{if(P>ot.SKIPPED_ROW_COUNT_MAX)break;P++}}k-=P+1,x[2]=new Le(F[0],k),x[3]=new Le(F[1],k)}return k-u<ot.BARCODE_MIN_HEIGHT&&U.fill(x,null),x}static findGuardPattern(r,i,a,u,f,m,x){U.fillWithin(x,0,x.length,0);let E=i,C=0;for(;r.get(E,a)&&E>0&&C++<ot.MAX_PIXEL_DRIFT;)E--;let k=E,P=0,F=m.length;for(let q=f;k<u;k++)if(r.get(k,a)!==q)x[P]++;else{if(P===F-1){if(ot.patternMatchVariance(x,m,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return new Int32Array([E,k]);E+=x[0]+x[1],I.arraycopy(x,2,x,0,P-1),x[P-1]=0,x[P]=0,P--}else P++;x[P]=1,q=!q}return P===F-1&&ot.patternMatchVariance(x,m,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE?new Int32Array([E,k-1]):null}static patternMatchVariance(r,i,a){let u=r.length,f=0,m=0;for(let C=0;C<u;C++)f+=r[C],m+=i[C];if(f<m)return 1/0;let x=f/m;a*=x;let E=0;for(let C=0;C<u;C++){let k=r[C],P=i[C]*x,F=k>P?k-P:P-k;if(F>a)return 1/0;E+=F}return E/f}}ot.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ot.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ot.MAX_AVG_VARIANCE=.42,ot.MAX_INDIVIDUAL_VARIANCE=.8,ot.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ot.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ot.MAX_PIXEL_DRIFT=3,ot.MAX_PATTERN_DRIFT=5,ot.SKIPPED_ROW_COUNT_MAX=25,ot.ROW_STEP=5,ot.BARCODE_MIN_HEIGHT=10;class Sr{constructor(r,i){if(i.length===0)throw new N;this.field=r;let a=i.length;if(a>1&&i[0]===0){let u=1;for(;u<a&&i[u]===0;)u++;u===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-u),I.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let i=this.coefficients[0],a=this.coefficients.length;for(let u=1;u<a;u++)i=this.field.add(this.field.multiply(r,i),this.coefficients[u]);return i}add(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let i=this.coefficients,a=r.coefficients;if(i.length>a.length){let m=i;i=a,a=m}let u=new Int32Array(a.length),f=a.length-i.length;I.arraycopy(a,0,u,0,f);for(let m=f;m<a.length;m++)u[m]=this.field.add(i[m-f],a[m]);return new Sr(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Sr?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Sr(this.field,new Int32Array([0]));let i=this.coefficients,a=i.length,u=r.coefficients,f=u.length,m=new Int32Array(a+f-1);for(let x=0;x<a;x++){let E=i[x];for(let C=0;C<f;C++)m[x+C]=this.field.add(m[x+C],this.field.multiply(E,u[C]))}return new Sr(this.field,m)}negative(){let r=this.coefficients.length,i=new Int32Array(r);for(let a=0;a<r;a++)i[a]=this.field.subtract(0,this.coefficients[a]);return new Sr(this.field,i)}multiplyScalar(r){if(r===0)return new Sr(this.field,new Int32Array([0]));if(r===1)return this;let i=this.coefficients.length,a=new Int32Array(i);for(let u=0;u<i;u++)a[u]=this.field.multiply(this.coefficients[u],r);return new Sr(this.field,a)}multiplyByMonomial(r,i){if(r<0)throw new N;if(i===0)return new Sr(this.field,new Int32Array([0]));let a=this.coefficients.length,u=new Int32Array(a+r);for(let f=0;f<a;f++)u[f]=this.field.multiply(this.coefficients[f],i);return new Sr(this.field,u)}toString(){let r=new fe;for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(i===0||a!==1)&&r.append(a),i!==0&&(i===1?r.append("x"):(r.append("x^"),r.append(i))))}return r.toString()}}class Yl{add(r,i){return(r+i)%this.modulus}subtract(r,i){return(this.modulus+r-i)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new N;return this.logTable[r]}inverse(r){if(r===0)throw new At;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,i){return r===0||i===0?0:this.expTable[(this.logTable[r]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class mi extends Yl{constructor(r,i){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let u=0;u<r;u++)this.expTable[u]=a,a=a*i%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Sr(this,new Int32Array([0])),this.one=new Sr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,i){if(r<0)throw new N;if(i===0)return this.zero;let a=new Int32Array(r+1);return a[0]=i,new Sr(this,a)}}mi.PDF417_GF=new mi(tt.NUMBER_OF_CODEWORDS,3);class Fa{constructor(){this.field=mi.PDF417_GF}decode(r,i,a){let u=new Sr(this.field,r),f=new Int32Array(i),m=!1;for(let Z=i;Z>0;Z--){let J=u.evaluateAt(this.field.exp(Z));f[i-Z]=J,J!==0&&(m=!0)}if(!m)return 0;let x=this.field.getOne();if(a!=null)for(const Z of a){let J=this.field.exp(r.length-1-Z),ie=new Sr(this.field,new Int32Array([this.field.subtract(0,J),1]));x=x.multiply(ie)}let E=new Sr(this.field,f),C=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),E,i),k=C[0],P=C[1],F=this.findErrorLocations(k),q=this.findErrorMagnitudes(P,k,F);for(let Z=0;Z<F.length;Z++){let J=r.length-1-this.field.log(F[Z]);if(J<0)throw T.getChecksumInstance();r[J]=this.field.subtract(r[J],q[Z])}return F.length}runEuclideanAlgorithm(r,i,a){if(r.getDegree()<i.getDegree()){let F=r;r=i,i=F}let u=r,f=i,m=this.field.getZero(),x=this.field.getOne();for(;f.getDegree()>=Math.round(a/2);){let F=u,q=m;if(u=f,m=x,u.isZero())throw T.getChecksumInstance();f=F;let Z=this.field.getZero(),J=u.getCoefficient(u.getDegree()),ie=this.field.inverse(J);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let pe=f.getDegree()-u.getDegree(),Re=this.field.multiply(f.getCoefficient(f.getDegree()),ie);Z=Z.add(this.field.buildMonomial(pe,Re)),f=f.subtract(u.multiplyByMonomial(pe,Re))}x=Z.multiply(m).subtract(q).negative()}let E=x.getCoefficient(0);if(E===0)throw T.getChecksumInstance();let C=this.field.inverse(E),k=x.multiply(C),P=f.multiply(C);return[k,P]}findErrorLocations(r){let i=r.getDegree(),a=new Int32Array(i),u=0;for(let f=1;f<this.field.getSize()&&u<i;f++)r.evaluateAt(f)===0&&(a[u]=this.field.inverse(f),u++);if(u!==i)throw T.getChecksumInstance();return a}findErrorMagnitudes(r,i,a){let u=i.getDegree(),f=new Int32Array(u);for(let C=1;C<=u;C++)f[u-C]=this.field.multiply(C,i.getCoefficient(C));let m=new Sr(this.field,f),x=a.length,E=new Int32Array(x);for(let C=0;C<x;C++){let k=this.field.inverse(a[C]),P=this.field.subtract(0,r.evaluateAt(k)),F=this.field.inverse(m.evaluateAt(k));E[C]=this.field.multiply(P,F)}return E}}class Ds{constructor(r,i,a,u,f){r instanceof Ds?this.constructor_2(r):this.constructor_1(r,i,a,u,f)}constructor_1(r,i,a,u,f){const m=i==null||a==null,x=u==null||f==null;if(m&&x)throw new ee;m?(i=new Le(0,u.getY()),a=new Le(0,f.getY())):x&&(u=new Le(r.getWidth()-1,i.getY()),f=new Le(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=i,this.bottomLeft=a,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(i.getX(),a.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(i.getY(),u.getY())),this.maxY=Math.trunc(Math.max(a.getY(),f.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,i){return r==null?i:i==null?r:new Ds(r.image,r.topLeft,r.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(r,i,a){let u=this.topLeft,f=this.bottomLeft,m=this.topRight,x=this.bottomRight;if(r>0){let E=a?this.topLeft:this.topRight,C=Math.trunc(E.getY()-r);C<0&&(C=0);let k=new Le(E.getX(),C);a?u=k:m=k}if(i>0){let E=a?this.bottomLeft:this.bottomRight,C=Math.trunc(E.getY()+i);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let k=new Le(E.getX(),C);a?f=k:x=k}return new Ds(this.image,u,f,m,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Qi{constructor(r,i,a,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=i,this.rowCountLowerPart=a,this.rowCount=i+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class rs{constructor(){this.buffer=""}static form(r,i){let a=-1;function u(m,x,E,C,k,P){if(m==="%%")return"%";if(i[++a]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let F=k?parseInt(k.substr(1)):void 0,q;switch(P){case"s":q=i[a];break;case"c":q=i[a][0];break;case"f":q=parseFloat(i[a]).toFixed(m);break;case"p":q=parseFloat(i[a]).toPrecision(m);break;case"e":q=parseFloat(i[a]).toExponential(m);break;case"x":q=parseInt(i[a]).toString(F||16);break;case"d":q=parseFloat(parseInt(i[a],F||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(F);let Z=parseInt(E),J=E&&E[0]+""=="0"?"0":" ";for(;q.length<Z;)q=x!==void 0?q+J:J+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,u)}format(r,...i){this.buffer+=rs.form(r,i)}toString(){return this.buffer}}class Wn{constructor(r){this.boundingBox=new Ds(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let i=this.getCodeword(r);if(i!=null)return i;for(let a=1;a<Wn.MAX_NEARBY_DISTANCE;a++){let u=this.imageRowToCodewordIndex(r)-a;if(u>=0&&(i=this.codewords[u],i!=null)||(u=this.imageRowToCodewordIndex(r)+a,u<this.codewords.length&&(i=this.codewords[u],i!=null)))return i}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,i){this.codewords[this.imageRowToCodewordIndex(r)]=i}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new rs;let i=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}return r.toString()}}Wn.MAX_NEARBY_DISTANCE=5;class bs{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let i=this.values.get(r);i==null&&(i=0),i++,this.values.set(r,i)}getValue(){let r=-1,i=new Array;for(const[a,u]of this.values.entries()){const f={getKey:()=>a,getValue:()=>u};f.getValue()>r?(r=f.getValue(),i=[],i.push(f.getKey())):f.getValue()===r&&i.push(f.getKey())}return tt.toIntArray(i)}getConfidence(r){return this.values.get(r)}}class Zl extends Wn{constructor(r,i){super(r),this._isLeft=i}setRowNumbers(){for(let r of this.getCodewords())r?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,r);let a=this.getBoundingBox(),u=this._isLeft?a.getTopLeft():a.getTopRight(),f=this._isLeft?a.getBottomLeft():a.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),E=-1,C=1,k=0;for(let P=m;P<x;P++){if(i[P]==null)continue;let F=i[P],q=F.getRowNumber()-E;if(q===0)k++;else if(q===1)C=Math.max(C,k),k=1,E=F.getRowNumber();else if(q<0||F.getRowNumber()>=r.getRowCount()||q>P)i[P]=null;else{let Z;C>2?Z=(C-2)*q:Z=q;let J=Z>=P;for(let ie=1;ie<=Z&&!J;ie++)J=i[P-ie]!=null;J?i[P]=null:(E=F.getRowNumber(),k=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let i=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let u=a.getRowNumber();if(u>=i.length)continue;i[u]++}return i}adjustIncompleteIndicatorColumnRowNumbers(r){let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(a.getY())),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.getCodewords(),E=-1;for(let C=f;C<m;C++){if(x[C]==null)continue;let k=x[C];k.setRowNumberAsRowIndicatorColumn();let P=k.getRowNumber()-E;P===0||(P===1?E=k.getRowNumber():k.getRowNumber()>=r.getRowCount()?x[C]=null:E=k.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),i=new bs,a=new bs,u=new bs,f=new bs;for(let x of r){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let E=x.getValue()%30,C=x.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:a.setValue(E*3+1);break;case 1:f.setValue(E/3),u.setValue(E%3);break;case 2:i.setValue(E+1);break}}if(i.getValue().length===0||a.getValue().length===0||u.getValue().length===0||f.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+u.getValue()[0]<tt.MIN_ROWS_IN_BARCODE||a.getValue()[0]+u.getValue()[0]>tt.MAX_ROWS_IN_BARCODE)return null;let m=new Qi(i.getValue()[0],a.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,i){for(let a=0;a<r.length;a++){let u=r[a];if(r[a]==null)continue;let f=u.getValue()%30,m=u.getRowNumber();if(m>i.getRowCount()){r[a]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==i.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(f/3)!==i.getErrorCorrectionLevel()||f%3!==i.getRowCountLowerPart())&&(r[a]=null);break;case 2:f+1!==i.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ji{constructor(r,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=tt.MAX_CODEWORDS_IN_BARCODE,i;do i=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let a=this.detectionResultColumns[i].getCodewords();for(let u=0;u<a.length;u++)a[u]!=null&&(a[u].hasValidRowNumber()||this.adjustRowNumbers(i,u,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&i[a]!=null&&r[a].getRowNumber()===i[a].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[a];f!=null&&(f.setRowNumber(r[a].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let u=i[a].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let x=this.detectionResultColumns[m].getCodewords()[a];x!=null&&(f=Ji.adjustRowNumberIfValid(u,f,x),x.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,i=this.detectionResultColumns[0].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let u=i[a].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let x=this.detectionResultColumns[m].getCodewords()[a];x!=null&&(f=Ji.adjustRowNumberIfValid(u,f,x),x.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,i,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),i=0):++i),i}adjustRowNumbers(r,i,a){if(!this.detectionResultColumns[r-1])return;let u=a[i],f=this.detectionResultColumns[r-1].getCodewords(),m=f;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let x=new Array(14);x[2]=f[i],x[3]=m[i],i>0&&(x[0]=a[i-1],x[4]=f[i-1],x[5]=m[i-1]),i>1&&(x[8]=a[i-2],x[10]=f[i-2],x[11]=m[i-2]),i<a.length-1&&(x[1]=a[i+1],x[6]=f[i+1],x[7]=m[i+1]),i<a.length-2&&(x[9]=a[i+2],x[12]=f[i+2],x[13]=m[i+2]);for(let E of x)if(Ji.adjustRowNumber(u,E))return}static adjustRowNumber(r,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===r.getBucket()?(r.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,i){this.detectionResultColumns[r]=i}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new rs;for(let a=0;a<r.getCodewords().length;a++){i.format("CW %3d:",a);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){i.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[a];if(f==null){i.format("    |   ");continue}i.format(" %3d|%3d",f.getRowNumber(),f.getValue())}i.format("%n")}return i.toString()}}class Ms{constructor(r,i,a,u){this.rowNumber=Ms.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(i),this.bucket=Math.trunc(a),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ms.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ms.BARCODE_ROW_UNKNOWN=-1;class Nr{static initialize(){for(let r=0;r<tt.SYMBOL_TABLE.length;r++){let i=tt.SYMBOL_TABLE[r],a=i&1;for(let u=0;u<tt.BARS_IN_MODULE;u++){let f=0;for(;(i&1)===a;)f+=1,i>>=1;a=i&1,Nr.RATIOS_TABLE[r]||(Nr.RATIOS_TABLE[r]=new Array(tt.BARS_IN_MODULE)),Nr.RATIOS_TABLE[r][tt.BARS_IN_MODULE-u-1]=Math.fround(f/tt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let i=Nr.getDecodedCodewordValue(Nr.sampleBitCounts(r));return i!==-1?i:Nr.getClosestDecodedValue(r)}static sampleBitCounts(r){let i=pt.sum(r),a=new Int32Array(tt.BARS_IN_MODULE),u=0,f=0;for(let m=0;m<tt.MODULES_IN_CODEWORD;m++){let x=i/(2*tt.MODULES_IN_CODEWORD)+m*i/tt.MODULES_IN_CODEWORD;f+r[u]<=x&&(f+=r[u],u++),a[u]++}return a}static getDecodedCodewordValue(r){let i=Nr.getBitValue(r);return tt.getCodeword(i)===-1?-1:i}static getBitValue(r){let i=0;for(let a=0;a<r.length;a++)for(let u=0;u<r[a];u++)i=i<<1|(a%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(r){let i=pt.sum(r),a=new Array(tt.BARS_IN_MODULE);if(i>1)for(let m=0;m<a.length;m++)a[m]=Math.fround(r[m]/i);let u=vn.MAX_VALUE,f=-1;this.bSymbolTableReady||Nr.initialize();for(let m=0;m<Nr.RATIOS_TABLE.length;m++){let x=0,E=Nr.RATIOS_TABLE[m];for(let C=0;C<tt.BARS_IN_MODULE;C++){let k=Math.fround(E[C]-a[C]);if(x+=Math.fround(k*k),x>=u)break}x<u&&(u=x,f=tt.SYMBOL_TABLE[m])}return f}}Nr.bSymbolTableReady=!1,Nr.RATIOS_TABLE=new Array(tt.SYMBOL_TABLE.length).map(j=>new Array(tt.BARS_IN_MODULE));class Po{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Ua{static parseLong(r,i=void 0){return parseInt(r,i)}}class ns extends b{}ns.kind="NullPointerException";class za{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,i,a){if(r==null)throw new ns;if(i<0||i>r.length||a<0||i+a>r.length||i+a<0)throw new M;if(a===0)return;for(let u=0;u<a;u++)this.write(r[i+u])}flush(){}close(){}}class Do extends b{}class Ql extends za{constructor(r=32){if(super(),this.count=0,r<0)throw new N("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new Do;a=B.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,i,a){if(i<0||i>r.length||a<0||i+a-r.length>0)throw new M;this.ensureCapacity(this.count+a),I.arraycopy(r,i,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var St;(function(j){j[j.ALPHA=0]="ALPHA",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.PUNCT=3]="PUNCT",j[j.ALPHA_SHIFT=4]="ALPHA_SHIFT",j[j.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(St||(St={}));function eo(){if(typeof window<"u")return window.BigInt||null;if(typeof Xc<"u")return Xc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let to;function ar(j){if(typeof to>"u"&&(to=eo()),to===null)throw new Error("BigInt is not supported!");return to(j)}function pi(){let j=[];j[0]=ar(1);let r=ar(900);j[1]=r;for(let i=2;i<16;i++)j[i]=j[i-1]*r;return j}class xe{static decode(r,i){let a=new fe(""),u=$.ISO8859_1;a.enableDecoding(u);let f=1,m=r[f++],x=new Po;for(;f<r[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:f=xe.textCompaction(r,f,a);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:f=xe.byteCompaction(m,r,u,f,a);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:f=xe.numericCompaction(r,f,a);break;case xe.ECI_CHARSET:$.getCharacterSetECIByValue(r[f++]);break;case xe.ECI_GENERAL_PURPOSE:f+=2;break;case xe.ECI_USER_DEFINED:f++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=xe.decodeMacroBlock(r,f,x);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new H;default:f--,f=xe.textCompaction(r,f,a);break}if(f<r.length)m=r[f++];else throw H.getFormatInstance()}if(a.length()===0)throw H.getFormatInstance();let E=new Ye(null,a.toString(),null,i);return E.setOther(x),E}static decodeMacroBlock(r,i,a){if(i+xe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw H.getFormatInstance();let u=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<xe.NUMBER_OF_SEQUENCE_CODEWORDS;x++,i++)u[x]=r[i];a.setSegmentIndex(B.parseInt(xe.decodeBase900toBase10(u,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new fe;i=xe.textCompaction(r,i,f),a.setFileId(f.toString());let m=-1;for(r[i]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=i+1);i<r[0];)switch(r[i]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,r[i]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new fe;i=xe.textCompaction(r,i+1,x),a.setFileName(x.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let E=new fe;i=xe.textCompaction(r,i+1,E),a.setSender(E.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new fe;i=xe.textCompaction(r,i+1,C),a.setAddressee(C.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let k=new fe;i=xe.numericCompaction(r,i+1,k),a.setSegmentCount(B.parseInt(k.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new fe;i=xe.numericCompaction(r,i+1,P),a.setTimestamp(Ua.parseLong(P.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let F=new fe;i=xe.numericCompaction(r,i+1,F),a.setChecksum(B.parseInt(F.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new fe;i=xe.numericCompaction(r,i+1,q),a.setFileSize(Ua.parseLong(q.toString()));break;default:throw H.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:i++,a.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(m!==-1){let x=i-m;a.isLastSegment()&&x--,a.setOptionalData(U.copyOfRange(r,m,m+x))}return i}static textCompaction(r,i,a){let u=new Int32Array((r[0]-i)*2),f=new Int32Array((r[0]-i)*2),m=0,x=!1;for(;i<r[0]&&!x;){let E=r[i++];if(E<xe.TEXT_COMPACTION_MODE_LATCH)u[m]=E/30,u[m+1]=E%30,m+=2;else switch(E){case xe.TEXT_COMPACTION_MODE_LATCH:u[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:i--,x=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,E=r[i++],f[m]=E,m++;break}}return xe.decodeTextCompaction(u,f,m,a),i}static decodeTextCompaction(r,i,a,u){let f=St.ALPHA,m=St.ALPHA,x=0;for(;x<a;){let E=r[x],C="";switch(f){case St.ALPHA:if(E<26)C=String.fromCharCode(65+E);else switch(E){case 26:C=" ";break;case xe.LL:f=St.LOWER;break;case xe.ML:f=St.MIXED;break;case xe.PS:m=f,f=St.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=St.ALPHA;break}break;case St.LOWER:if(E<26)C=String.fromCharCode(97+E);else switch(E){case 26:C=" ";break;case xe.AS:m=f,f=St.ALPHA_SHIFT;break;case xe.ML:f=St.MIXED;break;case xe.PS:m=f,f=St.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=St.ALPHA;break}break;case St.MIXED:if(E<xe.PL)C=xe.MIXED_CHARS[E];else switch(E){case xe.PL:f=St.PUNCT;break;case 26:C=" ";break;case xe.LL:f=St.LOWER;break;case xe.AL:f=St.ALPHA;break;case xe.PS:m=f,f=St.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=St.ALPHA;break}break;case St.PUNCT:if(E<xe.PAL)C=xe.PUNCT_CHARS[E];else switch(E){case xe.PAL:f=St.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=St.ALPHA;break}break;case St.ALPHA_SHIFT:if(f=m,E<26)C=String.fromCharCode(65+E);else switch(E){case 26:C=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:f=St.ALPHA;break}break;case St.PUNCT_SHIFT:if(f=m,E<xe.PAL)C=xe.PUNCT_CHARS[E];else switch(E){case xe.PAL:f=St.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=St.ALPHA;break}break}C!==""&&u.append(C),x++}}static byteCompaction(r,i,a,u,f){let m=new Ql,x=0,E=0,C=!1;switch(r){case xe.BYTE_COMPACTION_MODE_LATCH:let k=new Int32Array(6),P=i[u++];for(;u<i[0]&&!C;)switch(k[x++]=P,E=900*E+P,P=i[u++],P){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(x%5===0&&x>0){for(let F=0;F<6;++F)m.write(Number(ar(E)>>ar(8*(5-F))));E=0,x=0}break}u===i[0]&&P<xe.TEXT_COMPACTION_MODE_LATCH&&(k[x++]=P);for(let F=0;F<x;F++)m.write(k[F]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;u<i[0]&&!C;){let F=i[u++];if(F<xe.TEXT_COMPACTION_MODE_LATCH)x++,E=900*E+F;else switch(F){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(x%5===0&&x>0){for(let q=0;q<6;++q)m.write(Number(ar(E)>>ar(8*(5-q))));E=0,x=0}}break}return f.append(X.decode(m.toByteArray(),a)),u}static numericCompaction(r,i,a){let u=0,f=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;i<r[0]&&!f;){let x=r[i++];if(i===r[0]&&(f=!0),x<xe.TEXT_COMPACTION_MODE_LATCH)m[u]=x,u++;else switch(x){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:i--,f=!0;break}(u%xe.MAX_NUMERIC_CODEWORDS===0||x===xe.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(a.append(xe.decodeBase900toBase10(m,u)),u=0)}return i}static decodeBase900toBase10(r,i){let a=ar(0);for(let f=0;f<i;f++)a+=xe.EXP900[i-f-1]*ar(r[f]);let u=a.toString();if(u.charAt(0)!=="1")throw new H;return u.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=eo()?pi():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class lt{constructor(){}static decode(r,i,a,u,f,m,x){let E=new Ds(r,i,a,u,f),C=null,k=null,P;for(let Z=!0;;Z=!1){if(i!=null&&(C=lt.getRowIndicatorColumn(r,E,i,!0,m,x)),u!=null&&(k=lt.getRowIndicatorColumn(r,E,u,!1,m,x)),P=lt.merge(C,k),P==null)throw ee.getNotFoundInstance();let J=P.getBoundingBox();if(Z&&J!=null&&(J.getMinY()<E.getMinY()||J.getMaxY()>E.getMaxY()))E=J;else break}P.setBoundingBox(E);let F=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,C),P.setDetectionResultColumn(F,k);let q=C!=null;for(let Z=1;Z<=F;Z++){let J=q?Z:F-Z;if(P.getDetectionResultColumn(J)!==void 0)continue;let ie;J===0||J===F?ie=new Zl(E,J===0):ie=new Wn(E),P.setDetectionResultColumn(J,ie);let pe=-1,Re=pe;for(let Oe=E.getMinY();Oe<=E.getMaxY();Oe++){if(pe=lt.getStartColumn(P,J,Oe,q),pe<0||pe>E.getMaxX()){if(Re===-1)continue;pe=Re}let Ne=lt.detectCodeword(r,E.getMinX(),E.getMaxX(),q,pe,Oe,m,x);Ne!=null&&(ie.setCodeword(Oe,Ne),Re=pe,m=Math.min(m,Ne.getWidth()),x=Math.max(x,Ne.getWidth()))}}return lt.createDecoderResult(P)}static merge(r,i){if(r==null&&i==null)return null;let a=lt.getBarcodeMetadata(r,i);if(a==null)return null;let u=Ds.merge(lt.adjustBoundingBox(r),lt.adjustBoundingBox(i));return new Ji(a,u)}static adjustBoundingBox(r){if(r==null)return null;let i=r.getRowHeights();if(i==null)return null;let a=lt.getMax(i),u=0;for(let x of i)if(u+=a-x,x>0)break;let f=r.getCodewords();for(let x=0;u>0&&f[x]==null;x++)u--;let m=0;for(let x=i.length-1;x>=0&&(m+=a-i[x],!(i[x]>0));x--);for(let x=f.length-1;m>0&&f[x]==null;x--)m--;return r.getBoundingBox().addMissingRows(u,m,r.isLeft())}static getMax(r){let i=-1;for(let a of r)i=Math.max(i,a);return i}static getBarcodeMetadata(r,i){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let u;return i==null||(u=i.getBarcodeMetadata())==null?a:a.getColumnCount()!==u.getColumnCount()&&a.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&a.getRowCount()!==u.getRowCount()?null:a}static getRowIndicatorColumn(r,i,a,u,f,m){let x=new Zl(i,u);for(let E=0;E<2;E++){let C=E===0?1:-1,k=Math.trunc(Math.trunc(a.getX()));for(let P=Math.trunc(Math.trunc(a.getY()));P<=i.getMaxY()&&P>=i.getMinY();P+=C){let F=lt.detectCodeword(r,0,r.getWidth(),u,k,P,f,m);F!=null&&(x.setCodeword(P,F),u?k=F.getStartX():k=F.getEndX())}}return x}static adjustCodewordCount(r,i){let a=i[0][1],u=a.getValue(),f=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-lt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(f<1||f>tt.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();a.setValue(f)}else u[0]!==f&&a.setValue(f)}static createDecoderResult(r){let i=lt.createBarcodeMatrix(r);lt.adjustCodewordCount(r,i);let a=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),f=[],m=new Array;for(let E=0;E<r.getBarcodeRowCount();E++)for(let C=0;C<r.getBarcodeColumnCount();C++){let k=i[E][C+1].getValue(),P=E*r.getBarcodeColumnCount()+C;k.length===0?a.push(P):k.length===1?u[P]=k[0]:(m.push(P),f.push(k))}let x=new Array(f.length);for(let E=0;E<x.length;E++)x[E]=f[E];return lt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,tt.toIntArray(a),tt.toIntArray(m),x)}static createDecoderResultFromAmbiguousValues(r,i,a,u,f){let m=new Int32Array(u.length),x=100;for(;x-- >0;){for(let E=0;E<m.length;E++)i[u[E]]=f[E][m[E]];try{return lt.decodeCodewords(i,r,a)}catch(E){if(!(E instanceof T))throw E}if(m.length===0)throw T.getChecksumInstance();for(let E=0;E<m.length;E++)if(m[E]<f[E].length-1){m[E]++;break}else if(m[E]=0,E===m.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(r){let i=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<i.length;u++)for(let f=0;f<i[u].length;f++)i[u][f]=new bs;let a=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=i.length)continue;i[m][a].setValue(f.getValue())}}}a++}return i}static isValidBarcodeColumn(r,i){return i>=0&&i<=r.getBarcodeColumnCount()+1}static getStartColumn(r,i,a,u){let f=u?1:-1,m=null;if(lt.isValidBarcodeColumn(r,i-f)&&(m=r.getDetectionResultColumn(i-f).getCodeword(a)),m!=null)return u?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(i).getCodewordNearby(a),m!=null)return u?m.getStartX():m.getEndX();if(lt.isValidBarcodeColumn(r,i-f)&&(m=r.getDetectionResultColumn(i-f).getCodewordNearby(a)),m!=null)return u?m.getEndX():m.getStartX();let x=0;for(;lt.isValidBarcodeColumn(r,i-f);){i-=f;for(let E of r.getDetectionResultColumn(i).getCodewords())if(E!=null)return(u?E.getEndX():E.getStartX())+f*x*(E.getEndX()-E.getStartX());x++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,i,a,u,f,m,x,E){f=lt.adjustCodewordStartColumn(r,i,a,u,f,m);let C=lt.getModuleBitCount(r,i,a,u,f,m);if(C==null)return null;let k,P=pt.sum(C);if(u)k=f+P;else{for(let Z=0;Z<C.length/2;Z++){let J=C[Z];C[Z]=C[C.length-1-Z],C[C.length-1-Z]=J}k=f,f=k-P}if(!lt.checkCodewordSkew(P,x,E))return null;let F=Nr.getDecodedValue(C),q=tt.getCodeword(F);return q===-1?null:new Ms(f,k,lt.getCodewordBucketNumber(F),q)}static getModuleBitCount(r,i,a,u,f,m){let x=f,E=new Int32Array(8),C=0,k=u?1:-1,P=u;for(;(u?x<a:x>=i)&&C<E.length;)r.get(x,m)===P?(E[C]++,x+=k):(C++,P=!P);return C===E.length||x===(u?a:i)&&C===E.length-1?E:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,i,a,u,f,m){let x=f,E=u?-1:1;for(let C=0;C<2;C++){for(;(u?x>=i:x<a)&&u===r.get(x,m);){if(Math.abs(f-x)>lt.CODEWORD_SKEW_SIZE)return f;x+=E}E=-E,u=!u}return x}static checkCodewordSkew(r,i,a){return i-lt.CODEWORD_SKEW_SIZE<=r&&r<=a+lt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,i,a){if(r.length===0)throw H.getFormatInstance();let u=1<<i+1,f=lt.correctErrors(r,a,u);lt.verifyCodewordCount(r,u);let m=xe.decode(r,""+i);return m.setErrorsCorrected(f),m.setErasures(a.length),m}static correctErrors(r,i,a){if(i!=null&&i.length>a/2+lt.MAX_ERRORS||a<0||a>lt.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return lt.errorCorrection.decode(r,a,i)}static verifyCodewordCount(r,i){if(r.length<4)throw H.getFormatInstance();let a=r[0];if(a>r.length)throw H.getFormatInstance();if(a===0)if(i<r.length)r[0]=r.length-i;else throw H.getFormatInstance()}static getBitCountForCodeword(r){let i=new Int32Array(8),a=0,u=i.length-1;for(;!((r&1)!==a&&(a=r&1,u--,u<0));)i[u]++,r>>=1;return i}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return lt.getCodewordBucketNumber(lt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let i=new rs;for(let a=0;a<r.length;a++){i.format("Row %2d: ",a);for(let u=0;u<r[a].length;u++){let f=r[a][u];f.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}i.format("%n")}return i.toString()}}lt.CODEWORD_SKEW_SIZE=2,lt.MAX_ERRORS=3,lt.MAX_EC_CODEWORDS=512,lt.errorCorrection=new Fa;class Ar{decode(r,i=null){let a=Ar.decode(r,i,!1);if(a==null||a.length===0||a[0]==null)throw ee.getNotFoundInstance();return a[0]}decodeMultiple(r,i=null){try{return Ar.decode(r,i,!0)}catch(a){throw a instanceof H||a instanceof T?ee.getNotFoundInstance():a}}static decode(r,i,a){const u=new Array,f=ot.detectMultiple(r,i,a);for(const m of f.getPoints()){const x=lt.decode(f.getBits(),m[4],m[5],m[6],m[7],Ar.getMinCodewordWidth(m),Ar.getMaxCodewordWidth(m)),E=new Ie(x.getText(),x.getRawBytes(),void 0,m,ce.PDF_417);E.putMetadata(Te.ERROR_CORRECTION_LEVEL,x.getECLevel());const C=x.getOther();C!=null&&E.putMetadata(Te.PDF417_EXTRA_METADATA,C),u.push(E)}return u.map(m=>m)}static getMaxWidth(r,i){return r==null||i==null?0:Math.trunc(Math.abs(r.getX()-i.getX()))}static getMinWidth(r,i){return r==null||i==null?B.MAX_VALUE:Math.trunc(Math.abs(r.getX()-i.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Ar.getMaxWidth(r[0],r[4]),Ar.getMaxWidth(r[6],r[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.max(Ar.getMaxWidth(r[1],r[5]),Ar.getMaxWidth(r[7],r[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Ar.getMinWidth(r[0],r[4]),Ar.getMinWidth(r[6],r[2])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN),Math.min(Ar.getMinWidth(r[1],r[5]),Ar.getMinWidth(r[7],r[3])*tt.MODULES_IN_CODEWORD/tt.MODULES_IN_STOP_PATTERN)))}reset(){}}class gi extends b{}gi.kind="ReaderException";class Mo{constructor(r,i){this.verbose=r===!0,i&&this.setHints(i)}decode(r,i){return i&&this.setHints(i),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const i=!o(r)&&r.get(G.TRY_HARDER)===!0,a=o(r)?null:r.get(G.POSSIBLE_FORMATS),u=new Array;if(!o(a)){const f=a.some(m=>m===ce.UPC_A||m===ce.UPC_E||m===ce.EAN_13||m===ce.EAN_8||m===ce.CODABAR||m===ce.CODE_39||m===ce.CODE_93||m===ce.CODE_128||m===ce.ITF||m===ce.RSS_14||m===ce.RSS_EXPANDED);f&&!i&&u.push(new di(r,this.verbose)),a.includes(ce.QR_CODE)&&u.push(new Fr),a.includes(ce.DATA_MATRIX)&&u.push(new An),a.includes(ce.AZTEC)&&u.push(new Un),a.includes(ce.PDF_417)&&u.push(new Ar),f&&i&&u.push(new di(r,this.verbose))}u.length===0&&(i||u.push(new di(r,this.verbose)),u.push(new Fr),u.push(new An),u.push(new Un),u.push(new Ar),i&&u.push(new di(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new gi("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(r,this.hints)}catch(a){if(a instanceof gi)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class ro extends je{constructor(r=null,i=500){const a=new Mo;a.setHints(r),super(a,i)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Lo extends je{constructor(r=500){super(new Ar,r)}}class Jl extends je{constructor(r=500){super(new Fr,r)}}var Va;(function(j){j[j.ERROR_CORRECTION=0]="ERROR_CORRECTION",j[j.CHARACTER_SET=1]="CHARACTER_SET",j[j.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",j[j.MIN_SIZE=3]="MIN_SIZE",j[j.MAX_SIZE=4]="MAX_SIZE",j[j.MARGIN=5]="MARGIN",j[j.PDF417_COMPACT=6]="PDF417_COMPACT",j[j.PDF417_COMPACTION=7]="PDF417_COMPACTION",j[j.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",j[j.AZTEC_LAYERS=9]="AZTEC_LAYERS",j[j.QR_VERSION=10]="QR_VERSION"})(Va||(Va={}));var fr=Va;class Ha{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new wt(r,Int32Array.from([1])))}buildGenerator(r){const i=this.cachedGenerators;if(r>=i.length){let a=i[i.length-1];const u=this.field;for(let f=i.length;f<=r;f++){const m=a.multiply(new wt(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));i.push(m),a=m}}return i[r]}encode(r,i){if(i===0)throw new N("No error correction bytes");const a=r.length-i;if(a<=0)throw new N("No data bytes provided");const u=this.buildGenerator(i),f=new Int32Array(a);I.arraycopy(r,0,f,0,a);let m=new wt(this.field,f);m=m.multiplyByMonomial(i,1);const E=m.divide(u)[1].getCoefficients(),C=i-E.length;for(let k=0;k<C;k++)r[a+k]=0;I.arraycopy(E,0,r,a+C,E.length)}}class zt{constructor(){}static applyMaskPenaltyRule1(r){return zt.applyMaskPenaltyRule1Internal(r,!0)+zt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let i=0;const a=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let m=0;m<f-1;m++){const x=a[m];for(let E=0;E<u-1;E++){const C=x[E];C===x[E+1]&&C===a[m+1][E]&&C===a[m+1][E+1]&&i++}}return zt.N2*i}static applyMaskPenaltyRule3(r){let i=0;const a=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let m=0;m<f;m++)for(let x=0;x<u;x++){const E=a[m];x+6<u&&E[x]===1&&E[x+1]===0&&E[x+2]===1&&E[x+3]===1&&E[x+4]===1&&E[x+5]===0&&E[x+6]===1&&(zt.isWhiteHorizontal(E,x-4,x)||zt.isWhiteHorizontal(E,x+7,x+11))&&i++,m+6<f&&a[m][x]===1&&a[m+1][x]===0&&a[m+2][x]===1&&a[m+3][x]===1&&a[m+4][x]===1&&a[m+5][x]===0&&a[m+6][x]===1&&(zt.isWhiteVertical(a,x,m-4,m)||zt.isWhiteVertical(a,x,m+7,m+11))&&i++}return i*zt.N3}static isWhiteHorizontal(r,i,a){i=Math.max(i,0),a=Math.min(a,r.length);for(let u=i;u<a;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,i,a,u){a=Math.max(a,0),u=Math.min(u,r.length);for(let f=a;f<u;f++)if(r[f][i]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let i=0;const a=r.getArray(),u=r.getWidth(),f=r.getHeight();for(let E=0;E<f;E++){const C=a[E];for(let k=0;k<u;k++)C[k]===1&&i++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(i*2-m)*10/m)*zt.N4}static getDataMaskBit(r,i,a){let u,f;switch(r){case 0:u=a+i&1;break;case 1:u=a&1;break;case 2:u=i%3;break;case 3:u=(a+i)%3;break;case 4:u=Math.floor(a/2)+Math.floor(i/3)&1;break;case 5:f=a*i,u=(f&1)+f%3;break;case 6:f=a*i,u=(f&1)+f%3&1;break;case 7:f=a*i,u=f%3+(a+i&1)&1;break;default:throw new N("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,i){let a=0;const u=i?r.getHeight():r.getWidth(),f=i?r.getWidth():r.getHeight(),m=r.getArray();for(let x=0;x<u;x++){let E=0,C=-1;for(let k=0;k<f;k++){const P=i?m[x][k]:m[k][x];P===C?E++:(E>=5&&(a+=zt.N1+(E-5)),E=1,C=P)}E>=5&&(a+=zt.N1+(E-5))}return a}}zt.N1=3,zt.N2=3,zt.N3=40,zt.N4=10;class Bo{constructor(r,i){this.width=r,this.height=i;const a=new Array(i);for(let u=0;u!==i;u++)a[u]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,i){return this.bytes[i][r]}getArray(){return this.bytes}setNumber(r,i,a){this.bytes[i][r]=a}setBoolean(r,i,a){this.bytes[i][r]=a?1:0}clear(r){for(const i of this.bytes)U.fill(i,r)}equals(r){if(!(r instanceof Bo))return!1;const i=r;if(this.width!==i.width||this.height!==i.height)return!1;for(let a=0,u=this.height;a<u;++a){const f=this.bytes[a],m=i.bytes[a];for(let x=0,E=this.width;x<E;++x)if(f[x]!==m[x])return!1}return!0}toString(){const r=new fe;for(let i=0,a=this.height;i<a;++i){const u=this.bytes[i];for(let f=0,m=this.width;f<m;++f)switch(u[f]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Ls{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new fe;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Ls.NUM_MASK_PATTERNS}}Ls.NUM_MASK_PATTERNS=8;class Ot extends b{}Ot.kind="WriterException";class Qe{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,i,a,u,f){Qe.clearMatrix(f),Qe.embedBasicPatterns(a,f),Qe.embedTypeInfo(i,u,f),Qe.maybeEmbedVersionInfo(a,f),Qe.embedDataBits(r,u,f)}static embedBasicPatterns(r,i){Qe.embedPositionDetectionPatternsAndSeparators(i),Qe.embedDarkDotAtLeftBottomCorner(i),Qe.maybeEmbedPositionAdjustmentPatterns(r,i),Qe.embedTimingPatterns(i)}static embedTypeInfo(r,i,a){const u=new V;Qe.makeTypeInfoBits(r,i,u);for(let f=0,m=u.getSize();f<m;++f){const x=u.get(u.getSize()-1-f),E=Qe.TYPE_INFO_COORDINATES[f],C=E[0],k=E[1];if(a.setBoolean(C,k,x),f<8){const P=a.getWidth()-f-1;a.setBoolean(P,8,x)}else{const F=a.getHeight()-7+(f-8);a.setBoolean(8,F,x)}}}static maybeEmbedVersionInfo(r,i){if(r.getVersionNumber()<7)return;const a=new V;Qe.makeVersionInfoBits(r,a);let u=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const x=a.get(u);u--,i.setBoolean(f,i.getHeight()-11+m,x),i.setBoolean(i.getHeight()-11+m,f,x)}}static embedDataBits(r,i,a){let u=0,f=-1,m=a.getWidth()-1,x=a.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);x>=0&&x<a.getHeight();){for(let E=0;E<2;++E){const C=m-E;if(!Qe.isEmpty(a.get(C,x)))continue;let k;u<r.getSize()?(k=r.get(u),++u):k=!1,i!==255&&zt.getDataMaskBit(i,C,x)&&(k=!k),a.setBoolean(C,x,k)}x+=f}f=-f,x+=f,m-=2}if(u!==r.getSize())throw new Ot("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-B.numberOfLeadingZeros(r)}static calculateBCHCode(r,i){if(i===0)throw new N("0 polynomial");const a=Qe.findMSBSet(i);for(r<<=a-1;Qe.findMSBSet(r)>=a;)r^=i<<Qe.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,i,a){if(!Ls.isValidMaskPattern(i))throw new Ot("Invalid mask pattern");const u=r.getBits()<<3|i;a.appendBits(u,5);const f=Qe.calculateBCHCode(u,Qe.TYPE_INFO_POLY);a.appendBits(f,10);const m=new V;if(m.appendBits(Qe.TYPE_INFO_MASK_PATTERN,15),a.xor(m),a.getSize()!==15)throw new Ot("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,i){i.appendBits(r.getVersionNumber(),6);const a=Qe.calculateBCHCode(r.getVersionNumber(),Qe.VERSION_INFO_POLY);if(i.appendBits(a,12),i.getSize()!==18)throw new Ot("should not happen but we got: "+i.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let i=8;i<r.getWidth()-8;++i){const a=(i+1)%2;Qe.isEmpty(r.get(i,6))&&r.setNumber(i,6,a),Qe.isEmpty(r.get(6,i))&&r.setNumber(6,i,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Ot;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,i,a){for(let u=0;u<8;++u){if(!Qe.isEmpty(a.get(r+u,i)))throw new Ot;a.setNumber(r+u,i,0)}}static embedVerticalSeparationPattern(r,i,a){for(let u=0;u<7;++u){if(!Qe.isEmpty(a.get(r,i+u)))throw new Ot;a.setNumber(r,i+u,0)}}static embedPositionAdjustmentPattern(r,i,a){for(let u=0;u<5;++u){const f=Qe.POSITION_ADJUSTMENT_PATTERN[u];for(let m=0;m<5;++m)a.setNumber(r+m,i+u,f[m])}}static embedPositionDetectionPattern(r,i,a){for(let u=0;u<7;++u){const f=Qe.POSITION_DETECTION_PATTERN[u];for(let m=0;m<7;++m)a.setNumber(r+m,i+u,f[m])}}static embedPositionDetectionPatternsAndSeparators(r){const i=Qe.POSITION_DETECTION_PATTERN[0].length;Qe.embedPositionDetectionPattern(0,0,r),Qe.embedPositionDetectionPattern(r.getWidth()-i,0,r),Qe.embedPositionDetectionPattern(0,r.getWidth()-i,r);const a=8;Qe.embedHorizontalSeparationPattern(0,a-1,r),Qe.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Qe.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const u=7;Qe.embedVerticalSeparationPattern(u,0,r),Qe.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),Qe.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,i){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,u=Qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let f=0,m=u.length;f!==m;f++){const x=u[f];if(x>=0)for(let E=0;E!==m;E++){const C=u[E];C>=0&&Qe.isEmpty(i.get(C,x))&&Qe.embedPositionAdjustmentPattern(C-2,x-2,i)}}}}Qe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Qe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Qe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Qe.VERSION_INFO_POLY=7973,Qe.TYPE_INFO_POLY=1335,Qe.TYPE_INFO_MASK_PATTERN=21522;class Zu{constructor(r,i){this.dataBytes=r,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Pt{constructor(){}static calculateMaskPenalty(r){return zt.applyMaskPenaltyRule1(r)+zt.applyMaskPenaltyRule2(r)+zt.applyMaskPenaltyRule3(r)+zt.applyMaskPenaltyRule4(r)}static encode(r,i,a=null){let u=Pt.DEFAULT_BYTE_MODE_ENCODING;const f=a!==null&&a.get(fr.CHARACTER_SET)!==void 0;f&&(u=a.get(fr.CHARACTER_SET).toString());const m=this.chooseMode(r,u),x=new V;if(m===Xe.BYTE&&(f||Pt.DEFAULT_BYTE_MODE_ENCODING!==u)){const Oe=$.getCharacterSetECIByName(u);Oe!==void 0&&this.appendECI(Oe,x)}this.appendModeInfo(m,x);const E=new V;this.appendBytes(r,m,E,u);let C;if(a!==null&&a.get(fr.QR_VERSION)!==void 0){const Oe=Number.parseInt(a.get(fr.QR_VERSION).toString(),10);C=qe.getVersionForNumber(Oe);const Ne=this.calculateBitsNeeded(m,x,E,C);if(!this.willFit(Ne,C,i))throw new Ot("Data too big for requested version")}else C=this.recommendVersion(i,m,x,E);const k=new V;k.appendBitArray(x);const P=m===Xe.BYTE?E.getSizeInBytes():r.length;this.appendLengthInfo(P,C,m,k),k.appendBitArray(E);const F=C.getECBlocksForLevel(i),q=C.getTotalCodewords()-F.getTotalECCodewords();this.terminateBits(q,k);const Z=this.interleaveWithECBytes(k,C.getTotalCodewords(),q,F.getNumBlocks()),J=new Ls;J.setECLevel(i),J.setMode(m),J.setVersion(C);const ie=C.getDimensionForVersion(),pe=new Bo(ie,ie),Re=this.chooseMaskPattern(Z,i,C,pe);return J.setMaskPattern(Re),Qe.buildMatrix(Z,i,C,Re,pe),J.setMatrix(pe),J}static recommendVersion(r,i,a,u){const f=this.calculateBitsNeeded(i,a,u,qe.getVersionForNumber(1)),m=this.chooseVersion(f,r),x=this.calculateBitsNeeded(i,a,u,m);return this.chooseVersion(x,r)}static calculateBitsNeeded(r,i,a,u){return i.getSize()+r.getCharacterCountBits(u)+a.getSize()}static getAlphanumericCode(r){return r<Pt.ALPHANUMERIC_TABLE.length?Pt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,i=null){if($.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(r))return Xe.KANJI;let a=!1,u=!1;for(let f=0,m=r.length;f<m;++f){const x=r.charAt(f);if(Pt.isDigit(x))a=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)u=!0;else return Xe.BYTE}return u?Xe.ALPHANUMERIC:a?Xe.NUMERIC:Xe.BYTE}static isOnlyDoubleByteKanji(r){let i;try{i=X.encode(r,$.SJIS)}catch{return!1}const a=i.length;if(a%2!==0)return!1;for(let u=0;u<a;u+=2){const f=i[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(r,i,a,u){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let x=0;x<Ls.NUM_MASK_PATTERNS;x++){Qe.buildMatrix(r,i,a,x,u);let E=this.calculateMaskPenalty(u);E<f&&(f=E,m=x)}return m}static chooseVersion(r,i){for(let a=1;a<=40;a++){const u=qe.getVersionForNumber(a);if(Pt.willFit(r,u,i))return u}throw new Ot("Data too big")}static willFit(r,i,a){const u=i.getTotalCodewords(),m=i.getECBlocksForLevel(a).getTotalECCodewords(),x=u-m,E=(r+7)/8;return x>=E}static terminateBits(r,i){const a=r*8;if(i.getSize()>a)throw new Ot("data bits cannot fit in the QR Code"+i.getSize()+" > "+a);for(let m=0;m<4&&i.getSize()<a;++m)i.appendBit(!1);const u=i.getSize()&7;if(u>0)for(let m=u;m<8;m++)i.appendBit(!1);const f=r-i.getSizeInBytes();for(let m=0;m<f;++m)i.appendBits((m&1)===0?236:17,8);if(i.getSize()!==a)throw new Ot("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,i,a,u,f,m){if(u>=a)throw new Ot("Block ID too large");const x=r%a,E=a-x,C=Math.floor(r/a),k=C+1,P=Math.floor(i/a),F=P+1,q=C-P,Z=k-F;if(q!==Z)throw new Ot("EC bytes mismatch");if(a!==E+x)throw new Ot("RS blocks mismatch");if(r!==(P+q)*E+(F+Z)*x)throw new Ot("Total bytes mismatch");u<E?(f[0]=P,m[0]=q):(f[0]=F,m[0]=Z)}static interleaveWithECBytes(r,i,a,u){if(r.getSizeInBytes()!==a)throw new Ot("Number of bits and data bytes does not match");let f=0,m=0,x=0;const E=new Array;for(let k=0;k<u;++k){const P=new Int32Array(1),F=new Int32Array(1);Pt.getNumDataBytesAndNumECBytesForBlockID(i,a,u,k,P,F);const q=P[0],Z=new Uint8Array(q);r.toBytes(8*f,Z,0,q);const J=Pt.generateECBytes(Z,F[0]);E.push(new Zu(Z,J)),m=Math.max(m,q),x=Math.max(x,J.length),f+=P[0]}if(a!==f)throw new Ot("Data bytes does not match offset");const C=new V;for(let k=0;k<m;++k)for(const P of E){const F=P.getDataBytes();k<F.length&&C.appendBits(F[k],8)}for(let k=0;k<x;++k)for(const P of E){const F=P.getErrorCorrectionBytes();k<F.length&&C.appendBits(F[k],8)}if(i!==C.getSizeInBytes())throw new Ot("Interleaving error: "+i+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(r,i){const a=r.length,u=new Int32Array(a+i);for(let m=0;m<a;m++)u[m]=r[m]&255;new Ha(Ke.QR_CODE_FIELD_256).encode(u,i);const f=new Uint8Array(i);for(let m=0;m<i;m++)f[m]=u[a+m];return f}static appendModeInfo(r,i){i.appendBits(r.getBits(),4)}static appendLengthInfo(r,i,a,u){const f=a.getCharacterCountBits(i);if(r>=1<<f)throw new Ot(r+" is bigger than "+((1<<f)-1));u.appendBits(r,f)}static appendBytes(r,i,a,u){switch(i){case Xe.NUMERIC:Pt.appendNumericBytes(r,a);break;case Xe.ALPHANUMERIC:Pt.appendAlphanumericBytes(r,a);break;case Xe.BYTE:Pt.append8BitBytes(r,a,u);break;case Xe.KANJI:Pt.appendKanjiBytes(r,a);break;default:throw new Ot("Invalid mode: "+i)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const i=Pt.getDigit(r);return i>=0&&i<=9}static appendNumericBytes(r,i){const a=r.length;let u=0;for(;u<a;){const f=Pt.getDigit(r.charAt(u));if(u+2<a){const m=Pt.getDigit(r.charAt(u+1)),x=Pt.getDigit(r.charAt(u+2));i.appendBits(f*100+m*10+x,10),u+=3}else if(u+1<a){const m=Pt.getDigit(r.charAt(u+1));i.appendBits(f*10+m,7),u+=2}else i.appendBits(f,4),u++}}static appendAlphanumericBytes(r,i){const a=r.length;let u=0;for(;u<a;){const f=Pt.getAlphanumericCode(r.charCodeAt(u));if(f===-1)throw new Ot;if(u+1<a){const m=Pt.getAlphanumericCode(r.charCodeAt(u+1));if(m===-1)throw new Ot;i.appendBits(f*45+m,11),u+=2}else i.appendBits(f,6),u++}}static append8BitBytes(r,i,a){let u;try{u=X.encode(r,a)}catch(f){throw new Ot(f)}for(let f=0,m=u.length;f!==m;f++){const x=u[f];i.appendBits(x,8)}}static appendKanjiBytes(r,i){let a;try{a=X.encode(r,$.SJIS)}catch(f){throw new Ot(f)}const u=a.length;for(let f=0;f<u;f+=2){const m=a[f]&255,x=a[f+1]&255,E=m<<8&4294967295|x;let C=-1;if(E>=33088&&E<=40956?C=E-33088:E>=57408&&E<=60351&&(C=E-49472),C===-1)throw new Ot("Invalid byte sequence");const k=(C>>8)*192+(C&255);i.appendBits(k,13)}}static appendECI(r,i){i.appendBits(Xe.ECI.getBits(),4),i.appendBits(r.getValue(),8)}}Pt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Pt.DEFAULT_BYTE_MODE_ENCODING=$.UTF8.getName();class Bs{write(r,i,a,u=null){if(r.length===0)throw new N("Found empty contents");if(i<0||a<0)throw new N("Requested dimensions are too small: "+i+"x"+a);let f=Rt.L,m=Bs.QUIET_ZONE_SIZE;u!==null&&(u.get(fr.ERROR_CORRECTION)!==void 0&&(f=Rt.fromString(u.get(fr.ERROR_CORRECTION).toString())),u.get(fr.MARGIN)!==void 0&&(m=Number.parseInt(u.get(fr.MARGIN).toString(),10)));const x=Pt.encode(r,f,u);return this.renderResult(x,i,a,m)}writeToDom(r,i,a,u,f=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(i,a,u,f);r&&r.appendChild(m)}renderResult(r,i,a,u){const f=r.getMatrix();if(f===null)throw new Lr;const m=f.getWidth(),x=f.getHeight(),E=m+u*2,C=x+u*2,k=Math.max(i,E),P=Math.max(a,C),F=Math.min(Math.floor(k/E),Math.floor(P/C)),q=Math.floor((k-m*F)/2),Z=Math.floor((P-x*F)/2),J=this.createSVGElement(k,P);for(let ie=0,pe=Z;ie<x;ie++,pe+=F)for(let Re=0,Oe=q;Re<m;Re++,Oe+=F)if(f.get(Re,ie)===1){const Ne=this.createSvgRectElement(Oe,pe,F,F);J.appendChild(Ne)}return J}createSVGElement(r,i){const a=document.createElementNS(Bs.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",i.toString()),a}createSvgRectElement(r,i,a,u){const f=document.createElementNS(Bs.SVG_NS,"rect");return f.setAttributeNS(null,"x",r.toString()),f.setAttributeNS(null,"y",i.toString()),f.setAttributeNS(null,"height",a.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}Bs.QUIET_ZONE_SIZE=4,Bs.SVG_NS="http://www.w3.org/2000/svg";class xi{encode(r,i,a,u,f){if(r.length===0)throw new N("Found empty contents");if(i!==ce.QR_CODE)throw new N("Can only encode QR_CODE, but got "+i);if(a<0||u<0)throw new N(`Requested dimensions are too small: ${a}x${u}`);let m=Rt.L,x=xi.QUIET_ZONE_SIZE;f!==null&&(f.get(fr.ERROR_CORRECTION)!==void 0&&(m=Rt.fromString(f.get(fr.ERROR_CORRECTION).toString())),f.get(fr.MARGIN)!==void 0&&(x=Number.parseInt(f.get(fr.MARGIN).toString(),10)));const E=Pt.encode(r,m,f);return xi.renderResult(E,a,u,x)}static renderResult(r,i,a,u){const f=r.getMatrix();if(f===null)throw new Lr;const m=f.getWidth(),x=f.getHeight(),E=m+u*2,C=x+u*2,k=Math.max(i,E),P=Math.max(a,C),F=Math.min(Math.floor(k/E),Math.floor(P/C)),q=Math.floor((k-m*F)/2),Z=Math.floor((P-x*F)/2),J=new oe(k,P);for(let ie=0,pe=Z;ie<x;ie++,pe+=F)for(let Re=0,Oe=q;Re<m;Re++,Oe+=F)f.get(Re,ie)===1&&J.setRegion(Oe,pe,F,F);return J}}xi.QUIET_ZONE_SIZE=4;class Qu{encode(r,i,a,u,f){let m;if(i===ce.QR_CODE)m=new xi;else throw new N("No encoder available for format "+i);return m.encode(r,i,a,u,f)}}class Gn extends me{constructor(r,i,a,u,f,m,x,E){if(super(m,x),this.yuvData=r,this.dataWidth=i,this.dataHeight=a,this.left=u,this.top=f,u+m>i||f+x>a)throw new N("Crop rectangle does not fit within image data.");E&&this.reverseHorizontal(m,x)}getRow(r,i){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const u=(r+this.top)*this.dataWidth+this.left;return I.arraycopy(this.yuvData,u,i,0,a),i}getMatrix(){const r=this.getWidth(),i=this.getHeight();if(r===this.dataWidth&&i===this.dataHeight)return this.yuvData;const a=r*i,u=new Uint8ClampedArray(a);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return I.arraycopy(this.yuvData,f,u,0,a),u;for(let m=0;m<i;m++){const x=m*r;I.arraycopy(this.yuvData,f,u,x,r),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,i,a,u){return new Gn(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+i,a,u,!1)}renderThumbnail(){const r=this.getWidth()/Gn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Gn.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*i),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<i;m++){const x=m*r;for(let E=0;E<r;E++){const C=u[f+E*Gn.THUMBNAIL_SCALE_FACTOR]&255;a[x+E]=4278190080|C*65793}f+=this.dataWidth*Gn.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Gn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Gn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,i){const a=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<i;u++,f+=this.dataWidth){const m=f+r/2;for(let x=f,E=f+r-1;x<m;x++,E--){const C=a[x];a[x]=a[E],a[E]=C}}}invert(){return new ge(this)}}Gn.THUMBNAIL_SCALE_FACTOR=2;class no extends me{constructor(r,i,a,u,f,m,x){if(super(i,a),this.dataWidth=u,this.dataHeight=f,this.left=m,this.top=x,r.BYTES_PER_ELEMENT===4){const E=i*a,C=new Uint8ClampedArray(E);for(let k=0;k<E;k++){const P=r[k],F=P>>16&255,q=P>>7&510,Z=P&255;C[k]=(F+q+Z)/4&255}this.luminances=C}else this.luminances=r;if(u===void 0&&(this.dataWidth=i),f===void 0&&(this.dataHeight=a),m===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+a>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(r,i){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const u=(r+this.top)*this.dataWidth+this.left;return I.arraycopy(this.luminances,u,i,0,a),i}getMatrix(){const r=this.getWidth(),i=this.getHeight();if(r===this.dataWidth&&i===this.dataHeight)return this.luminances;const a=r*i,u=new Uint8ClampedArray(a);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return I.arraycopy(this.luminances,f,u,0,a),u;for(let m=0;m<i;m++){const x=m*r;I.arraycopy(this.luminances,f,u,x,r),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,i,a,u){return new no(this.luminances,a,u,this.dataWidth,this.dataHeight,this.left+r,this.top+i)}invert(){return new ge(this)}}class ec extends ${static forName(r){return this.getCharacterSetECIByName(r)}}class Wa{}Wa.ISO_8859_1=$.ISO8859_1;class tc{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class Ga{static singletonList(r){return[r]}static min(r,i){return r.sort(i)[0]}}class Ju{constructor(r){this.previous=r}getPrevious(){return this.previous}}class yi extends Ju{constructor(r,i,a){super(r),this.value=i,this.bitCount=a}appendTo(r,i){r.appendBits(this.value,this.bitCount)}add(r,i){return new yi(this,r,i)}addBinaryShift(r,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new yi(this,r,i)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+B.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class qa extends yi{constructor(r,i,a){super(r,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=a}appendTo(r,i){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(i[this.binaryShiftStart+a],8)}addBinaryShift(r,i){return new qa(this,r,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ed(j,r,i){return new qa(j,r,i)}function so(j,r,i){return new yi(j,r,i)}const td=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Es=0,wi=1,jr=2,rc=3,kn=4,nc=new yi(null,0,0),Fo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function sc(j){for(let r of j)U.fill(r,-1);return j[Es][kn]=0,j[wi][kn]=0,j[wi][Es]=28,j[rc][kn]=0,j[jr][kn]=0,j[jr][Es]=15,j}const $a=sc(U.createInt32Array(6,6));class Ur{constructor(r,i,a,u){this.token=r,this.mode=i,this.binaryShiftByteCount=a,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,i){let a=this.bitCount,u=this.token;if(r!==this.mode){let m=Fo[this.mode][r];u=so(u,m&65535,m>>16),a+=m>>16}let f=r===jr?4:5;return u=so(u,i,f),new Ur(u,r,0,a+f)}shiftAndAppend(r,i){let a=this.token,u=this.mode===jr?4:5;return a=so(a,$a[this.mode][r],u),a=so(a,i,5),new Ur(a,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let i=this.token,a=this.mode,u=this.bitCount;if(this.mode===kn||this.mode===jr){let x=Fo[a][Es];i=so(i,x&65535,x>>16),u+=x>>16,a=Es}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Ur(i,a,this.binaryShiftByteCount+1,u+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=ed(i,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ur(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let i=this.bitCount+(Fo[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?i+=Ur.calculateBinaryShiftCost(r)-Ur.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(i+=10),i<=r.bitCount}toBitArray(r){let i=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())i.unshift(u);let a=new V;for(const u of i)u.appendTo(a,r);return a}toString(){return Y.format("%s bits=%d bytes=%d",td[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Ur.INITIAL_STATE=new Ur(nc,Es,0,0);function rd(j){const r=Y.getCharCode(" "),i=Y.getCharCode("."),a=Y.getCharCode(",");j[Es][r]=1;const u=Y.getCharCode("Z"),f=Y.getCharCode("A");for(let F=f;F<=u;F++)j[Es][F]=F-f+2;j[wi][r]=1;const m=Y.getCharCode("z"),x=Y.getCharCode("a");for(let F=x;F<=m;F++)j[wi][F]=F-x+2;j[jr][r]=1;const E=Y.getCharCode("9"),C=Y.getCharCode("0");for(let F=C;F<=E;F++)j[jr][F]=F-C+2;j[jr][a]=12,j[jr][i]=13;const k=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let F=0;F<k.length;F++)j[rc][Y.getCharCode(k[F])]=F;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let F=0;F<P.length;F++)Y.getCharCode(P[F])>0&&(j[kn][Y.getCharCode(P[F])]=F);return j}const Ka=rd(U.createInt32Array(5,256));class io{constructor(r){this.text=r}encode(){const r=Y.getCharCode(" "),i=Y.getCharCode(`
`);let a=Ga.singletonList(Ur.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,x=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case Y.getCharCode("\r"):m=x===i?2:0;break;case Y.getCharCode("."):m=x===r?3:0;break;case Y.getCharCode(","):m=x===r?4:0;break;case Y.getCharCode(":"):m=x===r?5:0;break;default:m=0}m>0?(a=io.updateStateListForPair(a,f,m),f++):a=this.updateStateListForChar(a,f)}return Ga.min(a,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,i){const a=[];for(let u of r)this.updateStateForChar(u,i,a);return io.simplifyStates(a)}updateStateForChar(r,i,a){let u=this.text[i]&255,f=Ka[r.getMode()][u]>0,m=null;for(let x=0;x<=kn;x++){let E=Ka[x][u];if(E>0){if(m==null&&(m=r.endBinaryShift(i)),!f||x===r.getMode()||x===jr){const C=m.latchAndAppend(x,E);a.push(C)}if(!f&&$a[r.getMode()][x]>=0){const C=m.shiftAndAppend(x,E);a.push(C)}}}if(r.getBinaryShiftByteCount()>0||Ka[r.getMode()][u]===0){let x=r.addBinaryShiftChar(i);a.push(x)}}static updateStateListForPair(r,i,a){const u=[];for(let f of r)this.updateStateForPair(f,i,a,u);return this.simplifyStates(u)}static updateStateForPair(r,i,a,u){let f=r.endBinaryShift(i);if(u.push(f.latchAndAppend(kn,a)),r.getMode()!==kn&&u.push(f.shiftAndAppend(kn,a)),a===3||a===4){let m=f.latchAndAppend(jr,16-a).latchAndAppend(jr,1);u.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(i).addBinaryShiftChar(i+1);u.push(m)}}static simplifyStates(r){let i=[];for(const a of r){let u=!0;for(const f of i){if(f.isBetterThanOrEqualTo(a)){u=!1;break}a.isBetterThanOrEqualTo(f)&&(i=i.filter(m=>m!==f))}u&&i.push(a)}return i}}class bt{constructor(){}static encodeBytes(r){return bt.encode(r,bt.DEFAULT_EC_PERCENT,bt.DEFAULT_AZTEC_LAYERS)}static encode(r,i,a){let u=new io(r).encode(),f=B.truncDivision(u.getSize()*i,100)+11,m=u.getSize()+f,x,E,C,k,P;if(a!==bt.DEFAULT_AZTEC_LAYERS){if(x=a<0,E=Math.abs(a),E>(x?bt.MAX_NB_BITS_COMPACT:bt.MAX_NB_BITS))throw new N(Y.format("Illegal value %s for layers",a));C=bt.totalBitsInLayer(E,x),k=bt.WORD_SIZE[E];let Ne=C-C%k;if(P=bt.stuffBits(u,k),P.getSize()+f>Ne)throw new N("Data to large for user specified layer");if(x&&P.getSize()>k*64)throw new N("Data to large for user specified layer")}else{k=0,P=null;for(let Ne=0;;Ne++){if(Ne>bt.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(x=Ne<=3,E=x?Ne+1:Ne,C=bt.totalBitsInLayer(E,x),m>C)continue;(P==null||k!==bt.WORD_SIZE[E])&&(k=bt.WORD_SIZE[E],P=bt.stuffBits(u,k));let gt=C-C%k;if(!(x&&P.getSize()>k*64)&&P.getSize()+f<=gt)break}}let F=bt.generateCheckWords(P,C,k),q=P.getSize()/k,Z=bt.generateModeMessage(x,E,q),J=(x?11:14)+E*4,ie=new Int32Array(J),pe;if(x){pe=J;for(let Ne=0;Ne<ie.length;Ne++)ie[Ne]=Ne}else{pe=J+1+2*B.truncDivision(B.truncDivision(J,2)-1,15);let Ne=B.truncDivision(J,2),gt=B.truncDivision(pe,2);for(let at=0;at<Ne;at++){let Xr=at+B.truncDivision(at,15);ie[Ne-at-1]=gt-Xr-1,ie[Ne+at]=gt+Xr+1}}let Re=new oe(pe);for(let Ne=0,gt=0;Ne<E;Ne++){let at=(E-Ne)*4+(x?9:12);for(let Xr=0;Xr<at;Xr++){let In=Xr*2;for(let hr=0;hr<2;hr++)F.get(gt+In+hr)&&Re.set(ie[Ne*2+hr],ie[Ne*2+Xr]),F.get(gt+at*2+In+hr)&&Re.set(ie[Ne*2+Xr],ie[J-1-Ne*2-hr]),F.get(gt+at*4+In+hr)&&Re.set(ie[J-1-Ne*2-hr],ie[J-1-Ne*2-Xr]),F.get(gt+at*6+In+hr)&&Re.set(ie[J-1-Ne*2-Xr],ie[Ne*2+hr])}gt+=at*8}if(bt.drawModeMessage(Re,x,pe,Z),x)bt.drawBullsEye(Re,B.truncDivision(pe,2),5);else{bt.drawBullsEye(Re,B.truncDivision(pe,2),7);for(let Ne=0,gt=0;Ne<B.truncDivision(J,2)-1;Ne+=15,gt+=16)for(let at=B.truncDivision(pe,2)&1;at<pe;at+=2)Re.set(B.truncDivision(pe,2)-gt,at),Re.set(B.truncDivision(pe,2)+gt,at),Re.set(at,B.truncDivision(pe,2)-gt),Re.set(at,B.truncDivision(pe,2)+gt)}let Oe=new tc;return Oe.setCompact(x),Oe.setSize(pe),Oe.setLayers(E),Oe.setCodeWords(q),Oe.setMatrix(Re),Oe}static drawBullsEye(r,i,a){for(let u=0;u<a;u+=2)for(let f=i-u;f<=i+u;f++)r.set(f,i-u),r.set(f,i+u),r.set(i-u,f),r.set(i+u,f);r.set(i-a,i-a),r.set(i-a+1,i-a),r.set(i-a,i-a+1),r.set(i+a,i-a),r.set(i+a,i-a+1),r.set(i+a,i+a-1)}static generateModeMessage(r,i,a){let u=new V;return r?(u.appendBits(i-1,2),u.appendBits(a-1,6),u=bt.generateCheckWords(u,28,4)):(u.appendBits(i-1,5),u.appendBits(a-1,11),u=bt.generateCheckWords(u,40,4)),u}static drawModeMessage(r,i,a,u){let f=B.truncDivision(a,2);if(i)for(let m=0;m<7;m++){let x=f-3+m;u.get(m)&&r.set(x,f-5),u.get(m+7)&&r.set(f+5,x),u.get(20-m)&&r.set(x,f+5),u.get(27-m)&&r.set(f-5,x)}else for(let m=0;m<10;m++){let x=f-5+m+B.truncDivision(m,5);u.get(m)&&r.set(x,f-7),u.get(m+10)&&r.set(f+7,x),u.get(29-m)&&r.set(x,f+7),u.get(39-m)&&r.set(f-7,x)}}static generateCheckWords(r,i,a){let u=r.getSize()/a,f=new Ha(bt.getGF(a)),m=B.truncDivision(i,a),x=bt.bitsToWords(r,a,m);f.encode(x,m-u);let E=i%a,C=new V;C.appendBits(0,E);for(const k of Array.from(x))C.appendBits(k,a);return C}static bitsToWords(r,i,a){let u=new Int32Array(a),f,m;for(f=0,m=r.getSize()/i;f<m;f++){let x=0;for(let E=0;E<i;E++)x|=r.get(f*i+E)?1<<i-E-1:0;u[f]=x}return u}static getGF(r){switch(r){case 4:return Ke.AZTEC_PARAM;case 6:return Ke.AZTEC_DATA_6;case 8:return Ke.AZTEC_DATA_8;case 10:return Ke.AZTEC_DATA_10;case 12:return Ke.AZTEC_DATA_12;default:throw new N("Unsupported word size "+r)}}static stuffBits(r,i){let a=new V,u=r.getSize(),f=(1<<i)-2;for(let m=0;m<u;m+=i){let x=0;for(let E=0;E<i;E++)(m+E>=u||r.get(m+E))&&(x|=1<<i-1-E);(x&f)===f?(a.appendBits(x&f,i),m--):(x&f)===0?(a.appendBits(x|1,i),m--):a.appendBits(x,i)}return a}static totalBitsInLayer(r,i){return((i?88:112)+16*r)*r}}bt.DEFAULT_EC_PERCENT=33,bt.DEFAULT_AZTEC_LAYERS=0,bt.MAX_NB_BITS=32,bt.MAX_NB_BITS_COMPACT=4,bt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class oo{encode(r,i,a,u){return this.encodeWithHints(r,i,a,u,null)}encodeWithHints(r,i,a,u,f){let m=Wa.ISO_8859_1,x=bt.DEFAULT_EC_PERCENT,E=bt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(fr.CHARACTER_SET)&&(m=ec.forName(f.get(fr.CHARACTER_SET).toString())),f.has(fr.ERROR_CORRECTION)&&(x=B.parseInt(f.get(fr.ERROR_CORRECTION).toString())),f.has(fr.AZTEC_LAYERS)&&(E=B.parseInt(f.get(fr.AZTEC_LAYERS).toString()))),oo.encodeLayers(r,i,a,u,m,x,E)}static encodeLayers(r,i,a,u,f,m,x){if(i!==ce.AZTEC)throw new N("Can only encode AZTEC, but got "+i);let E=bt.encode(Y.getBytes(r,f),m,x);return oo.renderResult(E,a,u)}static renderResult(r,i,a){let u=r.getMatrix();if(u==null)throw new Lr;let f=u.getWidth(),m=u.getHeight(),x=Math.max(i,f),E=Math.max(a,m),C=Math.min(x/f,E/m),k=(x-f*C)/2,P=(E-m*C)/2,F=new oe(x,E);for(let q=0,Z=P;q<m;q++,Z+=C)for(let J=0,ie=k;J<f;J++,ie+=C)u.get(J,q)&&F.setRegion(ie,Z,C,C);return F}}n.AbstractExpandedDecoder=ja,n.ArgumentException=S,n.ArithmeticException=At,n.AztecCode=tc,n.AztecCodeReader=Un,n.AztecCodeWriter=oo,n.AztecDecoder=_t,n.AztecDetector=Cn,n.AztecDetectorResult=bn,n.AztecEncoder=bt,n.AztecHighLevelEncoder=io,n.AztecPoint=xr,n.BarcodeFormat=ce,n.Binarizer=D,n.BinaryBitmap=R,n.BitArray=V,n.BitMatrix=oe,n.BitSource=Ma,n.BrowserAztecCodeReader=Ro,n.BrowserBarcodeReader=$l,n.BrowserCodeReader=je,n.BrowserDatamatrixCodeReader=Yu,n.BrowserMultiFormatReader=ro,n.BrowserPDF417Reader=Lo,n.BrowserQRCodeReader=Jl,n.BrowserQRCodeSvgWriter=Bs,n.CharacterSetECI=$,n.ChecksumException=T,n.Code128Reader=Pe,n.Code39Reader=Xt,n.DataMatrixDecodedBitStreamParser=Nn,n.DataMatrixReader=An,n.DecodeHintType=G,n.DecoderResult=Ye,n.DefaultGridSampler=En,n.DetectorResult=Jn,n.EAN13Reader=Rr,n.EncodeHintType=fr,n.Exception=b,n.FormatException=H,n.GenericGF=Ke,n.GenericGFPoly=wt,n.GlobalHistogramBinarizer=_e,n.GridSampler=ci,n.GridSamplerInstance=en,n.HTMLCanvasElementLuminanceSource=ve,n.HybridBinarizer=he,n.ITFReader=xt,n.IllegalArgumentException=N,n.IllegalStateException=Lr,n.InvertedLuminanceSource=ge,n.LuminanceSource=me,n.MathUtils=pt,n.MultiFormatOneDReader=di,n.MultiFormatReader=Mo,n.MultiFormatWriter=Qu,n.NotFoundException=ee,n.OneDReader=Mt,n.PDF417DecodedBitStreamParser=xe,n.PDF417DecoderErrorCorrection=Fa,n.PDF417Reader=Ar,n.PDF417ResultMetadata=Po,n.PerspectiveTransform=Dt,n.PlanarYUVLuminanceSource=Gn,n.QRCodeByteMatrix=Bo,n.QRCodeDataMask=dt,n.QRCodeDecodedBitStreamParser=Ut,n.QRCodeDecoderErrorCorrectionLevel=Rt,n.QRCodeDecoderFormatInformation=_r,n.QRCodeEncoder=Pt,n.QRCodeEncoderQRCode=Ls,n.QRCodeMaskUtil=zt,n.QRCodeMatrixUtil=Qe,n.QRCodeMode=Xe,n.QRCodeReader=Fr,n.QRCodeVersion=qe,n.QRCodeWriter=xi,n.RGBLuminanceSource=no,n.RSS14Reader=Lt,n.RSSExpandedReader=Ce,n.ReaderException=gi,n.ReedSolomonDecoder=wn,n.ReedSolomonEncoder=Ha,n.ReedSolomonException=Er,n.Result=Ie,n.ResultMetadataType=Te,n.ResultPoint=Le,n.StringUtils=Y,n.UnsupportedOperationException=be,n.VideoInputDevice=te,n.WhiteRectangleDetector=ln,n.WriterException=Ot,n.ZXingArrays=U,n.ZXingCharset=ec,n.ZXingInteger=B,n.ZXingStandardCharsets=Wa,n.ZXingStringBuilder=fe,n.ZXingStringEncoding=X,n.ZXingSystem=I,n.createAbstractExpandedDecoder=Gl,Object.defineProperty(n,"__esModule",{value:!0})}))})(bl,bl.exports)),bl.exports}var nr=FT();const UT=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Fg=(function(){function t(e,n,o){if(this.formatMap=new Map([[Ue.QR_CODE,nr.BarcodeFormat.QR_CODE],[Ue.AZTEC,nr.BarcodeFormat.AZTEC],[Ue.CODABAR,nr.BarcodeFormat.CODABAR],[Ue.CODE_39,nr.BarcodeFormat.CODE_39],[Ue.CODE_93,nr.BarcodeFormat.CODE_93],[Ue.CODE_128,nr.BarcodeFormat.CODE_128],[Ue.DATA_MATRIX,nr.BarcodeFormat.DATA_MATRIX],[Ue.MAXICODE,nr.BarcodeFormat.MAXICODE],[Ue.ITF,nr.BarcodeFormat.ITF],[Ue.EAN_13,nr.BarcodeFormat.EAN_13],[Ue.EAN_8,nr.BarcodeFormat.EAN_8],[Ue.PDF_417,nr.BarcodeFormat.PDF_417],[Ue.RSS_14,nr.BarcodeFormat.RSS_14],[Ue.RSS_EXPANDED,nr.BarcodeFormat.RSS_EXPANDED],[Ue.UPC_A,nr.BarcodeFormat.UPC_A],[Ue.UPC_E,nr.BarcodeFormat.UPC_E],[Ue.UPC_EAN_EXTENSION,nr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!UT)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var c=this.createZXingFormats(e),d=new Map;d.set(nr.DecodeHintType.POSSIBLE_FORMATS,c),d.set(nr.DecodeHintType.TRY_HARDER,!1),this.hints=d}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,c){try{o(n.decode(e))}catch(d){c(d)}})},t.prototype.decode=function(e){var n=new nr.MultiFormatReader(this.verbose,this.hints),o=new nr.HTMLCanvasElementLuminanceSource(e),c=new nr.BinaryBitmap(new nr.HybridBinarizer(o)),d=n.decode(c);return{text:d.text,format:zw.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,c){e.set(n,o)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],o=0,c=e;o<c.length;o++){var d=c[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),zT=function(t,e,n,o){function c(d){return d instanceof n?d:new n(function(g){g(d)})}return new(n||(n=Promise))(function(d,g){function y(S){try{b(o.next(S))}catch(N){g(N)}}function v(S){try{b(o.throw(S))}catch(N){g(N)}}function b(S){S.done?d(S.value):c(S.value).then(y,v)}b((o=o.apply(t,e||[])).next())})},VT=function(t,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(S){return v([b,S])}}function v(b){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,b[0]&&(n=0)),n;)try{if(o=1,c&&(d=b[0]&2?c.return:b[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,b[1])).done)return d;switch(c=0,d&&(b=[b[0]&2,d.value]),b[0]){case 0:case 1:d=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){n.label=b[1];break}if(b[0]===6&&n.label<d[1]){n.label=d[1],d=b;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(b);break}d[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(t,n)}catch(S){b=[6,S],c=0}finally{o=d=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Ug=(function(){function t(e,n,o){if(this.formatMap=new Map([[Ue.QR_CODE,"qr_code"],[Ue.AZTEC,"aztec"],[Ue.CODABAR,"codabar"],[Ue.CODE_39,"code_39"],[Ue.CODE_93,"code_93"],[Ue.CODE_128,"code_128"],[Ue.DATA_MATRIX,"data_matrix"],[Ue.ITF,"itf"],[Ue.EAN_13,"ean_13"],[Ue.EAN_8,"ean_8"],[Ue.PDF_417,"pdf417"],[Ue.UPC_A,"upc_a"],[Ue.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return zT(this,void 0,void 0,function(){var n,o;return VT(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=c.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:zw.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,c=0,d=e;c<d.length;c++){var g=d[c],y=g.boundingBox.width*g.boundingBox.height;y>o&&(o=y,n=g)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,c=e;o<c.length;o++){var d=c[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,c){e.set(n,o)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),zg=function(t,e,n,o){function c(d){return d instanceof n?d:new n(function(g){g(d)})}return new(n||(n=Promise))(function(d,g){function y(S){try{b(o.next(S))}catch(N){g(N)}}function v(S){try{b(o.throw(S))}catch(N){g(N)}}function b(S){S.done?d(S.value):c(S.value).then(y,v)}b((o=o.apply(t,e||[])).next())})},Vg=function(t,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(S){return v([b,S])}}function v(b){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,b[0]&&(n=0)),n;)try{if(o=1,c&&(d=b[0]&2?c.return:b[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,b[1])).done)return d;switch(c=0,d&&(b=[b[0]&2,d.value]),b[0]){case 0:case 1:d=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){n.label=b[1];break}if(b[0]===6&&n.label<d[1]){n.label=d[1],d=b;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(b);break}d[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(t,n)}catch(S){b=[6,S],c=0}finally{o=d=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},HT=(function(){function t(e,n,o,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&Ug.isSupported()?(this.primaryDecoder=new Ug(e,o,c),this.secondaryDecoder=new Fg(e,o,c)):this.primaryDecoder=new Fg(e,o,c)}return t.prototype.decodeAsync=function(e){return zg(this,void 0,void 0,function(){var n;return Vg(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return zg(this,void 0,void 0,function(){var n,o;return Vg(this,function(c){switch(c.label){case 0:n=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(o=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var c=o[n];e+=c}var d=e/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),D0=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(o[d]=c[d])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Ru=function(t,e,n,o){function c(d){return d instanceof n?d:new n(function(g){g(d)})}return new(n||(n=Promise))(function(d,g){function y(S){try{b(o.next(S))}catch(N){g(N)}}function v(S){try{b(o.throw(S))}catch(N){g(N)}}function b(S){S.done?d(S.value):c(S.value).then(y,v)}b((o=o.apply(t,e||[])).next())})},Ou=function(t,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(S){return v([b,S])}}function v(b){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,b[0]&&(n=0)),n;)try{if(o=1,c&&(d=b[0]&2?c.return:b[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,b[1])).done)return d;switch(c=0,d&&(b=[b[0]&2,d.value]),b[0]){case 0:case 1:d=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){n.label=b[1];break}if(b[0]===6&&n.label<d[1]){n.label=d[1],d=b;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(b);break}d[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(t,n)}catch(S){b=[6,S],c=0}finally{o=d=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Hw=(function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t})(),WT=(function(t){D0(e,t);function e(n,o){return t.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var c={advanced:[o]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Hw),GT=(function(t){D0(e,t);function e(n){return t.call(this,"zoom",n)||this}return e})(WT),qT=(function(t){D0(e,t);function e(n){return t.call(this,"torch",n)||this}return e})(Hw),$T=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new GT(this.track)},t.prototype.torchFeature=function(){return new qT(this.track)},t})(),KT=(function(){function t(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,c),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,o,c){return Ru(this,void 0,void 0,function(){var d,g;return Ou(this,function(y){switch(y.label){case 0:return d=new t(e,n,c),o.aspectRatio?(g={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:y.sent(),y.label=2;case 2:return d.setupSurface(),[2,d]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Ru(this,void 0,void 0,function(){return Ou(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var c=e.mediaStream.getVideoTracks(),d=c.length,g=0;e.mediaStream.getVideoTracks().forEach(function(y){e.mediaStream.removeTrack(y),y.stop(),++g,g>=d&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new $T(this.getFirstTrackOrFail())},t})(),XT=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,o){return Ru(this,void 0,void 0,function(){return Ou(this,function(c){return[2,KT.create(e,this.mediaStream,n,o)]})})},t.create=function(e){return Ru(this,void 0,void 0,function(){var n,o;return Ou(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=c.sent(),[2,new t(o)]}})})},t})(),Hg=function(t,e,n,o){function c(d){return d instanceof n?d:new n(function(g){g(d)})}return new(n||(n=Promise))(function(d,g){function y(S){try{b(o.next(S))}catch(N){g(N)}}function v(S){try{b(o.throw(S))}catch(N){g(N)}}function b(S){S.done?d(S.value):c(S.value).then(y,v)}b((o=o.apply(t,e||[])).next())})},Wg=function(t,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(S){return v([b,S])}}function v(b){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,b[0]&&(n=0)),n;)try{if(o=1,c&&(d=b[0]&2?c.return:b[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,b[1])).done)return d;switch(c=0,d&&(b=[b[0]&2,d.value]),b[0]){case 0:case 1:d=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){n.label=b[1];break}if(b[0]===6&&n.label<d[1]){n.label=d[1],d=b;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(b);break}d[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(t,n)}catch(S){b=[6,S],c=0}finally{o=d=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},YT=(function(){function t(){}return t.failIfNotSupported=function(){return Hg(this,void 0,void 0,function(){return Wg(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Hg(this,void 0,void 0,function(){return Wg(this,function(n){return[2,XT.create(e)]})})},t})(),ZT=function(t,e,n,o){function c(d){return d instanceof n?d:new n(function(g){g(d)})}return new(n||(n=Promise))(function(d,g){function y(S){try{b(o.next(S))}catch(N){g(N)}}function v(S){try{b(o.throw(S))}catch(N){g(N)}}function b(S){S.done?d(S.value):c(S.value).then(y,v)}b((o=o.apply(t,e||[])).next())})},QT=function(t,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(S){return v([b,S])}}function v(b){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,b[0]&&(n=0)),n;)try{if(o=1,c&&(d=b[0]&2?c.return:b[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,b[1])).done)return d;switch(c=0,d&&(b=[b[0]&2,d.value]),b[0]){case 0:case 1:d=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){n.label=b[1];break}if(b[0]===6&&n.label<d[1]){n.label=d[1],d=b;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(b);break}d[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(t,n)}catch(S){b=[6,S],c=0}finally{o=d=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},JT=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=xa.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=xa.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return ZT(this,void 0,void 0,function(){var e,n,o,c,d,g,y;return QT(this,function(v){switch(v.label){case 0:return e=function(b){for(var S=b.getVideoTracks(),N=0,R=S;N<R.length;N++){var T=R[N];T.enabled=!1,T.stop(),b.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=v.sent(),c=[],d=0,g=o;d<g.length;d++)y=g[d],y.kind==="videoinput"&&c.push({id:y.deviceId,label:y.label});return e(n),[2,c]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(d){for(var g=[],y=0,v=d;y<v.length;y++){var b=v[y];b.kind==="video"&&g.push({id:b.id,label:b.label})}e(g)},c=MediaStreamTrack;c.getSources(o)})},t})(),cr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(cr||(cr={}));var e8=(function(){function t(){this.state=cr.NOT_STARTED,this.onGoingTransactionNewState=cr.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===cr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=cr.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===cr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=cr.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==cr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case cr.UNKNOWN:throw"Transition from unknown is not allowed";case cr.NOT_STARTED:this.failIfNewStateIs(e,[cr.PAUSED]);break;case cr.SCANNING:break;case cr.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var o=0,c=n;o<c.length;o++){var d=c[o];if(e===d)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),t8=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===cr.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==cr.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===cr.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===cr.PAUSED},t})(),r8=(function(){function t(){}return t.create=function(){return new t8(new e8)},t})(),n8=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(o[d]=c[d])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Dn=(function(t){n8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(DT),s8=(function(){function t(e,n){this.logger=n,this.fps=Dn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Dn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Vw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Xs(this.qrbox)},t.create=function(e,n){return new t(e,n)},t})(),i8=(function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new LT(this.verbose),this.qrcode=new HT(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=r8.create()}return t.prototype.start=function(e,n,o,c){var d=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;c?g=c:g=this.verbose?this.logger.log:function(){};var y=s8.create(n,this.logger);this.clearElement();var v=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var b=v,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Dn.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var N=this,R=this.stateManagerProxy.startTransition(cr.SCANNING);return new Promise(function(T,D){var I=b?y.videoConstraints:N.createVideoConstraints(e);if(!I){R.cancel(),D("videoConstraints should be defined");return}var M={};(!b||y.aspectRatio)&&(M.aspectRatio=y.aspectRatio);var z={onRenderSurfaceReady:function(U,B){N.setupUi(U,B,y),N.isScanning=!0,N.foreverScan(y,o,g)}};YT.failIfNotSupported().then(function(U){U.create(I).then(function(B){return B.render(d.element,M,z).then(function(V){N.renderedCamera=V,R.execute(),T(null)}).catch(function(V){R.cancel(),D(V)})}).catch(function(B){R.cancel(),D(xa.errorGettingUserMedia(B))})}).catch(function(U){R.cancel(),D(xa.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(cr.PAUSED),this.showPausedState(),(Xs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(cr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(cr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var d=document.getElementById(Dn.SHADED_REGION_ELEMENT_ID);d&&e.element.removeChild(d)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),o(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),n.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},t.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Xs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var g=new Image;g.onload=function(){var y=g.width,v=g.height,b=document.getElementById(o.elementId),S=b.clientWidth?b.clientWidth:Dn.DEFAULT_WIDTH,N=Math.max(b.clientHeight?b.clientHeight:v,Dn.FILE_SCAN_MIN_HEIGHT),R=o.computeCanvasDrawConfig(y,v,S,N);if(n){var T=o.createCanvasElement(S,N,"qr-canvas-visible");T.style.display="inline-block",b.appendChild(T);var D=T.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=S,D.canvas.height=N,D.drawImage(g,0,0,y,v,R.x,R.y,R.width,R.height)}var I=Dn.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(g.width,R.width),z=Math.max(g.height,R.height),U=M+2*I,B=z+2*I,V=o.createCanvasElement(U,B);b.appendChild(V);var re=V.getContext("2d");if(!re)throw"Unable to get 2d context from canvas";re.canvas.width=U,re.canvas.height=B,re.drawImage(g,0,0,y,v,I,I,M,z);try{o.qrcode.decodeRobustlyAsync(V).then(function(G){c(Lg.createFromQrcodeResult(G))}).catch(d)}catch(G){d("QR code parse error, error = ".concat(G))}},g.onerror=d,g.onabort=d,g.onstalled=d,g.onsuspend=d,g.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return JT.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Vw.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Ue.QR_CODE,Ue.AZTEC,Ue.CODABAR,Ue.CODE_39,Ue.CODE_93,Ue.CODE_128,Ue.DATA_MATRIX,Ue.MAXICODE,Ue.ITF,Ue.EAN_13,Ue.EAN_8,Ue.PDF_417,Ue.RSS_14,Ue.RSS_EXPANDED,Ue.UPC_A,Ue.UPC_E,Ue.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],c=0,d=e.formatsToSupport;c<d.length;c++){var g=d[c];PT(g)?o.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Xs(e))return!0;if(!Xs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Xs(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Xs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,o){var c=this,d=o.qrbox;this.validateQrboxConfig(d);var g=this.toQrdimensions(e,n,d),y=function(b){if(b<Dn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Dn.MIN_QR_BOX_SIZE,"px.")},v=function(b){return b>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),b=e),b};y(g.width),y(g.height),g.width=v(g.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return o},t.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var c=Xs(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(c);var d=this.toQrdimensions(e,n,c);d.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=o.isShadedBoxEnabled()&&d.height<=n,y={x:0,y:0,width:e,height:n},v=g?this.getShadedRegionBounds(e,n,d):y,b=this.createCanvasElement(v.width,v.height),S={willReadFrequently:!0},N=b.getContext("2d",S);N.canvas.width=v.width,N.canvas.height=v.height,this.element.append(b),g&&this.possiblyInsertShadingElement(this.element,e,n,d),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=N,this.canvasElement=b},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=xa.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,Lg.createFromQrcodeResult(c)),o.possiblyUpdateShaders(!0),!0}).catch(function(c){o.possiblyUpdateShaders(!1);var d=xa.codeParseError(c);return n(d,MT.createFrom(d)),!1})},t.prototype.foreverScan=function(e,n,o){var c=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),g=d.videoWidth/d.clientWidth,y=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*g,b=this.qrRegion.height*y,S=this.qrRegion.x*g,N=this.qrRegion.y*y;this.context.drawImage(d,S,N,v,b,0,0,this.qrRegion.width,this.qrRegion.height);var R=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,n,o)},c.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(T){!T&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(n,o).finally(function(){R()})):R()}).catch(function(T){c.logger.logError("Error happend while scanning context",T),R()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",c={user:!0,environment:!0},d="exact",g=function(D){if(D in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},y=Object.keys(e);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var v=Object.keys(e)[0];if(v!==n&&v!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(v===n){var b=e.facingMode;if(typeof b=="string"){if(g(b))return{facingMode:b}}else if(typeof b=="object")if(d in b){if(g(b["".concat(d)]))return{facingMode:{exact:b["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var S=typeof b;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var N=e.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(d in N)return{deviceId:{exact:N["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var R=typeof N;throw"Invalid type of 'deviceId' = ".concat(R)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,n,o,c){if(e<=o&&n<=c){var d=(o-e)/2,g=(c-n)/2;return{x:d,y:g,width:e,height:n}}else{var y=e,v=n;return e>o&&(n=o/e*n,e=o),n>c&&(e=c/n*e,n=c),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(v)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,c)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Dn.BORDER_SHADER_MATCH_COLOR:Dn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,o){var c=e,d=n,g=document.createElement("canvas");return g.style.width="".concat(c,"px"),g.style.height="".concat(d,"px"),g.style.display="none",g.id=Xs(o)?"qr-canvas":o,g},t.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},t.prototype.possiblyInsertShadingElement=function(e,n,o,c){if(!(n-c.width<1||o-c.height<1)){var d=document.createElement("div");d.style.position="absolute";var g=(n-c.width)/2,y=(o-c.height)/2;if(d.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Dn.SHADED_REGION_ELEMENT_ID),n-c.width<11||o-c.height<11)this.hasBorderShaders=!1;else{var v=5,b=40;this.insertShaderBorders(d,b,v,-v,null,0,!0),this.insertShaderBorders(d,b,v,-v,null,0,!1),this.insertShaderBorders(d,b,v,null,-v,0,!0),this.insertShaderBorders(d,b,v,null,-v,0,!1),this.insertShaderBorders(d,v,b+v,-v,null,-v,!0),this.insertShaderBorders(d,v,b+v,null,-v,-v,!0),this.insertShaderBorders(d,v,b+v,-v,null,-v,!1),this.insertShaderBorders(d,v,b+v,null,-v,-v,!1),this.hasBorderShaders=!0}e.append(d)}},t.prototype.insertShaderBorders=function(e,n,o,c,d,g,y){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=Dn.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(n,"px"),v.style.height="".concat(o,"px"),c!==null&&(v.style.top="".concat(c,"px")),d!==null&&(v.style.bottom="".concat(d,"px")),y?v.style.left="".concat(g,"px"):v.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),e.appendChild(v)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),Gg;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Gg||(Gg={}));const Ww=({onScan:t,onError:e})=>{const[n,o]=O.useState(!1),[c,d]=O.useState(null),g=O.useRef(null),y=O.useRef(null),v=async()=>{if(y.current)try{d(null);const S=new i8("qr-reader");g.current=S,await S.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},N=>{t(N),b()},()=>{}),o(!0)}catch(S){const N=S instanceof Error?S.message:"Camera access denied";d(N),e?.(N)}},b=async()=>{if(g.current){try{await g.current.stop(),g.current.clear()}catch{}g.current=null}o(!1)};return O.useEffect(()=>()=>{b()},[]),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{id:"qr-reader",ref:y,className:"w-full max-w-md mx-auto bg-secondary/20 rounded-lg overflow-hidden",style:{minHeight:n?"300px":"0"}}),c&&h.jsx("div",{className:"text-center text-destructive font-mono text-sm p-4 bg-destructive/10 rounded",children:c}),h.jsx("div",{className:"flex justify-center gap-3",children:n?h.jsxs("button",{onClick:b,className:"flex items-center gap-2 bg-destructive text-white px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform",children:[h.jsx(No,{className:"w-5 h-5"}),"Stop Camera"]}):h.jsxs("button",{onClick:v,className:"flex items-center gap-2 bg-primary text-background px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform",children:[h.jsx(Qv,{className:"w-5 h-5"}),"Start Camera"]})}),!n&&!c&&h.jsx("p",{className:"text-center text-muted-foreground font-mono text-sm",children:`Click "Start Camera" to scan a participant's QR code`})]})},o8=()=>{const{toast:t}=an(),{user:e}=oi(),[n,o]=O.useState("checkin"),[c,d]=O.useState(null),[g,y]=O.useState(!1),[v,b]=O.useState(!1),[S,N]=O.useState(""),[R,T]=O.useState([]),[D,I]=O.useState(null),[M,z]=O.useState(null),[U,B]=O.useState(!1);O.useEffect(()=>{V()},[]);const V=async()=>{const{data:X,error:Y}=await Ze.from("food_coupons").select("*").eq("is_active",!0).order("name");if(Y){console.error("Failed to fetch coupons:",Y);return}T(X||[]),X&&X.length>0&&I(X[0])},re=async X=>{y(!0),d(null),z(null);try{const{data:Y,error:fe}=await Ze.from("registrations").select("id, registration_id, ticket_id, checked_in, checked_in_at, created_at, profile:profiles!fk_registrations_profile(full_name, email, phone), ticket:tickets(title)").eq("registration_id",X).eq("status","confirmed").single();if(fe||!Y){t({title:"Not Found",description:"No confirmed registration found with this QR code.",variant:"destructive"}),y(!1);return}d(Y),n==="food"&&D&&await G(Y.id,D,Y.ticket_id)}catch{t({title:"Error",description:"Failed to lookup registration.",variant:"destructive"})}y(!1)},G=async(X,Y,fe)=>{if(!Y.ticket_ids.includes(fe)){z({consumed:!1,remaining:0});return}const{data:oe,error:ee}=await Ze.from("coupon_consumptions").select("id, consumed_at").eq("registration_id",X).eq("coupon_id",Y.id);if(ee){console.error("Failed to check coupon status:",ee);return}const _e=oe?.length||0,he=Y.quantity-_e;_e>0&&he<=0?z({consumed:!0,consumed_at:oe[oe.length-1].consumed_at,remaining:0}):z({consumed:!1,remaining:he})},H=async()=>{if(!(!c||!e)){b(!0);try{const{error:X}=await Ze.from("registrations").update({checked_in:!0,checked_in_at:new Date().toISOString(),checked_in_by:e.id}).eq("id",c.id);if(X)throw X;t({title:"Checked In!",description:`${c.profile.full_name} has been checked in successfully.`}),d(null)}catch{t({title:"Error",description:"Failed to check in participant.",variant:"destructive"})}b(!1)}},se=async()=>{if(!(!c||!e||!D)){b(!0);try{const{error:X}=await Ze.from("coupon_consumptions").insert({registration_id:c.id,coupon_id:D.id,consumed_by:e.id});if(X)if(X.code==="23505")t({title:"Already Consumed",description:"This coupon has already been fully consumed for this registration.",variant:"destructive"});else throw X;else t({title:"Coupon Marked!",description:`${D.name} marked for ${c.profile.full_name}.`});d(null),z(null)}catch{t({title:"Error",description:"Failed to mark coupon consumption.",variant:"destructive"})}b(!1)}},$=()=>{d(null),z(null)},be=D&&c?D.ticket_ids.includes(c.ticket_id):!1;return h.jsx(ei,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"SCANNERS"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"Scan participant QR codes for check-in or food coupons"})]}),h.jsx("div",{className:"terminal-card p-4",children:h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>{o("checkin"),d(null),z(null)},className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded font-mono text-sm transition-all ${n==="checkin"?"bg-primary text-background":"bg-secondary/30 text-primary/70 hover:bg-secondary/50"}`,children:[h.jsx(Dx,{className:"w-4 h-4"}),"Check-in"]}),h.jsxs("button",{onClick:()=>{o("food"),d(null),z(null)},className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded font-mono text-sm transition-all ${n==="food"?"bg-primary text-background":"bg-secondary/30 text-primary/70 hover:bg-secondary/50"}`,children:[h.jsx(Hi,{className:"w-4 h-4"}),"Food Coupon"]})]})}),n==="food"&&h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("label",{className:"block text-sm font-mono text-muted-foreground mb-2",children:"SELECT COUPON"}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>B(!U),className:"w-full flex items-center justify-between bg-background border border-border rounded px-4 py-3 text-primary font-mono focus:border-primary",children:[h.jsx("span",{children:D?.name||"Select a coupon"}),h.jsx(Sl,{className:`w-4 h-4 transition-transform ${U?"rotate-180":""}`})]}),U&&h.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded shadow-lg z-10 max-h-48 overflow-y-auto",children:R.length===0?h.jsx("div",{className:"px-4 py-3 text-sm text-muted-foreground font-mono",children:"No active coupons available"}):R.map(X=>h.jsx("button",{onClick:()=>{I(X),B(!1),d(null),z(null)},className:`w-full px-4 py-3 text-left font-mono text-sm hover:bg-secondary/30 transition-colors ${D?.id===X.id?"bg-primary/10 text-primary":"text-primary/70"}`,children:X.name},X.id))})]}),D&&h.jsxs("p",{className:"mt-2 text-xs font-mono text-muted-foreground",children:["Quantity: ",D.quantity," per registration"]})]}),!c&&!g&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"terminal-card p-4 sm:p-6",children:[h.jsx("h3",{className:"text-sm font-mono text-muted-foreground mb-3",children:"MANUAL ENTRY"}),h.jsxs("form",{onSubmit:X=>{X.preventDefault(),S.trim()&&re(S.trim().toUpperCase())},className:"flex flex-col sm:flex-row gap-3",children:[h.jsx("input",{type:"text",value:S,onChange:X=>N(X.target.value.toUpperCase()),placeholder:"Enter Registration ID",className:"flex-1 bg-background border border-border rounded px-4 py-3 text-primary font-mono tracking-wider focus:border-primary uppercase text-center sm:text-left",maxLength:10}),h.jsxs("button",{type:"submit",disabled:!S.trim()||n==="food"&&!D,className:"flex items-center justify-center gap-2 bg-primary text-background px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform disabled:opacity-50",children:[h.jsx(Lu,{className:"w-5 h-5"}),"Lookup"]})]})]}),h.jsxs("div",{className:"terminal-card p-4 sm:p-6",children:[h.jsx("h3",{className:"text-sm font-mono text-muted-foreground mb-3",children:"OR SCAN QR CODE"}),h.jsx(Ww,{onScan:re})]})]}),g&&h.jsx("div",{className:"terminal-card p-8 text-center",children:h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Looking up participant..."})}),c&&n==="checkin"&&h.jsxs("div",{className:"terminal-card p-6",children:[h.jsx("div",{className:"text-center mb-6",children:c.checked_in?h.jsxs("div",{className:"inline-flex items-center gap-2 text-yellow-500 bg-yellow-500/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(ps,{className:"w-5 h-5"}),"Already Checked In"]}):h.jsxs("div",{className:"inline-flex items-center gap-2 text-primary bg-primary/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(Sa,{className:"w-5 h-5"}),"Ready to Check In"]})}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h3",{className:"text-2xl font-display text-primary mb-2",children:c.profile.full_name}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm",children:c.profile.email}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm",children:c.profile.phone})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-secondary/20 p-4 rounded text-center",children:[h.jsx(Gi,{className:"w-6 h-6 text-primary mx-auto mb-2"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Ticket"}),h.jsx("p",{className:"text-sm text-primary font-mono",children:c.ticket.title})]}),h.jsxs("div",{className:"bg-secondary/20 p-4 rounded text-center",children:[h.jsx(Cx,{className:"w-6 h-6 text-primary mx-auto mb-2"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Registration ID"}),h.jsx("p",{className:"text-sm text-primary font-mono tracking-wider",children:c.registration_id})]})]}),c.checked_in?h.jsxs("div",{className:"text-center",children:[h.jsxs("p",{className:"text-muted-foreground font-mono text-sm mb-4",children:["Checked in at: ",new Date(c.checked_in_at).toLocaleString()]}),h.jsx("button",{onClick:$,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 border border-primary text-primary rounded font-mono hover:bg-primary/10",children:"Scan Another"})]}):h.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4",children:[h.jsxs("button",{onClick:$,className:"flex items-center justify-center gap-2 px-6 py-3 border border-border text-muted-foreground rounded font-mono hover:bg-secondary/50 order-2 sm:order-1",children:[h.jsx(No,{className:"w-5 h-5"}),"Cancel"]}),h.jsxs("button",{onClick:H,disabled:v,className:"flex items-center justify-center gap-2 bg-green-500 text-white px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform disabled:opacity-50 order-1 sm:order-2",children:[h.jsx(ps,{className:"w-5 h-5"}),v?"Checking In...":"Confirm Check-In"]})]})]}),c&&n==="food"&&D&&h.jsxs("div",{className:"terminal-card p-6",children:[h.jsx("div",{className:"text-center mb-6",children:be?M?.consumed?h.jsxs("div",{className:"inline-flex items-center gap-2 text-yellow-500 bg-yellow-500/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(ps,{className:"w-5 h-5"}),"Already Consumed"]}):h.jsxs("div",{className:"inline-flex items-center gap-2 text-green-500 bg-green-500/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(Hi,{className:"w-5 h-5"}),"Ready to Mark"]}):h.jsxs("div",{className:"inline-flex items-center gap-2 text-destructive bg-destructive/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(Px,{className:"w-5 h-5"}),"Ticket Not Eligible"]})}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h3",{className:"text-2xl font-display text-primary mb-2",children:c.profile.full_name}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm",children:c.profile.email})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-secondary/20 p-4 rounded text-center",children:[h.jsx(Gi,{className:"w-6 h-6 text-primary mx-auto mb-2"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Ticket"}),h.jsx("p",{className:"text-sm text-primary font-mono",children:c.ticket.title})]}),h.jsxs("div",{className:"bg-secondary/20 p-4 rounded text-center",children:[h.jsx(Hi,{className:"w-6 h-6 text-primary mx-auto mb-2"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Coupon"}),h.jsx("p",{className:"text-sm text-primary font-mono",children:D.name})]})]}),be&&M&&h.jsx("div",{className:"bg-secondary/10 p-4 rounded mb-6 text-center",children:h.jsx("p",{className:"text-sm font-mono text-muted-foreground",children:M.consumed?h.jsxs(h.Fragment,{children:["All ",D.quantity," coupon(s) consumed.",h.jsx("br",{}),"Last used: ",new Date(M.consumed_at).toLocaleString()]}):h.jsxs(h.Fragment,{children:["Remaining: ",h.jsx("span",{className:"text-primary",children:M.remaining})," of ",D.quantity]})})}),be?M?.consumed?h.jsx("div",{className:"text-center",children:h.jsx("button",{onClick:$,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 border border-primary text-primary rounded font-mono hover:bg-primary/10",children:"Scan Another"})}):h.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4",children:[h.jsxs("button",{onClick:$,className:"flex items-center justify-center gap-2 px-6 py-3 border border-border text-muted-foreground rounded font-mono hover:bg-secondary/50 order-2 sm:order-1",children:[h.jsx(No,{className:"w-5 h-5"}),"Cancel"]}),h.jsxs("button",{onClick:se,disabled:v,className:"flex items-center justify-center gap-2 bg-green-500 text-white px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform disabled:opacity-50 order-1 sm:order-2",children:[h.jsx(ps,{className:"w-5 h-5"}),v?"Marking...":"Confirm Consumption"]})]}):h.jsxs("div",{className:"text-center",children:[h.jsxs("p",{className:"text-muted-foreground font-mono text-sm mb-4",children:['This ticket type is not eligible for "',D.name,'".']}),h.jsx("button",{onClick:$,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 border border-primary text-primary rounded font-mono hover:bg-primary/10",children:"Scan Another"})]})]})]})})},a8=()=>{const{toast:t}=an(),[e,n]=O.useState([]),[o,c]=O.useState([]),[d,g]=O.useState(!0),[y,v]=O.useState(!1),[b,S]=O.useState(null),[N,R]=O.useState(!1),[T,D]=O.useState({name:"",ticket_ids:[],quantity:1,is_active:!0});O.useEffect(()=>{I()},[]);const I=async()=>{g(!0);try{const{data:G,error:H}=await Ze.from("food_coupons").select("*").order("created_at",{ascending:!1});if(H)throw H;n(G||[]);const{data:se,error:$}=await Ze.from("tickets").select("*").order("title");if($)throw $;c(se||[])}catch{t({title:"Error",description:"Failed to load data.",variant:"destructive"})}g(!1)},M=G=>{G?(S(G),D({name:G.name,ticket_ids:G.ticket_ids||[],quantity:G.quantity,is_active:G.is_active})):(S(null),D({name:"",ticket_ids:[],quantity:1,is_active:!0})),v(!0)},z=()=>{v(!1),S(null),D({name:"",ticket_ids:[],quantity:1,is_active:!0})},U=G=>{D(H=>({...H,ticket_ids:H.ticket_ids.includes(G)?H.ticket_ids.filter(se=>se!==G):[...H.ticket_ids,G]}))},B=async G=>{if(G.preventDefault(),!T.name.trim()){t({title:"Error",description:"Coupon name is required.",variant:"destructive"});return}if(T.ticket_ids.length===0){t({title:"Error",description:"Please select at least one ticket type.",variant:"destructive"});return}R(!0);try{if(b){const{error:H}=await Ze.from("food_coupons").update({name:T.name.trim(),ticket_ids:T.ticket_ids,quantity:T.quantity,is_active:T.is_active}).eq("id",b.id);if(H)throw H;t({title:"Success",description:"Coupon updated successfully."})}else{const{error:H}=await Ze.from("food_coupons").insert({name:T.name.trim(),ticket_ids:T.ticket_ids,quantity:T.quantity,is_active:T.is_active});if(H)throw H;t({title:"Success",description:"Coupon created successfully."})}z(),I()}catch{t({title:"Error",description:"Failed to save coupon.",variant:"destructive"})}R(!1)},V=async G=>{if(confirm(`Are you sure you want to delete "${G.name}"?`))try{const{error:H}=await Ze.from("food_coupons").delete().eq("id",G.id);if(H)throw H;t({title:"Deleted",description:"Coupon deleted successfully."}),I()}catch{t({title:"Error",description:"Failed to delete coupon. It may have existing consumptions.",variant:"destructive"})}},re=G=>G.map(H=>o.find(se=>se.id===H)?.title||"Unknown").join(", ");return h.jsx(ei,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"FOOD COUPONS"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"Manage food coupons for participants"})]}),h.jsxs("button",{onClick:()=>M(),className:"flex items-center gap-2 bg-primary text-background px-4 py-2 font-display font-bold rounded hover:scale-105 transition-transform",children:[h.jsx(wu,{className:"w-4 h-4"}),"New Coupon"]})]}),d?h.jsx("div",{className:"terminal-card p-8 text-center",children:h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Loading coupons..."})}):e.length===0?h.jsxs("div",{className:"terminal-card p-8 text-center",children:[h.jsx(Hi,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),h.jsx("p",{className:"text-muted-foreground font-mono",children:"No coupons created yet."}),h.jsx("button",{onClick:()=>M(),className:"mt-4 text-primary font-mono hover:underline",children:"Create your first coupon"})]}):h.jsx("div",{className:"grid gap-4",children:e.map(G=>h.jsx("div",{className:`terminal-card p-4 sm:p-6 ${G.is_active?"":"opacity-60"}`,children:h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"text-lg font-display text-primary",children:G.name}),!G.is_active&&h.jsx("span",{className:"text-xs font-mono px-2 py-1 bg-muted-foreground/20 text-muted-foreground rounded",children:"Inactive"})]}),h.jsxs("div",{className:"space-y-1 text-sm font-mono text-muted-foreground",children:[h.jsxs("p",{children:[h.jsx("span",{className:"text-primary/70",children:"Quantity:"})," ",G.quantity," per registration"]}),h.jsxs("p",{children:[h.jsx("span",{className:"text-primary/70",children:"Tickets:"})," ",re(G.ticket_ids||[])]})]})]}),h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("button",{onClick:()=>M(G),className:"p-2 text-primary hover:bg-primary/10 rounded transition-colors",title:"Edit",children:h.jsx(kx,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>V(G),className:"p-2 text-destructive hover:bg-destructive/10 rounded transition-colors",title:"Delete",children:h.jsx(s0,{className:"w-4 h-4"})})]})]})},G.id))}),y&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-card border border-border rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-display text-primary",children:b?"Edit Coupon":"New Coupon"}),h.jsx("button",{onClick:z,className:"p-2 text-muted-foreground hover:text-primary transition-colors",children:h.jsx(ti,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:B,className:"p-4 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-mono text-muted-foreground mb-1",children:"Coupon Name *"}),h.jsx("input",{type:"text",value:T.name,onChange:G=>D(H=>({...H,name:G.target.value})),placeholder:"e.g., Lunch, Breakfast, Snacks",className:"w-full bg-background border border-border rounded px-3 py-2 text-primary font-mono focus:border-primary"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-mono text-muted-foreground mb-1",children:"Quantity per Registration"}),h.jsx("input",{type:"number",min:1,value:T.quantity,onChange:G=>D(H=>({...H,quantity:parseInt(G.target.value)||1})),className:"w-full bg-background border border-border rounded px-3 py-2 text-primary font-mono focus:border-primary"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-mono text-muted-foreground mb-2",children:"Applicable Tickets *"}),h.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-border rounded p-2",children:[o.map(G=>h.jsxs("label",{className:"flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-secondary/30 transition-colors",children:[h.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${T.ticket_ids.includes(G.id)?"bg-primary border-primary":"border-border"}`,onClick:()=>U(G.id),children:T.ticket_ids.includes(G.id)&&h.jsx(bh,{className:"w-3 h-3 text-background"})}),h.jsx("span",{className:"text-sm font-mono text-primary",children:G.title})]},G.id)),o.length===0&&h.jsx("p",{className:"text-sm text-muted-foreground font-mono p-2",children:"No tickets available."})]})]}),h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${T.is_active?"bg-primary border-primary":"border-border"}`,onClick:()=>D(G=>({...G,is_active:!G.is_active})),children:T.is_active&&h.jsx(bh,{className:"w-3 h-3 text-background"})}),h.jsx("span",{className:"text-sm font-mono text-muted-foreground",children:"Active (can be used for scanning)"})]}),h.jsxs("div",{className:"flex gap-3 pt-4",children:[h.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 border border-border text-muted-foreground rounded font-mono hover:bg-secondary/50 transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:N,className:"flex-1 bg-primary text-background px-4 py-2 font-display font-bold rounded hover:scale-105 transition-transform disabled:opacity-50",children:N?"Saving...":b?"Update":"Create"})]})]})]})})]})})},l8=()=>{const[t,e]=O.useState([]),[n,o]=O.useState(!0),[c,d]=O.useState({}),[g,y]=O.useState(!1),[v,b]=O.useState("all"),{toast:S}=an();O.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:U,error:B}=await Ze.from("registrations").select(`
                    id,
                    razorpay_order_id,
                    razorpay_payment_id,
                    status,
                    created_at,
                    profile:profiles!fk_registrations_profile(full_name, email),
                    ticket:tickets(title)
                `).not("razorpay_order_id","is",null).order("created_at",{ascending:!1});if(B)throw B;e(U||[])}catch(U){console.error("Error fetching registrations:",U),S({title:"Error",description:"Failed to fetch registrations",variant:"destructive"})}finally{o(!1)}},R=async U=>{d(B=>({...B,[U]:{loading:!0,result:null,error:null}}));try{const{data:{session:B}}=await Ze.auth.getSession();if(!B)throw new Error("Not authenticated");const V=await Ze.functions.invoke("fetch-order-payments",{body:{order_id:U}});if(V.error)throw new Error(V.error.message);const re=V.data;return d(G=>({...G,[U]:{loading:!1,result:re,error:null}})),re}catch(B){const V=B instanceof Error?B.message:"Verification failed";return d(re=>({...re,[U]:{loading:!1,result:null,error:V}})),null}},T=async()=>{y(!0);for(const U of t)U.razorpay_order_id&&(await R(U.razorpay_order_id),await new Promise(B=>setTimeout(B,300)));y(!1),S({title:"Verification Complete",description:`Verified ${t.length} payments`})},D=U=>{const B=c[U];if(!B)return h.jsx(mu,{className:"w-4 h-4 text-muted-foreground"});if(B.loading)return h.jsx(Ch,{className:"w-4 h-4 text-primary animate-spin"});if(B.error)return h.jsx(Sf,{className:"w-4 h-4 text-destructive"});if(B.result)switch(B.result.verification_status){case"genuine":return h.jsx(ps,{className:"w-4 h-4 text-green-500"});case"failed":return h.jsx(No,{className:"w-4 h-4 text-destructive"});case"no_payments":return h.jsx(Sf,{className:"w-4 h-4 text-yellow-500"});case"pending":return h.jsx(mu,{className:"w-4 h-4 text-blue-500"})}return null},I=U=>{const B=c[U];if(!B||!B.result)return null;const V={genuine:"bg-green-500/20 text-green-500 border-green-500/50",failed:"bg-destructive/20 text-destructive border-destructive/50",no_payments:"bg-yellow-500/20 text-yellow-500 border-yellow-500/50",pending:"bg-blue-500/20 text-blue-500 border-blue-500/50"};return h.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-mono border ${V[B.result.verification_status]}`,children:B.result.verification_status.toUpperCase()})},M=t.filter(U=>{if(v==="all")return!0;if(v==="unverified")return!c[U.razorpay_order_id];const B=c[U.razorpay_order_id];return B?.result?B.result.verification_status===v:v==="unverified"}),z={total:t.length,genuine:Object.values(c).filter(U=>U.result?.verification_status==="genuine").length,failed:Object.values(c).filter(U=>U.result?.verification_status==="failed").length,pending:Object.values(c).filter(U=>U.result?.verification_status==="pending").length,noPayments:Object.values(c).filter(U=>U.result?.verification_status==="no_payments").length};return h.jsx(ei,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider flex items-center gap-2",children:[h.jsx(Ox,{className:"w-6 h-6"}),"VERIFY PAYMENTS"]}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"Verify payment status directly from Razorpay"})]}),h.jsxs("button",{onClick:T,disabled:g||t.length===0,className:"flex items-center gap-2 px-4 py-2 bg-primary text-background font-mono text-sm rounded hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx(Ch,{className:`w-4 h-4 ${g?"animate-spin":""}`}),g?"Verifying...":"Verify All Payments"]})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase",children:"Total"}),h.jsx("p",{className:"text-2xl font-display font-bold text-primary mt-1",children:z.total})]}),h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase",children:"Genuine"}),h.jsx("p",{className:"text-2xl font-display font-bold text-green-500 mt-1",children:z.genuine})]}),h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase",children:"Failed"}),h.jsx("p",{className:"text-2xl font-display font-bold text-destructive mt-1",children:z.failed})]}),h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase",children:"Pending"}),h.jsx("p",{className:"text-2xl font-display font-bold text-blue-500 mt-1",children:z.pending})]}),h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase",children:"No Payments"}),h.jsx("p",{className:"text-2xl font-display font-bold text-yellow-500 mt-1",children:z.noPayments})]})]}),h.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","genuine","failed","pending","unverified"].map(U=>h.jsx("button",{onClick:()=>b(U),className:`px-3 py-1 rounded font-mono text-sm transition-colors ${v===U?"bg-primary text-background":"bg-secondary/50 text-primary hover:bg-secondary"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))}),h.jsx("div",{className:"terminal-card overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b border-border",children:[h.jsx("th",{className:"text-left p-4 font-mono text-xs text-muted-foreground uppercase",children:"Status"}),h.jsx("th",{className:"text-left p-4 font-mono text-xs text-muted-foreground uppercase",children:"User"}),h.jsx("th",{className:"text-left p-4 font-mono text-xs text-muted-foreground uppercase",children:"Ticket"}),h.jsx("th",{className:"text-left p-4 font-mono text-xs text-muted-foreground uppercase",children:"Order ID"}),h.jsx("th",{className:"text-left p-4 font-mono text-xs text-muted-foreground uppercase",children:"Payment ID"}),h.jsx("th",{className:"text-left p-4 font-mono text-xs text-muted-foreground uppercase",children:"Verification"}),h.jsx("th",{className:"text-left p-4 font-mono text-xs text-muted-foreground uppercase",children:"Actions"})]})}),h.jsx("tbody",{children:n?h.jsx("tr",{children:h.jsx("td",{colSpan:7,className:"p-8 text-center text-primary font-mono animate-pulse",children:"Loading registrations..."})}):M.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:7,className:"p-8 text-center text-muted-foreground font-mono",children:"No registrations found"})}):M.map(U=>{const B=U.razorpay_order_id?c[U.razorpay_order_id]:null;return h.jsxs("tr",{className:"border-b border-border/50 hover:bg-secondary/20",children:[h.jsx("td",{className:"p-4",children:h.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-mono ${U.status==="confirmed"?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"}`,children:U.status})}),h.jsxs("td",{className:"p-4",children:[h.jsx("div",{className:"font-mono text-sm",children:U.profile?.full_name||"Unknown"}),h.jsx("div",{className:"text-xs text-muted-foreground",children:U.profile?.email})]}),h.jsx("td",{className:"p-4 font-mono text-sm",children:U.ticket?.title||"Unknown"}),h.jsxs("td",{className:"p-4 font-mono text-xs text-muted-foreground",children:[U.razorpay_order_id?.slice(0,20),"..."]}),h.jsxs("td",{className:"p-4 font-mono text-xs text-muted-foreground",children:[U.razorpay_payment_id?.slice(0,20)||"-","..."]}),h.jsx("td",{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[D(U.razorpay_order_id),I(U.razorpay_order_id),B?.error&&h.jsx("span",{className:"text-xs text-destructive",children:B.error})]})}),h.jsx("td",{className:"p-4",children:h.jsx("button",{onClick:()=>U.razorpay_order_id&&R(U.razorpay_order_id),disabled:B?.loading||g,className:"px-3 py-1 bg-primary/20 text-primary font-mono text-xs rounded hover:bg-primary/30 disabled:opacity-50",children:B?.loading?"Verifying...":"Verify"})})]},U.id)})})]})})}),h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("h3",{className:"font-mono text-sm text-muted-foreground mb-3",children:"Verification Status Legend:"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm font-mono",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ps,{className:"w-4 h-4 text-green-500"}),h.jsx("span",{children:"Genuine - Payment captured successfully"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(No,{className:"w-4 h-4 text-destructive"}),h.jsx("span",{children:"Failed - All payments failed"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Sf,{className:"w-4 h-4 text-yellow-500"}),h.jsx("span",{children:"No Payments - No payment attempts"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(mu,{className:"w-4 h-4 text-blue-500"}),h.jsx("span",{children:"Pending - Payment in progress"})]})]})]})]})})},c8=[{href:"/volunteer",label:"Scanners",icon:n0},{href:"/volunteer/participants",label:"Participants",icon:Na}],Gw=({children:t})=>{const{profile:e,signOut:n,isAdmin:o}=oi(),c=ni(),[d,g]=O.useState(!1),y=()=>g(!1);return h.jsxs("div",{className:"min-h-screen bg-background flex",children:[d&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:y}),h.jsxs("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-card border-r border-border flex flex-col transform transition-transform duration-300 ease-in-out ${d?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[h.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(qr,{to:"/",className:"flex items-center gap-2",onClick:y,children:h.jsx("span",{className:"text-xl font-display font-bold text-primary glow-text tracking-wider",children:"TESSERACT"})}),h.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:"Volunteer Panel"})]}),h.jsx("button",{onClick:y,className:"lg:hidden p-2 text-primary hover:bg-secondary/50 rounded",children:h.jsx(ti,{className:"w-5 h-5"})})]}),h.jsx("nav",{className:"flex-1 p-4 space-y-2",children:c8.map(v=>{const b=c.pathname===v.href,S=v.icon;return h.jsxs(qr,{to:v.href,onClick:y,className:`flex items-center gap-3 px-3 py-2 rounded font-mono text-sm transition-colors ${b?"bg-primary text-background":"text-primary/70 hover:bg-secondary/50 hover:text-primary"}`,children:[h.jsx(S,{className:"w-4 h-4"}),v.label]},v.href)})}),h.jsxs("div",{className:"p-4 border-t border-border space-y-2",children:[h.jsxs(qr,{to:"/",onClick:y,className:"flex items-center gap-3 px-3 py-2 rounded font-mono text-sm text-primary/70 hover:bg-secondary/50 hover:text-primary transition-colors",children:[h.jsx(Nx,{className:"w-4 h-4"}),"Back to Site"]}),o&&h.jsxs(qr,{to:"/admin",onClick:y,className:"flex items-center gap-3 px-3 py-2 rounded font-mono text-sm text-primary/70 hover:bg-secondary/50 hover:text-primary transition-colors",children:[h.jsx(Na,{className:"w-4 h-4"}),"Admin Panel"]}),h.jsxs("button",{onClick:()=>{y(),n()},className:"w-full flex items-center gap-3 px-3 py-2 rounded font-mono text-sm text-destructive hover:bg-destructive/10 transition-colors",children:[h.jsx(r0,{className:"w-4 h-4"}),"Sign Out"]})]})]}),h.jsxs("main",{className:"flex-1 flex flex-col min-w-0",children:[h.jsxs("header",{className:"h-16 bg-card border-b border-border flex items-center justify-between px-4 lg:px-6",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>g(!0),className:"lg:hidden p-2 text-primary hover:bg-secondary/50 rounded",children:h.jsx(Tx,{className:"w-5 h-5"})}),h.jsx("h1",{className:"text-lg font-display text-primary",children:"Volunteer Panel"})]}),h.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[h.jsx("span",{className:"text-sm text-muted-foreground font-mono hidden sm:block",children:e?.full_name||e?.email}),h.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 border border-primary/50 flex items-center justify-center",children:h.jsx("span",{className:"text-xs font-bold text-primary",children:(e?.full_name||e?.email||"V")[0].toUpperCase()})})]})]}),h.jsx("div",{className:"flex-1 p-4 lg:p-6 overflow-auto",children:t})]})]})},u8=()=>{const{toast:t}=an(),{user:e}=oi(),[n,o]=O.useState("checkin"),[c,d]=O.useState(null),[g,y]=O.useState(!1),[v,b]=O.useState(!1),[S,N]=O.useState(""),[R,T]=O.useState([]),[D,I]=O.useState(null),[M,z]=O.useState(null),[U,B]=O.useState(!1);O.useEffect(()=>{V()},[]);const V=async()=>{const{data:X,error:Y}=await Ze.from("food_coupons").select("*").eq("is_active",!0).order("name");if(Y){console.error("Failed to fetch coupons:",Y);return}T(X||[]),X&&X.length>0&&I(X[0])},re=async X=>{y(!0),d(null),z(null);try{const{data:Y,error:fe}=await Ze.from("registrations").select("id, registration_id, ticket_id, checked_in, checked_in_at, created_at, profile:profiles!fk_registrations_profile(full_name, email, phone), ticket:tickets(title)").eq("registration_id",X).eq("status","confirmed").single();if(fe||!Y){t({title:"Not Found",description:"No confirmed registration found with this QR code.",variant:"destructive"}),y(!1);return}d(Y),n==="food"&&D&&await G(Y.id,D,Y.ticket_id)}catch{t({title:"Error",description:"Failed to lookup registration.",variant:"destructive"})}y(!1)},G=async(X,Y,fe)=>{if(!Y.ticket_ids.includes(fe)){z({consumed:!1,remaining:0});return}const{data:oe,error:ee}=await Ze.from("coupon_consumptions").select("id, consumed_at").eq("registration_id",X).eq("coupon_id",Y.id);if(ee){console.error("Failed to check coupon status:",ee);return}const _e=oe?.length||0,he=Y.quantity-_e;_e>0&&he<=0?z({consumed:!0,consumed_at:oe[oe.length-1].consumed_at,remaining:0}):z({consumed:!1,remaining:he})},H=async()=>{if(!(!c||!e)){b(!0);try{const{error:X}=await Ze.from("registrations").update({checked_in:!0,checked_in_at:new Date().toISOString(),checked_in_by:e.id}).eq("id",c.id);if(X)throw X;t({title:"Checked In!",description:`${c.profile.full_name} has been checked in successfully.`}),d(null)}catch{t({title:"Error",description:"Failed to check in participant.",variant:"destructive"})}b(!1)}},se=async()=>{if(!(!c||!e||!D)){b(!0);try{const{error:X}=await Ze.from("coupon_consumptions").insert({registration_id:c.id,coupon_id:D.id,consumed_by:e.id});if(X)if(X.code==="23505")t({title:"Already Consumed",description:"This coupon has already been fully consumed for this registration.",variant:"destructive"});else throw X;else t({title:"Coupon Marked!",description:`${D.name} marked for ${c.profile.full_name}.`});d(null),z(null)}catch{t({title:"Error",description:"Failed to mark coupon consumption.",variant:"destructive"})}b(!1)}},$=()=>{d(null),z(null)},be=D&&c?D.ticket_ids.includes(c.ticket_id):!1;return h.jsx(Gw,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"SCANNERS"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"Scan participant QR codes for check-in or food coupons"})]}),h.jsx("div",{className:"terminal-card p-4",children:h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>{o("checkin"),d(null),z(null)},className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded font-mono text-sm transition-all ${n==="checkin"?"bg-primary text-background":"bg-secondary/30 text-primary/70 hover:bg-secondary/50"}`,children:[h.jsx(Dx,{className:"w-4 h-4"}),"Check-in"]}),h.jsxs("button",{onClick:()=>{o("food"),d(null),z(null)},className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded font-mono text-sm transition-all ${n==="food"?"bg-primary text-background":"bg-secondary/30 text-primary/70 hover:bg-secondary/50"}`,children:[h.jsx(Hi,{className:"w-4 h-4"}),"Food Coupon"]})]})}),n==="food"&&h.jsxs("div",{className:"terminal-card p-4",children:[h.jsx("label",{className:"block text-sm font-mono text-muted-foreground mb-2",children:"SELECT COUPON"}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>B(!U),className:"w-full flex items-center justify-between bg-background border border-border rounded px-4 py-3 text-primary font-mono focus:border-primary",children:[h.jsx("span",{children:D?.name||"Select a coupon"}),h.jsx(Sl,{className:`w-4 h-4 transition-transform ${U?"rotate-180":""}`})]}),U&&h.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded shadow-lg z-10 max-h-48 overflow-y-auto",children:R.length===0?h.jsx("div",{className:"px-4 py-3 text-sm text-muted-foreground font-mono",children:"No active coupons available"}):R.map(X=>h.jsx("button",{onClick:()=>{I(X),B(!1),d(null),z(null)},className:`w-full px-4 py-3 text-left font-mono text-sm hover:bg-secondary/30 transition-colors ${D?.id===X.id?"bg-primary/10 text-primary":"text-primary/70"}`,children:X.name},X.id))})]}),D&&h.jsxs("p",{className:"mt-2 text-xs font-mono text-muted-foreground",children:["Quantity: ",D.quantity," per registration"]})]}),!c&&!g&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"terminal-card p-4 sm:p-6",children:[h.jsx("h3",{className:"text-sm font-mono text-muted-foreground mb-3",children:"MANUAL ENTRY"}),h.jsxs("form",{onSubmit:X=>{X.preventDefault(),S.trim()&&re(S.trim().toUpperCase())},className:"flex flex-col sm:flex-row gap-3",children:[h.jsx("input",{type:"text",value:S,onChange:X=>N(X.target.value.toUpperCase()),placeholder:"Enter Registration ID",className:"flex-1 bg-background border border-border rounded px-4 py-3 text-primary font-mono tracking-wider focus:border-primary uppercase text-center sm:text-left",maxLength:10}),h.jsxs("button",{type:"submit",disabled:!S.trim()||n==="food"&&!D,className:"flex items-center justify-center gap-2 bg-primary text-background px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform disabled:opacity-50",children:[h.jsx(Lu,{className:"w-5 h-5"}),"Lookup"]})]})]}),h.jsxs("div",{className:"terminal-card p-4 sm:p-6",children:[h.jsx("h3",{className:"text-sm font-mono text-muted-foreground mb-3",children:"OR SCAN QR CODE"}),h.jsx(Ww,{onScan:re})]})]}),g&&h.jsx("div",{className:"terminal-card p-8 text-center",children:h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Looking up participant..."})}),c&&n==="checkin"&&h.jsxs("div",{className:"terminal-card p-6",children:[h.jsx("div",{className:"text-center mb-6",children:c.checked_in?h.jsxs("div",{className:"inline-flex items-center gap-2 text-yellow-500 bg-yellow-500/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(ps,{className:"w-5 h-5"}),"Already Checked In"]}):h.jsxs("div",{className:"inline-flex items-center gap-2 text-primary bg-primary/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(Sa,{className:"w-5 h-5"}),"Ready to Check In"]})}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h3",{className:"text-2xl font-display text-primary mb-2",children:c.profile.full_name}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm",children:c.profile.email}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm",children:c.profile.phone})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-secondary/20 p-4 rounded text-center",children:[h.jsx(Gi,{className:"w-6 h-6 text-primary mx-auto mb-2"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Ticket"}),h.jsx("p",{className:"text-sm text-primary font-mono",children:c.ticket.title})]}),h.jsxs("div",{className:"bg-secondary/20 p-4 rounded text-center",children:[h.jsx(Cx,{className:"w-6 h-6 text-primary mx-auto mb-2"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Registration ID"}),h.jsx("p",{className:"text-sm text-primary font-mono tracking-wider",children:c.registration_id})]})]}),c.checked_in?h.jsxs("div",{className:"text-center",children:[h.jsxs("p",{className:"text-muted-foreground font-mono text-sm mb-4",children:["Checked in at: ",new Date(c.checked_in_at).toLocaleString()]}),h.jsx("button",{onClick:$,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 border border-primary text-primary rounded font-mono hover:bg-primary/10",children:"Scan Another"})]}):h.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4",children:[h.jsxs("button",{onClick:$,className:"flex items-center justify-center gap-2 px-6 py-3 border border-border text-muted-foreground rounded font-mono hover:bg-secondary/50 order-2 sm:order-1",children:[h.jsx(No,{className:"w-5 h-5"}),"Cancel"]}),h.jsxs("button",{onClick:H,disabled:v,className:"flex items-center justify-center gap-2 bg-green-500 text-white px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform disabled:opacity-50 order-1 sm:order-2",children:[h.jsx(ps,{className:"w-5 h-5"}),v?"Checking In...":"Confirm Check-In"]})]})]}),c&&n==="food"&&D&&h.jsxs("div",{className:"terminal-card p-6",children:[h.jsx("div",{className:"text-center mb-6",children:be?M?.consumed?h.jsxs("div",{className:"inline-flex items-center gap-2 text-yellow-500 bg-yellow-500/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(ps,{className:"w-5 h-5"}),"Already Consumed"]}):h.jsxs("div",{className:"inline-flex items-center gap-2 text-green-500 bg-green-500/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(Hi,{className:"w-5 h-5"}),"Ready to Mark"]}):h.jsxs("div",{className:"inline-flex items-center gap-2 text-destructive bg-destructive/10 px-4 py-2 rounded-full font-mono text-sm mb-4",children:[h.jsx(Px,{className:"w-5 h-5"}),"Ticket Not Eligible"]})}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h3",{className:"text-2xl font-display text-primary mb-2",children:c.profile.full_name}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm",children:c.profile.email})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-secondary/20 p-4 rounded text-center",children:[h.jsx(Gi,{className:"w-6 h-6 text-primary mx-auto mb-2"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Ticket"}),h.jsx("p",{className:"text-sm text-primary font-mono",children:c.ticket.title})]}),h.jsxs("div",{className:"bg-secondary/20 p-4 rounded text-center",children:[h.jsx(Hi,{className:"w-6 h-6 text-primary mx-auto mb-2"}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Coupon"}),h.jsx("p",{className:"text-sm text-primary font-mono",children:D.name})]})]}),be&&M&&h.jsx("div",{className:"bg-secondary/10 p-4 rounded mb-6 text-center",children:h.jsx("p",{className:"text-sm font-mono text-muted-foreground",children:M.consumed?h.jsxs(h.Fragment,{children:["All ",D.quantity," coupon(s) consumed.",h.jsx("br",{}),"Last used: ",new Date(M.consumed_at).toLocaleString()]}):h.jsxs(h.Fragment,{children:["Remaining: ",h.jsx("span",{className:"text-primary",children:M.remaining})," of ",D.quantity]})})}),be?M?.consumed?h.jsx("div",{className:"text-center",children:h.jsx("button",{onClick:$,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 border border-primary text-primary rounded font-mono hover:bg-primary/10",children:"Scan Another"})}):h.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4",children:[h.jsxs("button",{onClick:$,className:"flex items-center justify-center gap-2 px-6 py-3 border border-border text-muted-foreground rounded font-mono hover:bg-secondary/50 order-2 sm:order-1",children:[h.jsx(No,{className:"w-5 h-5"}),"Cancel"]}),h.jsxs("button",{onClick:se,disabled:v,className:"flex items-center justify-center gap-2 bg-green-500 text-white px-6 py-3 font-display font-bold rounded hover:scale-105 transition-transform disabled:opacity-50 order-1 sm:order-2",children:[h.jsx(ps,{className:"w-5 h-5"}),v?"Marking...":"Confirm Consumption"]})]}):h.jsxs("div",{className:"text-center",children:[h.jsxs("p",{className:"text-muted-foreground font-mono text-sm mb-4",children:['This ticket type is not eligible for "',D.name,'".']}),h.jsx("button",{onClick:$,className:"flex items-center justify-center gap-2 mx-auto px-6 py-3 border border-primary text-primary rounded font-mono hover:bg-primary/10",children:"Scan Another"})]})]})]})})},d8=()=>{const{toast:t}=an(),[e,n]=O.useState([]),[o,c]=O.useState(!0),[d,g]=O.useState(""),y=async()=>{c(!0);const{data:N,error:R}=await Ze.from("registrations").select("id, registration_id, checked_in, checked_in_at, created_at, profile:profiles!fk_registrations_profile(full_name, email, phone), ticket:tickets(title)").eq("status","confirmed").order("checked_in",{ascending:!0}).order("created_at",{ascending:!1});R?t({title:"Error",description:"Failed to load participants",variant:"destructive"}):n(N),c(!1)};O.useEffect(()=>{y()},[]);const v=e.filter(N=>{const R=d.toLowerCase();return N.profile.full_name.toLowerCase().includes(R)||N.profile.email.toLowerCase().includes(R)||N.profile.phone.includes(R)||N.registration_id.toLowerCase().includes(R)||N.ticket.title.toLowerCase().includes(R)}),b=e.filter(N=>N.checked_in).length,S=e.length;return h.jsx(Gw,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-display text-primary glow-text tracking-wider",children:"PARTICIPANTS"}),h.jsx("p",{className:"text-muted-foreground font-mono text-sm mt-1",children:"All confirmed registrations and check-in status"})]}),h.jsxs("button",{onClick:y,disabled:o,className:"flex items-center justify-center gap-2 px-4 py-2 border border-primary text-primary rounded font-mono text-sm hover:bg-primary/10 disabled:opacity-50",children:[h.jsx(Ch,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]})]}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"terminal-card p-4 text-center",children:[h.jsx("p",{className:"text-2xl font-display font-bold text-primary",children:S}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Total Confirmed"})]}),h.jsxs("div",{className:"terminal-card p-4 text-center",children:[h.jsx("p",{className:"text-2xl font-display font-bold text-green-500",children:b}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Checked In"})]}),h.jsxs("div",{className:"terminal-card p-4 text-center hidden sm:block",children:[h.jsx("p",{className:"text-2xl font-display font-bold text-yellow-500",children:S-b}),h.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"Pending"})]})]}),h.jsx("div",{className:"terminal-card p-4",children:h.jsxs("div",{className:"relative",children:[h.jsx(Lu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),h.jsx("input",{type:"text",value:d,onChange:N=>g(N.target.value),placeholder:"Search by name, email, phone, ticket...",className:"w-full bg-background border border-border rounded pl-10 pr-4 py-2 text-sm text-primary font-mono focus:border-primary"})]})}),o?h.jsx("div",{className:"text-primary font-mono animate-pulse",children:"Loading participants..."}):v.length===0?h.jsx("div",{className:"terminal-card p-8 text-center",children:h.jsx("p",{className:"text-muted-foreground font-mono",children:"No participants found."})}):h.jsx("div",{className:"space-y-3",children:v.map(N=>h.jsx("div",{className:`terminal-card p-4 ${N.checked_in?"border-green-500/30":""}`,children:h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[h.jsx("h3",{className:"font-display text-primary",children:N.profile.full_name}),N.checked_in?h.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded font-mono bg-green-500/20 text-green-500",children:[h.jsx(ps,{className:"w-3 h-3"}),"Checked In"]}):h.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded font-mono bg-yellow-500/20 text-yellow-500",children:[h.jsx(mu,{className:"w-3 h-3"}),"Pending"]})]}),h.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[N.profile.phone,"  ",N.ticket.title]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-xs text-primary bg-primary/10 px-2 py-1 rounded font-mono tracking-wider",children:N.registration_id}),N.checked_in&&N.checked_in_at&&h.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:new Date(N.checked_in_at).toLocaleTimeString()})]})]})},N.id))})]})})},qw=[{id:"hack-the-system",title:"HACK THE SYSTEM - LEGALLY",description:`Security is not a product, its a process. ~ Bruce Schneier

 HACK THE SYSTEM  LEGALLY 
An Ethical Hacking Workshop

Step into the world of cybersecurity with a power-packed workshop under TESSERACT 9.0. 

Discover how vulnerabilities are found, attacks are prevented, and systems are secured  ethically and effectively.

Decode threats. Defend smart. Hack responsibly. `,speakers:[{name:"Zaina Ameer",designation:"Cybersecurity Analyst, Purple Nexus"},{name:"Muhammed Ashique",designation:"CEO, SkillMerge Hackers Academy"}],image:"/hack-the-system.jpg"},{id:"ai-made-simple",title:"AI MADE SIMPLE",description:`Artificial intelligence is not a substitute for human intelligence, but a powerful tool to amplify it. ~ Fei-Fei Li

 AI MADE SIMPLE 
Automating Arduino with Machine Learning

As part of TESSERACT 9.0, the flagship event of IEEE SB SJCET, this hands-on workshop breaks down AI into practical, real-world applications. Learn how machine learning can seamlessly integrate with Arduino to build smarter, automated systems.`,speakers:[{name:"Pravitha P",designation:"STEM & AI Educator, HowNWhy Education"}],image:"/ai-made-simple.jpeg"}],f8=()=>{const t=si();return h.jsxs("div",{className:"min-h-screen bg-background text-foreground font-display selection:bg-primary/30 selection:text-primary scanlines flex flex-col",children:[h.jsx(ai,{hideOnMobile:!0}),h.jsxs("div",{className:"container mx-auto px-4 py-8 relative flex-grow",children:[h.jsx("div",{className:"flex justify-center md:justify-between items-center mb-12",children:h.jsxs(qr,{to:"/",className:"flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[h.jsx("img",{src:"/tesseractlogo.png",alt:"Tesseract Logo",className:"w-12 h-12 object-contain"}),h.jsx("span",{className:"text-2xl font-bold tracking-wider hidden md:block",children:"TESSERACT 9.0"})]})}),h.jsxs("div",{className:"flex flex-col items-center justify-center mb-16",children:[h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-primary mb-4 text-center tracking-widest",children:[h.jsx("span",{className:"text-primary/80",children:">"})," WORKSHOPS"]}),h.jsx("p",{className:"text-lg md:text-xl text-primary/70 mb-12 text-center tracking-wider font-medium",children:"February 1st, 2026"}),h.jsx("div",{className:"w-full max-w-3xl space-y-6",children:qw.map((e,n)=>h.jsxs("div",{className:"group relative border border-primary/20 bg-card/30 p-8 hover:bg-primary/5 hover:border-primary/50 transition-all duration-300 backdrop-blur-sm cursor-pointer",onClick:()=>t(`/workshops/${e.id}`),children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("div",{className:"w-12 h-12 bg-primary/20 flex items-center justify-center shrink-0 rounded transition-colors group-hover:bg-primary/30",children:h.jsx("div",{className:"w-6 h-6 bg-primary"})}),h.jsx("h2",{className:"text-2xl md:text-3xl text-primary font-bold tracking-wide group-hover:text-primary/100",children:e.title})]}),h.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx("div",{className:"w-2 h-2 border-t border-r border-primary"})}),h.jsx("div",{className:"absolute bottom-0 left-0 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx("div",{className:"w-2 h-2 border-b border-l border-primary"})})]},n))})]})]}),h.jsxs("div",{className:"mt-auto",children:[h.jsx(li,{}),h.jsx(Vl,{})]}),h.jsx(qx,{})]})},h8=[{id:"mentalism-show",title:"MENTALISM SHOW",description:`The mind is not a vessel to be filled, but a fire to be ignited. ~ Plutarch

 Think youre in control? Think again. 

Reality will blur, thoughts will betray you, and secrets wont stay hidden for long. As part of TESSERACT 9.0, IEEE SB SJCET presents a jaw-dropping Mentalism Show that will challenge everything you believe about the human mind.`,speakers:[{name:"hypnotist.anandhuuu",designation:"Mentalist"}],image:"/mentalism.jpeg"}],m8=()=>{const t=h8[0];return h.jsxs("div",{className:"min-h-screen bg-background text-foreground font-display selection:bg-primary/30 selection:text-primary flex flex-col",children:[h.jsx(ai,{hideOnMobile:!0}),h.jsxs("div",{className:"container mx-auto px-4 py-8 relative flex-grow",children:[h.jsx("div",{className:"flex justify-center md:justify-between items-center mb-8",children:h.jsxs(qr,{to:"/",className:"flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[h.jsx("img",{src:"/tesseractlogo.png",alt:"Tesseract Logo",className:"w-12 h-12 object-contain"}),h.jsx("span",{className:"text-2xl font-bold tracking-wider hidden md:block",children:"TESSERACT 9.0"})]})}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl md:text-4xl text-primary font-bold uppercase tracking-wide mb-2",children:t.title}),h.jsx("div",{className:"w-24 h-1 bg-primary rounded-full shadow-[0_0_10px_rgba(34,197,94,0.6)]"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12",children:[h.jsxs("div",{className:"border border-primary/30 p-4 rounded-none bg-card/10 backdrop-blur-sm relative group",children:[h.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-primary"}),h.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-primary"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-primary"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-primary"}),h.jsxs("div",{className:"aspect-square bg-gradient-to-b from-primary/20 to-transparent flex items-center justify-center overflow-hidden relative",children:[h.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-500"}),h.jsx("div",{className:"absolute inset-0 bg-primary/10 mix-blend-overlay group-hover:bg-transparent transition-colors"})]}),h.jsxs("div",{className:"mt-2 text-center text-primary/40 font-mono text-xs",children:[t.title.toLowerCase().replace(/ /g,""),".png"]})]}),h.jsx("div",{className:"flex flex-col justify-center",children:h.jsx("p",{className:"font-mono text-primary/80 leading-relaxed text-lg text-justify whitespace-pre-wrap",children:t.description})})]}),h.jsxs("div",{className:"terminal-card rounded-none mt-8 relative overflow-hidden",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot-red"}),h.jsx("span",{className:"terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot-green"}),h.jsxs("span",{className:"text-muted-foreground text-sm ml-2 font-mono",children:[t.title.toLowerCase().replace(/ /g,""),".txt"]})]}),h.jsx("div",{className:"p-5 space-y-8",children:t.speakers.map((e,n)=>h.jsxs("div",{className:n!==0?"pt-6 border-t border-primary/20":"",children:[h.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[h.jsx(Sa,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),h.jsxs("div",{children:[h.jsxs("span",{className:"text-muted-foreground text-sm block",children:["> SPEAKER ",t.speakers.length>1?`#${n+1}`:""]}),h.jsx("span",{className:"text-foreground font-semibold text-lg",children:e.name})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(jx,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground text-sm block",children:"> DESIGNATION"}),h.jsx("span",{className:"text-foreground font-semibold text-lg",children:e.designation})]})]})]},n))})]})]}),h.jsxs("div",{className:"mt-auto",children:[h.jsx(li,{}),h.jsx(Vl,{})]})]})},p8=[{id:"campfire",title:"Campfire Night",description:`"Sometimes the best ideas spark away from screens." 

TESSERACT 9.0 - CAMPFIRE NIGHT

This is your sign to log out, step outside, and feel the fire.

 Date: January 31st

Come for the fire.
Stay for the moments.
Leave with memories you'll talk about long after Tesseract ends.`,speakers:[],image:"/campfire-night.jpeg"}],g8=()=>{const t=p8[0];return h.jsxs("div",{className:"min-h-screen bg-background text-foreground font-display selection:bg-primary/30 selection:text-primary flex flex-col",children:[h.jsx(ai,{hideOnMobile:!0}),h.jsxs("div",{className:"container mx-auto px-4 py-8 relative flex-grow",children:[h.jsx("div",{className:"flex justify-center md:justify-between items-center mb-8",children:h.jsxs(qr,{to:"/",className:"flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[h.jsx("img",{src:"/tesseractlogo.png",alt:"Tesseract Logo",className:"w-12 h-12 object-contain"}),h.jsx("span",{className:"text-2xl font-bold tracking-wider hidden md:block",children:"TESSERACT 9.0"})]})}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl md:text-4xl text-primary font-bold uppercase tracking-wide mb-2",children:t.title}),h.jsx("div",{className:"w-24 h-1 bg-primary rounded-full shadow-[0_0_10px_rgba(34,197,94,0.6)] mb-3"}),h.jsx("p",{className:"text-lg md:text-xl text-primary/70 tracking-wider font-medium",children:"January 31st, 2026"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12",children:[h.jsxs("div",{className:"border border-primary/30 p-4 rounded-none bg-card/10 backdrop-blur-sm relative group",children:[h.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-primary"}),h.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-primary"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-primary"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-primary"}),h.jsx("div",{className:"aspect-square bg-gradient-to-b from-primary/20 to-transparent flex items-center justify-center overflow-hidden relative",children:h.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"mt-2 text-center text-primary/40 font-mono text-xs",children:[t.title.toLowerCase().replace(/ /g,""),".png"]})]}),h.jsx("div",{className:"flex flex-col justify-center",children:h.jsx("p",{className:"font-mono text-primary/80 leading-relaxed text-lg text-justify whitespace-pre-wrap",children:t.description})})]})]}),h.jsxs("div",{className:"mt-auto",children:[h.jsx(li,{}),h.jsx(Vl,{})]})]})},$w=()=>{const t=ni();return O.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),h.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),h.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),h.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},x8=()=>{const{id:t}=E0(),e=qw.find(n=>n.id===t);return e?h.jsxs("div",{className:"min-h-screen bg-background text-foreground font-display selection:bg-primary/30 selection:text-primary flex flex-col",children:[h.jsx(ai,{hideOnMobile:!0}),h.jsxs("div",{className:"container mx-auto px-4 py-8 relative flex-grow",children:[h.jsx("div",{className:"flex justify-center md:justify-between items-center mb-8",children:h.jsxs(qr,{to:"/workshops",className:"flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[h.jsx("img",{src:"/tesseractlogo.png",alt:"Tesseract Logo",className:"w-12 h-12 object-contain"}),h.jsx("span",{className:"text-2xl font-bold tracking-wider hidden md:block",children:"TESSERACT 9.0"})]})}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl md:text-4xl text-primary font-bold uppercase tracking-wide mb-2",children:e.title}),h.jsx("div",{className:"w-24 h-1 bg-primary rounded-full shadow-[0_0_10px_rgba(34,197,94,0.6)] mb-3"}),h.jsx("p",{className:"text-lg md:text-xl text-primary/70 tracking-wider font-medium",children:"February 1st, 2026"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12",children:[h.jsxs("div",{className:"border border-primary/30 p-4 rounded-none bg-card/10 backdrop-blur-sm relative group",children:[h.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-primary"}),h.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-primary"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-primary"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-primary"}),h.jsxs("div",{className:"aspect-square bg-gradient-to-b from-primary/20 to-transparent flex items-center justify-center overflow-hidden relative",children:[h.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity duration-500"}),h.jsx("div",{className:"absolute inset-0 bg-primary/10 mix-blend-overlay group-hover:bg-transparent transition-colors"})]}),h.jsxs("div",{className:"mt-2 text-center text-primary/40 font-mono text-xs",children:[e.title.toLowerCase().replace(/ /g,""),".png"]})]}),h.jsx("div",{className:"flex flex-col justify-center",children:h.jsx("p",{className:"font-mono text-primary/80 leading-relaxed text-lg text-justify whitespace-pre-wrap",children:e.description})})]}),h.jsxs("div",{className:"terminal-card rounded-none mt-8 relative overflow-hidden",children:[h.jsxs("div",{className:"terminal-header",children:[h.jsx("span",{className:"terminal-dot-red"}),h.jsx("span",{className:"terminal-dot-yellow"}),h.jsx("span",{className:"terminal-dot-green"}),h.jsxs("span",{className:"text-muted-foreground text-sm ml-2 font-mono",children:[e.title.toLowerCase().replace(/ /g,""),".txt"]})]}),h.jsx("div",{className:"p-5 space-y-8",children:e.speakers.map((n,o)=>h.jsxs("div",{className:o!==0?"pt-6 border-t border-primary/20":"",children:[h.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[h.jsx(Sa,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),h.jsxs("div",{children:[h.jsxs("span",{className:"text-muted-foreground text-sm block",children:["> SPEAKER ",e.speakers.length>1?`#${o+1}`:""]}),h.jsx("span",{className:"text-foreground font-semibold text-lg",children:n.name})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(jx,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground text-sm block",children:"> DESIGNATION"}),h.jsx("span",{className:"text-foreground font-semibold text-lg",children:n.designation})]})]})]},o))})]})]}),h.jsxs("div",{className:"mt-auto",children:[h.jsx(li,{}),h.jsx(Vl,{})]})]}):h.jsx($w,{})},y8=new B3,w8=()=>h.jsx(U3,{client:y8,children:h.jsxs(m3,{children:[h.jsx(qx,{}),h.jsx(AE,{}),h.jsx(F_,{children:h.jsx(_A,{children:h.jsxs(O_,{children:[h.jsx(pr,{path:"/",element:h.jsx(FA,{})}),h.jsx(pr,{path:"/login",element:h.jsx(UA,{})}),h.jsx(pr,{path:"/register",element:h.jsx(zA,{})}),h.jsx(pr,{path:"/dashboard",element:h.jsx(ET,{})}),h.jsx(pr,{path:"/tickets/:ticketId/register",element:h.jsx(_T,{})}),h.jsx(pr,{path:"/admin",element:h.jsx(Li,{children:h.jsx(NT,{})})}),h.jsx(pr,{path:"/admin/tickets",element:h.jsx(Li,{children:h.jsx(kT,{})})}),h.jsx(pr,{path:"/admin/tickets/:ticketId/template",element:h.jsx(Li,{children:h.jsx(jT,{})})}),h.jsx(pr,{path:"/admin/registrations",element:h.jsx(Li,{children:h.jsx(IT,{})})}),h.jsx(pr,{path:"/admin/referrals",element:h.jsx(Li,{children:h.jsx(RT,{})})}),h.jsx(pr,{path:"/admin/coupons",element:h.jsx(Li,{children:h.jsx(a8,{})})}),h.jsx(pr,{path:"/admin/checkin",element:h.jsx(Li,{children:h.jsx(o8,{})})}),h.jsx(pr,{path:"/admin/verify-payments",element:h.jsx(Li,{children:h.jsx(l8,{})})}),h.jsx(pr,{path:"/volunteer",element:h.jsx(Wp,{children:h.jsx(u8,{})})}),h.jsx(pr,{path:"/volunteer/participants",element:h.jsx(Wp,{children:h.jsx(d8,{})})}),h.jsx(pr,{path:"/workshops",element:h.jsx(f8,{})}),h.jsx(pr,{path:"/mentalism",element:h.jsx(m8,{})}),h.jsx(pr,{path:"/cultural",element:h.jsx(g8,{})}),h.jsx(pr,{path:"/workshops/:id",element:h.jsx(x8,{})}),h.jsx(pr,{path:"*",element:h.jsx($w,{})})]})})})]})});$2.createRoot(document.getElementById("root")).render(h.jsx(w8,{}));
